var sidebaropen=false
var sidebar=document.getElementById("side-bar")

function opensidebar () {
    if(!sidebaropen) {
        sidebar.classList.add("slide-bar-responsive")
        sidebaropen=true
    }
}


function closesidebar() {
    if(sidebaropen) {
        sidebar.classList.remove("slide-bar-responsive")
        sidebaropen=false
    }
}
function closesidebar(){
    document.getElementById("side-bar").style.display="none"
}
function showpop() {
    document.getElementById("pup").classList.add("open")
}

function hidepop() {
    document.getElementById("pup").classList.remove("open")
}

document.querySelector(".disagree-btn").addEventListener("click",function() {
    document.querySelector("main").classList.add("see")
})
document.querySelector("#send").addEventListener("click",function() {
    document.querySelector("main").classList.remove("see")
})
var messageBox = document.querySelector('.js-message');
  var btn = document.querySelector('.js-message-btn');
  var card = document.querySelector('.js-profile-card');
  var closeBtn = document.querySelectorAll('.js-message-close');

  btn.addEventListener('click',function (e) {
      e.preventDefault();
      card.classList.add('active');
  });

  closeBtn.forEach(function (element, index) {
     console.log(element);
      element.addEventListener('click',function (e) {
          e.preventDefault();
          card.classList.remove('active');
      });
  });
if (window.Modernizr = function (e, t, i)
 { function n(e) { m.cssText = e } function s(e, t) { return typeof e === t } function o(e, t) { return !!~("" + e).indexOf(t) } function a(e, t) { for (var n in e) { var s = e[n]; if (!o(s, "-") && m[s] !== i) return "pfx" != t || s } return !1 } function r(e, t, n) { for (var o in e) { var a = t[e[o]]; if (a !== i) return !1 === n ? e[o] : s(a, "function") ? a.bind(n || t) : a } return !1 } function l(e, t, i) { var n = e.charAt(0).toUpperCase() + e.slice(1), o = (e + " " + w.join(n + " ") + n).split(" "); return s(t, "string") || s(t, "undefined") ? a(o, t) : r(o = (e + " " + _.join(n + " ") + n).split(" "), t, i) } var c, d, h = {}, u = t.documentElement, p = "modernizr", f = t.createElement(p), m = f.style, g = t.createElement("input"), v = ":)", b = " -webkit- -moz- -o- -ms- ".split(" "), y = "Webkit Moz O ms", w = y.split(" "), _ = y.toLowerCase().split(" "), C = {}, k = {}, x = {}, T = [], $ = T.slice, S = function (e, i, n, s) { var o, a, r, l, c = t.createElement("div"), d = t.body, h = d || t.createElement("body"); if (parseInt(n, 10)) for (; n--;)(r = t.createElement("div")).id = s ? s[n] : p + (n + 1), c.appendChild(r); return o = ["&#173;", '<style id="s', p, '">', e, "</style>"].join(""), c.id = p, (d ? c : h).innerHTML += o, h.appendChild(c), d || (h.style.background = "", h.style.overflow = "hidden", l = u.style.overflow, u.style.overflow = "hidden", u.appendChild(h)), a = i(c, e), d ? c.parentNode.removeChild(c) : (h.parentNode.removeChild(h), u.style.overflow = l), !!a }, M = function () { var e = { select: "input", change: "input", submit: "form", reset: "form", error: "img", load: "img", abort: "img" }; return function (n, o) { o = o || t.createElement(e[n] || "div"); var a = (n = "on" + n) in o; return a || (o.setAttribute || (o = t.createElement("div")), o.setAttribute && o.removeAttribute && (o.setAttribute(n, ""), a = s(o[n], "function"), s(o[n], "undefined") || (o[n] = i), o.removeAttribute(n))), o = null, a } }(), D = {}.hasOwnProperty; for (var E in d = s(D, "undefined") || s(D.call, "undefined") ? function (e, t) { return t in e && s(e.constructor.prototype[t], "undefined") } : function (e, t) { return D.call(e, t) }, Function.prototype.bind || (Function.prototype.bind = function (e) { var t = this; if ("function" != typeof t) throw new TypeError; var i = $.call(arguments, 1), n = function () { if (this instanceof n) { var s = function () { }; s.prototype = t.prototype; var o = new s, a = t.apply(o, i.concat($.call(arguments))); return Object(a) === a ? a : o } return t.apply(e, i.concat($.call(arguments))) }; return n }), C.touch = function () { var i; return "ontouchstart" in e || e.DocumentTouch && t instanceof DocumentTouch ? i = !0 : S(["@media (", b.join("touch-enabled),("), p, ")", "{#modernizr{top:9px;position:absolute}}"].join(""), function (e) { i = 9 === e.offsetTop }), i }, C.backgroundsize = function () { return l("backgroundSize") }, C.borderradius = function () { return l("borderRadius") }, C.boxshadow = function () { return l("boxShadow") }, C.textshadow = function () { return "" === t.createElement("div").style.textShadow }, C.opacity = function () { return e = "opacity:.55", n(b.join(e + ";") + (t || "")), /^0.55$/.test(m.opacity); var e, t }, C.fontface = function () { var e; return S('@font-face {font-family:"font";src:url("https://")}', function (i, n) { var s = t.getElementById("smodernizr"), o = s.sheet || s.styleSheet, a = o ? o.cssRules && o.cssRules[0] ? o.cssRules[0].cssText : o.cssText || "" : ""; e = /src/i.test(a) && 0 === a.indexOf(n.split(" ")[0]) }), e }, C.video = function () { var e = t.createElement("video"), i = !1; try { (i = !!e.canPlayType) && ((i = new Boolean(i)).ogg = e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/, ""), i.h264 = e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/, ""), i.webm = e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/, "")) } catch (e) { } return i }, C) d(C, E) && (c = E.toLowerCase(), h[c] = C[E](), T.push((h[c] ? "" : "no-") + c)); return h.input || (h.input = function (i) { for (var n = 0, s = i.length; n < s; n++)x[i[n]] = i[n] in g; return x.list && (x.list = !!t.createElement("datalist") && !!e.HTMLDataListElement), x }("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")), h.inputtypes = function (e) { for (var n, s, o, a = 0, r = e.length; a < r; a++)g.setAttribute("type", s = e[a]), (n = "text" !== g.type) && (g.value = v, g.style.cssText = "position:absolute;visibility:hidden;", /^range$/.test(s) && g.style.WebkitAppearance !== i ? (u.appendChild(g), n = (o = t.defaultView).getComputedStyle && "textfield" !== o.getComputedStyle(g, null).WebkitAppearance && 0 !== g.offsetHeight, u.removeChild(g)) : /^(search|tel)$/.test(s) || (n = /^(url|email)$/.test(s) ? g.checkValidity && !1 === g.checkValidity() : g.value != v)), k[e[a]] = !!n; return k }("search tel url email datetime date month week time datetime-local number range color".split(" "))), h.addTest = function (e, t) { if ("object" == typeof e) for (var n in e) d(e, n) && h.addTest(n, e[n]); else { if (e = e.toLowerCase(), h[e] !== i) return h; t = "function" == typeof t ? t() : t, u.className += " " + (t ? "" : "no-") + e, h[e] = t } return h }, n(""), f = g = null, function (e, t) { function i() { var e = f.elements; return "string" == typeof e ? e.split(" ") : e } function n(e) { var t = p[e[h]]; return t || (t = {}, u++, e[h] = u, p[u] = t), t } function s(e, i, s) { return i || (i = t), r ? i.createElement(e) : (s || (s = n(i)), !(o = s.cache[e] ? s.cache[e].cloneNode() : d.test(e) ? (s.cache[e] = s.createElem(e)).cloneNode() : s.createElem(e)).canHaveChildren || c.test(e) || o.tagUrn ? o : s.frag.appendChild(o)); var o } function o(e) { e || (e = t); var o = n(e); return f.shivCSS && !a && !o.hasCSS && (o.hasCSS = !!function (e, t) { var i = e.createElement("p"), n = e.getElementsByTagName("head")[0] || e.documentElement; return i.innerHTML = "x<style>" + t + "</style>", n.insertBefore(i.lastChild, n.firstChild) }(e, "article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")), r || function (e, t) { t.cache || (t.cache = {}, t.createElem = e.createElement, t.createFrag = e.createDocumentFragment, t.frag = t.createFrag()), e.createElement = function (i) { return f.shivMethods ? s(i, e, t) : t.createElem(i) }, e.createDocumentFragment = Function("h,f", "return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&(" + i().join().replace(/[\w\-]+/g, function (e) { return t.createElem(e), t.frag.createElement(e), 'c("' + e + '")' }) + ");return n}")(f, t.frag) }(e, o), e } var a, r, l = e.html5 || {}, c = /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i, d = /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i, h = "_html5shiv", u = 0, p = {}; !function () { try { var e = t.createElement("a"); e.innerHTML = "<xyz></xyz>", a = "hidden" in e, r = 1 == e.childNodes.length || function () { t.createElement("a"); var e = t.createDocumentFragment(); return void 0 === e.cloneNode || void 0 === e.createDocumentFragment || void 0 === e.createElement }() } catch (e) { a = !0, r = !0 } }(); var f = { elements: l.elements || "abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video", version: "3.7.0", shivCSS: !1 !== l.shivCSS, supportsUnknownElements: r, shivMethods: !1 !== l.shivMethods, type: "default", shivDocument: o, createElement: s, createDocumentFragment: function (e, s) { if (e || (e = t), r) return e.createDocumentFragment(); for (var o = (s = s || n(e)).frag.cloneNode(), a = 0, l = i(), c = l.length; a < c; a++)o.createElement(l[a]); return o } }; e.html5 = f, o(t) }(this, t), h._version = "2.8.3", h._prefixes = b, h._domPrefixes = _, h._cssomPrefixes = w, h.hasEvent = M, h.testProp = function (e) { return a([e]) }, h.testAllProps = l, h.testStyles = S, u.className = u.className.replace(/(^|\s)no-js(\s|$)/, "$1$2") + " js " + T.join(" "), h }(this, this.document), function (e, t, i) { function n(e) { return "[object Function]" == g.call(e) } function s(e) { return "string" == typeof e } function o() { } function a(e) { return !e || "loaded" == e || "complete" == e || "uninitialized" == e } function r() { var e = v.shift(); b = 1, e ? e.t ? f(function () { ("c" == e.t ? u.injectCss : u.injectJs)(e.s, 0, e.a, e.x, e.e, 1) }, 0) : (e(), r()) : b = 0 } function l(e, i, n, s, o, l, c) { function d(t) { if (!p && a(h.readyState) && (y.r = p = 1, !b && r(), h.onload = h.onreadystatechange = null, t)) for (var n in "img" != e && f(function () { _.removeChild(h) }, 50), $[i]) $[i].hasOwnProperty(n) && $[i][n].onload() } c = c || u.errorTimeout; var h = t.createElement(e), p = 0, g = 0, y = { t: n, s: i, e: o, a: l, x: c }; 1 === $[i] && (g = 1, $[i] = []), "object" == e ? h.data = i : (h.src = i, h.type = e), h.width = h.height = "0", h.onerror = h.onload = h.onreadystatechange = function () { d.call(this, g) }, v.splice(s, 0, y), "img" != e && (g || 2 === $[i] ? (_.insertBefore(h, w ? null : m), f(d, c)) : $[i].push(h)) } function c(e, t, i, n, o) { return b = 0, t = t || "j", s(e) ? l("c" == t ? k : C, e, t, this.i++, i, n, o) : (v.splice(this.i++, 0, e), 1 == v.length && r()), this } function d() { var e = u; return e.loader = { load: c, i: 0 }, e } var h, u, p = t.documentElement, f = e.setTimeout, m = t.getElementsByTagName("script")[0], g = {}.toString, v = [], b = 0, y = "MozAppearance" in p.style, w = y && !!t.createRange().compareNode, _ = w ? p : m.parentNode, C = (p = e.opera && "[object Opera]" == g.call(e.opera), p = !!t.attachEvent && !p, y ? "object" : p ? "script" : "img"), k = p ? "script" : C, x = Array.isArray || function (e) { return "[object Array]" == g.call(e) }, T = [], $ = {}, S = { timeout: function (e, t) { return t.length && (e.timeout = t[0]), e } }; (u = function (e) { function t(e, t, s, o, a) { var r = function (e) { e = e.split("!"); var t, i, n, s = T.length, o = e.pop(), a = e.length; for (o = { url: o, origUrl: o, prefixes: e }, i = 0; i < a; i++)n = e[i].split("="), (t = S[n.shift()]) && (o = t(o, n)); for (i = 0; i < s; i++)o = T[i](o); return o }(e), l = r.autoCallback; r.url.split(".").pop().split("?").shift(), r.bypass || (t && (t = n(t) ? t : t[e] || t[o] || t[e.split("/").pop().split("?")[0]]), r.instead ? r.instead(e, t, s, o, a) : ($[r.url] ? r.noexec = !0 : $[r.url] = 1, s.load(r.url, r.forceCSS || !r.forceJS && "css" == r.url.split(".").pop().split("?").shift() ? "c" : i, r.noexec, r.attrs, r.timeout), (n(t) || n(l)) && s.load(function () { d(), t && t(r.origUrl, a, o), l && l(r.origUrl, a, o), $[r.url] = 2 }))) } function a(e, i) { function a(e, o) { if (e) { if (s(e)) o || (h = function () { var e = [].slice.call(arguments); u.apply(this, e), p() }), t(e, h, i, 0, c); else if (Object(e) === e) for (l in r = function () { var t, i = 0; for (t in e) e.hasOwnProperty(t) && i++; return i }(), e) e.hasOwnProperty(l) && (!o && !--r && (n(h) ? h = function () { var e = [].slice.call(arguments); u.apply(this, e), p() } : h[l] = function (e) { return function () { var t = [].slice.call(arguments); e && e.apply(this, t), p() } }(u[l])), t(e[l], h, i, l, c)) } else !o && p() } var r, l, c = !!e.test, d = e.load || e.both, h = e.callback || o, u = h, p = e.complete || o; a(c ? e.yep : e.nope, !!d), d && a(d) } var r, l, c = this.yepnope.loader; if (s(e)) t(e, 0, c, 0); else if (x(e)) for (r = 0; r < e.length; r++)s(l = e[r]) ? t(l, 0, c, 0) : x(l) ? u(l) : Object(l) === l && a(l, c); else Object(e) === e && a(e, c) }).addPrefix = function (e, t) { S[e] = t }, u.addFilter = function (e) { T.push(e) }, u.errorTimeout = 1e4, null == t.readyState && t.addEventListener && (t.readyState = "loading", t.addEventListener("DOMContentLoaded", h = function () { t.removeEventListener("DOMContentLoaded", h, 0), t.readyState = "complete" }, 0)), e.yepnope = d(), e.yepnope.executeStack = r, e.yepnope.injectJs = function (e, i, n, s, l, c) { var d, h, p = t.createElement("script"); s = s || u.errorTimeout; for (h in p.src = e, n) p.setAttribute(h, n[h]); i = c ? r : i || o, p.onreadystatechange = p.onload = function () { !d && a(p.readyState) && (d = 1, i(), p.onload = p.onreadystatechange = null) }, f(function () { d || (d = 1, i(1)) }, s), l ? p.onload() : m.parentNode.insertBefore(p, m) }, e.yepnope.injectCss = function (e, i, n, s, a, l) { var c; s = t.createElement("link"), i = l ? r : i || o; for (c in s.href = e, s.rel = "stylesheet", s.type = "text/css", n) s.setAttribute(c, n[c]); a || (m.parentNode.insertBefore(s, m), f(i, 0)) } }(this, document), Modernizr.load = function () { yepnope.apply(window, [].slice.call(arguments, 0)) }, function (e, t) { "object" == typeof module && "object" == typeof module.exports ? module.exports = e.document ? t(e, !0) : function (e) { if (!e.document) throw new Error("jQuery requires a window with a document"); return t(e) } : t(e) }("undefined" != typeof window ? window : this, function (e, t) { var i = [], n = i.slice, s = i.concat, o = i.push, a = i.indexOf, r = {}, l = r.toString, c = r.hasOwnProperty, d = {}, h = e.document, u = function (e, t) { return new u.fn.init(e, t) }, p = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, f = /^-ms-/, m = /-([\da-z])/gi, g = function (e, t) { return t.toUpperCase() }; function v(e) { var t = e.length, i = u.type(e); return "function" !== i && !u.isWindow(e) && (!(1 !== e.nodeType || !t) || ("array" === i || 0 === t || "number" == typeof t && t > 0 && t - 1 in e)) } u.fn = u.prototype = { jquery: "2.1.1", constructor: u, selector: "", length: 0, toArray: function () { return n.call(this) }, get: function (e) { return null != e ? e < 0 ? this[e + this.length] : this[e] : n.call(this) }, pushStack: function (e) { var t = u.merge(this.constructor(), e); return t.prevObject = this, t.context = this.context, t }, each: function (e, t) { return u.each(this, e, t) }, map: function (e) { return this.pushStack(u.map(this, function (t, i) { return e.call(t, i, t) })) }, slice: function () { return this.pushStack(n.apply(this, arguments)) }, first: function () { return this.eq(0) }, last: function () { return this.eq(-1) }, eq: function (e) { var t = this.length, i = +e + (e < 0 ? t : 0); return this.pushStack(i >= 0 && i < t ? [this[i]] : []) }, end: function () { return this.prevObject || this.constructor(null) }, push: o, sort: i.sort, splice: i.splice }, u.extend = u.fn.extend = function () { var e, t, i, n, s, o, a = arguments[0] || {}, r = 1, l = arguments.length, c = !1; for ("boolean" == typeof a && (c = a, a = arguments[r] || {}, r++), "object" == typeof a || u.isFunction(a) || (a = {}), r === l && (a = this, r--); r < l; r++)if (null != (e = arguments[r])) for (t in e) i = a[t], a !== (n = e[t]) && (c && n && (u.isPlainObject(n) || (s = u.isArray(n))) ? (s ? (s = !1, o = i && u.isArray(i) ? i : []) : o = i && u.isPlainObject(i) ? i : {}, a[t] = u.extend(c, o, n)) : void 0 !== n && (a[t] = n)); return a }, u.extend({ expando: "jQuery" + ("2.1.1" + Math.random()).replace(/\D/g, ""), isReady: !0, error: function (e) { throw new Error(e) }, noop: function () { }, isFunction: function (e) { return "function" === u.type(e) }, isArray: Array.isArray, isWindow: function (e) { return null != e && e === e.window }, isNumeric: function (e) { return !u.isArray(e) && e - parseFloat(e) >= 0 }, isPlainObject: function (e) { return "object" === u.type(e) && !e.nodeType && !u.isWindow(e) && !(e.constructor && !c.call(e.constructor.prototype, "isPrototypeOf")) }, isEmptyObject: function (e) { var t; for (t in e) return !1; return !0 }, type: function (e) { return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? r[l.call(e)] || "object" : typeof e }, globalEval: function (e) { var t, i = eval; (e = u.trim(e)) && (1 === e.indexOf("use strict") ? ((t = h.createElement("script")).text = e, h.head.appendChild(t).parentNode.removeChild(t)) : i(e)) }, camelCase: function (e) { return e.replace(f, "ms-").replace(m, g) }, nodeName: function (e, t) { return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase() }, each: function (e, t, i) { var n = 0, s = e.length, o = v(e); if (i) { if (o) for (; n < s && !1 !== t.apply(e[n], i); n++); else for (n in e) if (!1 === t.apply(e[n], i)) break } else if (o) for (; n < s && !1 !== t.call(e[n], n, e[n]); n++); else for (n in e) if (!1 === t.call(e[n], n, e[n])) break; return e }, trim: function (e) { return null == e ? "" : (e + "").replace(p, "") }, makeArray: function (e, t) { var i = t || []; return null != e && (v(Object(e)) ? u.merge(i, "string" == typeof e ? [e] : e) : o.call(i, e)), i }, inArray: function (e, t, i) { return null == t ? -1 : a.call(t, e, i) }, merge: function (e, t) { for (var i = +t.length, n = 0, s = e.length; n < i; n++)e[s++] = t[n]; return e.length = s, e }, grep: function (e, t, i) { for (var n = [], s = 0, o = e.length, a = !i; s < o; s++)!t(e[s], s) !== a && n.push(e[s]); return n }, map: function (e, t, i) { var n, o = 0, a = e.length, r = []; if (v(e)) for (; o < a; o++)null != (n = t(e[o], o, i)) && r.push(n); else for (o in e) null != (n = t(e[o], o, i)) && r.push(n); return s.apply([], r) }, guid: 1, proxy: function (e, t) { var i, s, o; if ("string" == typeof t && (i = e[t], t = e, e = i), u.isFunction(e)) return s = n.call(arguments, 2), (o = function () { return e.apply(t || this, s.concat(n.call(arguments))) }).guid = e.guid = e.guid || u.guid++, o }, now: Date.now, support: d }), u.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function (e, t) { r["[object " + t + "]"] = t.toLowerCase() }); var b = function (e) { var t, i, n, s, o, a, r, l, c, d, h, u, p, f, m, g, v, b, y, w = "sizzle" + -new Date, _ = e.document, C = 0, k = 0, x = oe(), T = oe(), $ = oe(), S = function (e, t) { return e === t && (h = !0), 0 }, M = "undefined", D = 1 << 31, E = {}.hasOwnProperty, A = [], F = A.pop, I = A.push, P = A.push, R = A.slice, O = A.indexOf || function (e) { for (var t = 0, i = this.length; t < i; t++)if (this[t] === e) return t; return -1 }, L = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", j = "[\\x20\\t\\r\\n\\f]", N = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", z = N.replace("w", "w#"), H = "\\[" + j + "*(" + N + ")(?:" + j + "*([*^$|!~]?=)" + j + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + z + "))|)" + j + "*\\]", q = ":(" + N + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + H + ")*)|.*)\\)|)", U = new RegExp("^" + j + "+|((?:^|[^\\\\])(?:\\\\.)*)" + j + "+$", "g"), W = new RegExp("^" + j + "*," + j + "*"), B = new RegExp("^" + j + "*([>+~]|" + j + ")" + j + "*"), V = new RegExp("=" + j + "*([^\\]'\"]*?)" + j + "*\\]", "g"), G = new RegExp(q), Y = new RegExp("^" + z + "$"), Q = { ID: new RegExp("^#(" + N + ")"), CLASS: new RegExp("^\\.(" + N + ")"), TAG: new RegExp("^(" + N.replace("w", "w*") + ")"), ATTR: new RegExp("^" + H), PSEUDO: new RegExp("^" + q), CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + j + "*(even|odd|(([+-]|)(\\d*)n|)" + j + "*(?:([+-]|)" + j + "*(\\d+)|))" + j + "*\\)|)", "i"), bool: new RegExp("^(?:" + L + ")$", "i"), needsContext: new RegExp("^" + j + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + j + "*((?:-\\d)?\\d*)" + j + "*\\)|)(?=[^-]|$)", "i") }, K = /^(?:input|select|textarea|button)$/i, X = /^h\d$/i, Z = /^[^{]+\{\s*\[native \w/, J = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, ee = /[+~]/, te = /'|\\/g, ie = new RegExp("\\\\([\\da-f]{1,6}" + j + "?|(" + j + ")|.)", "ig"), ne = function (e, t, i) { var n = "0x" + t - 65536; return n != n || i ? t : n < 0 ? String.fromCharCode(n + 65536) : String.fromCharCode(n >> 10 | 55296, 1023 & n | 56320) }; try { P.apply(A = R.call(_.childNodes), _.childNodes), A[_.childNodes.length].nodeType } catch (e) { P = { apply: A.length ? function (e, t) { I.apply(e, R.call(t)) } : function (e, t) { for (var i = e.length, n = 0; e[i++] = t[n++];); e.length = i - 1 } } } function se(e, t, n, s) { var o, r, c, d, h, f, v, b, C, k; if ((t ? t.ownerDocument || t : _) !== p && u(t), n = n || [], !e || "string" != typeof e) return n; if (1 !== (d = (t = t || p).nodeType) && 9 !== d) return []; if (m && !s) { if (o = J.exec(e)) if (c = o[1]) { if (9 === d) { if (!(r = t.getElementById(c)) || !r.parentNode) return n; if (r.id === c) return n.push(r), n } else if (t.ownerDocument && (r = t.ownerDocument.getElementById(c)) && y(t, r) && r.id === c) return n.push(r), n } else { if (o[2]) return P.apply(n, t.getElementsByTagName(e)), n; if ((c = o[3]) && i.getElementsByClassName && t.getElementsByClassName) return P.apply(n, t.getElementsByClassName(c)), n } if (i.qsa && (!g || !g.test(e))) { if (b = v = w, C = t, k = 9 === d && e, 1 === d && "object" !== t.nodeName.toLowerCase()) { for (f = a(e), (v = t.getAttribute("id")) ? b = v.replace(te, "\\$&") : t.setAttribute("id", b), b = "[id='" + b + "'] ", h = f.length; h--;)f[h] = b + me(f[h]); C = ee.test(e) && pe(t.parentNode) || t, k = f.join(",") } if (k) try { return P.apply(n, C.querySelectorAll(k)), n } catch (e) { } finally { v || t.removeAttribute("id") } } } return l(e.replace(U, "$1"), t, n, s) } function oe() { var e = []; return function t(i, s) { return e.push(i + " ") > n.cacheLength && delete t[e.shift()], t[i + " "] = s } } function ae(e) { return e[w] = !0, e } function re(e) { var t = p.createElement("div"); try { return !!e(t) } catch (e) { return !1 } finally { t.parentNode && t.parentNode.removeChild(t), t = null } } function le(e, t) { for (var i = e.split("|"), s = e.length; s--;)n.attrHandle[i[s]] = t } function ce(e, t) { var i = t && e, n = i && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || D) - (~e.sourceIndex || D); if (n) return n; if (i) for (; i = i.nextSibling;)if (i === t) return -1; return e ? 1 : -1 } function de(e) { return function (t) { return "input" === t.nodeName.toLowerCase() && t.type === e } } function he(e) { return function (t) { var i = t.nodeName.toLowerCase(); return ("input" === i || "button" === i) && t.type === e } } function ue(e) { return ae(function (t) { return t = +t, ae(function (i, n) { for (var s, o = e([], i.length, t), a = o.length; a--;)i[s = o[a]] && (i[s] = !(n[s] = i[s])) }) }) } function pe(e) { return e && typeof e.getElementsByTagName !== M && e } for (t in i = se.support = {}, o = se.isXML = function (e) { var t = e && (e.ownerDocument || e).documentElement; return !!t && "HTML" !== t.nodeName }, u = se.setDocument = function (e) { var t, s = e ? e.ownerDocument || e : _, a = s.defaultView; return s !== p && 9 === s.nodeType && s.documentElement ? (p = s, f = s.documentElement, m = !o(s), a && a !== a.top && (a.addEventListener ? a.addEventListener("unload", function () { u() }, !1) : a.attachEvent && a.attachEvent("onunload", function () { u() })), i.attributes = re(function (e) { return e.className = "i", !e.getAttribute("className") }), i.getElementsByTagName = re(function (e) { return e.appendChild(s.createComment("")), !e.getElementsByTagName("*").length }), i.getElementsByClassName = Z.test(s.getElementsByClassName) && re(function (e) { return e.innerHTML = "<div class='a'></div><div class='a i'></div>", e.firstChild.className = "i", 2 === e.getElementsByClassName("i").length }), i.getById = re(function (e) { return f.appendChild(e).id = w, !s.getElementsByName || !s.getElementsByName(w).length }), i.getById ? (n.find.ID = function (e, t) { if (typeof t.getElementById !== M && m) { var i = t.getElementById(e); return i && i.parentNode ? [i] : [] } }, n.filter.ID = function (e) { var t = e.replace(ie, ne); return function (e) { return e.getAttribute("id") === t } }) : (delete n.find.ID, n.filter.ID = function (e) { var t = e.replace(ie, ne); return function (e) { var i = typeof e.getAttributeNode !== M && e.getAttributeNode("id"); return i && i.value === t } }), n.find.TAG = i.getElementsByTagName ? function (e, t) { if (typeof t.getElementsByTagName !== M) return t.getElementsByTagName(e) } : function (e, t) { var i, n = [], s = 0, o = t.getElementsByTagName(e); if ("*" === e) { for (; i = o[s++];)1 === i.nodeType && n.push(i); return n } return o }, n.find.CLASS = i.getElementsByClassName && function (e, t) { if (typeof t.getElementsByClassName !== M && m) return t.getElementsByClassName(e) }, v = [], g = [], (i.qsa = Z.test(s.querySelectorAll)) && (re(function (e) { e.innerHTML = "<select msallowclip=''><option selected=''></option></select>", e.querySelectorAll("[msallowclip^='']").length && g.push("[*^$]=" + j + "*(?:''|\"\")"), e.querySelectorAll("[selected]").length || g.push("\\[" + j + "*(?:value|" + L + ")"), e.querySelectorAll(":checked").length || g.push(":checked") }), re(function (e) { var t = s.createElement("input"); t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && g.push("name" + j + "*[*^$|!~]?="), e.querySelectorAll(":enabled").length || g.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), g.push(",.*:") })), (i.matchesSelector = Z.test(b = f.matches || f.webkitMatchesSelector || f.mozMatchesSelector || f.oMatchesSelector || f.msMatchesSelector)) && re(function (e) { i.disconnectedMatch = b.call(e, "div"), b.call(e, "[s!='']:x"), v.push("!=", q) }), g = g.length && new RegExp(g.join("|")), v = v.length && new RegExp(v.join("|")), t = Z.test(f.compareDocumentPosition), y = t || Z.test(f.contains) ? function (e, t) { var i = 9 === e.nodeType ? e.documentElement : e, n = t && t.parentNode; return e === n || !(!n || 1 !== n.nodeType || !(i.contains ? i.contains(n) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(n))) } : function (e, t) { if (t) for (; t = t.parentNode;)if (t === e) return !0; return !1 }, S = t ? function (e, t) { if (e === t) return h = !0, 0; var n = !e.compareDocumentPosition - !t.compareDocumentPosition; return n || (1 & (n = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1) || !i.sortDetached && t.compareDocumentPosition(e) === n ? e === s || e.ownerDocument === _ && y(_, e) ? -1 : t === s || t.ownerDocument === _ && y(_, t) ? 1 : d ? O.call(d, e) - O.call(d, t) : 0 : 4 & n ? -1 : 1) } : function (e, t) { if (e === t) return h = !0, 0; var i, n = 0, o = e.parentNode, a = t.parentNode, r = [e], l = [t]; if (!o || !a) return e === s ? -1 : t === s ? 1 : o ? -1 : a ? 1 : d ? O.call(d, e) - O.call(d, t) : 0; if (o === a) return ce(e, t); for (i = e; i = i.parentNode;)r.unshift(i); for (i = t; i = i.parentNode;)l.unshift(i); for (; r[n] === l[n];)n++; return n ? ce(r[n], l[n]) : r[n] === _ ? -1 : l[n] === _ ? 1 : 0 }, s) : p }, se.matches = function (e, t) { return se(e, null, null, t) }, se.matchesSelector = function (e, t) { if ((e.ownerDocument || e) !== p && u(e), t = t.replace(V, "='$1']"), i.matchesSelector && m && (!v || !v.test(t)) && (!g || !g.test(t))) try { var n = b.call(e, t); if (n || i.disconnectedMatch || e.document && 11 !== e.document.nodeType) return n } catch (e) { } return se(t, p, null, [e]).length > 0 }, se.contains = function (e, t) { return (e.ownerDocument || e) !== p && u(e), y(e, t) }, se.attr = function (e, t) { (e.ownerDocument || e) !== p && u(e); var s = n.attrHandle[t.toLowerCase()], o = s && E.call(n.attrHandle, t.toLowerCase()) ? s(e, t, !m) : void 0; return void 0 !== o ? o : i.attributes || !m ? e.getAttribute(t) : (o = e.getAttributeNode(t)) && o.specified ? o.value : null }, se.error = function (e) { throw new Error("Syntax error, unrecognized expression: " + e) }, se.uniqueSort = function (e) { var t, n = [], s = 0, o = 0; if (h = !i.detectDuplicates, d = !i.sortStable && e.slice(0), e.sort(S), h) { for (; t = e[o++];)t === e[o] && (s = n.push(o)); for (; s--;)e.splice(n[s], 1) } return d = null, e }, s = se.getText = function (e) { var t, i = "", n = 0, o = e.nodeType; if (o) { if (1 === o || 9 === o || 11 === o) { if ("string" == typeof e.textContent) return e.textContent; for (e = e.firstChild; e; e = e.nextSibling)i += s(e) } else if (3 === o || 4 === o) return e.nodeValue } else for (; t = e[n++];)i += s(t); return i }, (n = se.selectors = { cacheLength: 50, createPseudo: ae, match: Q, attrHandle: {}, find: {}, relative: { ">": { dir: "parentNode", first: !0 }, " ": { dir: "parentNode" }, "+": { dir: "previousSibling", first: !0 }, "~": { dir: "previousSibling" } }, preFilter: { ATTR: function (e) { return e[1] = e[1].replace(ie, ne), e[3] = (e[3] || e[4] || e[5] || "").replace(ie, ne), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4) }, CHILD: function (e) { return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || se.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && se.error(e[0]), e }, PSEUDO: function (e) { var t, i = !e[6] && e[2]; return Q.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : i && G.test(i) && (t = a(i, !0)) && (t = i.indexOf(")", i.length - t) - i.length) && (e[0] = e[0].slice(0, t), e[2] = i.slice(0, t)), e.slice(0, 3)) } }, filter: { TAG: function (e) { var t = e.replace(ie, ne).toLowerCase(); return "*" === e ? function () { return !0 } : function (e) { return e.nodeName && e.nodeName.toLowerCase() === t } }, CLASS: function (e) { var t = x[e + " "]; return t || (t = new RegExp("(^|" + j + ")" + e + "(" + j + "|$)")) && x(e, function (e) { return t.test("string" == typeof e.className && e.className || typeof e.getAttribute !== M && e.getAttribute("class") || "") }) }, ATTR: function (e, t, i) { return function (n) { var s = se.attr(n, e); return null == s ? "!=" === t : !t || (s += "", "=" === t ? s === i : "!=" === t ? s !== i : "^=" === t ? i && 0 === s.indexOf(i) : "*=" === t ? i && s.indexOf(i) > -1 : "$=" === t ? i && s.slice(-i.length) === i : "~=" === t ? (" " + s + " ").indexOf(i) > -1 : "|=" === t && (s === i || s.slice(0, i.length + 1) === i + "-")) } }, CHILD: function (e, t, i, n, s) { var o = "nth" !== e.slice(0, 3), a = "last" !== e.slice(-4), r = "of-type" === t; return 1 === n && 0 === s ? function (e) { return !!e.parentNode } : function (t, i, l) { var c, d, h, u, p, f, m = o !== a ? "nextSibling" : "previousSibling", g = t.parentNode, v = r && t.nodeName.toLowerCase(), b = !l && !r; if (g) { if (o) { for (; m;) { for (h = t; h = h[m];)if (r ? h.nodeName.toLowerCase() === v : 1 === h.nodeType) return !1; f = m = "only" === e && !f && "nextSibling" } return !0 } if (f = [a ? g.firstChild : g.lastChild], a && b) { for (p = (c = (d = g[w] || (g[w] = {}))[e] || [])[0] === C && c[1], u = c[0] === C && c[2], h = p && g.childNodes[p]; h = ++p && h && h[m] || (u = p = 0) || f.pop();)if (1 === h.nodeType && ++u && h === t) { d[e] = [C, p, u]; break } } else if (b && (c = (t[w] || (t[w] = {}))[e]) && c[0] === C) u = c[1]; else for (; (h = ++p && h && h[m] || (u = p = 0) || f.pop()) && ((r ? h.nodeName.toLowerCase() !== v : 1 !== h.nodeType) || !++u || (b && ((h[w] || (h[w] = {}))[e] = [C, u]), h !== t));); return (u -= s) === n || u % n == 0 && u / n >= 0 } } }, PSEUDO: function (e, t) { var i, s = n.pseudos[e] || n.setFilters[e.toLowerCase()] || se.error("unsupported pseudo: " + e); return s[w] ? s(t) : s.length > 1 ? (i = [e, e, "", t], n.setFilters.hasOwnProperty(e.toLowerCase()) ? ae(function (e, i) { for (var n, o = s(e, t), a = o.length; a--;)e[n = O.call(e, o[a])] = !(i[n] = o[a]) }) : function (e) { return s(e, 0, i) }) : s } }, pseudos: { not: ae(function (e) { var t = [], i = [], n = r(e.replace(U, "$1")); return n[w] ? ae(function (e, t, i, s) { for (var o, a = n(e, null, s, []), r = e.length; r--;)(o = a[r]) && (e[r] = !(t[r] = o)) }) : function (e, s, o) { return t[0] = e, n(t, null, o, i), !i.pop() } }), has: ae(function (e) { return function (t) { return se(e, t).length > 0 } }), contains: ae(function (e) { return function (t) { return (t.textContent || t.innerText || s(t)).indexOf(e) > -1 } }), lang: ae(function (e) { return Y.test(e || "") || se.error("unsupported lang: " + e), e = e.replace(ie, ne).toLowerCase(), function (t) { var i; do { if (i = m ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return (i = i.toLowerCase()) === e || 0 === i.indexOf(e + "-") } while ((t = t.parentNode) && 1 === t.nodeType); return !1 } }), target: function (t) { var i = e.location && e.location.hash; return i && i.slice(1) === t.id }, root: function (e) { return e === f }, focus: function (e) { return e === p.activeElement && (!p.hasFocus || p.hasFocus()) && !!(e.type || e.href || ~e.tabIndex) }, enabled: function (e) { return !1 === e.disabled }, disabled: function (e) { return !0 === e.disabled }, checked: function (e) { var t = e.nodeName.toLowerCase(); return "input" === t && !!e.checked || "option" === t && !!e.selected }, selected: function (e) { return e.parentNode && e.parentNode.selectedIndex, !0 === e.selected }, empty: function (e) { for (e = e.firstChild; e; e = e.nextSibling)if (e.nodeType < 6) return !1; return !0 }, parent: function (e) { return !n.pseudos.empty(e) }, header: function (e) { return X.test(e.nodeName) }, input: function (e) { return K.test(e.nodeName) }, button: function (e) { var t = e.nodeName.toLowerCase(); return "input" === t && "button" === e.type || "button" === t }, text: function (e) { var t; return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase()) }, first: ue(function () { return [0] }), last: ue(function (e, t) { return [t - 1] }), eq: ue(function (e, t, i) { return [i < 0 ? i + t : i] }), even: ue(function (e, t) { for (var i = 0; i < t; i += 2)e.push(i); return e }), odd: ue(function (e, t) { for (var i = 1; i < t; i += 2)e.push(i); return e }), lt: ue(function (e, t, i) { for (var n = i < 0 ? i + t : i; --n >= 0;)e.push(n); return e }), gt: ue(function (e, t, i) { for (var n = i < 0 ? i + t : i; ++n < t;)e.push(n); return e }) } }).pseudos.nth = n.pseudos.eq, { radio: !0, checkbox: !0, file: !0, password: !0, image: !0 }) n.pseudos[t] = de(t); for (t in { submit: !0, reset: !0 }) n.pseudos[t] = he(t); function fe() { } function me(e) { for (var t = 0, i = e.length, n = ""; t < i; t++)n += e[t].value; return n } function ge(e, t, i) { var n = t.dir, s = i && "parentNode" === n, o = k++; return t.first ? function (t, i, o) { for (; t = t[n];)if (1 === t.nodeType || s) return e(t, i, o) } : function (t, i, a) { var r, l, c = [C, o]; if (a) { for (; t = t[n];)if ((1 === t.nodeType || s) && e(t, i, a)) return !0 } else for (; t = t[n];)if (1 === t.nodeType || s) { if ((r = (l = t[w] || (t[w] = {}))[n]) && r[0] === C && r[1] === o) return c[2] = r[2]; if (l[n] = c, c[2] = e(t, i, a)) return !0 } } } function ve(e) { return e.length > 1 ? function (t, i, n) { for (var s = e.length; s--;)if (!e[s](t, i, n)) return !1; return !0 } : e[0] } function be(e, t, i, n, s) { for (var o, a = [], r = 0, l = e.length, c = null != t; r < l; r++)(o = e[r]) && (i && !i(o, n, s) || (a.push(o), c && t.push(r))); return a } function ye(e, t, i, n, s, o) { return n && !n[w] && (n = ye(n)), s && !s[w] && (s = ye(s, o)), ae(function (o, a, r, l) { var c, d, h, u = [], p = [], f = a.length, m = o || function (e, t, i) { for (var n = 0, s = t.length; n < s; n++)se(e, t[n], i); return i }(t || "*", r.nodeType ? [r] : r, []), g = !e || !o && t ? m : be(m, u, e, r, l), v = i ? s || (o ? e : f || n) ? [] : a : g; if (i && i(g, v, r, l), n) for (c = be(v, p), n(c, [], r, l), d = c.length; d--;)(h = c[d]) && (v[p[d]] = !(g[p[d]] = h)); if (o) { if (s || e) { if (s) { for (c = [], d = v.length; d--;)(h = v[d]) && c.push(g[d] = h); s(null, v = [], c, l) } for (d = v.length; d--;)(h = v[d]) && (c = s ? O.call(o, h) : u[d]) > -1 && (o[c] = !(a[c] = h)) } } else v = be(v === a ? v.splice(f, v.length) : v), s ? s(null, a, v, l) : P.apply(a, v) }) } function we(e) { for (var t, i, s, o = e.length, a = n.relative[e[0].type], r = a || n.relative[" "], l = a ? 1 : 0, d = ge(function (e) { return e === t }, r, !0), h = ge(function (e) { return O.call(t, e) > -1 }, r, !0), u = [function (e, i, n) { return !a && (n || i !== c) || ((t = i).nodeType ? d(e, i, n) : h(e, i, n)) }]; l < o; l++)if (i = n.relative[e[l].type]) u = [ge(ve(u), i)]; else { if ((i = n.filter[e[l].type].apply(null, e[l].matches))[w]) { for (s = ++l; s < o && !n.relative[e[s].type]; s++); return ye(l > 1 && ve(u), l > 1 && me(e.slice(0, l - 1).concat({ value: " " === e[l - 2].type ? "*" : "" })).replace(U, "$1"), i, l < s && we(e.slice(l, s)), s < o && we(e = e.slice(s)), s < o && me(e)) } u.push(i) } return ve(u) } return fe.prototype = n.filters = n.pseudos, n.setFilters = new fe, a = se.tokenize = function (e, t) { var i, s, o, a, r, l, c, d = T[e + " "]; if (d) return t ? 0 : d.slice(0); for (r = e, l = [], c = n.preFilter; r;) { for (a in i && !(s = W.exec(r)) || (s && (r = r.slice(s[0].length) || r), l.push(o = [])), i = !1, (s = B.exec(r)) && (i = s.shift(), o.push({ value: i, type: s[0].replace(U, " ") }), r = r.slice(i.length)), n.filter) !(s = Q[a].exec(r)) || c[a] && !(s = c[a](s)) || (i = s.shift(), o.push({ value: i, type: a, matches: s }), r = r.slice(i.length)); if (!i) break } return t ? r.length : r ? se.error(e) : T(e, l).slice(0) }, r = se.compile = function (e, t) { var i, s = [], o = [], r = $[e + " "]; if (!r) { for (t || (t = a(e)), i = t.length; i--;)(r = we(t[i]))[w] ? s.push(r) : o.push(r); (r = $(e, function (e, t) { var i = t.length > 0, s = e.length > 0, o = function (o, a, r, l, d) { var h, u, f, m = 0, g = "0", v = o && [], b = [], y = c, w = o || s && n.find.TAG("*", d), _ = C += null == y ? 1 : Math.random() || .1, k = w.length; for (d && (c = a !== p && a); g !== k && null != (h = w[g]); g++) { if (s && h) { for (u = 0; f = e[u++];)if (f(h, a, r)) { l.push(h); break } d && (C = _) } i && ((h = !f && h) && m--, o && v.push(h)) } if (m += g, i && g !== m) { for (u = 0; f = t[u++];)f(v, b, a, r); if (o) { if (m > 0) for (; g--;)v[g] || b[g] || (b[g] = F.call(l)); b = be(b) } P.apply(l, b), d && !o && b.length > 0 && m + t.length > 1 && se.uniqueSort(l) } return d && (C = _, c = y), v }; return i ? ae(o) : o }(o, s))).selector = e } return r }, l = se.select = function (e, t, s, o) { var l, c, d, h, u, p = "function" == typeof e && e, f = !o && a(e = p.selector || e); if (s = s || [], 1 === f.length) { if ((c = f[0] = f[0].slice(0)).length > 2 && "ID" === (d = c[0]).type && i.getById && 9 === t.nodeType && m && n.relative[c[1].type]) { if (!(t = (n.find.ID(d.matches[0].replace(ie, ne), t) || [])[0])) return s; p && (t = t.parentNode), e = e.slice(c.shift().value.length) } for (l = Q.needsContext.test(e) ? 0 : c.length; l-- && (d = c[l], !n.relative[h = d.type]);)if ((u = n.find[h]) && (o = u(d.matches[0].replace(ie, ne), ee.test(c[0].type) && pe(t.parentNode) || t))) { if (c.splice(l, 1), !(e = o.length && me(c))) return P.apply(s, o), s; break } } return (p || r(e, f))(o, t, !m, s, ee.test(e) && pe(t.parentNode) || t), s }, i.sortStable = w.split("").sort(S).join("") === w, i.detectDuplicates = !!h, u(), i.sortDetached = re(function (e) { return 1 & e.compareDocumentPosition(p.createElement("div")) }), re(function (e) { return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href") }) || le("type|href|height|width", function (e, t, i) { if (!i) return e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2) }), i.attributes && re(function (e) { return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value") }) || le("value", function (e, t, i) { if (!i && "input" === e.nodeName.toLowerCase()) return e.defaultValue }), re(function (e) { return null == e.getAttribute("disabled") }) || le(L, function (e, t, i) { var n; if (!i) return !0 === e[t] ? t.toLowerCase() : (n = e.getAttributeNode(t)) && n.specified ? n.value : null }), se }(e); u.find = b, u.expr = b.selectors, u.expr[":"] = u.expr.pseudos, u.unique = b.uniqueSort, u.text = b.getText, u.isXMLDoc = b.isXML, u.contains = b.contains; var y = u.expr.match.needsContext, w = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, _ = /^.[^:#\[\.,]*$/; function C(e, t, i) { if (u.isFunction(t)) return u.grep(e, function (e, n) { return !!t.call(e, n, e) !== i }); if (t.nodeType) return u.grep(e, function (e) { return e === t !== i }); if ("string" == typeof t) { if (_.test(t)) return u.filter(t, e, i); t = u.filter(t, e) } return u.grep(e, function (e) { return a.call(t, e) >= 0 !== i }) } u.filter = function (e, t, i) { var n = t[0]; return i && (e = ":not(" + e + ")"), 1 === t.length && 1 === n.nodeType ? u.find.matchesSelector(n, e) ? [n] : [] : u.find.matches(e, u.grep(t, function (e) { return 1 === e.nodeType })) }, u.fn.extend({ find: function (e) { var t, i = this.length, n = [], s = this; if ("string" != typeof e) return this.pushStack(u(e).filter(function () { for (t = 0; t < i; t++)if (u.contains(s[t], this)) return !0 })); for (t = 0; t < i; t++)u.find(e, s[t], n); return (n = this.pushStack(i > 1 ? u.unique(n) : n)).selector = this.selector ? this.selector + " " + e : e, n }, filter: function (e) { return this.pushStack(C(this, e || [], !1)) }, not: function (e) { return this.pushStack(C(this, e || [], !0)) }, is: function (e) { return !!C(this, "string" == typeof e && y.test(e) ? u(e) : e || [], !1).length } }); var k, x = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/; (u.fn.init = function (e, t) { var i, n; if (!e) return this; if ("string" == typeof e) { if (!(i = "<" === e[0] && ">" === e[e.length - 1] && e.length >= 3 ? [null, e, null] : x.exec(e)) || !i[1] && t) return !t || t.jquery ? (t || k).find(e) : this.constructor(t).find(e); if (i[1]) { if (t = t instanceof u ? t[0] : t, u.merge(this, u.parseHTML(i[1], t && t.nodeType ? t.ownerDocument || t : h, !0)), w.test(i[1]) && u.isPlainObject(t)) for (i in t) u.isFunction(this[i]) ? this[i](t[i]) : this.attr(i, t[i]); return this } return (n = h.getElementById(i[2])) && n.parentNode && (this.length = 1, this[0] = n), this.context = h, this.selector = e, this } return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : u.isFunction(e) ? void 0 !== k.ready ? k.ready(e) : e(u) : (void 0 !== e.selector && (this.selector = e.selector, this.context = e.context), u.makeArray(e, this)) }).prototype = u.fn, k = u(h); var T = /^(?:parents|prev(?:Until|All))/, $ = { children: !0, contents: !0, next: !0, prev: !0 }; function S(e, t) { for (; (e = e[t]) && 1 !== e.nodeType;); return e } u.extend({ dir: function (e, t, i) { for (var n = [], s = void 0 !== i; (e = e[t]) && 9 !== e.nodeType;)if (1 === e.nodeType) { if (s && u(e).is(i)) break; n.push(e) } return n }, sibling: function (e, t) { for (var i = []; e; e = e.nextSibling)1 === e.nodeType && e !== t && i.push(e); return i } }), u.fn.extend({ has: function (e) { var t = u(e, this), i = t.length; return this.filter(function () { for (var e = 0; e < i; e++)if (u.contains(this, t[e])) return !0 }) }, closest: function (e, t) { for (var i, n = 0, s = this.length, o = [], a = y.test(e) || "string" != typeof e ? u(e, t || this.context) : 0; n < s; n++)for (i = this[n]; i && i !== t; i = i.parentNode)if (i.nodeType < 11 && (a ? a.index(i) > -1 : 1 === i.nodeType && u.find.matchesSelector(i, e))) { o.push(i); break } return this.pushStack(o.length > 1 ? u.unique(o) : o) }, index: function (e) { return e ? "string" == typeof e ? a.call(u(e), this[0]) : a.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1 }, add: function (e, t) { return this.pushStack(u.unique(u.merge(this.get(), u(e, t)))) }, addBack: function (e) { return this.add(null == e ? this.prevObject : this.prevObject.filter(e)) } }), u.each({ parent: function (e) { var t = e.parentNode; return t && 11 !== t.nodeType ? t : null }, parents: function (e) { return u.dir(e, "parentNode") }, parentsUntil: function (e, t, i) { return u.dir(e, "parentNode", i) }, next: function (e) { return S(e, "nextSibling") }, prev: function (e) { return S(e, "previousSibling") }, nextAll: function (e) { return u.dir(e, "nextSibling") }, prevAll: function (e) { return u.dir(e, "previousSibling") }, nextUntil: function (e, t, i) { return u.dir(e, "nextSibling", i) }, prevUntil: function (e, t, i) { return u.dir(e, "previousSibling", i) }, siblings: function (e) { return u.sibling((e.parentNode || {}).firstChild, e) }, children: function (e) { return u.sibling(e.firstChild) }, contents: function (e) { return e.contentDocument || u.merge([], e.childNodes) } }, function (e, t) { u.fn[e] = function (i, n) { var s = u.map(this, t, i); return "Until" !== e.slice(-5) && (n = i), n && "string" == typeof n && (s = u.filter(n, s)), this.length > 1 && ($[e] || u.unique(s), T.test(e) && s.reverse()), this.pushStack(s) } }); var M, D = /\S+/g, E = {}; function A() { h.removeEventListener("DOMContentLoaded", A, !1), e.removeEventListener("load", A, !1), u.ready() } u.Callbacks = function (e) { e = "string" == typeof e ? E[e] || function (e) { var t = E[e] = {}; return u.each(e.match(D) || [], function (e, i) { t[i] = !0 }), t }(e) : u.extend({}, e); var t, i, n, s, o, a, r = [], l = !e.once && [], c = function (h) { for (t = e.memory && h, i = !0, a = s || 0, s = 0, o = r.length, n = !0; r && a < o; a++)if (!1 === r[a].apply(h[0], h[1]) && e.stopOnFalse) { t = !1; break } n = !1, r && (l ? l.length && c(l.shift()) : t ? r = [] : d.disable()) }, d = { add: function () { if (r) { var i = r.length; !function t(i) { u.each(i, function (i, n) { var s = u.type(n); "function" === s ? e.unique && d.has(n) || r.push(n) : n && n.length && "string" !== s && t(n) }) }(arguments), n ? o = r.length : t && (s = i, c(t)) } return this }, remove: function () { return r && u.each(arguments, function (e, t) { for (var i; (i = u.inArray(t, r, i)) > -1;)r.splice(i, 1), n && (i <= o && o--, i <= a && a--) }), this }, has: function (e) { return e ? u.inArray(e, r) > -1 : !(!r || !r.length) }, empty: function () { return r = [], o = 0, this }, disable: function () { return r = l = t = void 0, this }, disabled: function () { return !r }, lock: function () { return l = void 0, t || d.disable(), this }, locked: function () { return !l }, fireWith: function (e, t) { return !r || i && !l || (t = [e, (t = t || []).slice ? t.slice() : t], n ? l.push(t) : c(t)), this }, fire: function () { return d.fireWith(this, arguments), this }, fired: function () { return !!i } }; return d }, u.extend({ Deferred: function (e) { var t = [["resolve", "done", u.Callbacks("once memory"), "resolved"], ["reject", "fail", u.Callbacks("once memory"), "rejected"], ["notify", "progress", u.Callbacks("memory")]], i = "pending", n = { state: function () { return i }, always: function () { return s.done(arguments).fail(arguments), this }, then: function () { var e = arguments; return u.Deferred(function (i) { u.each(t, function (t, o) { var a = u.isFunction(e[t]) && e[t]; s[o[1]](function () { var e = a && a.apply(this, arguments); e && u.isFunction(e.promise) ? e.promise().done(i.resolve).fail(i.reject).progress(i.notify) : i[o[0] + "With"](this === n ? i.promise() : this, a ? [e] : arguments) }) }), e = null }).promise() }, promise: function (e) { return null != e ? u.extend(e, n) : n } }, s = {}; return n.pipe = n.then, u.each(t, function (e, o) { var a = o[2], r = o[3]; n[o[1]] = a.add, r && a.add(function () { i = r }, t[1 ^ e][2].disable, t[2][2].lock), s[o[0]] = function () { return s[o[0] + "With"](this === s ? n : this, arguments), this }, s[o[0] + "With"] = a.fireWith }), n.promise(s), e && e.call(s, s), s }, when: function (e) { var t, i, s, o = 0, a = n.call(arguments), r = a.length, l = 1 !== r || e && u.isFunction(e.promise) ? r : 0, c = 1 === l ? e : u.Deferred(), d = function (e, i, s) { return function (o) { i[e] = this, s[e] = arguments.length > 1 ? n.call(arguments) : o, s === t ? c.notifyWith(i, s) : --l || c.resolveWith(i, s) } }; if (r > 1) for (t = new Array(r), i = new Array(r), s = new Array(r); o < r; o++)a[o] && u.isFunction(a[o].promise) ? a[o].promise().done(d(o, s, a)).fail(c.reject).progress(d(o, i, t)) : --l; return l || c.resolveWith(s, a), c.promise() } }), u.fn.ready = function (e) { return u.ready.promise().done(e), this }, u.extend({ isReady: !1, readyWait: 1, holdReady: function (e) { e ? u.readyWait++ : u.ready(!0) }, ready: function (e) { (!0 === e ? --u.readyWait : u.isReady) || (u.isReady = !0, !0 !== e && --u.readyWait > 0 || (M.resolveWith(h, [u]), u.fn.triggerHandler && (u(h).triggerHandler("ready"), u(h).off("ready")))) } }), u.ready.promise = function (t) { return M || (M = u.Deferred(), "complete" === h.readyState ? setTimeout(u.ready) : (h.addEventListener("DOMContentLoaded", A, !1), e.addEventListener("load", A, !1))), M.promise(t) }, u.ready.promise(); var F = u.access = function (e, t, i, n, s, o, a) { var r = 0, l = e.length, c = null == i; if ("object" === u.type(i)) for (r in s = !0, i) u.access(e, t, r, i[r], !0, o, a); else if (void 0 !== n && (s = !0, u.isFunction(n) || (a = !0), c && (a ? (t.call(e, n), t = null) : (c = t, t = function (e, t, i) { return c.call(u(e), i) })), t)) for (; r < l; r++)t(e[r], i, a ? n : n.call(e[r], r, t(e[r], i))); return s ? e : c ? t.call(e) : l ? t(e[0], i) : o }; function I() { Object.defineProperty(this.cache = {}, 0, { get: function () { return {} } }), this.expando = u.expando + Math.random() } u.acceptData = function (e) { return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType }, I.uid = 1, I.accepts = u.acceptData, I.prototype = { key: function (e) { if (!I.accepts(e)) return 0; var t = {}, i = e[this.expando]; if (!i) { i = I.uid++; try { t[this.expando] = { value: i }, Object.defineProperties(e, t) } catch (n) { t[this.expando] = i, u.extend(e, t) } } return this.cache[i] || (this.cache[i] = {}), i }, set: function (e, t, i) { var n, s = this.key(e), o = this.cache[s]; if ("string" == typeof t) o[t] = i; else if (u.isEmptyObject(o)) u.extend(this.cache[s], t); else for (n in t) o[n] = t[n]; return o }, get: function (e, t) { var i = this.cache[this.key(e)]; return void 0 === t ? i : i[t] }, access: function (e, t, i) { var n; return void 0 === t || t && "string" == typeof t && void 0 === i ? void 0 !== (n = this.get(e, t)) ? n : this.get(e, u.camelCase(t)) : (this.set(e, t, i), void 0 !== i ? i : t) }, remove: function (e, t) { var i, n, s, o = this.key(e), a = this.cache[o]; if (void 0 === t) this.cache[o] = {}; else { u.isArray(t) ? n = t.concat(t.map(u.camelCase)) : (s = u.camelCase(t), n = t in a ? [t, s] : (n = s) in a ? [n] : n.match(D) || []), i = n.length; for (; i--;)delete a[n[i]] } }, hasData: function (e) { return !u.isEmptyObject(this.cache[e[this.expando]] || {}) }, discard: function (e) { e[this.expando] && delete this.cache[e[this.expando]] } }; var P = new I, R = new I, O = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, L = /([A-Z])/g; function j(e, t, i) { var n; if (void 0 === i && 1 === e.nodeType) if (n = "data-" + t.replace(L, "-$1").toLowerCase(), "string" == typeof (i = e.getAttribute(n))) { try { i = "true" === i || "false" !== i && ("null" === i ? null : +i + "" === i ? +i : O.test(i) ? u.parseJSON(i) : i) } catch (e) { } R.set(e, t, i) } else i = void 0; return i } u.extend({ hasData: function (e) { return R.hasData(e) || P.hasData(e) }, data: function (e, t, i) { return R.access(e, t, i) }, removeData: function (e, t) { R.remove(e, t) }, _data: function (e, t, i) { return P.access(e, t, i) }, _removeData: function (e, t) { P.remove(e, t) } }), u.fn.extend({ data: function (e, t) { var i, n, s, o = this[0], a = o && o.attributes; if (void 0 === e) { if (this.length && (s = R.get(o), 1 === o.nodeType && !P.get(o, "hasDataAttrs"))) { for (i = a.length; i--;)a[i] && 0 === (n = a[i].name).indexOf("data-") && (n = u.camelCase(n.slice(5)), j(o, n, s[n])); P.set(o, "hasDataAttrs", !0) } return s } return "object" == typeof e ? this.each(function () { R.set(this, e) }) : F(this, function (t) { var i, n = u.camelCase(e); if (o && void 0 === t) return void 0 !== (i = R.get(o, e)) ? i : void 0 !== (i = R.get(o, n)) ? i : void 0 !== (i = j(o, n, void 0)) ? i : void 0; this.each(function () { var i = R.get(this, n); R.set(this, n, t), -1 !== e.indexOf("-") && void 0 !== i && R.set(this, e, t) }) }, null, t, arguments.length > 1, null, !0) }, removeData: function (e) { return this.each(function () { R.remove(this, e) }) } }), u.extend({ queue: function (e, t, i) { var n; if (e) return t = (t || "fx") + "queue", n = P.get(e, t), i && (!n || u.isArray(i) ? n = P.access(e, t, u.makeArray(i)) : n.push(i)), n || [] }, dequeue: function (e, t) { t = t || "fx"; var i = u.queue(e, t), n = i.length, s = i.shift(), o = u._queueHooks(e, t); "inprogress" === s && (s = i.shift(), n--), s && ("fx" === t && i.unshift("inprogress"), delete o.stop, s.call(e, function () { u.dequeue(e, t) }, o)), !n && o && o.empty.fire() }, _queueHooks: function (e, t) { var i = t + "queueHooks"; return P.get(e, i) || P.access(e, i, { empty: u.Callbacks("once memory").add(function () { P.remove(e, [t + "queue", i]) }) }) } }), u.fn.extend({ queue: function (e, t) { var i = 2; return "string" != typeof e && (t = e, e = "fx", i--), arguments.length < i ? u.queue(this[0], e) : void 0 === t ? this : this.each(function () { var i = u.queue(this, e, t); u._queueHooks(this, e), "fx" === e && "inprogress" !== i[0] && u.dequeue(this, e) }) }, dequeue: function (e) { return this.each(function () { u.dequeue(this, e) }) }, clearQueue: function (e) { return this.queue(e || "fx", []) }, promise: function (e, t) { var i, n = 1, s = u.Deferred(), o = this, a = this.length, r = function () { --n || s.resolveWith(o, [o]) }; for ("string" != typeof e && (t = e, e = void 0), e = e || "fx"; a--;)(i = P.get(o[a], e + "queueHooks")) && i.empty && (n++, i.empty.add(r)); return r(), s.promise(t) } }); var N, z, H = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, q = ["Top", "Right", "Bottom", "Left"], U = function (e, t) { return e = t || e, "none" === u.css(e, "display") || !u.contains(e.ownerDocument, e) }, W = /^(?:checkbox|radio)$/i; N = h.createDocumentFragment().appendChild(h.createElement("div")), (z = h.createElement("input")).setAttribute("type", "radio"), z.setAttribute("checked", "checked"), z.setAttribute("name", "t"), N.appendChild(z), d.checkClone = N.cloneNode(!0).cloneNode(!0).lastChild.checked, N.innerHTML = "<textarea>x</textarea>", d.noCloneChecked = !!N.cloneNode(!0).lastChild.defaultValue; d.focusinBubbles = "onfocusin" in e; var B = /^key/, V = /^(?:mouse|pointer|contextmenu)|click/, G = /^(?:focusinfocus|focusoutblur)$/, Y = /^([^.]*)(?:\.(.+)|)$/; function Q() { return !0 } function K() { return !1 } function X() { try { return h.activeElement } catch (e) { } } u.event = { global: {}, add: function (e, t, i, n, s) { var o, a, r, l, c, d, h, p, f, m, g, v = P.get(e); if (v) for (i.handler && (i = (o = i).handler, s = o.selector), i.guid || (i.guid = u.guid++), (l = v.events) || (l = v.events = {}), (a = v.handle) || (a = v.handle = function (t) { return void 0 !== u && u.event.triggered !== t.type ? u.event.dispatch.apply(e, arguments) : void 0 }), c = (t = (t || "").match(D) || [""]).length; c--;)f = g = (r = Y.exec(t[c]) || [])[1], m = (r[2] || "").split(".").sort(), f && (h = u.event.special[f] || {}, f = (s ? h.delegateType : h.bindType) || f, h = u.event.special[f] || {}, d = u.extend({ type: f, origType: g, data: n, handler: i, guid: i.guid, selector: s, needsContext: s && u.expr.match.needsContext.test(s), namespace: m.join(".") }, o), (p = l[f]) || ((p = l[f] = []).delegateCount = 0, h.setup && !1 !== h.setup.call(e, n, m, a) || e.addEventListener && e.addEventListener(f, a, !1)), h.add && (h.add.call(e, d), d.handler.guid || (d.handler.guid = i.guid)), s ? p.splice(p.delegateCount++, 0, d) : p.push(d), u.event.global[f] = !0) }, remove: function (e, t, i, n, s) { var o, a, r, l, c, d, h, p, f, m, g, v = P.hasData(e) && P.get(e); if (v && (l = v.events)) { for (c = (t = (t || "").match(D) || [""]).length; c--;)if (f = g = (r = Y.exec(t[c]) || [])[1], m = (r[2] || "").split(".").sort(), f) { for (h = u.event.special[f] || {}, p = l[f = (n ? h.delegateType : h.bindType) || f] || [], r = r[2] && new RegExp("(^|\\.)" + m.join("\\.(?:.*\\.|)") + "(\\.|$)"), a = o = p.length; o--;)d = p[o], !s && g !== d.origType || i && i.guid !== d.guid || r && !r.test(d.namespace) || n && n !== d.selector && ("**" !== n || !d.selector) || (p.splice(o, 1), d.selector && p.delegateCount--, h.remove && h.remove.call(e, d)); a && !p.length && (h.teardown && !1 !== h.teardown.call(e, m, v.handle) || u.removeEvent(e, f, v.handle), delete l[f]) } else for (f in l) u.event.remove(e, f + t[c], i, n, !0); u.isEmptyObject(l) && (delete v.handle, P.remove(e, "events")) } }, trigger: function (t, i, n, s) { var o, a, r, l, d, p, f, m = [n || h], g = c.call(t, "type") ? t.type : t, v = c.call(t, "namespace") ? t.namespace.split(".") : []; if (a = r = n = n || h, 3 !== n.nodeType && 8 !== n.nodeType && !G.test(g + u.event.triggered) && (g.indexOf(".") >= 0 && (v = g.split("."), g = v.shift(), v.sort()), d = g.indexOf(":") < 0 && "on" + g, (t = t[u.expando] ? t : new u.Event(g, "object" == typeof t && t)).isTrigger = s ? 2 : 3, t.namespace = v.join("."), t.namespace_re = t.namespace ? new RegExp("(^|\\.)" + v.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, t.result = void 0, t.target || (t.target = n), i = null == i ? [t] : u.makeArray(i, [t]), f = u.event.special[g] || {}, s || !f.trigger || !1 !== f.trigger.apply(n, i))) { if (!s && !f.noBubble && !u.isWindow(n)) { for (l = f.delegateType || g, G.test(l + g) || (a = a.parentNode); a; a = a.parentNode)m.push(a), r = a; r === (n.ownerDocument || h) && m.push(r.defaultView || r.parentWindow || e) } for (o = 0; (a = m[o++]) && !t.isPropagationStopped();)t.type = o > 1 ? l : f.bindType || g, (p = (P.get(a, "events") || {})[t.type] && P.get(a, "handle")) && p.apply(a, i), (p = d && a[d]) && p.apply && u.acceptData(a) && (t.result = p.apply(a, i), !1 === t.result && t.preventDefault()); return t.type = g, s || t.isDefaultPrevented() || f._default && !1 !== f._default.apply(m.pop(), i) || !u.acceptData(n) || d && u.isFunction(n[g]) && !u.isWindow(n) && ((r = n[d]) && (n[d] = null), u.event.triggered = g, n[g](), u.event.triggered = void 0, r && (n[d] = r)), t.result } }, dispatch: function (e) { e = u.event.fix(e); var t, i, s, o, a, r, l = n.call(arguments), c = (P.get(this, "events") || {})[e.type] || [], d = u.event.special[e.type] || {}; if (l[0] = e, e.delegateTarget = this, !d.preDispatch || !1 !== d.preDispatch.call(this, e)) { for (r = u.event.handlers.call(this, e, c), t = 0; (o = r[t++]) && !e.isPropagationStopped();)for (e.currentTarget = o.elem, i = 0; (a = o.handlers[i++]) && !e.isImmediatePropagationStopped();)e.namespace_re && !e.namespace_re.test(a.namespace) || (e.handleObj = a, e.data = a.data, void 0 !== (s = ((u.event.special[a.origType] || {}).handle || a.handler).apply(o.elem, l)) && !1 === (e.result = s) && (e.preventDefault(), e.stopPropagation())); return d.postDispatch && d.postDispatch.call(this, e), e.result } }, handlers: function (e, t) { var i, n, s, o, a = [], r = t.delegateCount, l = e.target; if (r && l.nodeType && (!e.button || "click" !== e.type)) for (; l !== this; l = l.parentNode || this)if (!0 !== l.disabled || "click" !== e.type) { for (n = [], i = 0; i < r; i++)void 0 === n[s = (o = t[i]).selector + " "] && (n[s] = o.needsContext ? u(s, this).index(l) >= 0 : u.find(s, this, null, [l]).length), n[s] && n.push(o); n.length && a.push({ elem: l, handlers: n }) } return r < t.length && a.push({ elem: this, handlers: t.slice(r) }), a }, props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "), fixHooks: {}, keyHooks: { props: "char charCode key keyCode".split(" "), filter: function (e, t) { return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), e } }, mouseHooks: { props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "), filter: function (e, t) { var i, n, s, o = t.button; return null == e.pageX && null != t.clientX && (n = (i = e.target.ownerDocument || h).documentElement, s = i.body, e.pageX = t.clientX + (n && n.scrollLeft || s && s.scrollLeft || 0) - (n && n.clientLeft || s && s.clientLeft || 0), e.pageY = t.clientY + (n && n.scrollTop || s && s.scrollTop || 0) - (n && n.clientTop || s && s.clientTop || 0)), e.which || void 0 === o || (e.which = 1 & o ? 1 : 2 & o ? 3 : 4 & o ? 2 : 0), e } }, fix: function (e) { if (e[u.expando]) return e; var t, i, n, s = e.type, o = e, a = this.fixHooks[s]; for (a || (this.fixHooks[s] = a = V.test(s) ? this.mouseHooks : B.test(s) ? this.keyHooks : {}), n = a.props ? this.props.concat(a.props) : this.props, e = new u.Event(o), t = n.length; t--;)e[i = n[t]] = o[i]; return e.target || (e.target = h), 3 === e.target.nodeType && (e.target = e.target.parentNode), a.filter ? a.filter(e, o) : e }, special: { load: { noBubble: !0 }, focus: { trigger: function () { if (this !== X() && this.focus) return this.focus(), !1 }, delegateType: "focusin" }, blur: { trigger: function () { if (this === X() && this.blur) return this.blur(), !1 }, delegateType: "focusout" }, click: { trigger: function () { if ("checkbox" === this.type && this.click && u.nodeName(this, "input")) return this.click(), !1 }, _default: function (e) { return u.nodeName(e.target, "a") } }, beforeunload: { postDispatch: function (e) { void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result) } } }, simulate: function (e, t, i, n) { var s = u.extend(new u.Event, i, { type: e, isSimulated: !0, originalEvent: {} }); n ? u.event.trigger(s, null, t) : u.event.dispatch.call(t, s), s.isDefaultPrevented() && i.preventDefault() } }, u.removeEvent = function (e, t, i) { e.removeEventListener && e.removeEventListener(t, i, !1) }, u.Event = function (e, t) { if (!(this instanceof u.Event)) return new u.Event(e, t); e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && !1 === e.returnValue ? Q : K) : this.type = e, t && u.extend(this, t), this.timeStamp = e && e.timeStamp || u.now(), this[u.expando] = !0 }, u.Event.prototype = { isDefaultPrevented: K, isPropagationStopped: K, isImmediatePropagationStopped: K, preventDefault: function () { var e = this.originalEvent; this.isDefaultPrevented = Q, e && e.preventDefault && e.preventDefault() }, stopPropagation: function () { var e = this.originalEvent; this.isPropagationStopped = Q, e && e.stopPropagation && e.stopPropagation() }, stopImmediatePropagation: function () { var e = this.originalEvent; this.isImmediatePropagationStopped = Q, e && e.stopImmediatePropagation && e.stopImmediatePropagation(), this.stopPropagation() } }, u.each({ mouseenter: "mouseover", mouseleave: "mouseout", pointerenter: "pointerover", pointerleave: "pointerout" }, function (e, t) { u.event.special[e] = { delegateType: t, bindType: t, handle: function (e) { var i, n = e.relatedTarget, s = e.handleObj; return n && (n === this || u.contains(this, n)) || (e.type = s.origType, i = s.handler.apply(this, arguments), e.type = t), i } } }), d.focusinBubbles || u.each({ focus: "focusin", blur: "focusout" }, function (e, t) { var i = function (e) { u.event.simulate(t, e.target, u.event.fix(e), !0) }; u.event.special[t] = { setup: function () { var n = this.ownerDocument || this, s = P.access(n, t); s || n.addEventListener(e, i, !0), P.access(n, t, (s || 0) + 1) }, teardown: function () { var n = this.ownerDocument || this, s = P.access(n, t) - 1; s ? P.access(n, t, s) : (n.removeEventListener(e, i, !0), P.remove(n, t)) } } }), u.fn.extend({ on: function (e, t, i, n, s) { var o, a; if ("object" == typeof e) { for (a in "string" != typeof t && (i = i || t, t = void 0), e) this.on(a, t, i, e[a], s); return this } if (null == i && null == n ? (n = t, i = t = void 0) : null == n && ("string" == typeof t ? (n = i, i = void 0) : (n = i, i = t, t = void 0)), !1 === n) n = K; else if (!n) return this; return 1 === s && (o = n, (n = function (e) { return u().off(e), o.apply(this, arguments) }).guid = o.guid || (o.guid = u.guid++)), this.each(function () { u.event.add(this, e, n, i, t) }) }, one: function (e, t, i, n) { return this.on(e, t, i, n, 1) }, off: function (e, t, i) { var n, s; if (e && e.preventDefault && e.handleObj) return n = e.handleObj, u(e.delegateTarget).off(n.namespace ? n.origType + "." + n.namespace : n.origType, n.selector, n.handler), this; if ("object" == typeof e) { for (s in e) this.off(s, t, e[s]); return this } return !1 !== t && "function" != typeof t || (i = t, t = void 0), !1 === i && (i = K), this.each(function () { u.event.remove(this, e, i, t) }) }, trigger: function (e, t) { return this.each(function () { u.event.trigger(e, t, this) }) }, triggerHandler: function (e, t) { var i = this[0]; if (i) return u.event.trigger(e, t, i, !0) } }); var Z = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, J = /<([\w:]+)/, ee = /<|&#?\w+;/, te = /<(?:script|style|link)/i, ie = /checked\s*(?:[^=]|=\s*.checked.)/i, ne = /^$|\/(?:java|ecma)script/i, se = /^true\/(.*)/, oe = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g, ae = { option: [1, "<select multiple='multiple'>", "</select>"], thead: [1, "<table>", "</table>"], col: [2, "<table><colgroup>", "</colgroup></table>"], tr: [2, "<table><tbody>", "</tbody></table>"], td: [3, "<table><tbody><tr>", "</tr></tbody></table>"], _default: [0, "", ""] }; function re(e, t) { return u.nodeName(e, "table") && u.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e } function le(e) { return e.type = (null !== e.getAttribute("type")) + "/" + e.type, e } function ce(e) { var t = se.exec(e.type); return t ? e.type = t[1] : e.removeAttribute("type"), e } function de(e, t) { for (var i = 0, n = e.length; i < n; i++)P.set(e[i], "globalEval", !t || P.get(t[i], "globalEval")) } function he(e, t) { var i, n, s, o, a, r, l, c; if (1 === t.nodeType) { if (P.hasData(e) && (o = P.access(e), a = P.set(t, o), c = o.events)) for (s in delete a.handle, a.events = {}, c) for (i = 0, n = c[s].length; i < n; i++)u.event.add(t, s, c[s][i]); R.hasData(e) && (r = R.access(e), l = u.extend({}, r), R.set(t, l)) } } function ue(e, t) { var i = e.getElementsByTagName ? e.getElementsByTagName(t || "*") : e.querySelectorAll ? e.querySelectorAll(t || "*") : []; return void 0 === t || t && u.nodeName(e, t) ? u.merge([e], i) : i } ae.optgroup = ae.option, ae.tbody = ae.tfoot = ae.colgroup = ae.caption = ae.thead, ae.th = ae.td, u.extend({ clone: function (e, t, i) { var n, s, o, a, r, l, c, h = e.cloneNode(!0), p = u.contains(e.ownerDocument, e); if (!(d.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || u.isXMLDoc(e))) for (a = ue(h), n = 0, s = (o = ue(e)).length; n < s; n++)r = o[n], l = a[n], c = void 0, "input" === (c = l.nodeName.toLowerCase()) && W.test(r.type) ? l.checked = r.checked : "input" !== c && "textarea" !== c || (l.defaultValue = r.defaultValue); if (t) if (i) for (o = o || ue(e), a = a || ue(h), n = 0, s = o.length; n < s; n++)he(o[n], a[n]); else he(e, h); return (a = ue(h, "script")).length > 0 && de(a, !p && ue(e, "script")), h }, buildFragment: function (e, t, i, n) { for (var s, o, a, r, l, c, d = t.createDocumentFragment(), h = [], p = 0, f = e.length; p < f; p++)if ((s = e[p]) || 0 === s) if ("object" === u.type(s)) u.merge(h, s.nodeType ? [s] : s); else if (ee.test(s)) { for (o = o || d.appendChild(t.createElement("div")), a = (J.exec(s) || ["", ""])[1].toLowerCase(), r = ae[a] || ae._default, o.innerHTML = r[1] + s.replace(Z, "<$1></$2>") + r[2], c = r[0]; c--;)o = o.lastChild; u.merge(h, o.childNodes), (o = d.firstChild).textContent = "" } else h.push(t.createTextNode(s)); for (d.textContent = "", p = 0; s = h[p++];)if ((!n || -1 === u.inArray(s, n)) && (l = u.contains(s.ownerDocument, s), o = ue(d.appendChild(s), "script"), l && de(o), i)) for (c = 0; s = o[c++];)ne.test(s.type || "") && i.push(s); return d }, cleanData: function (e) { for (var t, i, n, s, o = u.event.special, a = 0; void 0 !== (i = e[a]); a++) { if (u.acceptData(i) && (s = i[P.expando]) && (t = P.cache[s])) { if (t.events) for (n in t.events) o[n] ? u.event.remove(i, n) : u.removeEvent(i, n, t.handle); P.cache[s] && delete P.cache[s] } delete R.cache[i[R.expando]] } } }), u.fn.extend({ text: function (e) { return F(this, function (e) { return void 0 === e ? u.text(this) : this.empty().each(function () { 1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = e) }) }, null, e, arguments.length) }, append: function () { return this.domManip(arguments, function (e) { 1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || re(this, e).appendChild(e) }) }, prepend: function () { return this.domManip(arguments, function (e) { if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) { var t = re(this, e); t.insertBefore(e, t.firstChild) } }) }, before: function () { return this.domManip(arguments, function (e) { this.parentNode && this.parentNode.insertBefore(e, this) }) }, after: function () { return this.domManip(arguments, function (e) { this.parentNode && this.parentNode.insertBefore(e, this.nextSibling) }) }, remove: function (e, t) { for (var i, n = e ? u.filter(e, this) : this, s = 0; null != (i = n[s]); s++)t || 1 !== i.nodeType || u.cleanData(ue(i)), i.parentNode && (t && u.contains(i.ownerDocument, i) && de(ue(i, "script")), i.parentNode.removeChild(i)); return this }, empty: function () { for (var e, t = 0; null != (e = this[t]); t++)1 === e.nodeType && (u.cleanData(ue(e, !1)), e.textContent = ""); return this }, clone: function (e, t) { return e = null != e && e, t = null == t ? e : t, this.map(function () { return u.clone(this, e, t) }) }, html: function (e) { return F(this, function (e) { var t = this[0] || {}, i = 0, n = this.length; if (void 0 === e && 1 === t.nodeType) return t.innerHTML; if ("string" == typeof e && !te.test(e) && !ae[(J.exec(e) || ["", ""])[1].toLowerCase()]) { e = e.replace(Z, "<$1></$2>"); try { for (; i < n; i++)1 === (t = this[i] || {}).nodeType && (u.cleanData(ue(t, !1)), t.innerHTML = e); t = 0 } catch (e) { } } t && this.empty().append(e) }, null, e, arguments.length) }, replaceWith: function () { var e = arguments[0]; return this.domManip(arguments, function (t) { e = this.parentNode, u.cleanData(ue(this)), e && e.replaceChild(t, this) }), e && (e.length || e.nodeType) ? this : this.remove() }, detach: function (e) { return this.remove(e, !0) }, domManip: function (e, t) { e = s.apply([], e); var i, n, o, a, r, l, c = 0, h = this.length, p = this, f = h - 1, m = e[0], g = u.isFunction(m); if (g || h > 1 && "string" == typeof m && !d.checkClone && ie.test(m)) return this.each(function (i) { var n = p.eq(i); g && (e[0] = m.call(this, i, n.html())), n.domManip(e, t) }); if (h && (n = (i = u.buildFragment(e, this[0].ownerDocument, !1, this)).firstChild, 1 === i.childNodes.length && (i = n), n)) { for (a = (o = u.map(ue(i, "script"), le)).length; c < h; c++)r = i, c !== f && (r = u.clone(r, !0, !0), a && u.merge(o, ue(r, "script"))), t.call(this[c], r, c); if (a) for (l = o[o.length - 1].ownerDocument, u.map(o, ce), c = 0; c < a; c++)r = o[c], ne.test(r.type || "") && !P.access(r, "globalEval") && u.contains(l, r) && (r.src ? u._evalUrl && u._evalUrl(r.src) : u.globalEval(r.textContent.replace(oe, ""))) } return this } }), u.each({ appendTo: "append", prependTo: "prepend", insertBefore: "before", insertAfter: "after", replaceAll: "replaceWith" }, function (e, t) { u.fn[e] = function (e) { for (var i, n = [], s = u(e), a = s.length - 1, r = 0; r <= a; r++)i = r === a ? this : this.clone(!0), u(s[r])[t](i), o.apply(n, i.get()); return this.pushStack(n) } }); var pe, fe = {}; function me(t, i) { var n, s = u(i.createElement(t)).appendTo(i.body), o = e.getDefaultComputedStyle && (n = e.getDefaultComputedStyle(s[0])) ? n.display : u.css(s[0], "display"); return s.detach(), o } function ge(e) { var t = h, i = fe[e]; return i || ("none" !== (i = me(e, t)) && i || ((t = (pe = (pe || u("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(), t.close(), i = me(e, t), pe.detach()), fe[e] = i), i } var ve = /^margin/, be = new RegExp("^(" + H + ")(?!px)[a-z%]+$", "i"), ye = function (e) { return e.ownerDocument.defaultView.getComputedStyle(e, null) }; function we(e, t, i) { var n, s, o, a, r = e.style; return (i = i || ye(e)) && (a = i.getPropertyValue(t) || i[t]), i && ("" !== a || u.contains(e.ownerDocument, e) || (a = u.style(e, t)), be.test(a) && ve.test(t) && (n = r.width, s = r.minWidth, o = r.maxWidth, r.minWidth = r.maxWidth = r.width = a, a = i.width, r.width = n, r.minWidth = s, r.maxWidth = o)), void 0 !== a ? a + "" : a } function _e(e, t) { return { get: function () { if (!e()) return (this.get = t).apply(this, arguments); delete this.get } } } !function () { var t, i, n = h.documentElement, s = h.createElement("div"), o = h.createElement("div"); function a() { o.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute", o.innerHTML = "", n.appendChild(s); var a = e.getComputedStyle(o, null); t = "1%" !== a.top, i = "4px" === a.width, n.removeChild(s) } o.style && (o.style.backgroundClip = "content-box", o.cloneNode(!0).style.backgroundClip = "", d.clearCloneStyle = "content-box" === o.style.backgroundClip, s.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute", s.appendChild(o), e.getComputedStyle && u.extend(d, { pixelPosition: function () { return a(), t }, boxSizingReliable: function () { return null == i && a(), i }, reliableMarginRight: function () { var t, i = o.appendChild(h.createElement("div")); return i.style.cssText = o.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", i.style.marginRight = i.style.width = "0", o.style.width = "1px", n.appendChild(s), t = !parseFloat(e.getComputedStyle(i, null).marginRight), n.removeChild(s), t } })) }(), u.swap = function (e, t, i, n) { var s, o, a = {}; for (o in t) a[o] = e.style[o], e.style[o] = t[o]; for (o in s = i.apply(e, n || []), t) e.style[o] = a[o]; return s }; var Ce = /^(none|table(?!-c[ea]).+)/, ke = new RegExp("^(" + H + ")(.*)$", "i"), xe = new RegExp("^([+-])=(" + H + ")", "i"), Te = { position: "absolute", visibility: "hidden", display: "block" }, $e = { letterSpacing: "0", fontWeight: "400" }, Se = ["Webkit", "O", "Moz", "ms"]; function Me(e, t) { if (t in e) return t; for (var i = t[0].toUpperCase() + t.slice(1), n = t, s = Se.length; s--;)if ((t = Se[s] + i) in e) return t; return n } function De(e, t, i) { var n = ke.exec(t); return n ? Math.max(0, n[1] - (i || 0)) + (n[2] || "px") : t } function Ee(e, t, i, n, s) { for (var o = i === (n ? "border" : "content") ? 4 : "width" === t ? 1 : 0, a = 0; o < 4; o += 2)"margin" === i && (a += u.css(e, i + q[o], !0, s)), n ? ("content" === i && (a -= u.css(e, "padding" + q[o], !0, s)), "margin" !== i && (a -= u.css(e, "border" + q[o] + "Width", !0, s))) : (a += u.css(e, "padding" + q[o], !0, s), "padding" !== i && (a += u.css(e, "border" + q[o] + "Width", !0, s))); return a } function Ae(e, t, i) { var n = !0, s = "width" === t ? e.offsetWidth : e.offsetHeight, o = ye(e), a = "border-box" === u.css(e, "boxSizing", !1, o); if (s <= 0 || null == s) { if (((s = we(e, t, o)) < 0 || null == s) && (s = e.style[t]), be.test(s)) return s; n = a && (d.boxSizingReliable() || s === e.style[t]), s = parseFloat(s) || 0 } return s + Ee(e, t, i || (a ? "border" : "content"), n, o) + "px" } function Fe(e, t) { for (var i, n, s, o = [], a = 0, r = e.length; a < r; a++)(n = e[a]).style && (o[a] = P.get(n, "olddisplay"), i = n.style.display, t ? (o[a] || "none" !== i || (n.style.display = ""), "" === n.style.display && U(n) && (o[a] = P.access(n, "olddisplay", ge(n.nodeName)))) : (s = U(n), "none" === i && s || P.set(n, "olddisplay", s ? i : u.css(n, "display")))); for (a = 0; a < r; a++)(n = e[a]).style && (t && "none" !== n.style.display && "" !== n.style.display || (n.style.display = t ? o[a] || "" : "none")); return e } function Ie(e, t, i, n, s) { return new Ie.prototype.init(e, t, i, n, s) } u.extend({ cssHooks: { opacity: { get: function (e, t) { if (t) { var i = we(e, "opacity"); return "" === i ? "1" : i } } } }, cssNumber: { columnCount: !0, fillOpacity: !0, flexGrow: !0, flexShrink: !0, fontWeight: !0, lineHeight: !0, opacity: !0, order: !0, orphans: !0, widows: !0, zIndex: !0, zoom: !0 }, cssProps: { float: "cssFloat" }, style: function (e, t, i, n) { if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) { var s, o, a, r = u.camelCase(t), l = e.style; if (t = u.cssProps[r] || (u.cssProps[r] = Me(l, r)), a = u.cssHooks[t] || u.cssHooks[r], void 0 === i) return a && "get" in a && void 0 !== (s = a.get(e, !1, n)) ? s : l[t]; "string" === (o = typeof i) && (s = xe.exec(i)) && (i = (s[1] + 1) * s[2] + parseFloat(u.css(e, t)), o = "number"), null != i && i == i && ("number" !== o || u.cssNumber[r] || (i += "px"), d.clearCloneStyle || "" !== i || 0 !== t.indexOf("background") || (l[t] = "inherit"), a && "set" in a && void 0 === (i = a.set(e, i, n)) || (l[t] = i)) } }, css: function (e, t, i, n) { var s, o, a, r = u.camelCase(t); return t = u.cssProps[r] || (u.cssProps[r] = Me(e.style, r)), (a = u.cssHooks[t] || u.cssHooks[r]) && "get" in a && (s = a.get(e, !0, i)), void 0 === s && (s = we(e, t, n)), "normal" === s && t in $e && (s = $e[t]), "" === i || i ? (o = parseFloat(s), !0 === i || u.isNumeric(o) ? o || 0 : s) : s } }), u.each(["height", "width"], function (e, t) { u.cssHooks[t] = { get: function (e, i, n) { if (i) return Ce.test(u.css(e, "display")) && 0 === e.offsetWidth ? u.swap(e, Te, function () { return Ae(e, t, n) }) : Ae(e, t, n) }, set: function (e, i, n) { var s = n && ye(e); return De(0, i, n ? Ee(e, t, n, "border-box" === u.css(e, "boxSizing", !1, s), s) : 0) } } }), u.cssHooks.marginRight = _e(d.reliableMarginRight, function (e, t) { if (t) return u.swap(e, { display: "inline-block" }, we, [e, "marginRight"]) }), u.each({ margin: "", padding: "", border: "Width" }, function (e, t) { u.cssHooks[e + t] = { expand: function (i) { for (var n = 0, s = {}, o = "string" == typeof i ? i.split(" ") : [i]; n < 4; n++)s[e + q[n] + t] = o[n] || o[n - 2] || o[0]; return s } }, ve.test(e) || (u.cssHooks[e + t].set = De) }), u.fn.extend({ css: function (e, t) { return F(this, function (e, t, i) { var n, s, o = {}, a = 0; if (u.isArray(t)) { for (n = ye(e), s = t.length; a < s; a++)o[t[a]] = u.css(e, t[a], !1, n); return o } return void 0 !== i ? u.style(e, t, i) : u.css(e, t) }, e, t, arguments.length > 1) }, show: function () { return Fe(this, !0) }, hide: function () { return Fe(this) }, toggle: function (e) { return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function () { U(this) ? u(this).show() : u(this).hide() }) } }), u.Tween = Ie, Ie.prototype = { constructor: Ie, init: function (e, t, i, n, s, o) { this.elem = e, this.prop = i, this.easing = s || "swing", this.options = t, this.start = this.now = this.cur(), this.end = n, this.unit = o || (u.cssNumber[i] ? "" : "px") }, cur: function () { var e = Ie.propHooks[this.prop]; return e && e.get ? e.get(this) : Ie.propHooks._default.get(this) }, run: function (e) { var t, i = Ie.propHooks[this.prop]; return this.options.duration ? this.pos = t = u.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), i && i.set ? i.set(this) : Ie.propHooks._default.set(this), this } }, Ie.prototype.init.prototype = Ie.prototype, Ie.propHooks = { _default: { get: function (e) { var t; return null == e.elem[e.prop] || e.elem.style && null != e.elem.style[e.prop] ? (t = u.css(e.elem, e.prop, "")) && "auto" !== t ? t : 0 : e.elem[e.prop] }, set: function (e) { u.fx.step[e.prop] ? u.fx.step[e.prop](e) : e.elem.style && (null != e.elem.style[u.cssProps[e.prop]] || u.cssHooks[e.prop]) ? u.style(e.elem, e.prop, e.now + e.unit) : e.elem[e.prop] = e.now } } }, Ie.propHooks.scrollTop = Ie.propHooks.scrollLeft = { set: function (e) { e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now) } }, u.easing = { linear: function (e) { return e }, swing: function (e) { return .5 - Math.cos(e * Math.PI) / 2 } }, u.fx = Ie.prototype.init, u.fx.step = {}; var Pe, Re, Oe = /^(?:toggle|show|hide)$/, Le = new RegExp("^(?:([+-])=|)(" + H + ")([a-z%]*)$", "i"), je = /queueHooks$/, Ne = [function (e, t, i) { var n, s, o, a, r, l, c, d = this, h = {}, p = e.style, f = e.nodeType && U(e), m = P.get(e, "fxshow"); i.queue || (null == (r = u._queueHooks(e, "fx")).unqueued && (r.unqueued = 0, l = r.empty.fire, r.empty.fire = function () { r.unqueued || l() }), r.unqueued++, d.always(function () { d.always(function () { r.unqueued--, u.queue(e, "fx").length || r.empty.fire() }) })); 1 === e.nodeType && ("height" in t || "width" in t) && (i.overflow = [p.overflow, p.overflowX, p.overflowY], c = u.css(e, "display"), "inline" === ("none" === c ? P.get(e, "olddisplay") || ge(e.nodeName) : c) && "none" === u.css(e, "float") && (p.display = "inline-block")); i.overflow && (p.overflow = "hidden", d.always(function () { p.overflow = i.overflow[0], p.overflowX = i.overflow[1], p.overflowY = i.overflow[2] })); for (n in t) if (s = t[n], Oe.exec(s)) { if (delete t[n], o = o || "toggle" === s, s === (f ? "hide" : "show")) { if ("show" !== s || !m || void 0 === m[n]) continue; f = !0 } h[n] = m && m[n] || u.style(e, n) } else c = void 0; if (u.isEmptyObject(h)) "inline" === ("none" === c ? ge(e.nodeName) : c) && (p.display = c); else for (n in m ? "hidden" in m && (f = m.hidden) : m = P.access(e, "fxshow", {}), o && (m.hidden = !f), f ? u(e).show() : d.done(function () { u(e).hide() }), d.done(function () { var t; for (t in P.remove(e, "fxshow"), h) u.style(e, t, h[t]) }), h) a = Ue(f ? m[n] : 0, n, d), n in m || (m[n] = a.start, f && (a.end = a.start, a.start = "width" === n || "height" === n ? 1 : 0)) }], ze = { "*": [function (e, t) { var i = this.createTween(e, t), n = i.cur(), s = Le.exec(t), o = s && s[3] || (u.cssNumber[e] ? "" : "px"), a = (u.cssNumber[e] || "px" !== o && +n) && Le.exec(u.css(i.elem, e)), r = 1, l = 20; if (a && a[3] !== o) { o = o || a[3], s = s || [], a = +n || 1; do { a /= r = r || ".5", u.style(i.elem, e, a + o) } while (r !== (r = i.cur() / n) && 1 !== r && --l) } return s && (a = i.start = +a || +n || 0, i.unit = o, i.end = s[1] ? a + (s[1] + 1) * s[2] : +s[2]), i }] }; function He() { return setTimeout(function () { Pe = void 0 }), Pe = u.now() } function qe(e, t) { var i, n = 0, s = { height: e }; for (t = t ? 1 : 0; n < 4; n += 2 - t)s["margin" + (i = q[n])] = s["padding" + i] = e; return t && (s.opacity = s.width = e), s } function Ue(e, t, i) { for (var n, s = (ze[t] || []).concat(ze["*"]), o = 0, a = s.length; o < a; o++)if (n = s[o].call(i, t, e)) return n } function We(e, t, i) { var n, s, o = 0, a = Ne.length, r = u.Deferred().always(function () { delete l.elem }), l = function () { if (s) return !1; for (var t = Pe || He(), i = Math.max(0, c.startTime + c.duration - t), n = 1 - (i / c.duration || 0), o = 0, a = c.tweens.length; o < a; o++)c.tweens[o].run(n); return r.notifyWith(e, [c, n, i]), n < 1 && a ? i : (r.resolveWith(e, [c]), !1) }, c = r.promise({ elem: e, props: u.extend({}, t), opts: u.extend(!0, { specialEasing: {} }, i), originalProperties: t, originalOptions: i, startTime: Pe || He(), duration: i.duration, tweens: [], createTween: function (t, i) { var n = u.Tween(e, c.opts, t, i, c.opts.specialEasing[t] || c.opts.easing); return c.tweens.push(n), n }, stop: function (t) { var i = 0, n = t ? c.tweens.length : 0; if (s) return this; for (s = !0; i < n; i++)c.tweens[i].run(1); return t ? r.resolveWith(e, [c, t]) : r.rejectWith(e, [c, t]), this } }), d = c.props; for (!function (e, t) { var i, n, s, o, a; for (i in e) if (s = t[n = u.camelCase(i)], o = e[i], u.isArray(o) && (s = o[1], o = e[i] = o[0]), i !== n && (e[n] = o, delete e[i]), (a = u.cssHooks[n]) && "expand" in a) for (i in o = a.expand(o), delete e[n], o) i in e || (e[i] = o[i], t[i] = s); else t[n] = s }(d, c.opts.specialEasing); o < a; o++)if (n = Ne[o].call(c, e, d, c.opts)) return n; return u.map(d, Ue, c), u.isFunction(c.opts.start) && c.opts.start.call(e, c), u.fx.timer(u.extend(l, { elem: e, anim: c, queue: c.opts.queue })), c.progress(c.opts.progress).done(c.opts.done, c.opts.complete).fail(c.opts.fail).always(c.opts.always) } u.Animation = u.extend(We, { tweener: function (e, t) { u.isFunction(e) ? (t = e, e = ["*"]) : e = e.split(" "); for (var i, n = 0, s = e.length; n < s; n++)i = e[n], ze[i] = ze[i] || [], ze[i].unshift(t) }, prefilter: function (e, t) { t ? Ne.unshift(e) : Ne.push(e) } }), u.speed = function (e, t, i) { var n = e && "object" == typeof e ? u.extend({}, e) : { complete: i || !i && t || u.isFunction(e) && e, duration: e, easing: i && t || t && !u.isFunction(t) && t }; return n.duration = u.fx.off ? 0 : "number" == typeof n.duration ? n.duration : n.duration in u.fx.speeds ? u.fx.speeds[n.duration] : u.fx.speeds._default, null != n.queue && !0 !== n.queue || (n.queue = "fx"), n.old = n.complete, n.complete = function () { u.isFunction(n.old) && n.old.call(this), n.queue && u.dequeue(this, n.queue) }, n }, u.fn.extend({ fadeTo: function (e, t, i, n) { return this.filter(U).css("opacity", 0).show().end().animate({ opacity: t }, e, i, n) }, animate: function (e, t, i, n) { var s = u.isEmptyObject(e), o = u.speed(t, i, n), a = function () { var t = We(this, u.extend({}, e), o); (s || P.get(this, "finish")) && t.stop(!0) }; return a.finish = a, s || !1 === o.queue ? this.each(a) : this.queue(o.queue, a) }, stop: function (e, t, i) { var n = function (e) { var t = e.stop; delete e.stop, t(i) }; return "string" != typeof e && (i = t, t = e, e = void 0), t && !1 !== e && this.queue(e || "fx", []), this.each(function () { var t = !0, s = null != e && e + "queueHooks", o = u.timers, a = P.get(this); if (s) a[s] && a[s].stop && n(a[s]); else for (s in a) a[s] && a[s].stop && je.test(s) && n(a[s]); for (s = o.length; s--;)o[s].elem !== this || null != e && o[s].queue !== e || (o[s].anim.stop(i), t = !1, o.splice(s, 1)); !t && i || u.dequeue(this, e) }) }, finish: function (e) { return !1 !== e && (e = e || "fx"), this.each(function () { var t, i = P.get(this), n = i[e + "queue"], s = i[e + "queueHooks"], o = u.timers, a = n ? n.length : 0; for (i.finish = !0, u.queue(this, e, []), s && s.stop && s.stop.call(this, !0), t = o.length; t--;)o[t].elem === this && o[t].queue === e && (o[t].anim.stop(!0), o.splice(t, 1)); for (t = 0; t < a; t++)n[t] && n[t].finish && n[t].finish.call(this); delete i.finish }) } }), u.each(["toggle", "show", "hide"], function (e, t) { var i = u.fn[t]; u.fn[t] = function (e, n, s) { return null == e || "boolean" == typeof e ? i.apply(this, arguments) : this.animate(qe(t, !0), e, n, s) } }), u.each({ slideDown: qe("show"), slideUp: qe("hide"), slideToggle: qe("toggle"), fadeIn: { opacity: "show" }, fadeOut: { opacity: "hide" }, fadeToggle: { opacity: "toggle" } }, function (e, t) { u.fn[e] = function (e, i, n) { return this.animate(t, e, i, n) } }), u.timers = [], u.fx.tick = function () { var e, t = 0, i = u.timers; for (Pe = u.now(); t < i.length; t++)(e = i[t])() || i[t] !== e || i.splice(t--, 1); i.length || u.fx.stop(), Pe = void 0 }, u.fx.timer = function (e) { u.timers.push(e), e() ? u.fx.start() : u.timers.pop() }, u.fx.interval = 13, u.fx.start = function () { Re || (Re = setInterval(u.fx.tick, u.fx.interval)) }, u.fx.stop = function () { clearInterval(Re), Re = null }, u.fx.speeds = { slow: 600, fast: 200, _default: 400 }, u.fn.delay = function (e, t) { return e = u.fx && u.fx.speeds[e] || e, t = t || "fx", this.queue(t, function (t, i) { var n = setTimeout(t, e); i.stop = function () { clearTimeout(n) } }) }, function () { var e = h.createElement("input"), t = h.createElement("select"), i = t.appendChild(h.createElement("option")); e.type = "checkbox", d.checkOn = "" !== e.value, d.optSelected = i.selected, t.disabled = !0, d.optDisabled = !i.disabled, (e = h.createElement("input")).value = "t", e.type = "radio", d.radioValue = "t" === e.value }(); var Be, Ve = u.expr.attrHandle; u.fn.extend({ attr: function (e, t) { return F(this, u.attr, e, t, arguments.length > 1) }, removeAttr: function (e) { return this.each(function () { u.removeAttr(this, e) }) } }), u.extend({ attr: function (e, t, i) { var n, s, o = e.nodeType; if (e && 3 !== o && 8 !== o && 2 !== o) return void 0 === e.getAttribute ? u.prop(e, t, i) : (1 === o && u.isXMLDoc(e) || (t = t.toLowerCase(), n = u.attrHooks[t] || (u.expr.match.bool.test(t) ? Be : void 0)), void 0 === i ? n && "get" in n && null !== (s = n.get(e, t)) ? s : null == (s = u.find.attr(e, t)) ? void 0 : s : null !== i ? n && "set" in n && void 0 !== (s = n.set(e, i, t)) ? s : (e.setAttribute(t, i + ""), i) : void u.removeAttr(e, t)) }, removeAttr: function (e, t) { var i, n, s = 0, o = t && t.match(D); if (o && 1 === e.nodeType) for (; i = o[s++];)n = u.propFix[i] || i, u.expr.match.bool.test(i) && (e[n] = !1), e.removeAttribute(i) }, attrHooks: { type: { set: function (e, t) { if (!d.radioValue && "radio" === t && u.nodeName(e, "input")) { var i = e.value; return e.setAttribute("type", t), i && (e.value = i), t } } } } }), Be = { set: function (e, t, i) { return !1 === t ? u.removeAttr(e, i) : e.setAttribute(i, i), i } }, u.each(u.expr.match.bool.source.match(/\w+/g), function (e, t) { var i = Ve[t] || u.find.attr; Ve[t] = function (e, t, n) { var s, o; return n || (o = Ve[t], Ve[t] = s, s = null != i(e, t, n) ? t.toLowerCase() : null, Ve[t] = o), s } }); var Ge = /^(?:input|select|textarea|button)$/i; u.fn.extend({ prop: function (e, t) { return F(this, u.prop, e, t, arguments.length > 1) }, removeProp: function (e) { return this.each(function () { delete this[u.propFix[e] || e] }) } }), u.extend({ propFix: { for: "htmlFor", class: "className" }, prop: function (e, t, i) { var n, s, o = e.nodeType; if (e && 3 !== o && 8 !== o && 2 !== o) return (1 !== o || !u.isXMLDoc(e)) && (t = u.propFix[t] || t, s = u.propHooks[t]), void 0 !== i ? s && "set" in s && void 0 !== (n = s.set(e, i, t)) ? n : e[t] = i : s && "get" in s && null !== (n = s.get(e, t)) ? n : e[t] }, propHooks: { tabIndex: { get: function (e) { return e.hasAttribute("tabindex") || Ge.test(e.nodeName) || e.href ? e.tabIndex : -1 } } } }), d.optSelected || (u.propHooks.selected = { get: function (e) { var t = e.parentNode; return t && t.parentNode && t.parentNode.selectedIndex, null } }), u.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function () { u.propFix[this.toLowerCase()] = this }); var Ye = /[\t\r\n\f]/g; u.fn.extend({ addClass: function (e) { var t, i, n, s, o, a, r = "string" == typeof e && e, l = 0, c = this.length; if (u.isFunction(e)) return this.each(function (t) { u(this).addClass(e.call(this, t, this.className)) }); if (r) for (t = (e || "").match(D) || []; l < c; l++)if (n = 1 === (i = this[l]).nodeType && (i.className ? (" " + i.className + " ").replace(Ye, " ") : " ")) { for (o = 0; s = t[o++];)n.indexOf(" " + s + " ") < 0 && (n += s + " "); a = u.trim(n), i.className !== a && (i.className = a) } return this }, removeClass: function (e) { var t, i, n, s, o, a, r = 0 === arguments.length || "string" == typeof e && e, l = 0, c = this.length; if (u.isFunction(e)) return this.each(function (t) { u(this).removeClass(e.call(this, t, this.className)) }); if (r) for (t = (e || "").match(D) || []; l < c; l++)if (n = 1 === (i = this[l]).nodeType && (i.className ? (" " + i.className + " ").replace(Ye, " ") : "")) { for (o = 0; s = t[o++];)for (; n.indexOf(" " + s + " ") >= 0;)n = n.replace(" " + s + " ", " "); a = e ? u.trim(n) : "", i.className !== a && (i.className = a) } return this }, toggleClass: function (e, t) { var i = typeof e; return "boolean" == typeof t && "string" === i ? t ? this.addClass(e) : this.removeClass(e) : u.isFunction(e) ? this.each(function (i) { u(this).toggleClass(e.call(this, i, this.className, t), t) }) : this.each(function () { if ("string" === i) for (var t, n = 0, s = u(this), o = e.match(D) || []; t = o[n++];)s.hasClass(t) ? s.removeClass(t) : s.addClass(t); else "undefined" !== i && "boolean" !== i || (this.className && P.set(this, "__className__", this.className), this.className = this.className || !1 === e ? "" : P.get(this, "__className__") || "") }) }, hasClass: function (e) { for (var t = " " + e + " ", i = 0, n = this.length; i < n; i++)if (1 === this[i].nodeType && (" " + this[i].className + " ").replace(Ye, " ").indexOf(t) >= 0) return !0; return !1 } }); var Qe = /\r/g; u.fn.extend({ val: function (e) { var t, i, n, s = this[0]; return arguments.length ? (n = u.isFunction(e), this.each(function (i) { var s; 1 === this.nodeType && (null == (s = n ? e.call(this, i, u(this).val()) : e) ? s = "" : "number" == typeof s ? s += "" : u.isArray(s) && (s = u.map(s, function (e) { return null == e ? "" : e + "" })), (t = u.valHooks[this.type] || u.valHooks[this.nodeName.toLowerCase()]) && "set" in t && void 0 !== t.set(this, s, "value") || (this.value = s)) })) : s ? (t = u.valHooks[s.type] || u.valHooks[s.nodeName.toLowerCase()]) && "get" in t && void 0 !== (i = t.get(s, "value")) ? i : "string" == typeof (i = s.value) ? i.replace(Qe, "") : null == i ? "" : i : void 0 } }), u.extend({ valHooks: { option: { get: function (e) { var t = u.find.attr(e, "value"); return null != t ? t : u.trim(u.text(e)) } }, select: { get: function (e) { for (var t, i, n = e.options, s = e.selectedIndex, o = "select-one" === e.type || s < 0, a = o ? null : [], r = o ? s + 1 : n.length, l = s < 0 ? r : o ? s : 0; l < r; l++)if (((i = n[l]).selected || l === s) && (d.optDisabled ? !i.disabled : null === i.getAttribute("disabled")) && (!i.parentNode.disabled || !u.nodeName(i.parentNode, "optgroup"))) { if (t = u(i).val(), o) return t; a.push(t) } return a }, set: function (e, t) { for (var i, n, s = e.options, o = u.makeArray(t), a = s.length; a--;)((n = s[a]).selected = u.inArray(n.value, o) >= 0) && (i = !0); return i || (e.selectedIndex = -1), o } } } }), u.each(["radio", "checkbox"], function () { u.valHooks[this] = { set: function (e, t) { if (u.isArray(t)) return e.checked = u.inArray(u(e).val(), t) >= 0 } }, d.checkOn || (u.valHooks[this].get = function (e) { return null === e.getAttribute("value") ? "on" : e.value }) }), u.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function (e, t) { u.fn[t] = function (e, i) { return arguments.length > 0 ? this.on(t, null, e, i) : this.trigger(t) } }), u.fn.extend({ hover: function (e, t) { return this.mouseenter(e).mouseleave(t || e) }, bind: function (e, t, i) { return this.on(e, null, t, i) }, unbind: function (e, t) { return this.off(e, null, t) }, delegate: function (e, t, i, n) { return this.on(t, e, i, n) }, undelegate: function (e, t, i) { return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", i) } }); var Ke = u.now(), Xe = /\?/; u.parseJSON = function (e) { return JSON.parse(e + "") }, u.parseXML = function (e) { var t; if (!e || "string" != typeof e) return null; try { t = (new DOMParser).parseFromString(e, "text/xml") } catch (e) { t = void 0 } return t && !t.getElementsByTagName("parsererror").length || u.error("Invalid XML: " + e), t }; var Ze, Je, et = /#.*$/, tt = /([?&])_=[^&]*/, it = /^(.*?):[ \t]*([^\r\n]*)$/gm, nt = /^(?:GET|HEAD)$/, st = /^\/\//, ot = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/, at = {}, rt = {}, lt = "*/".concat("*"); try { Je = location.href } catch (e) { (Je = h.createElement("a")).href = "", Je = Je.href } function ct(e) { return function (t, i) { "string" != typeof t && (i = t, t = "*"); var n, s = 0, o = t.toLowerCase().match(D) || []; if (u.isFunction(i)) for (; n = o[s++];)"+" === n[0] ? (n = n.slice(1) || "*", (e[n] = e[n] || []).unshift(i)) : (e[n] = e[n] || []).push(i) } } function dt(e, t, i, n) { var s = {}, o = e === rt; function a(r) { var l; return s[r] = !0, u.each(e[r] || [], function (e, r) { var c = r(t, i, n); return "string" != typeof c || o || s[c] ? o ? !(l = c) : void 0 : (t.dataTypes.unshift(c), a(c), !1) }), l } return a(t.dataTypes[0]) || !s["*"] && a("*") } function ht(e, t) { var i, n, s = u.ajaxSettings.flatOptions || {}; for (i in t) void 0 !== t[i] && ((s[i] ? e : n || (n = {}))[i] = t[i]); return n && u.extend(!0, e, n), e } Ze = ot.exec(Je.toLowerCase()) || [], u.extend({ active: 0, lastModified: {}, etag: {}, ajaxSettings: { url: Je, type: "GET", isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ze[1]), global: !0, processData: !0, async: !0, contentType: "application/x-www-form-urlencoded; charset=UTF-8", accepts: { "*": lt, text: "text/plain", html: "text/html", xml: "application/xml, text/xml", json: "application/json, text/javascript" }, contents: { xml: /xml/, html: /html/, json: /json/ }, responseFields: { xml: "responseXML", text: "responseText", json: "responseJSON" }, converters: { "* text": String, "text html": !0, "text json": u.parseJSON, "text xml": u.parseXML }, flatOptions: { url: !0, context: !0 } }, ajaxSetup: function (e, t) { return t ? ht(ht(e, u.ajaxSettings), t) : ht(u.ajaxSettings, e) }, ajaxPrefilter: ct(at), ajaxTransport: ct(rt), ajax: function (e, t) { "object" == typeof e && (t = e, e = void 0), t = t || {}; var i, n, s, o, a, r, l, c, d = u.ajaxSetup({}, t), h = d.context || d, p = d.context && (h.nodeType || h.jquery) ? u(h) : u.event, f = u.Deferred(), m = u.Callbacks("once memory"), g = d.statusCode || {}, v = {}, b = {}, y = 0, w = "canceled", _ = { readyState: 0, getResponseHeader: function (e) { var t; if (2 === y) { if (!o) for (o = {}; t = it.exec(s);)o[t[1].toLowerCase()] = t[2]; t = o[e.toLowerCase()] } return null == t ? null : t }, getAllResponseHeaders: function () { return 2 === y ? s : null }, setRequestHeader: function (e, t) { var i = e.toLowerCase(); return y || (e = b[i] = b[i] || e, v[e] = t), this }, overrideMimeType: function (e) { return y || (d.mimeType = e), this }, statusCode: function (e) { var t; if (e) if (y < 2) for (t in e) g[t] = [g[t], e[t]]; else _.always(e[_.status]); return this }, abort: function (e) { var t = e || w; return i && i.abort(t), C(0, t), this } }; if (f.promise(_).complete = m.add, _.success = _.done, _.error = _.fail, d.url = ((e || d.url || Je) + "").replace(et, "").replace(st, Ze[1] + "//"), d.type = t.method || t.type || d.method || d.type, d.dataTypes = u.trim(d.dataType || "*").toLowerCase().match(D) || [""], null == d.crossDomain && (r = ot.exec(d.url.toLowerCase()), d.crossDomain = !(!r || r[1] === Ze[1] && r[2] === Ze[2] && (r[3] || ("http:" === r[1] ? "80" : "443")) === (Ze[3] || ("http:" === Ze[1] ? "80" : "443")))), d.data && d.processData && "string" != typeof d.data && (d.data = u.param(d.data, d.traditional)), dt(at, d, t, _), 2 === y) return _; for (c in (l = d.global) && 0 == u.active++ && u.event.trigger("ajaxStart"), d.type = d.type.toUpperCase(), d.hasContent = !nt.test(d.type), n = d.url, d.hasContent || (d.data && (n = d.url += (Xe.test(n) ? "&" : "?") + d.data, delete d.data), !1 === d.cache && (d.url = tt.test(n) ? n.replace(tt, "$1_=" + Ke++) : n + (Xe.test(n) ? "&" : "?") + "_=" + Ke++)), d.ifModified && (u.lastModified[n] && _.setRequestHeader("If-Modified-Since", u.lastModified[n]), u.etag[n] && _.setRequestHeader("If-None-Match", u.etag[n])), (d.data && d.hasContent && !1 !== d.contentType || t.contentType) && _.setRequestHeader("Content-Type", d.contentType), _.setRequestHeader("Accept", d.dataTypes[0] && d.accepts[d.dataTypes[0]] ? d.accepts[d.dataTypes[0]] + ("*" !== d.dataTypes[0] ? ", " + lt + "; q=0.01" : "") : d.accepts["*"]), d.headers) _.setRequestHeader(c, d.headers[c]); if (d.beforeSend && (!1 === d.beforeSend.call(h, _, d) || 2 === y)) return _.abort(); for (c in w = "abort", { success: 1, error: 1, complete: 1 }) _[c](d[c]); if (i = dt(rt, d, t, _)) { _.readyState = 1, l && p.trigger("ajaxSend", [_, d]), d.async && d.timeout > 0 && (a = setTimeout(function () { _.abort("timeout") }, d.timeout)); try { y = 1, i.send(v, C) } catch (e) { if (!(y < 2)) throw e; C(-1, e) } } else C(-1, "No Transport"); function C(e, t, o, r) { var c, v, b, w, C, k = t; 2 !== y && (y = 2, a && clearTimeout(a), i = void 0, s = r || "", _.readyState = e > 0 ? 4 : 0, c = e >= 200 && e < 300 || 304 === e, o && (w = function (e, t, i) { for (var n, s, o, a, r = e.contents, l = e.dataTypes; "*" === l[0];)l.shift(), void 0 === n && (n = e.mimeType || t.getResponseHeader("Content-Type")); if (n) for (s in r) if (r[s] && r[s].test(n)) { l.unshift(s); break } if (l[0] in i) o = l[0]; else { for (s in i) { if (!l[0] || e.converters[s + " " + l[0]]) { o = s; break } a || (a = s) } o = o || a } if (o) return o !== l[0] && l.unshift(o), i[o] }(d, _, o)), w = function (e, t, i, n) { var s, o, a, r, l, c = {}, d = e.dataTypes.slice(); if (d[1]) for (a in e.converters) c[a.toLowerCase()] = e.converters[a]; for (o = d.shift(); o;)if (e.responseFields[o] && (i[e.responseFields[o]] = t), !l && n && e.dataFilter && (t = e.dataFilter(t, e.dataType)), l = o, o = d.shift()) if ("*" === o) o = l; else if ("*" !== l && l !== o) { if (!(a = c[l + " " + o] || c["* " + o])) for (s in c) if ((r = s.split(" "))[1] === o && (a = c[l + " " + r[0]] || c["* " + r[0]])) { !0 === a ? a = c[s] : !0 !== c[s] && (o = r[0], d.unshift(r[1])); break } if (!0 !== a) if (a && e.throws) t = a(t); else try { t = a(t) } catch (e) { return { state: "parsererror", error: a ? e : "No conversion from " + l + " to " + o } } } return { state: "success", data: t } }(d, w, _, c), c ? (d.ifModified && ((C = _.getResponseHeader("Last-Modified")) && (u.lastModified[n] = C), (C = _.getResponseHeader("etag")) && (u.etag[n] = C)), 204 === e || "HEAD" === d.type ? k = "nocontent" : 304 === e ? k = "notmodified" : (k = w.state, v = w.data, c = !(b = w.error))) : (b = k, !e && k || (k = "error", e < 0 && (e = 0))), _.status = e, _.statusText = (t || k) + "", c ? f.resolveWith(h, [v, k, _]) : f.rejectWith(h, [_, k, b]), _.statusCode(g), g = void 0, l && p.trigger(c ? "ajaxSuccess" : "ajaxError", [_, d, c ? v : b]), m.fireWith(h, [_, k]), l && (p.trigger("ajaxComplete", [_, d]), --u.active || u.event.trigger("ajaxStop"))) } return _ }, getJSON: function (e, t, i) { return u.get(e, t, i, "json") }, getScript: function (e, t) { return u.get(e, void 0, t, "script") } }), u.each(["get", "post"], function (e, t) { u[t] = function (e, i, n, s) { return u.isFunction(i) && (s = s || n, n = i, i = void 0), u.ajax({ url: e, type: t, dataType: s, data: i, success: n }) } }), u.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function (e, t) { u.fn[t] = function (e) { return this.on(t, e) } }), u._evalUrl = function (e) { return u.ajax({ url: e, type: "GET", dataType: "script", async: !1, global: !1, throws: !0 }) }, u.fn.extend({ wrapAll: function (e) { var t; return u.isFunction(e) ? this.each(function (t) { u(this).wrapAll(e.call(this, t)) }) : (this[0] && (t = u(e, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), t.map(function () { for (var e = this; e.firstElementChild;)e = e.firstElementChild; return e }).append(this)), this) }, wrapInner: function (e) { return u.isFunction(e) ? this.each(function (t) { u(this).wrapInner(e.call(this, t)) }) : this.each(function () { var t = u(this), i = t.contents(); i.length ? i.wrapAll(e) : t.append(e) }) }, wrap: function (e) { var t = u.isFunction(e); return this.each(function (i) { u(this).wrapAll(t ? e.call(this, i) : e) }) }, unwrap: function () { return this.parent().each(function () { u.nodeName(this, "body") || u(this).replaceWith(this.childNodes) }).end() } }), u.expr.filters.hidden = function (e) { return e.offsetWidth <= 0 && e.offsetHeight <= 0 }, u.expr.filters.visible = function (e) { return !u.expr.filters.hidden(e) }; var ut = /%20/g, pt = /\[\]$/, ft = /\r?\n/g, mt = /^(?:submit|button|image|reset|file)$/i, gt = /^(?:input|select|textarea|keygen)/i; function vt(e, t, i, n) { var s; if (u.isArray(t)) u.each(t, function (t, s) { i || pt.test(e) ? n(e, s) : vt(e + "[" + ("object" == typeof s ? t : "") + "]", s, i, n) }); else if (i || "object" !== u.type(t)) n(e, t); else for (s in t) vt(e + "[" + s + "]", t[s], i, n) } u.param = function (e, t) { var i, n = [], s = function (e, t) { t = u.isFunction(t) ? t() : null == t ? "" : t, n[n.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t) }; if (void 0 === t && (t = u.ajaxSettings && u.ajaxSettings.traditional), u.isArray(e) || e.jquery && !u.isPlainObject(e)) u.each(e, function () { s(this.name, this.value) }); else for (i in e) vt(i, e[i], t, s); return n.join("&").replace(ut, "+") }, u.fn.extend({ serialize: function () { return u.param(this.serializeArray()) }, serializeArray: function () { return this.map(function () { var e = u.prop(this, "elements"); return e ? u.makeArray(e) : this }).filter(function () { var e = this.type; return this.name && !u(this).is(":disabled") && gt.test(this.nodeName) && !mt.test(e) && (this.checked || !W.test(e)) }).map(function (e, t) { var i = u(this).val(); return null == i ? null : u.isArray(i) ? u.map(i, function (e) { return { name: t.name, value: e.replace(ft, "\r\n") } }) : { name: t.name, value: i.replace(ft, "\r\n") } }).get() } }), u.ajaxSettings.xhr = function () { try { return new XMLHttpRequest } catch (e) { } }; var bt = 0, yt = {}, wt = { 0: 200, 1223: 204 }, _t = u.ajaxSettings.xhr(); e.ActiveXObject && u(e).on("unload", function () { for (var e in yt) yt[e]() }), d.cors = !!_t && "withCredentials" in _t, d.ajax = _t = !!_t, u.ajaxTransport(function (e) { var t; if (d.cors || _t && !e.crossDomain) return { send: function (i, n) { var s, o = e.xhr(), a = ++bt; if (o.open(e.type, e.url, e.async, e.username, e.password), e.xhrFields) for (s in e.xhrFields) o[s] = e.xhrFields[s]; for (s in e.mimeType && o.overrideMimeType && o.overrideMimeType(e.mimeType), e.crossDomain || i["X-Requested-With"] || (i["X-Requested-With"] = "XMLHttpRequest"), i) o.setRequestHeader(s, i[s]); t = function (e) { return function () { t && (delete yt[a], t = o.onload = o.onerror = null, "abort" === e ? o.abort() : "error" === e ? n(o.status, o.statusText) : n(wt[o.status] || o.status, o.statusText, "string" == typeof o.responseText ? { text: o.responseText } : void 0, o.getAllResponseHeaders())) } }, o.onload = t(), o.onerror = t("error"), t = yt[a] = t("abort"); try { o.send(e.hasContent && e.data || null) } catch (e) { if (t) throw e } }, abort: function () { t && t() } } }), u.ajaxSetup({ accepts: { script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript" }, contents: { script: /(?:java|ecma)script/ }, converters: { "text script": function (e) { return u.globalEval(e), e } } }), u.ajaxPrefilter("script", function (e) { void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET") }), u.ajaxTransport("script", function (e) { var t, i; if (e.crossDomain) return { send: function (n, s) { t = u("<script>").prop({ async: !0, charset: e.scriptCharset, src: e.url }).on("load error", i = function (e) { t.remove(), i = null, e && s("error" === e.type ? 404 : 200, e.type) }), h.head.appendChild(t[0]) }, abort: function () { i && i() } } }); var Ct = [], kt = /(=)\?(?=&|$)|\?\?/; u.ajaxSetup({ jsonp: "callback", jsonpCallback: function () { var e = Ct.pop() || u.expando + "_" + Ke++; return this[e] = !0, e } }), u.ajaxPrefilter("json jsonp", function (t, i, n) { var s, o, a, r = !1 !== t.jsonp && (kt.test(t.url) ? "url" : "string" == typeof t.data && !(t.contentType || "").indexOf("application/x-www-form-urlencoded") && kt.test(t.data) && "data"); if (r || "jsonp" === t.dataTypes[0]) return s = t.jsonpCallback = u.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback, r ? t[r] = t[r].replace(kt, "$1" + s) : !1 !== t.jsonp && (t.url += (Xe.test(t.url) ? "&" : "?") + t.jsonp + "=" + s), t.converters["script json"] = function () { return a || u.error(s + " was not called"), a[0] }, t.dataTypes[0] = "json", o = e[s], e[s] = function () { a = arguments }, n.always(function () { e[s] = o, t[s] && (t.jsonpCallback = i.jsonpCallback, Ct.push(s)), a && u.isFunction(o) && o(a[0]), a = o = void 0 }), "script" }), u.parseHTML = function (e, t, i) { if (!e || "string" != typeof e) return null; "boolean" == typeof t && (i = t, t = !1), t = t || h; var n = w.exec(e), s = !i && []; return n ? [t.createElement(n[1])] : (n = u.buildFragment([e], t, s), s && s.length && u(s).remove(), u.merge([], n.childNodes)) }; var xt = u.fn.load; u.fn.load = function (e, t, i) { if ("string" != typeof e && xt) return xt.apply(this, arguments); var n, s, o, a = this, r = e.indexOf(" "); return r >= 0 && (n = u.trim(e.slice(r)), e = e.slice(0, r)), u.isFunction(t) ? (i = t, t = void 0) : t && "object" == typeof t && (s = "POST"), a.length > 0 && u.ajax({ url: e, type: s, dataType: "html", data: t }).done(function (e) { o = arguments, a.html(n ? u("<div>").append(u.parseHTML(e)).find(n) : e) }).complete(i && function (e, t) { a.each(i, o || [e.responseText, t, e]) }), this }, u.expr.filters.animated = function (e) { return u.grep(u.timers, function (t) { return e === t.elem }).length }; var Tt = e.document.documentElement; function $t(e) { return u.isWindow(e) ? e : 9 === e.nodeType && e.defaultView } u.offset = { setOffset: function (e, t, i) { var n, s, o, a, r, l, c = u.css(e, "position"), d = u(e), h = {}; "static" === c && (e.style.position = "relative"), r = d.offset(), o = u.css(e, "top"), l = u.css(e, "left"), ("absolute" === c || "fixed" === c) && (o + l).indexOf("auto") > -1 ? (a = (n = d.position()).top, s = n.left) : (a = parseFloat(o) || 0, s = parseFloat(l) || 0), u.isFunction(t) && (t = t.call(e, i, r)), null != t.top && (h.top = t.top - r.top + a), null != t.left && (h.left = t.left - r.left + s), "using" in t ? t.using.call(e, h) : d.css(h) } }, u.fn.extend({ offset: function (e) { if (arguments.length) return void 0 === e ? this : this.each(function (t) { u.offset.setOffset(this, e, t) }); var t, i, n = this[0], s = { top: 0, left: 0 }, o = n && n.ownerDocument; return o ? (t = o.documentElement, u.contains(t, n) ? (void 0 !== n.getBoundingClientRect && (s = n.getBoundingClientRect()), i = $t(o), { top: s.top + i.pageYOffset - t.clientTop, left: s.left + i.pageXOffset - t.clientLeft }) : s) : void 0 }, position: function () { if (this[0]) { var e, t, i = this[0], n = { top: 0, left: 0 }; return "fixed" === u.css(i, "position") ? t = i.getBoundingClientRect() : (e = this.offsetParent(), t = this.offset(), u.nodeName(e[0], "html") || (n = e.offset()), n.top += u.css(e[0], "borderTopWidth", !0), n.left += u.css(e[0], "borderLeftWidth", !0)), { top: t.top - n.top - u.css(i, "marginTop", !0), left: t.left - n.left - u.css(i, "marginLeft", !0) } } }, offsetParent: function () { return this.map(function () { for (var e = this.offsetParent || Tt; e && !u.nodeName(e, "html") && "static" === u.css(e, "position");)e = e.offsetParent; return e || Tt }) } }), u.each({ scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function (t, i) { var n = "pageYOffset" === i; u.fn[t] = function (s) { return F(this, function (t, s, o) { var a = $t(t); if (void 0 === o) return a ? a[i] : t[s]; a ? a.scrollTo(n ? e.pageXOffset : o, n ? o : e.pageYOffset) : t[s] = o }, t, s, arguments.length, null) } }), u.each(["top", "left"], function (e, t) { u.cssHooks[t] = _e(d.pixelPosition, function (e, i) { if (i) return i = we(e, t), be.test(i) ? u(e).position()[t] + "px" : i }) }), u.each({ Height: "height", Width: "width" }, function (e, t) { u.each({ padding: "inner" + e, content: t, "": "outer" + e }, function (i, n) { u.fn[n] = function (n, s) { var o = arguments.length && (i || "boolean" != typeof n), a = i || (!0 === n || !0 === s ? "margin" : "border"); return F(this, function (t, i, n) { var s; return u.isWindow(t) ? t.document.documentElement["client" + e] : 9 === t.nodeType ? (s = t.documentElement, Math.max(t.body["scroll" + e], s["scroll" + e], t.body["offset" + e], s["offset" + e], s["client" + e])) : void 0 === n ? u.css(t, i, a) : u.style(t, i, n, a) }, t, o ? n : void 0, o, null) } }) }), u.fn.size = function () { return this.length }, u.fn.andSelf = u.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function () { return u }); var St = e.jQuery, Mt = e.$; return u.noConflict = function (t) { return e.$ === u && (e.$ = Mt), t && e.jQuery === u && (e.jQuery = St), u }, void 0 === t && (e.jQuery = e.$ = u), u }), "undefined" == typeof jQuery) throw new Error("Bootstrap's JavaScript requires jQuery"); function RecordRTC(e, t) { if (!e) throw "First parameter is required."; t = new RecordRTCConfiguration(e, t = t || { type: "video" }); var i = this; function n(i) { i && (t.initCallback = function () { i(), i = t.initCallback = null }); var n = new GetRecorderType(e, t); (c = new n(e, t)).record(), l("recording"), t.disableLogs || console.log("Initialized recorderType:", c.constructor.name, "for output-type:", t.type) } function s(e) { if (e = e || function () { }, c) { if ("paused" === i.state) return i.resumeRecording(), void setTimeout(function () { s(e) }, 1); "recording" === i.state || t.disableLogs || console.warn('Recording state should be: "recording", however current state is: ', i.state), t.disableLogs || console.log("Stopped recording " + t.type + " stream."), "gif" !== t.type ? c.stop(n) : (c.stop(), n()), l("stopped") } else h(); function n(n) { if (c) { Object.keys(c).forEach(function (e) { "function" != typeof c[e] && (i[e] = c[e]) }); var s = c.blob; if (!s) { if (!n) throw "Recording failed."; c.blob = s = n } if (s && !t.disableLogs && console.log(s.type, "->", bytesToSize(s.size)), e) { var o = URL.createObjectURL(s); "function" == typeof e.call ? e.call(i, o) : e(o) } t.autoWriteToDisk && a(function (e) { var i = {}; i[t.type + "Blob"] = e, DiskStorage.Store(i) }) } else "function" == typeof e.call ? e.call(i, "") : e("") } } function o(e) { postMessage((new FileReaderSync).readAsDataURL(e)) } function a(e, i) { if (!e) throw "Pass a callback function over getDataURL."; var n = i ? i.blob : (c || {}).blob; if (!n) return t.disableLogs || console.warn("Blob encoder did not finish its job yet."), void setTimeout(function () { a(e, i) }, 1e3); if ("undefined" == typeof Worker || navigator.mozGetUserMedia) { var s = new FileReader; s.readAsDataURL(n), s.onload = function (t) { e(t.target.result) } } else { var r = function (e) { var t = URL.createObjectURL(new Blob([e.toString(), "this.onmessage =  function (eee) {" + e.name + "(eee.data);}"], { type: "application/javascript" })), i = new Worker(t); return URL.revokeObjectURL(t), i }(o); r.onmessage = function (t) { e(t.data) }, r.postMessage(n) } } function r(e) { e = e || 0, "paused" !== i.state ? "stopped" !== i.state && (e >= i.recordingDuration ? s(i.onRecordingStopped) : (e += 1e3, setTimeout(function () { r(e) }, 1e3))) : setTimeout(function () { r(e) }, 1e3) } function l(e) { i && (i.state = e, "function" == typeof i.onStateChanged.call ? i.onStateChanged.call(i, e) : i.onStateChanged(e)) } var c, d = 'It seems that recorder is destroyed or "startRecording" is not invoked for ' + t.type + " recorder."; function h() { !0 !== t.disableLogs && console.warn(d) } var u = { startRecording: function (s) { return s && (t = new RecordRTCConfiguration(e, s)), t.disableLogs || console.log("started recording " + t.type + " stream."), c ? (c.clearRecordedData(), c.record(), l("recording"), i.recordingDuration && r(), i) : (n(function () { i.recordingDuration && r() }), i) }, stopRecording: s, pauseRecording: function () { c ? "recording" === i.state ? (l("paused"), c.pause(), t.disableLogs || console.log("Paused recording.")) : t.disableLogs || console.warn("Unable to pause the recording. Recording state: ", i.state) : h() }, resumeRecording: function () { c ? "paused" === i.state ? (l("recording"), c.resume(), t.disableLogs || console.log("Resumed recording.")) : t.disableLogs || console.warn("Unable to resume the recording. Recording state: ", i.state) : h() }, initRecorder: n, setRecordingDuration: function (e, t) { if (void 0 === e) throw "recordingDuration is required."; if ("number" != typeof e) throw "recordingDuration must be a number."; return i.recordingDuration = e, i.onRecordingStopped = t || function () { }, { onRecordingStopped: function (e) { i.onRecordingStopped = e } } }, clearRecordedData: function () { c ? (c.clearRecordedData(), t.disableLogs || console.log("Cleared old recorded data.")) : h() }, getBlob: function () { if (c) return c.blob; h() }, getDataURL: a, toURL: function () { if (c) return URL.createObjectURL(c.blob); h() }, getInternalRecorder: function () { return c }, save: function (e) { c ? invokeSaveAsDialog(c.blob, e) : h() }, getFromDisk: function (e) { c ? RecordRTC.getFromDisk(t.type, e) : h() }, setAdvertisementArray: function (e) { t.advertisement = []; for (var i = e.length, n = 0; n < i; n++)t.advertisement.push({ duration: n, image: e[n] }) }, blob: null, bufferSize: 0, sampleRate: 0, buffer: null, reset: function () { c && "function" == typeof c.clearRecordedData && c.clearRecordedData(), c = null, l("inactive"), i.blob = null }, onStateChanged: function (e) { t.disableLogs || console.log("Recorder state changed:", e) }, state: "inactive", getState: function () { return i.state }, destroy: function () { var e = t.disableLogs; t = { disableLogs: !0 }, i.reset(), l("destroyed"), u = i = null, Storage.AudioContextConstructor && (Storage.AudioContextConstructor.close(), Storage.AudioContextConstructor = null), t.disableLogs = e, t.disableLogs || console.warn("RecordRTC is destroyed.") }, version: "5.4.9" }; if (!this) return i = u, u; for (var p in u) this[p] = u[p]; return i = this, u } function RecordRTCConfiguration(e, t) { return t.recorderType || t.type || (t.audio && t.video ? t.type = "video" : t.audio && !t.video && (t.type = "audio")), t.recorderType && !t.type && (t.recorderType === WhammyRecorder || t.recorderType === CanvasRecorder ? t.type = "video" : t.recorderType === GifRecorder ? t.type = "gif" : t.recorderType === StereoAudioRecorder ? t.type = "audio" : t.recorderType === MediaStreamRecorder && (e.getAudioTracks().length && e.getVideoTracks().length ? t.type = "video" : e.getAudioTracks().length && !e.getVideoTracks().length ? t.type = "audio" : !e.getAudioTracks().length && e.getVideoTracks().length && (t.type = "audio"))), void 0 !== MediaStreamRecorder && "undefined" != typeof MediaRecorder && "requestData" in MediaRecorder.prototype && (t.mimeType || (t.mimeType = "video/webm"), t.type || (t.type = t.mimeType.split("/")[0]), t.bitsPerSecond), t.type || (t.mimeType && (t.type = t.mimeType.split("/")[0]), t.type || (t.type = "audio")), t } function GetRecorderType(e, t) { var i; return (isChrome || isEdge || isOpera) && (i = StereoAudioRecorder), "undefined" != typeof MediaRecorder && "requestData" in MediaRecorder.prototype && !isChrome && (i = MediaStreamRecorder), "video" === t.type && (isChrome || isOpera) && (i = WhammyRecorder), "gif" === t.type && (i = GifRecorder), "canvas" === t.type && (i = CanvasRecorder), isMediaRecorderCompatible() && i !== CanvasRecorder && i !== GifRecorder && "undefined" != typeof MediaRecorder && "requestData" in MediaRecorder.prototype && (e.getVideoTracks && e.getVideoTracks().length || e.getAudioTracks && e.getAudioTracks().length) && ("audio" === t.type ? "function" == typeof MediaRecorder.isTypeSupported && MediaRecorder.isTypeSupported("audio/webm") && (i = MediaStreamRecorder) : "function" == typeof MediaRecorder.isTypeSupported && MediaRecorder.isTypeSupported("video/webm") && (i = MediaStreamRecorder)), e instanceof Array && e.length && (i = MultiStreamRecorder), t.recorderType && (i = t.recorderType), !t.disableLogs && i && i.name && console.log("Using recorderType:", i.name || i.constructor.name), i } function MRecordRTC(e) { this.addStream = function (t) { t && (e = t) }, this.mediaType = { audio: !0, video: !0 }, this.startRecording = function () { var t, i = this.mediaType, n = this.mimeType || { audio: null, video: null, gif: null }; if ("function" != typeof i.audio && isMediaRecorderCompatible() && e.getAudioTracks && !e.getAudioTracks().length && (i.audio = !1), "function" != typeof i.video && isMediaRecorderCompatible() && e.getVideoTracks && !e.getVideoTracks().length && (i.video = !1), "function" != typeof i.gif && isMediaRecorderCompatible() && e.getVideoTracks && !e.getVideoTracks().length && (i.gif = !1), !i.audio && !i.video && !i.gif) throw "MediaStream must have either audio or video tracks."; if (i.audio && (t = null, "function" == typeof i.audio && (t = i.audio), this.audioRecorder = new RecordRTC(e, { type: "audio", bufferSize: this.bufferSize, sampleRate: this.sampleRate, numberOfAudioChannels: this.numberOfAudioChannels || 2, disableLogs: this.disableLogs, recorderType: t, mimeType: n.audio, timeSlice: this.timeSlice, onTimeStamp: this.onTimeStamp }), i.video || this.audioRecorder.startRecording()), i.video) { t = null, "function" == typeof i.video && (t = i.video); var s = e; if (isMediaRecorderCompatible() && i.audio && "function" == typeof i.audio) { var o = e.getVideoTracks()[0]; navigator.mozGetUserMedia ? ((s = new MediaStream).addTrack(o), t && t === WhammyRecorder && (t = MediaStreamRecorder)) : s = new MediaStream([o]) } this.videoRecorder = new RecordRTC(s, { type: "video", video: this.video, canvas: this.canvas, frameInterval: this.frameInterval || 10, disableLogs: this.disableLogs, recorderType: t, mimeType: n.video, timeSlice: this.timeSlice, onTimeStamp: this.onTimeStamp }), i.audio || this.videoRecorder.startRecording() } if (i.audio && i.video) { var a = this; isMediaRecorderCompatible() ? (a.audioRecorder = null, a.videoRecorder.startRecording()) : a.videoRecorder.initRecorder(function () { a.audioRecorder.initRecorder(function () { a.videoRecorder.startRecording(), a.audioRecorder.startRecording() }) }) } i.gif && (t = null, "function" == typeof i.gif && (t = i.gif), this.gifRecorder = new RecordRTC(e, { type: "gif", frameRate: this.frameRate || 200, quality: this.quality || 10, disableLogs: this.disableLogs, recorderType: t, mimeType: n.gif }), this.gifRecorder.startRecording()) }, this.stopRecording = function (e) { e = e || function () { }, this.audioRecorder && this.audioRecorder.stopRecording(function (t) { e(t, "audio") }), this.videoRecorder && this.videoRecorder.stopRecording(function (t) { e(t, "video") }), this.gifRecorder && this.gifRecorder.stopRecording(function (t) { e(t, "gif") }) }, this.pauseRecording = function () { this.audioRecorder && this.audioRecorder.pauseRecording(), this.videoRecorder && this.videoRecorder.pauseRecording(), this.gifRecorder && this.gifRecorder.pauseRecording() }, this.resumeRecording = function () { this.audioRecorder && this.audioRecorder.resumeRecording(), this.videoRecorder && this.videoRecorder.resumeRecording(), this.gifRecorder && this.gifRecorder.resumeRecording() }, this.getBlob = function (e) { var t = {}; return this.audioRecorder && (t.audio = this.audioRecorder.getBlob()), this.videoRecorder && (t.video = this.videoRecorder.getBlob()), this.gifRecorder && (t.gif = this.gifRecorder.getBlob()), e && e(t), t }, this.destroy = function () { this.audioRecorder && (this.audioRecorder.destroy(), this.audioRecorder = null), this.videoRecorder && (this.videoRecorder.destroy(), this.videoRecorder = null), this.gifRecorder && (this.gifRecorder.destroy(), this.gifRecorder = null) }, this.getDataURL = function (e) { function t(e, t) { if ("undefined" != typeof Worker) { var i = function (e) { var t, i = URL.createObjectURL(new Blob([e.toString(), "this.onmessage =  function (eee) {" + e.name + "(eee.data);}"], { type: "application/javascript" })), n = new Worker(i); if (void 0 !== URL) t = URL; else { if ("undefined" == typeof webkitURL) throw "Neither URL nor webkitURL detected."; t = webkitURL } return t.revokeObjectURL(i), n }(function (e) { postMessage((new FileReaderSync).readAsDataURL(e)) }); i.onmessage = function (e) { t(e.data) }, i.postMessage(e) } else { var n = new FileReader; n.readAsDataURL(e), n.onload = function (e) { t(e.target.result) } } } this.getBlob(function (i) { i.audio && i.video ? t(i.audio, function (n) { t(i.video, function (t) { e({ audio: n, video: t }) }) }) : i.audio ? t(i.audio, function (t) { e({ audio: t }) }) : i.video && t(i.video, function (t) { e({ video: t }) }) }) }, this.writeToDisk = function () { RecordRTC.writeToDisk({ audio: this.audioRecorder, video: this.videoRecorder, gif: this.gifRecorder }) }, this.save = function (e) { (e = e || { audio: !0, video: !0, gif: !0 }).audio && this.audioRecorder && this.audioRecorder.save("string" == typeof e.audio ? e.audio : ""), e.video && this.videoRecorder && this.videoRecorder.save("string" == typeof e.video ? e.video : ""), e.gif && this.gifRecorder && this.gifRecorder.save("string" == typeof e.gif ? e.gif : "") } } !function (e) { "use strict"; e.fn.emulateTransitionEnd = function (t) { var i = !1, n = this; e(this).one("bsTransitionEnd", function () { i = !0 }); return setTimeout(function () { i || e(n).trigger(e.support.transition.end) }, t), this }, e(function () { e.support.transition = function () { var e = document.createElement("bootstrap"), t = { WebkitTransition: "webkitTransitionEnd", MozTransition: "transitionend", OTransition: "oTransitionEnd otransitionend", transition: "transitionend" }; for (var i in t) if (void 0 !== e.style[i]) return { end: t[i] }; return !1 }(), e.support.transition && (e.event.special.bsTransitionEnd = { bindType: e.support.transition.end, delegateType: e.support.transition.end, handle: function (t) { if (e(t.target).is(this)) return t.handleObj.handler.apply(this, arguments) } }) }) }(jQuery), function (e) { "use strict"; var t = '[data-dismiss="alert"]', i = function (i) { e(i).on("click", t, this.close) }; i.VERSION = "3.2.0", i.prototype.close = function (t) { var i = e(this), n = i.attr("data-target"); n || (n = (n = i.attr("href")) && n.replace(/.*(?=#[^\s]*$)/, "")); var s = e(n); function o() { s.detach().trigger("closed.bs.alert").remove() } t && t.preventDefault(), s.length || (s = i.hasClass("alert") ? i : i.parent()), s.trigger(t = e.Event("close.bs.alert")), t.isDefaultPrevented() || (s.removeClass("in"), e.support.transition && s.hasClass("fade") ? s.one("bsTransitionEnd", o).emulateTransitionEnd(150) : o()) }; var n = e.fn.alert; e.fn.alert = function (t) { return this.each(function () { var n = e(this), s = n.data("bs.alert"); s || n.data("bs.alert", s = new i(this)), "string" == typeof t && s[t].call(n) }) }, e.fn.alert.Constructor = i, e.fn.alert.noConflict = function () { return e.fn.alert = n, this }, e(document).on("click.bs.alert.data-api", t, i.prototype.close) }(jQuery), function (e) { "use strict"; var t = function (i, n) { this.$element = e(i), this.options = e.extend({}, t.DEFAULTS, n), this.isLoading = !1 }; function i(i) { return this.each(function () { var n = e(this), s = n.data("bs.button"), o = "object" == typeof i && i; s || n.data("bs.button", s = new t(this, o)), "toggle" == i ? s.toggle() : i && s.setState(i) }) } t.VERSION = "3.2.0", t.DEFAULTS = { loadingText: "loading..." }, t.prototype.setState = function (t) { var i = "disabled", n = this.$element, s = n.is("input") ? "val" : "html", o = n.data(); t += "Text", null == o.resetText && n.data("resetText", n[s]()), n[s](null == o[t] ? this.options[t] : o[t]), setTimeout(e.proxy(function () { "loadingText" == t ? (this.isLoading = !0, n.addClass(i).attr(i, i)) : this.isLoading && (this.isLoading = !1, n.removeClass(i).removeAttr(i)) }, this), 0) }, t.prototype.toggle = function () { var e = !0, t = this.$element.closest('[data-toggle="buttons"]'); if (t.length) { var i = this.$element.find("input"); "radio" == i.prop("type") && (i.prop("checked") && this.$element.hasClass("active") ? e = !1 : t.find(".active").removeClass("active")), e && i.prop("checked", !this.$element.hasClass("active")).trigger("change") } e && this.$element.toggleClass("active") }; var n = e.fn.button; e.fn.button = i, e.fn.button.Constructor = t, e.fn.button.noConflict = function () { return e.fn.button = n, this }, e(document).on("click.bs.button.data-api", '[data-toggle^="button"]', function (t) { var n = e(t.target); n.hasClass("btn") || (n = n.closest(".btn")), i.call(n, "toggle"), t.preventDefault() }) }(jQuery), function (e) { "use strict"; var t = function (t, i) { this.$element = e(t).on("keydown.bs.carousel", e.proxy(this.keydown, this)), this.$indicators = this.$element.find(".carousel-indicators"), this.options = i, this.paused = this.sliding = this.interval = this.$active = this.$items = null, "hover" == this.options.pause && this.$element.on("mouseenter.bs.carousel", e.proxy(this.pause, this)).on("mouseleave.bs.carousel", e.proxy(this.cycle, this)) }; function i(i) { return this.each(function () { var n = e(this), s = n.data("bs.carousel"), o = e.extend({}, t.DEFAULTS, n.data(), "object" == typeof i && i), a = "string" == typeof i ? i : o.slide; s || n.data("bs.carousel", s = new t(this, o)), "number" == typeof i ? s.to(i) : a ? s[a]() : o.interval && s.pause().cycle() }) } t.VERSION = "3.2.0", t.DEFAULTS = { interval: 5e3, pause: "hover", wrap: !0 }, t.prototype.keydown = function (e) { switch (e.which) { case 37: this.prev(); break; case 39: this.next(); break; default: return }e.preventDefault() }, t.prototype.cycle = function (t) { return t || (this.paused = !1), this.interval && clearInterval(this.interval), this.options.interval && !this.paused && (this.interval = setInterval(e.proxy(this.next, this), this.options.interval)), this }, t.prototype.getItemIndex = function (e) { return this.$items = e.parent().children(".item"), this.$items.index(e || this.$active) }, t.prototype.to = function (t) { var i = this, n = this.getItemIndex(this.$active = this.$element.find(".item.active")); if (!(t > this.$items.length - 1 || t < 0)) return this.sliding ? this.$element.one("slid.bs.carousel", function () { i.to(t) }) : n == t ? this.pause().cycle() : this.slide(t > n ? "next" : "prev", e(this.$items[t])) }, t.prototype.pause = function (t) { return t || (this.paused = !0), this.$element.find(".next, .prev").length && e.support.transition && (this.$element.trigger(e.support.transition.end), this.cycle(!0)), this.interval = clearInterval(this.interval), this }, t.prototype.next = function () { if (!this.sliding) return this.slide("next") }, t.prototype.prev = function () { if (!this.sliding) return this.slide("prev") }, t.prototype.slide = function (t, i) { var n = this.$element.find(".item.active"), s = i || n[t](), o = this.interval, a = "next" == t ? "left" : "right", r = "next" == t ? "first" : "last", l = this; if (!s.length) { if (!this.options.wrap) return; s = this.$element.find(".item")[r]() } if (s.hasClass("active")) return this.sliding = !1; var c = s[0], d = e.Event("slide.bs.carousel", { relatedTarget: c, direction: a }); if (this.$element.trigger(d), !d.isDefaultPrevented()) { if (this.sliding = !0, o && this.pause(), this.$indicators.length) { this.$indicators.find(".active").removeClass("active"); var h = e(this.$indicators.children()[this.getItemIndex(s)]); h && h.addClass("active") } var u = e.Event("slid.bs.carousel", { relatedTarget: c, direction: a }); return e.support.transition && this.$element.hasClass("slide") ? (s.addClass(t), s[0].offsetWidth, n.addClass(a), s.addClass(a), n.one("bsTransitionEnd", function () { s.removeClass([t, a].join(" ")).addClass("active"), n.removeClass(["active", a].join(" ")), l.sliding = !1, setTimeout(function () { l.$element.trigger(u) }, 0) }).emulateTransitionEnd(1e3 * n.css("transition-duration").slice(0, -1))) : (n.removeClass("active"), s.addClass("active"), this.sliding = !1, this.$element.trigger(u)), o && this.cycle(), this } }; var n = e.fn.carousel; e.fn.carousel = i, e.fn.carousel.Constructor = t, e.fn.carousel.noConflict = function () { return e.fn.carousel = n, this }, e(document).on("click.bs.carousel.data-api", "[data-slide], [data-slide-to]", function (t) { var n, s = e(this), o = e(s.attr("data-target") || (n = s.attr("href")) && n.replace(/.*(?=#[^\s]+$)/, "")); if (o.hasClass("carousel")) { var a = e.extend({}, o.data(), s.data()), r = s.attr("data-slide-to"); r && (a.interval = !1), i.call(o, a), r && o.data("bs.carousel").to(r), t.preventDefault() } }), e(window).on("load", function () { e('[data-ride="carousel"]').each(function () { var t = e(this); i.call(t, t.data()) }) }) }(jQuery), function (e) { "use strict"; var t = function (i, n) { this.$element = e(i), this.options = e.extend({}, t.DEFAULTS, n), this.transitioning = null, this.options.parent && (this.$parent = e(this.options.parent)), this.options.toggle && this.toggle() }; function i(i) { return this.each(function () { var n = e(this), s = n.data("bs.collapse"), o = e.extend({}, t.DEFAULTS, n.data(), "object" == typeof i && i); !s && o.toggle && "show" == i && (i = !i), s || n.data("bs.collapse", s = new t(this, o)), "string" == typeof i && s[i]() }) } t.VERSION = "3.2.0", t.DEFAULTS = { toggle: !0 }, t.prototype.dimension = function () { return this.$element.hasClass("width") ? "width" : "height" }, t.prototype.show = function () { if (!this.transitioning && !this.$element.hasClass("in")) { var t = e.Event("show.bs.collapse"); if (this.$element.trigger(t), !t.isDefaultPrevented()) { var n = this.$parent && this.$parent.find("> .panel > .in"); if (n && n.length) { var s = n.data("bs.collapse"); if (s && s.transitioning) return; i.call(n, "hide"), s || n.data("bs.collapse", null) } var o = this.dimension(); this.$element.removeClass("collapse").addClass("collapsing")[o](0), this.transitioning = 1; var a = function () { this.$element.removeClass("collapsing").addClass("collapse in")[o](""), this.transitioning = 0, this.$element.trigger("shown.bs.collapse") }; if (!e.support.transition) return a.call(this); var r = e.camelCase(["scroll", o].join("-")); this.$element.one("bsTransitionEnd", e.proxy(a, this)).emulateTransitionEnd(350)[o](this.$element[0][r]) } } }, t.prototype.hide = function () { if (!this.transitioning && this.$element.hasClass("in")) { var t = e.Event("hide.bs.collapse"); if (this.$element.trigger(t), !t.isDefaultPrevented()) { var i = this.dimension(); this.$element[i](this.$element[i]())[0].offsetHeight, this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"), this.transitioning = 1; var n = function () { this.transitioning = 0, this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse") }; if (!e.support.transition) return n.call(this); this.$element[i](0).one("bsTransitionEnd", e.proxy(n, this)).emulateTransitionEnd(350) } } }, t.prototype.toggle = function () { this[this.$element.hasClass("in") ? "hide" : "show"]() }; var n = e.fn.collapse; e.fn.collapse = i, e.fn.collapse.Constructor = t, e.fn.collapse.noConflict = function () { return e.fn.collapse = n, this }, e(document).on("click.bs.collapse.data-api", '[data-toggle="collapse"]', function (t) { var n, s = e(this), o = s.attr("data-target") || t.preventDefault() || (n = s.attr("href")) && n.replace(/.*(?=#[^\s]+$)/, ""), a = e(o), r = a.data("bs.collapse"), l = r ? "toggle" : s.data(), c = s.attr("data-parent"), d = c && e(c); r && r.transitioning || (d && d.find('[data-toggle="collapse"][data-parent="' + c + '"]').not(s).addClass("collapsed"), s[a.hasClass("in") ? "addClass" : "removeClass"]("collapsed")), i.call(a, l) }) }(jQuery), function (e) { "use strict"; var t = ".dropdown-backdrop", i = '[data-toggle="dropdown"]', n = function (t) { e(t).on("click.bs.dropdown", this.toggle) }; function s(n) { n && 3 === n.which || (e(t).remove(), e(i).each(function () { var t = o(e(this)), i = { relatedTarget: this }; t.hasClass("open") && (t.trigger(n = e.Event("hide.bs.dropdown", i)), n.isDefaultPrevented() || t.removeClass("open").trigger("hidden.bs.dropdown", i)) })) } function o(t) { var i = t.attr("data-target"); i || (i = (i = t.attr("href")) && /#[A-Za-z]/.test(i) && i.replace(/.*(?=#[^\s]*$)/, "")); var n = i && e(i); return n && n.length ? n : t.parent() } n.VERSION = "3.2.0", n.prototype.toggle = function (t) { var i = e(this); if (!i.is(".disabled, :disabled")) { var n = o(i), a = n.hasClass("open"); if (s(), !a) { "ontouchstart" in document.documentElement && !n.closest(".navbar-nav").length && e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click", s); var r = { relatedTarget: this }; if (n.trigger(t = e.Event("show.bs.dropdown", r)), t.isDefaultPrevented()) return; i.trigger("focus"), n.toggleClass("open").trigger("shown.bs.dropdown", r) } return !1 } }, n.prototype.keydown = function (t) { if (/(38|40|27)/.test(t.keyCode)) { var n = e(this); if (t.preventDefault(), t.stopPropagation(), !n.is(".disabled, :disabled")) { var s = o(n), a = s.hasClass("open"); if (!a || a && 27 == t.keyCode) return 27 == t.which && s.find(i).trigger("focus"), n.trigger("click"); var r = " li:not(.divider):visible a", l = s.find('[role="menu"]' + r + ', [role="listbox"]' + r); if (l.length) { var c = l.index(l.filter(":focus")); 38 == t.keyCode && c > 0 && c--, 40 == t.keyCode && c < l.length - 1 && c++, ~c || (c = 0), l.eq(c).trigger("focus") } } } }; var a = e.fn.dropdown; e.fn.dropdown = function (t) { return this.each(function () { var i = e(this), s = i.data("bs.dropdown"); s || i.data("bs.dropdown", s = new n(this)), "string" == typeof t && s[t].call(i) }) }, e.fn.dropdown.Constructor = n, e.fn.dropdown.noConflict = function () { return e.fn.dropdown = a, this }, e(document).on("click.bs.dropdown.data-api", s).on("click.bs.dropdown.data-api", ".dropdown form", function (e) { e.stopPropagation() }).on("click.bs.dropdown.data-api", i, n.prototype.toggle).on("keydown.bs.dropdown.data-api", i + ', [role="menu"], [role="listbox"]', n.prototype.keydown) }(jQuery), function (e) { "use strict"; var t = function (t, i) { this.options = i, this.$body = e(document.body), this.$element = e(t), this.$backdrop = this.isShown = null, this.scrollbarWidth = 0, this.options.remote && this.$element.find(".modal-content").load(this.options.remote, e.proxy(function () { this.$element.trigger("loaded.bs.modal") }, this)) }; function i(i, n) { return this.each(function () { var s = e(this), o = s.data("bs.modal"), a = e.extend({}, t.DEFAULTS, s.data(), "object" == typeof i && i); o || s.data("bs.modal", o = new t(this, a)), "string" == typeof i ? o[i](n) : a.show && o.show(n) }) } t.VERSION = "3.2.0", t.DEFAULTS = { backdrop: !0, keyboard: !0, show: !0 }, t.prototype.toggle = function (e) { return this.isShown ? this.hide() : this.show(e) }, t.prototype.show = function (t) { var i = this, n = e.Event("show.bs.modal", { relatedTarget: t }); this.$element.trigger(n), this.isShown || n.isDefaultPrevented() || (this.isShown = !0, this.checkScrollbar(), this.$body.addClass("modal-open"), this.setScrollbar(), this.escape(), this.$element.on("click.dismiss.bs.modal", '[data-dismiss="modal"]', e.proxy(this.hide, this)), this.backdrop(function () { var n = e.support.transition && i.$element.hasClass("fade"); i.$element.parent().length || i.$element.appendTo(i.$body), i.$element.show().scrollTop(0), n && i.$element[0].offsetWidth, i.$element.addClass("in").attr("aria-hidden", !1), i.enforceFocus(); var s = e.Event("shown.bs.modal", { relatedTarget: t }); n ? i.$element.find(".modal-dialog").one("bsTransitionEnd", function () { i.$element.trigger("focus").trigger(s) }).emulateTransitionEnd(300) : i.$element.trigger("focus").trigger(s) })) }, t.prototype.hide = function (t) { t && t.preventDefault(), t = e.Event("hide.bs.modal"), this.$element.trigger(t), this.isShown && !t.isDefaultPrevented() && (this.isShown = !1, this.$body.removeClass("modal-open"), this.resetScrollbar(), this.escape(), e(document).off("focusin.bs.modal"), this.$element.removeClass("in").attr("aria-hidden", !0).off("click.dismiss.bs.modal"), e.support.transition && this.$element.hasClass("fade") ? this.$element.one("bsTransitionEnd", e.proxy(this.hideModal, this)).emulateTransitionEnd(300) : this.hideModal()) }, t.prototype.enforceFocus = function () { e(document).off("focusin.bs.modal").on("focusin.bs.modal", e.proxy(function (e) { this.$element[0] === e.target || this.$element.has(e.target).length || this.$element.trigger("focus") }, this)) }, t.prototype.escape = function () { this.isShown && this.options.keyboard ? this.$element.on("keyup.dismiss.bs.modal", e.proxy(function (e) { 27 == e.which && this.hide() }, this)) : this.isShown || this.$element.off("keyup.dismiss.bs.modal") }, t.prototype.hideModal = function () { var e = this; this.$element.hide(), this.backdrop(function () { e.$element.trigger("hidden.bs.modal") }) }, t.prototype.removeBackdrop = function () { this.$backdrop && this.$backdrop.remove(), this.$backdrop = null }, t.prototype.backdrop = function (t) { var i = this, n = this.$element.hasClass("fade") ? "fade" : ""; if (this.isShown && this.options.backdrop) { var s = e.support.transition && n; if (this.$backdrop = e('<div class="modal-backdrop ' + n + '" />').appendTo(this.$body), this.$element.on("click.dismiss.bs.modal", e.proxy(function (e) { e.target === e.currentTarget && ("static" == this.options.backdrop ? this.$element[0].focus.call(this.$element[0]) : this.hide.call(this)) }, this)), s && this.$backdrop[0].offsetWidth, this.$backdrop.addClass("in"), !t) return; s ? this.$backdrop.one("bsTransitionEnd", t).emulateTransitionEnd(150) : t() } else if (!this.isShown && this.$backdrop) { this.$backdrop.removeClass("in"); var o = function () { i.removeBackdrop(), t && t() }; e.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one("bsTransitionEnd", o).emulateTransitionEnd(150) : o() } else t && t() }, t.prototype.checkScrollbar = function () { document.body.clientWidth >= window.innerWidth || (this.scrollbarWidth = this.scrollbarWidth || this.measureScrollbar()) }, t.prototype.setScrollbar = function () { var e = parseInt(this.$body.css("padding-right") || 0, 10); this.scrollbarWidth && this.$body.css("padding-right", e + this.scrollbarWidth) }, t.prototype.resetScrollbar = function () { this.$body.css("padding-right", "") }, t.prototype.measureScrollbar = function () { var e = document.createElement("div"); e.className = "modal-scrollbar-measure", this.$body.append(e); var t = e.offsetWidth - e.clientWidth; return this.$body[0].removeChild(e), t }; var n = e.fn.modal; e.fn.modal = i, e.fn.modal.Constructor = t, e.fn.modal.noConflict = function () { return e.fn.modal = n, this }, e(document).on("click.bs.modal.data-api", '[data-toggle="modal"]', function (t) { var n = e(this), s = n.attr("href"), o = e(n.attr("data-target") || s && s.replace(/.*(?=#[^\s]+$)/, "")), a = o.data("bs.modal") ? "toggle" : e.extend({ remote: !/#/.test(s) && s }, o.data(), n.data()); n.is("a") && t.preventDefault(), o.one("show.bs.modal", function (e) { e.isDefaultPrevented() || o.one("hidden.bs.modal", function () { n.is(":visible") && n.trigger("focus") }) }), i.call(o, a, this) }) }(jQuery), function (e) { "use strict"; var t = function (e, t) { this.type = this.options = this.enabled = this.timeout = this.hoverState = this.$element = null, this.init("tooltip", e, t) }; t.VERSION = "3.2.0", t.DEFAULTS = { animation: !0, placement: "top", selector: !1, template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>', trigger: "hover focus", title: "", delay: 0, html: !1, container: !1, viewport: { selector: "body", padding: 0 } }, t.prototype.init = function (t, i, n) { this.enabled = !0, this.type = t, this.$element = e(i), this.options = this.getOptions(n), this.$viewport = this.options.viewport && e(this.options.viewport.selector || this.options.viewport); for (var s = this.options.trigger.split(" "), o = s.length; o--;) { var a = s[o]; if ("click" == a) this.$element.on("click." + this.type, this.options.selector, e.proxy(this.toggle, this)); else if ("manual" != a) { var r = "hover" == a ? "mouseenter" : "focusin", l = "hover" == a ? "mouseleave" : "focusout"; this.$element.on(r + "." + this.type, this.options.selector, e.proxy(this.enter, this)), this.$element.on(l + "." + this.type, this.options.selector, e.proxy(this.leave, this)) } } this.options.selector ? this._options = e.extend({}, this.options, { trigger: "manual", selector: "" }) : this.fixTitle() }, t.prototype.getDefaults = function () { return t.DEFAULTS }, t.prototype.getOptions = function (t) { return (t = e.extend({}, this.getDefaults(), this.$element.data(), t)).delay && "number" == typeof t.delay && (t.delay = { show: t.delay, hide: t.delay }), t }, t.prototype.getDelegateOptions = function () { var t = {}, i = this.getDefaults(); return this._options && e.each(this._options, function (e, n) { i[e] != n && (t[e] = n) }), t }, t.prototype.enter = function (t) { var i = t instanceof this.constructor ? t : e(t.currentTarget).data("bs." + this.type); if (i || (i = new this.constructor(t.currentTarget, this.getDelegateOptions()), e(t.currentTarget).data("bs." + this.type, i)), clearTimeout(i.timeout), i.hoverState = "in", !i.options.delay || !i.options.delay.show) return i.show(); i.timeout = setTimeout(function () { "in" == i.hoverState && i.show() }, i.options.delay.show) }, t.prototype.leave = function (t) { var i = t instanceof this.constructor ? t : e(t.currentTarget).data("bs." + this.type); if (i || (i = new this.constructor(t.currentTarget, this.getDelegateOptions()), e(t.currentTarget).data("bs." + this.type, i)), clearTimeout(i.timeout), i.hoverState = "out", !i.options.delay || !i.options.delay.hide) return i.hide(); i.timeout = setTimeout(function () { "out" == i.hoverState && i.hide() }, i.options.delay.hide) }, t.prototype.show = function () { var t = e.Event("show.bs." + this.type); if (this.hasContent() && this.enabled) { this.$element.trigger(t); var i = e.contains(document.documentElement, this.$element[0]); if (t.isDefaultPrevented() || !i) return; var n = this, s = this.tip(), o = this.getUID(this.type); this.setContent(), s.attr("id", o), this.$element.attr("aria-describedby", o), this.options.animation && s.addClass("fade"); var a = "function" == typeof this.options.placement ? this.options.placement.call(this, s[0], this.$element[0]) : this.options.placement, r = /\s?auto?\s?/i, l = r.test(a); l && (a = a.replace(r, "") || "top"), s.detach().css({ top: 0, left: 0, display: "block" }).addClass(a).data("bs." + this.type, this), this.options.container ? s.appendTo(this.options.container) : s.insertAfter(this.$element); var c = this.getPosition(), d = s[0].offsetWidth, h = s[0].offsetHeight; if (l) { var u = a, p = this.$element.parent(), f = this.getPosition(p); a = "bottom" == a && c.top + c.height + h - f.scroll > f.height ? "top" : "top" == a && c.top - f.scroll - h < 0 ? "bottom" : "right" == a && c.right + d > f.width ? "left" : "left" == a && c.left - d < f.left ? "right" : a, s.removeClass(u).addClass(a) } var m = this.getCalculatedOffset(a, c, d, h); this.applyPlacement(m, a); var g = function () { n.$element.trigger("shown.bs." + n.type), n.hoverState = null }; e.support.transition && this.$tip.hasClass("fade") ? s.one("bsTransitionEnd", g).emulateTransitionEnd(150) : g() } }, t.prototype.applyPlacement = function (t, i) { var n = this.tip(), s = n[0].offsetWidth, o = n[0].offsetHeight, a = parseInt(n.css("margin-top"), 10), r = parseInt(n.css("margin-left"), 10); isNaN(a) && (a = 0), isNaN(r) && (r = 0), t.top = t.top + a, t.left = t.left + r, e.offset.setOffset(n[0], e.extend({ using: function (e) { n.css({ top: Math.round(e.top), left: Math.round(e.left) }) } }, t), 0), n.addClass("in"); var l = n[0].offsetWidth, c = n[0].offsetHeight; "top" == i && c != o && (t.top = t.top + o - c); var d = this.getViewportAdjustedDelta(i, t, l, c); d.left ? t.left += d.left : t.top += d.top; var h = d.left ? 2 * d.left - s + l : 2 * d.top - o + c, u = d.left ? "left" : "top", p = d.left ? "offsetWidth" : "offsetHeight"; n.offset(t), this.replaceArrow(h, n[0][p], u) }, t.prototype.replaceArrow = function (e, t, i) { this.arrow().css(i, e ? 50 * (1 - e / t) + "%" : "") }, t.prototype.setContent = function () { var e = this.tip(), t = this.getTitle(); e.find(".tooltip-inner")[this.options.html ? "html" : "text"](t), e.removeClass("fade in top bottom left right") }, t.prototype.hide = function () { var t = this, i = this.tip(), n = e.Event("hide.bs." + this.type); function s() { "in" != t.hoverState && i.detach(), t.$element.trigger("hidden.bs." + t.type) } if (this.$element.removeAttr("aria-describedby"), this.$element.trigger(n), !n.isDefaultPrevented()) return i.removeClass("in"), e.support.transition && this.$tip.hasClass("fade") ? i.one("bsTransitionEnd", s).emulateTransitionEnd(150) : s(), this.hoverState = null, this }, t.prototype.fixTitle = function () { var e = this.$element; (e.attr("title") || "string" != typeof e.attr("data-original-title")) && e.attr("data-original-title", e.attr("title") || "").attr("title", "") }, t.prototype.hasContent = function () { return this.getTitle() }, t.prototype.getPosition = function (t) { var i = (t = t || this.$element)[0], n = "BODY" == i.tagName; return e.extend({}, "function" == typeof i.getBoundingClientRect ? i.getBoundingClientRect() : null, { scroll: n ? document.documentElement.scrollTop || document.body.scrollTop : t.scrollTop(), width: n ? e(window).width() : t.outerWidth(), height: n ? e(window).height() : t.outerHeight() }, n ? { top: 0, left: 0 } : t.offset()) }, t.prototype.getCalculatedOffset = function (e, t, i, n) { return "bottom" == e ? { top: t.top + t.height, left: t.left + t.width / 2 - i / 2 } : "top" == e ? { top: t.top - n, left: t.left + t.width / 2 - i / 2 } : "left" == e ? { top: t.top + t.height / 2 - n / 2, left: t.left - i } : { top: t.top + t.height / 2 - n / 2, left: t.left + t.width } }, t.prototype.getViewportAdjustedDelta = function (e, t, i, n) { var s = { top: 0, left: 0 }; if (!this.$viewport) return s; var o = this.options.viewport && this.options.viewport.padding || 0, a = this.getPosition(this.$viewport); if (/right|left/.test(e)) { var r = t.top - o - a.scroll, l = t.top + o - a.scroll + n; r < a.top ? s.top = a.top - r : l > a.top + a.height && (s.top = a.top + a.height - l) } else { var c = t.left - o, d = t.left + o + i; c < a.left ? s.left = a.left - c : d > a.width && (s.left = a.left + a.width - d) } return s }, t.prototype.getTitle = function () { var e = this.$element, t = this.options; return e.attr("data-original-title") || ("function" == typeof t.title ? t.title.call(e[0]) : t.title) }, t.prototype.getUID = function (e) { do { e += ~~(1e6 * Math.random()) } while (document.getElementById(e)); return e }, t.prototype.tip = function () { return this.$tip = this.$tip || e(this.options.template) }, t.prototype.arrow = function () { return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow") }, t.prototype.validate = function () { this.$element[0].parentNode || (this.hide(), this.$element = null, this.options = null) }, t.prototype.enable = function () { this.enabled = !0 }, t.prototype.disable = function () { this.enabled = !1 }, t.prototype.toggleEnabled = function () { this.enabled = !this.enabled }, t.prototype.toggle = function (t) { var i = this; t && ((i = e(t.currentTarget).data("bs." + this.type)) || (i = new this.constructor(t.currentTarget, this.getDelegateOptions()), e(t.currentTarget).data("bs." + this.type, i))), i.tip().hasClass("in") ? i.leave(i) : i.enter(i) }, t.prototype.destroy = function () { clearTimeout(this.timeout), this.hide().$element.off("." + this.type).removeData("bs." + this.type) }; var i = e.fn.tooltip; e.fn.tooltip = function (i) { return this.each(function () { var n = e(this), s = n.data("bs.tooltip"), o = "object" == typeof i && i; (s || "destroy" != i) && (s || n.data("bs.tooltip", s = new t(this, o)), "string" == typeof i && s[i]()) }) }, e.fn.tooltip.Constructor = t, e.fn.tooltip.noConflict = function () { return e.fn.tooltip = i, this } }(jQuery), function (e) { "use strict"; var t = function (e, t) { this.init("popover", e, t) }; if (!e.fn.tooltip) throw new Error("Popover requires tooltip.js"); t.VERSION = "3.2.0", t.DEFAULTS = e.extend({}, e.fn.tooltip.Constructor.DEFAULTS, { placement: "right", trigger: "click", content: "", template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>' }), t.prototype = e.extend({}, e.fn.tooltip.Constructor.prototype), t.prototype.constructor = t, t.prototype.getDefaults = function () { return t.DEFAULTS }, t.prototype.setContent = function () { var e = this.tip(), t = this.getTitle(), i = this.getContent(); e.find(".popover-title")[this.options.html ? "html" : "text"](t), e.find(".popover-content").empty()[this.options.html ? "string" == typeof i ? "html" : "append" : "text"](i), e.removeClass("fade top bottom left right in"), e.find(".popover-title").html() || e.find(".popover-title").hide() }, t.prototype.hasContent = function () { return this.getTitle() || this.getContent() }, t.prototype.getContent = function () { var e = this.$element, t = this.options; return e.attr("data-content") || ("function" == typeof t.content ? t.content.call(e[0]) : t.content) }, t.prototype.arrow = function () { return this.$arrow = this.$arrow || this.tip().find(".arrow") }, t.prototype.tip = function () { return this.$tip || (this.$tip = e(this.options.template)), this.$tip }; var i = e.fn.popover; e.fn.popover = function (i) { return this.each(function () { var n = e(this), s = n.data("bs.popover"), o = "object" == typeof i && i; (s || "destroy" != i) && (s || n.data("bs.popover", s = new t(this, o)), "string" == typeof i && s[i]()) }) }, e.fn.popover.Constructor = t, e.fn.popover.noConflict = function () { return e.fn.popover = i, this } }(jQuery), function (e) { "use strict"; function t(i, n) { var s = e.proxy(this.process, this); this.$body = e("body"), this.$scrollElement = e(i).is("body") ? e(window) : e(i), this.options = e.extend({}, t.DEFAULTS, n), this.selector = (this.options.target || "") + " .nav li > a", this.offsets = [], this.targets = [], this.activeTarget = null, this.scrollHeight = 0, this.$scrollElement.on("scroll.bs.scrollspy", s), this.refresh(), this.process() } function i(i) { return this.each(function () { var n = e(this), s = n.data("bs.scrollspy"), o = "object" == typeof i && i; s || n.data("bs.scrollspy", s = new t(this, o)), "string" == typeof i && s[i]() }) } t.VERSION = "3.2.0", t.DEFAULTS = { offset: 10 }, t.prototype.getScrollHeight = function () { return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight) }, t.prototype.refresh = function () { var t = "offset", i = 0; e.isWindow(this.$scrollElement[0]) || (t = "position", i = this.$scrollElement.scrollTop()), this.offsets = [], this.targets = [], this.scrollHeight = this.getScrollHeight(); var n = this; this.$body.find(this.selector).map(function () { var n = e(this), s = n.data("target") || n.attr("href"), o = /^#./.test(s) && e(s); return o && o.length && o.is(":visible") && [[o[t]().top + i, s]] || null }).sort(function (e, t) { return e[0] - t[0] }).each(function () { n.offsets.push(this[0]), n.targets.push(this[1]) }) }, t.prototype.process = function () { var e, t = this.$scrollElement.scrollTop() + this.options.offset, i = this.getScrollHeight(), n = this.options.offset + i - this.$scrollElement.height(), s = this.offsets, o = this.targets, a = this.activeTarget; if (this.scrollHeight != i && this.refresh(), t >= n) return a != (e = o[o.length - 1]) && this.activate(e); if (a && t <= s[0]) return a != (e = o[0]) && this.activate(e); for (e = s.length; e--;)a != o[e] && t >= s[e] && (!s[e + 1] || t <= s[e + 1]) && this.activate(o[e]) }, t.prototype.activate = function (t) { this.activeTarget = t, e(this.selector).parentsUntil(this.options.target, ".active").removeClass("active"); var i = this.selector + '[data-target="' + t + '"],' + this.selector + '[href="' + t + '"]', n = e(i).parents("li").addClass("active"); n.parent(".dropdown-menu").length && (n = n.closest("li.dropdown").addClass("active")), n.trigger("activate.bs.scrollspy") }; var n = e.fn.scrollspy; e.fn.scrollspy = i, e.fn.scrollspy.Constructor = t, e.fn.scrollspy.noConflict = function () { return e.fn.scrollspy = n, this }, e(window).on("load.bs.scrollspy.data-api", function () { e('[data-spy="scroll"]').each(function () { var t = e(this); i.call(t, t.data()) }) }) }(jQuery), function (e) { "use strict"; var t = function (t) { this.element = e(t) }; function i(i) { return this.each(function () { var n = e(this), s = n.data("bs.tab"); s || n.data("bs.tab", s = new t(this)), "string" == typeof i && s[i]() }) } t.VERSION = "3.2.0", t.prototype.show = function () { var t = this.element, i = t.closest("ul:not(.dropdown-menu)"), n = t.data("target"); if (n || (n = (n = t.attr("href")) && n.replace(/.*(?=#[^\s]*$)/, "")), !t.parent("li").hasClass("active")) { var s = i.find(".active:last a")[0], o = e.Event("show.bs.tab", { relatedTarget: s }); if (t.trigger(o), !o.isDefaultPrevented()) { var a = e(n); this.activate(t.closest("li"), i), this.activate(a, a.parent(), function () { t.trigger({ type: "shown.bs.tab", relatedTarget: s }) }) } } }, t.prototype.activate = function (t, i, n) { var s = i.find("> .active"), o = n && e.support.transition && s.hasClass("fade"); function a() { s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"), t.addClass("active"), o ? (t[0].offsetWidth, t.addClass("in")) : t.removeClass("fade"), t.parent(".dropdown-menu") && t.closest("li.dropdown").addClass("active"), n && n() } o ? s.one("bsTransitionEnd", a).emulateTransitionEnd(150) : a(), s.removeClass("in") }; var n = e.fn.tab; e.fn.tab = i, e.fn.tab.Constructor = t, e.fn.tab.noConflict = function () { return e.fn.tab = n, this }, e(document).on("click.bs.tab.data-api", '[data-toggle="tab"], [data-toggle="pill"]', function (t) { t.preventDefault(), i.call(e(this), "show") }) }(jQuery), function (e) { "use strict"; var t = function (i, n) { this.options = e.extend({}, t.DEFAULTS, n), this.$target = e(this.options.target).on("scroll.bs.affix.data-api", e.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", e.proxy(this.checkPositionWithEventLoop, this)), this.$element = e(i), this.affixed = this.unpin = this.pinnedOffset = null, this.checkPosition() }; function i(i) { return this.each(function () { var n = e(this), s = n.data("bs.affix"), o = "object" == typeof i && i; s || n.data("bs.affix", s = new t(this, o)), "string" == typeof i && s[i]() }) } t.VERSION = "3.2.0", t.RESET = "affix affix-top affix-bottom", t.DEFAULTS = { offset: 0, target: window }, t.prototype.getPinnedOffset = function () { if (this.pinnedOffset) return this.pinnedOffset; this.$element.removeClass(t.RESET).addClass("affix"); var e = this.$target.scrollTop(), i = this.$element.offset(); return this.pinnedOffset = i.top - e }, t.prototype.checkPositionWithEventLoop = function () { setTimeout(e.proxy(this.checkPosition, this), 1) }, t.prototype.checkPosition = function () { if (this.$element.is(":visible")) { var i = e(document).height(), n = this.$target.scrollTop(), s = this.$element.offset(), o = this.options.offset, a = o.top, r = o.bottom; "object" != typeof o && (r = a = o), "function" == typeof a && (a = o.top(this.$element)), "function" == typeof r && (r = o.bottom(this.$element)); var l = !(null != this.unpin && n + this.unpin <= s.top) && (null != r && s.top + this.$element.height() >= i - r ? "bottom" : null != a && n <= a && "top"); if (this.affixed !== l) { null != this.unpin && this.$element.css("top", ""); var c = "affix" + (l ? "-" + l : ""), d = e.Event(c + ".bs.affix"); this.$element.trigger(d), d.isDefaultPrevented() || (this.affixed = l, this.unpin = "bottom" == l ? this.getPinnedOffset() : null, this.$element.removeClass(t.RESET).addClass(c).trigger(e.Event(c.replace("affix", "affixed"))), "bottom" == l && this.$element.offset({ top: i - this.$element.height() - r })) } } }; var n = e.fn.affix; e.fn.affix = i, e.fn.affix.Constructor = t, e.fn.affix.noConflict = function () { return e.fn.affix = n, this }, e(window).on("load", function () { e('[data-spy="affix"]').each(function () { var t = e(this), n = t.data(); n.offset = n.offset || {}, n.offsetBottom && (n.offset.bottom = n.offsetBottom), n.offsetTop && (n.offset.top = n.offsetTop), i.call(t, n) }) }) }(jQuery), function (e, t) { "function" == typeof define && define.amd ? define("sifter", t) : "object" == typeof exports ? module.exports = t() : e.Sifter = t() }(this, function () { var e = function (e, t) { this.items = e, this.settings = t || { diacritics: !0 } }; e.prototype.tokenize = function (e) { if (!(e = s(String(e || "").toLowerCase())) || !e.length) return []; var t, i, n, a, l = [], c = e.split(/ +/); for (t = 0, i = c.length; t < i; t++) { if (n = o(c[t]), this.settings.diacritics) for (a in r) r.hasOwnProperty(a) && (n = n.replace(new RegExp(a, "g"), r[a])); l.push({ string: c[t], regex: new RegExp(n, "i") }) } return l }, e.prototype.iterator = function (e, t) { (a(e) ? Array.prototype.forEach || function (e) { for (var t = 0, i = this.length; t < i; t++)e(this[t], t, this) } : function (e) { for (var t in this) this.hasOwnProperty(t) && e(this[t], t, this) }).apply(e, [t]) }, e.prototype.getScoreFunction = function (e, t) { var i, s, o, a; e = this.prepareSearch(e, t), s = e.tokens, i = e.options.fields, o = s.length, a = e.options.nesting; var r, l = function (e, t) { var i, n; return e ? -1 === (n = (e = String(e || "")).search(t.regex)) ? 0 : (i = t.string.length / e.length, 0 === n && (i += .5), i) : 0 }, c = (r = i.length) ? 1 === r ? function (e, t) { return l(n(t, i[0], a), e) } : function (e, t) { for (var s = 0, o = 0; s < r; s++)o += l(n(t, i[s], a), e); return o / r } : function () { return 0 }; return o ? 1 === o ? function (e) { return c(s[0], e) } : "and" === e.options.conjunction ? function (e) { for (var t, i = 0, n = 0; i < o; i++) { if ((t = c(s[i], e)) <= 0) return 0; n += t } return n / o } : function (e) { for (var t = 0, i = 0; t < o; t++)i += c(s[t], e); return i / o } : function () { return 0 } }, e.prototype.getSortFunction = function (e, i) { var s, o, a, r, l, c, d, h, u, p, f; if (f = !(e = (a = this).prepareSearch(e, i)).query && i.sort_empty || i.sort, u = function (e, t) { return "$score" === e ? t.score : n(a.items[t.id], e, i.nesting) }, l = [], f) for (s = 0, o = f.length; s < o; s++)(e.query || "$score" !== f[s].field) && l.push(f[s]); if (e.query) { for (p = !0, s = 0, o = l.length; s < o; s++)if ("$score" === l[s].field) { p = !1; break } p && l.unshift({ field: "$score", direction: "desc" }) } else for (s = 0, o = l.length; s < o; s++)if ("$score" === l[s].field) { l.splice(s, 1); break } for (h = [], s = 0, o = l.length; s < o; s++)h.push("desc" === l[s].direction ? -1 : 1); return (c = l.length) ? 1 === c ? (r = l[0].field, d = h[0], function (e, i) { return d * t(u(r, e), u(r, i)) }) : function (e, i) { var n, s, o; for (n = 0; n < c; n++)if (o = l[n].field, s = h[n] * t(u(o, e), u(o, i))) return s; return 0 } : null }, e.prototype.prepareSearch = function (e, t) { if ("object" == typeof e) return e; var n = (t = i({}, t)).fields, s = t.sort, o = t.sort_empty; return n && !a(n) && (t.fields = [n]), s && !a(s) && (t.sort = [s]), o && !a(o) && (t.sort_empty = [o]), { options: t, query: String(e || "").toLowerCase(), tokens: this.tokenize(e), total: 0, items: [] } }, e.prototype.search = function (e, t) { var i, n, s, o; return n = this.prepareSearch(e, t), t = n.options, e = n.query, o = t.score || this.getScoreFunction(n), e.length ? this.iterator(this.items, function (e, s) { i = o(e), (!1 === t.filter || i > 0) && n.items.push({ score: i, id: s }) }) : this.iterator(this.items, function (e, t) { n.items.push({ score: 1, id: t }) }), (s = this.getSortFunction(n, t)) && n.items.sort(s), n.total = n.items.length, "number" == typeof t.limit && (n.items = n.items.slice(0, t.limit)), n }; var t = function (e, t) { return "number" == typeof e && "number" == typeof t ? e > t ? 1 : e < t ? -1 : 0 : (e = l(String(e || ""))) > (t = l(String(t || ""))) ? 1 : t > e ? -1 : 0 }, i = function (e, t) { var i, n, s, o; for (i = 1, n = arguments.length; i < n; i++)if (o = arguments[i]) for (s in o) o.hasOwnProperty(s) && (e[s] = o[s]); return e }, n = function (e, t, i) { if (e && t) { if (!i) return e[t]; for (var n = t.split("."); n.length && (e = e[n.shift()]);); return e } }, s = function (e) { return (e + "").replace(/^\s+|\s+$|/g, "") }, o = function (e) { return (e + "").replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1") }, a = Array.isArray || "undefined" != typeof $ && $.isArray || function (e) { return "[object Array]" === Object.prototype.toString.call(e) }, r = { a: "[a  ]", b: "[bB]", c: "[cCc]", d: "[dDd]", e: "[e]", f: "[f]", g: "[g  ]", h: "[h]", i: "[iiI]", j: "[j]", k: "[k]", l: "[l ]", n: "[nNn ]", o: "[o ]", p: "[p]", q: "[q q]", r: "[r]", s: "[s  Ss]", t: "[t]", u: "[u]", v: "[v]", w: "[w]", x: "[x]", y: "[y]", z: "[z]" }, l = function () { var e, t, i, n, s = "", o = {}; for (i in r) if (r.hasOwnProperty(i)) for (s += n = r[i].substring(2, r[i].length - 1), e = 0, t = n.length; e < t; e++)o[n.charAt(e)] = i; var a = new RegExp("[" + s + "]", "g"); return function (e) { return e.replace(a, function (e) { return o[e] }).toLowerCase() } }(); return e }), function (e, t) { "function" == typeof define && define.amd ? define("microplugin", t) : "object" == typeof exports ? module.exports = t() : e.MicroPlugin = t() }(this, function () { var e = { mixin: function (e) { e.plugins = {}, e.prototype.initializePlugins = function (e) { var i, n, s, o = []; if (this.plugins = { names: [], settings: {}, requested: {}, loaded: {} }, t.isArray(e)) for (i = 0, n = e.length; i < n; i++)"string" == typeof e[i] ? o.push(e[i]) : (this.plugins.settings[e[i].name] = e[i].options, o.push(e[i].name)); else if (e) for (s in e) e.hasOwnProperty(s) && (this.plugins.settings[s] = e[s], o.push(s)); for (; o.length;)this.require(o.shift()) }, e.prototype.loadPlugin = function (t) { var i = this.plugins, n = e.plugins[t]; if (!e.plugins.hasOwnProperty(t)) throw new Error('Unable to find "' + t + '" plugin'); i.requested[t] = !0, i.loaded[t] = n.fn.apply(this, [this.plugins.settings[t] || {}]), i.names.push(t) }, e.prototype.require = function (e) { var t = this.plugins; if (!this.plugins.loaded.hasOwnProperty(e)) { if (t.requested[e]) throw new Error('Plugin has circular dependency ("' + e + '")'); this.loadPlugin(e) } return t.loaded[e] }, e.define = function (t, i) { e.plugins[t] = { name: t, fn: i } } } }, t = { isArray: Array.isArray || function (e) { return "[object Array]" === Object.prototype.toString.call(e) } }; return e }), function (e, t) { "function" == typeof define && define.amd ? define("selectize", ["jquery", "sifter", "microplugin"], t) : "object" == typeof exports ? module.exports = t(require("jquery"), require("sifter"), require("microplugin")) : e.Selectize = t(e.jQuery, e.Sifter, e.MicroPlugin) }(this, function (e, t, i) { "use strict"; var n = function (e, t) { if ("string" != typeof t || t.length) { var i = "string" == typeof t ? new RegExp(t, "i") : t, n = function (e) { var t = 0; if (3 === e.nodeType) { var s = e.data.search(i); if (s >= 0 && e.data.length > 0) { var o = e.data.match(i), a = document.createElement("span"); a.className = "highlight"; var r = e.splitText(s), l = (r.splitText(o[0].length), r.cloneNode(!0)); a.appendChild(l), r.parentNode.replaceChild(a, r), t = 1 } } else if (1 === e.nodeType && e.childNodes && !/(script|style)/i.test(e.tagName) && ("highlight" !== e.className || "SPAN" !== e.tagName)) for (var c = 0; c < e.childNodes.length; ++c)c += n(e.childNodes[c]); return t }; return e.each(function () { n(this) }) } }; e.fn.removeHighlight = function () { return this.find("span.highlight").each(function () { this.parentNode.firstChild.nodeName; var e = this.parentNode; e.replaceChild(this.firstChild, this), e.normalize() }).end() }; var s = function () { }; s.prototype = { on: function (e, t) { this._events = this._events || {}, this._events[e] = this._events[e] || [], this._events[e].push(t) }, off: function (e, t) { var i = arguments.length; return 0 === i ? delete this._events : 1 === i ? delete this._events[e] : (this._events = this._events || {}, void (e in this._events != !1 && this._events[e].splice(this._events[e].indexOf(t), 1))) }, trigger: function (e) { if (this._events = this._events || {}, e in this._events != !1) for (var t = 0; t < this._events[e].length; t++)this._events[e][t].apply(this, Array.prototype.slice.call(arguments, 1)) } }, s.mixin = function (e) { for (var t = ["on", "off", "trigger"], i = 0; i < t.length; i++)e.prototype[t[i]] = s.prototype[t[i]] }; var o = /Mac/.test(navigator.userAgent), a = o ? 91 : 17, r = o ? 18 : 17, l = !/android/i.test(window.navigator.userAgent) && !!document.createElement("input").validity, c = function (e) { return void 0 !== e }, d = function (e) { return null == e ? null : "boolean" == typeof e ? e ? "1" : "0" : e + "" }, h = function (e) { return (e + "").replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;") }, u = { before: function (e, t, i) { var n = e[t]; e[t] = function () { return i.apply(e, arguments), n.apply(e, arguments) } }, after: function (e, t, i) { var n = e[t]; e[t] = function () { var t = n.apply(e, arguments); return i.apply(e, arguments), t } } }, p = function (e, t, i) { var n, s = e.trigger, o = {}; for (n in e.trigger = function () { var i = arguments[0]; if (-1 === t.indexOf(i)) return s.apply(e, arguments); o[i] = arguments }, i.apply(e, []), e.trigger = s, o) o.hasOwnProperty(n) && s.apply(e, o[n]) }, f = function (e) { var t = {}; if ("selectionStart" in e) t.start = e.selectionStart, t.length = e.selectionEnd - t.start; else if (document.selection) { e.focus(); var i = document.selection.createRange(), n = document.selection.createRange().text.length; i.moveStart("character", -e.value.length), t.start = i.text.length - n, t.length = n } return t }, m = function (t) { var i = null, n = function (n, s) { var o, a, r, l, c, d, h, u, p, m; (s = s || {}, (n = n || window.event || {}).metaKey || n.altKey) || (s.force || !1 !== t.data("grow")) && (o = t.val(), n.type && "keydown" === n.type.toLowerCase() && (r = (a = n.keyCode) >= 48 && a <= 57 || a >= 65 && a <= 90 || a >= 96 && a <= 111 || a >= 186 && a <= 222 || 32 === a, 46 === a || 8 === a ? (u = f(t[0])).length ? o = o.substring(0, u.start) + o.substring(u.start + u.length) : 8 === a && u.start ? o = o.substring(0, u.start - 1) + o.substring(u.start + 1) : 46 === a && void 0 !== u.start && (o = o.substring(0, u.start) + o.substring(u.start + 1)) : r && (d = n.shiftKey, h = String.fromCharCode(n.keyCode), o += h = d ? h.toUpperCase() : h.toLowerCase())), l = t.attr("placeholder"), !o && l && (o = l), m = t, (c = ((p = o) ? (g.$testInput || (g.$testInput = e("<span />").css({ position: "absolute", top: -99999, left: -99999, width: "auto", padding: 0, whiteSpace: "pre" }).appendTo("body")), g.$testInput.text(p), function (e, t, i) { var n, s, o = {}; if (i) for (n = 0, s = i.length; n < s; n++)o[i[n]] = e.css(i[n]); else o = e.css(); t.css(o) }(m, g.$testInput, ["letterSpacing", "fontSize", "fontFamily", "fontWeight", "textTransform"]), g.$testInput.width()) : 0) + 4) !== i && (i = c, t.width(c), t.triggerHandler("resize"))) }; t.on("keydown keyup update blur", n), n() }, g = function (i, n) { var s, o, a, r; (r = i[0]).selectize = this; var l, c, d, h = window.getComputedStyle && window.getComputedStyle(r, null); if (a = (a = h ? h.getPropertyValue("direction") : r.currentStyle && r.currentStyle.direction) || i.parents("[dir]:first").attr("dir") || "", e.extend(this, { order: 0, settings: n, $input: i, tabIndex: i.attr("tabindex") || "", tagType: "select" === r.tagName.toLowerCase() ? 1 : 2, rtl: /rtl/i.test(a), eventNS: ".selectize" + ++g.count, highlightedValue: null, isBlurring: !1, isOpen: !1, isDisabled: !1, isRequired: i.is("[required]"), isInvalid: !1, isLocked: !1, isFocused: !1, isInputHidden: !1, isSetup: !1, isShiftDown: !1, isCmdDown: !1, isCtrlDown: !1, ignoreFocus: !1, ignoreBlur: !1, ignoreHover: !1, hasOptions: !1, currentResults: null, lastValue: "", caretPos: 0, loading: 0, loadedSearches: {}, $activeOption: null, $activeItems: [], optgroups: {}, options: {}, userOptions: {}, items: [], renderCache: {}, onSearchChange: null === n.loadThrottle ? this.onSearchChange : (l = this.onSearchChange, c = n.loadThrottle, function () { var e = this, t = arguments; window.clearTimeout(d), d = window.setTimeout(function () { l.apply(e, t) }, c) }) }), this.sifter = new t(this.options, { diacritics: n.diacritics }), this.settings.options) { for (s = 0, o = this.settings.options.length; s < o; s++)this.registerOption(this.settings.options[s]); delete this.settings.options } if (this.settings.optgroups) { for (s = 0, o = this.settings.optgroups.length; s < o; s++)this.registerOptionGroup(this.settings.optgroups[s]); delete this.settings.optgroups } this.settings.mode = this.settings.mode || (1 === this.settings.maxItems ? "single" : "multi"), "boolean" != typeof this.settings.hideSelected && (this.settings.hideSelected = "multi" === this.settings.mode), this.initializePlugins(this.settings.plugins), this.setupCallbacks(), this.setupTemplates(), this.setup() }; return s.mixin(g), void 0 !== i ? i.mixin(g) : function (e, t) { t || (t = {}); console.error("Selectize: " + e), t.explanation && (console.group && console.group(), console.error(t.explanation), console.group && console.groupEnd()) }("Dependency MicroPlugin is missing", { explanation: 'Make sure you either: (1) are using the "standalone" version of Selectize, or (2) require MicroPlugin before you load Selectize.' }), e.extend(g.prototype, { setup: function () { var t, i, n, s, c, d, h, u, p, f, g, v, b, y, w = this, _ = w.settings, C = w.eventNS, k = e(window), x = e(document), T = w.$input; if (h = w.settings.mode, u = T.attr("class") || "", t = e("<div>").addClass(_.wrapperClass).addClass(u).addClass(h), i = e("<div>").addClass(_.inputClass).addClass("items").appendTo(t), n = e('<input type="text" autocomplete="off" />').appendTo(i).attr("tabindex", T.is(":disabled") ? "-1" : w.tabIndex), d = e(_.dropdownParent || t), s = e("<div>").addClass(_.dropdownClass).addClass(h).hide().appendTo(d), c = e("<div>").addClass(_.dropdownContentClass).appendTo(s), (f = T.attr("id")) && (n.attr("id", f + "-selectized"), e("label[for='" + f + "']").attr("for", f + "-selectized")), w.settings.copyClassesToDropdown && s.addClass(u), t.css({ width: T[0].style.width }), w.plugins.names.length && (p = "plugin-" + w.plugins.names.join(" plugin-"), t.addClass(p), s.addClass(p)), (null === _.maxItems || _.maxItems > 1) && 1 === w.tagType && T.attr("multiple", "multiple"), w.settings.placeholder && n.attr("placeholder", _.placeholder), !w.settings.splitOn && w.settings.delimiter) { var $ = w.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&"); w.settings.splitOn = new RegExp("\\s*" + $ + "+\\s*") } T.attr("autocorrect") && n.attr("autocorrect", T.attr("autocorrect")), T.attr("autocapitalize") && n.attr("autocapitalize", T.attr("autocapitalize")), n[0].type = T[0].type, w.$wrapper = t, w.$control = i, w.$control_input = n, w.$dropdown = s, w.$dropdown_content = c, s.on("mouseenter mousedown click", "[data-disabled]>[data-selectable]", function (e) { e.stopImmediatePropagation() }), s.on("mouseenter", "[data-selectable]", function () { return w.onOptionHover.apply(w, arguments) }), s.on("mousedown click", "[data-selectable]", function () { return w.onOptionSelect.apply(w, arguments) }), v = "mousedown", b = "*:not(input)", y = function () { return w.onItemSelect.apply(w, arguments) }, (g = i).on(v, b, function (e) { for (var t = e.target; t && t.parentNode !== g[0];)t = t.parentNode; return e.currentTarget = t, y.apply(this, [e]) }), m(n), i.on({ mousedown: function () { return w.onMouseDown.apply(w, arguments) }, click: function () { return w.onClick.apply(w, arguments) } }), n.on({ mousedown: function (e) { e.stopPropagation() }, keydown: function () { return w.onKeyDown.apply(w, arguments) }, keyup: function () { return w.onKeyUp.apply(w, arguments) }, keypress: function () { return w.onKeyPress.apply(w, arguments) }, resize: function () { w.positionDropdown.apply(w, []) }, blur: function () { return w.onBlur.apply(w, arguments) }, focus: function () { return w.ignoreBlur = !1, w.onFocus.apply(w, arguments) }, paste: function () { return w.onPaste.apply(w, arguments) } }), x.on("keydown" + C, function (e) { w.isCmdDown = e[o ? "metaKey" : "ctrlKey"], w.isCtrlDown = e[o ? "altKey" : "ctrlKey"], w.isShiftDown = e.shiftKey }), x.on("keyup" + C, function (e) { e.keyCode === r && (w.isCtrlDown = !1), 16 === e.keyCode && (w.isShiftDown = !1), e.keyCode === a && (w.isCmdDown = !1) }), x.on("mousedown" + C, function (e) { if (w.isFocused) { if (e.target === w.$dropdown[0] || e.target.parentNode === w.$dropdown[0]) return !1; w.$control.has(e.target).length || e.target === w.$control[0] || w.blur(e.target) } }), k.on(["scroll" + C, "resize" + C].join(" "), function () { w.isOpen && w.positionDropdown.apply(w, arguments) }), k.on("mousemove" + C, function () { w.ignoreHover = !1 }), this.revertSettings = { $children: T.children().detach(), tabindex: T.attr("tabindex") }, T.attr("tabindex", -1).hide().after(w.$wrapper), e.isArray(_.items) && (w.setValue(_.items), delete _.items), l && T.on("invalid" + C, function (e) { e.preventDefault(), w.isInvalid = !0, w.refreshState() }), w.updateOriginalInput(), w.refreshItems(), w.refreshState(), w.updatePlaceholder(), w.isSetup = !0, T.is(":disabled") && w.disable(), w.on("change", this.onChange), T.data("selectize", w), T.addClass("selectized"), w.trigger("initialize"), !0 === _.preload && w.onSearchChange("") }, setupTemplates: function () { var t = this.settings.labelField, i = this.settings.optgroupLabelField, n = { optgroup: function (e) { return '<div class="optgroup">' + e.html + "</div>" }, optgroup_header: function (e, t) { return '<div class="optgroup-header">' + t(e[i]) + "</div>" }, option: function (e, i) { return '<div class="option">' + i(e[t]) + "</div>" }, item: function (e, i) { return '<div class="item">' + i(e[t]) + "</div>" }, option_create: function (e, t) { return '<div class="create">Add <strong>' + t(e.input) + "</strong>&hellip;</div>" } }; this.settings.render = e.extend({}, n, this.settings.render) }, setupCallbacks: function () { var e, t, i = { initialize: "onInitialize", change: "onChange", item_add: "onItemAdd", item_remove: "onItemRemove", clear: "onClear", option_add: "onOptionAdd", option_remove: "onOptionRemove", option_clear: "onOptionClear", optgroup_add: "onOptionGroupAdd", optgroup_remove: "onOptionGroupRemove", optgroup_clear: "onOptionGroupClear", dropdown_open: "onDropdownOpen", dropdown_close: "onDropdownClose", type: "onType", load: "onLoad", focus: "onFocus", blur: "onBlur" }; for (e in i) i.hasOwnProperty(e) && (t = this.settings[i[e]]) && this.on(e, t) }, onClick: function (e) { this.isFocused && this.isOpen || (this.focus(), e.preventDefault()) }, onMouseDown: function (t) { var i = this, n = t.isDefaultPrevented(); e(t.target); if (i.isFocused) { if (t.target !== i.$control_input[0]) return "single" === i.settings.mode ? i.isOpen ? i.close() : i.open() : n || i.setActiveItem(null), !1 } else n || window.setTimeout(function () { i.focus() }, 0) }, onChange: function () { this.$input.trigger("change") }, onPaste: function (t) { var i = this; i.isFull() || i.isInputHidden || i.isLocked ? t.preventDefault() : i.settings.splitOn && setTimeout(function () { var t = i.$control_input.val(); if (t.match(i.settings.splitOn)) for (var n = e.trim(t).split(i.settings.splitOn), s = 0, o = n.length; s < o; s++)i.createItem(n[s]) }, 0) }, onKeyPress: function (e) { if (this.isLocked) return e && e.preventDefault(); var t = String.fromCharCode(e.keyCode || e.which); return this.settings.create && "multi" === this.settings.mode && t === this.settings.delimiter ? (this.createItem(), e.preventDefault(), !1) : void 0 }, onKeyDown: function (e) { e.target, this.$control_input[0]; if (this.isLocked) 9 !== e.keyCode && e.preventDefault(); else { switch (e.keyCode) { case 65: if (this.isCmdDown) return void this.selectAll(); break; case 27: return void (this.isOpen && (e.preventDefault(), e.stopPropagation(), this.close())); case 78: if (!e.ctrlKey || e.altKey) break; case 40: if (!this.isOpen && this.hasOptions) this.open(); else if (this.$activeOption) { this.ignoreHover = !0; var t = this.getAdjacentOption(this.$activeOption, 1); t.length && this.setActiveOption(t, !0, !0) } return void e.preventDefault(); case 80: if (!e.ctrlKey || e.altKey) break; case 38: if (this.$activeOption) { this.ignoreHover = !0; var i = this.getAdjacentOption(this.$activeOption, -1); i.length && this.setActiveOption(i, !0, !0) } return void e.preventDefault(); case 13: return void (this.isOpen && this.$activeOption && (this.onOptionSelect({ currentTarget: this.$activeOption }), e.preventDefault())); case 37: return void this.advanceSelection(-1, e); case 39: return void this.advanceSelection(1, e); case 9: return this.settings.selectOnTab && this.isOpen && this.$activeOption && (this.onOptionSelect({ currentTarget: this.$activeOption }), this.isFull() || e.preventDefault()), void (this.settings.create && this.createItem() && e.preventDefault()); case 8: case 46: return void this.deleteSelection(e) }!this.isFull() && !this.isInputHidden || (o ? e.metaKey : e.ctrlKey) || e.preventDefault() } }, onKeyUp: function (e) { if (this.isLocked) return e && e.preventDefault(); var t = this.$control_input.val() || ""; this.lastValue !== t && (this.lastValue = t, this.onSearchChange(t), this.refreshOptions(), this.trigger("type", t)) }, onSearchChange: function (e) { var t = this, i = t.settings.load; i && (t.loadedSearches.hasOwnProperty(e) || (t.loadedSearches[e] = !0, t.load(function (n) { i.apply(t, [e, n]) }))) }, onFocus: function (e) { var t = this.isFocused; if (this.isDisabled) return this.blur(), e && e.preventDefault(), !1; this.ignoreFocus || (this.isFocused = !0, "focus" === this.settings.preload && this.onSearchChange(""), t || this.trigger("focus"), this.$activeItems.length || (this.showInput(), this.setActiveItem(null), this.refreshOptions(!!this.settings.openOnFocus)), this.refreshState()) }, onBlur: function (e, t) { var i = this; if (i.isFocused && (i.isFocused = !1, !i.ignoreFocus)) { if (!i.ignoreBlur && document.activeElement === i.$dropdown_content[0]) return i.ignoreBlur = !0, void i.onFocus(e); var n = function () { i.close(), i.setTextboxValue(""), i.setActiveItem(null), i.setActiveOption(null), i.setCaret(i.items.length), i.refreshState(), t && t.focus && t.focus(), i.isBlurring = !1, i.ignoreFocus = !1, i.trigger("blur") }; i.isBlurring = !0, i.ignoreFocus = !0, i.settings.create && i.settings.createOnBlur ? i.createItem(null, !1, n) : n() } }, onOptionHover: function (e) { this.ignoreHover || this.setActiveOption(e.currentTarget, !1) }, onOptionSelect: function (t) { var i, n, s = this; t.preventDefault && (t.preventDefault(), t.stopPropagation()), (n = e(t.currentTarget)).hasClass("create") ? s.createItem(null, function () { s.settings.closeAfterSelect && s.close() }) : void 0 !== (i = n.attr("data-value")) && (s.lastQuery = null, s.setTextboxValue(""), s.addItem(i), s.settings.closeAfterSelect ? s.close() : !s.settings.hideSelected && t.type && /mouse/.test(t.type) && s.setActiveOption(s.getOption(i))) }, onItemSelect: function (e) { this.isLocked || "multi" === this.settings.mode && (e.preventDefault(), this.setActiveItem(e.currentTarget, e)) }, load: function (e) { var t = this, i = t.$wrapper.addClass(t.settings.loadingClass); t.loading++, e.apply(t, [function (e) { t.loading = Math.max(t.loading - 1, 0), e && e.length && (t.addOption(e), t.refreshOptions(t.isFocused && !t.isInputHidden)), t.loading || i.removeClass(t.settings.loadingClass), t.trigger("load", e) }]) }, setTextboxValue: function (e) { var t = this.$control_input; t.val() !== e && (t.val(e).triggerHandler("update"), this.lastValue = e) }, getValue: function () { return 1 === this.tagType && this.$input.attr("multiple") ? this.items : this.items.join(this.settings.delimiter) }, setValue: function (e, t) { p(this, t ? [] : ["change"], function () { this.clear(t), this.addItems(e, t) }) }, setActiveItem: function (t, i) { var n, s, o, a, r, l, c, d; if ("single" !== this.settings.mode) { if (!(t = e(t)).length) return e(this.$activeItems).removeClass("active"), this.$activeItems = [], void (this.isFocused && this.showInput()); if ("mousedown" === (n = i && i.type.toLowerCase()) && this.isShiftDown && this.$activeItems.length) { for (d = this.$control.children(".active:last"), (a = Array.prototype.indexOf.apply(this.$control[0].childNodes, [d[0]])) > (r = Array.prototype.indexOf.apply(this.$control[0].childNodes, [t[0]])) && (c = a, a = r, r = c), s = a; s <= r; s++)l = this.$control[0].childNodes[s], -1 === this.$activeItems.indexOf(l) && (e(l).addClass("active"), this.$activeItems.push(l)); i.preventDefault() } else "mousedown" === n && this.isCtrlDown || "keydown" === n && this.isShiftDown ? t.hasClass("active") ? (o = this.$activeItems.indexOf(t[0]), this.$activeItems.splice(o, 1), t.removeClass("active")) : this.$activeItems.push(t.addClass("active")[0]) : (e(this.$activeItems).removeClass("active"), this.$activeItems = [t.addClass("active")[0]]); this.hideInput(), this.isFocused || this.focus() } }, setActiveOption: function (t, i, n) { var s, o, a, r, l; this.$activeOption && this.$activeOption.removeClass("active"), this.$activeOption = null, (t = e(t)).length && (this.$activeOption = t.addClass("active"), !i && c(i) || (s = this.$dropdown_content.height(), o = this.$activeOption.outerHeight(!0), i = this.$dropdown_content.scrollTop() || 0, r = a = this.$activeOption.offset().top - this.$dropdown_content.offset().top + i, l = a - s + o, a + o > s + i ? this.$dropdown_content.stop().animate({ scrollTop: l }, n ? this.settings.scrollDuration : 0) : a < i && this.$dropdown_content.stop().animate({ scrollTop: r }, n ? this.settings.scrollDuration : 0))) }, selectAll: function () { "single" !== this.settings.mode && (this.$activeItems = Array.prototype.slice.apply(this.$control.children(":not(input)").addClass("active")), this.$activeItems.length && (this.hideInput(), this.close()), this.focus()) }, hideInput: function () { this.setTextboxValue(""), this.$control_input.css({ opacity: 0, position: "absolute", left: this.rtl ? 1e4 : -1e4 }), this.isInputHidden = !0 }, showInput: function () { this.$control_input.css({ opacity: 1, position: "relative", left: 0 }), this.isInputHidden = !1 }, focus: function () { var e = this; e.isDisabled || (e.ignoreFocus = !0, e.$control_input[0].focus(), window.setTimeout(function () { e.ignoreFocus = !1, e.onFocus() }, 0)) }, blur: function (e) { this.$control_input[0].blur(), this.onBlur(null, e) }, getScoreFunction: function (e) { return this.sifter.getScoreFunction(e, this.getSearchOptions()) }, getSearchOptions: function () { var e = this.settings, t = e.sortField; return "string" == typeof t && (t = [{ field: t }]), { fields: e.searchField, conjunction: e.searchConjunction, sort: t, nesting: e.nesting } }, search: function (t) { var i, n, s, o = this.settings, a = this.getSearchOptions(); if (o.score && "function" != typeof (s = this.settings.score.apply(this, [t]))) throw new Error('Selectize "score" setting must be a function that returns a function'); if (t !== this.lastQuery ? (this.lastQuery = t, n = this.sifter.search(t, e.extend(a, { score: s })), this.currentResults = n) : n = e.extend(!0, {}, this.currentResults), o.hideSelected) for (i = n.items.length - 1; i >= 0; i--)-1 !== this.items.indexOf(d(n.items[i].id)) && n.items.splice(i, 1); return n }, refreshOptions: function (t) { var i, s, o, a, r, l, c, h, u, p, f, m, g, v, b, y; void 0 === t && (t = !0); var w, _, C = this, k = e.trim(C.$control_input.val()), x = C.search(k), T = C.$dropdown_content, $ = C.$activeOption && d(C.$activeOption.attr("data-value")); for (a = x.items.length, "number" == typeof C.settings.maxOptions && (a = Math.min(a, C.settings.maxOptions)), r = {}, l = [], i = 0; i < a; i++)for (c = C.options[x.items[i].id], h = C.render("option", c), u = c[C.settings.optgroupField] || "", s = 0, o = (p = e.isArray(u) ? u : [u]) && p.length; s < o; s++)u = p[s], C.optgroups.hasOwnProperty(u) || (u = ""), r.hasOwnProperty(u) || (r[u] = document.createDocumentFragment(), l.push(u)), r[u].appendChild(h); for (this.settings.lockOptgroupOrder && l.sort(function (e, t) { return (C.optgroups[e].$order || 0) - (C.optgroups[t].$order || 0) }), f = document.createDocumentFragment(), i = 0, a = l.length; i < a; i++)u = l[i], C.optgroups.hasOwnProperty(u) && r[u].childNodes.length ? ((m = document.createDocumentFragment()).appendChild(C.render("optgroup_header", C.optgroups[u])), m.appendChild(r[u]), f.appendChild(C.render("optgroup", e.extend({}, C.optgroups[u], { html: (w = m, _ = void 0, _ = document.createElement("div"), _.appendChild(w.cloneNode(!0)), _.innerHTML), dom: m })))) : f.appendChild(r[u]); if (T.html(f), C.settings.highlight && (T.removeHighlight(), x.query.length && x.tokens.length)) for (i = 0, a = x.tokens.length; i < a; i++)n(T, x.tokens[i].regex); if (!C.settings.hideSelected) for (i = 0, a = C.items.length; i < a; i++)C.getOption(C.items[i]).addClass("selected"); (g = C.canCreate(k)) && (T.prepend(C.render("option_create", { input: k })), y = e(T[0].childNodes[0])), C.hasOptions = x.items.length > 0 || g, C.hasOptions ? (x.items.length > 0 ? ((b = $ && C.getOption($)) && b.length ? v = b : "single" === C.settings.mode && C.items.length && (v = C.getOption(C.items[0])), v && v.length || (v = y && !C.settings.addPrecedence ? C.getAdjacentOption(y, 1) : T.find("[data-selectable]:first"))) : v = y, C.setActiveOption(v), t && !C.isOpen && C.open()) : (C.setActiveOption(null), t && C.isOpen && C.close()) }, addOption: function (t) { var i, n, s; if (e.isArray(t)) for (i = 0, n = t.length; i < n; i++)this.addOption(t[i]); else (s = this.registerOption(t)) && (this.userOptions[s] = !0, this.lastQuery = null, this.trigger("option_add", s, t)) }, registerOption: function (e) { var t = d(e[this.settings.valueField]); return null != t && !this.options.hasOwnProperty(t) && (e.$order = e.$order || ++this.order, this.options[t] = e, t) }, registerOptionGroup: function (e) { var t = d(e[this.settings.optgroupValueField]); return !!t && (e.$order = e.$order || ++this.order, this.optgroups[t] = e, t) }, addOptionGroup: function (e, t) { t[this.settings.optgroupValueField] = e, (e = this.registerOptionGroup(t)) && this.trigger("optgroup_add", e, t) }, removeOptionGroup: function (e) { this.optgroups.hasOwnProperty(e) && (delete this.optgroups[e], this.renderCache = {}, this.trigger("optgroup_remove", e)) }, clearOptionGroups: function () { this.optgroups = {}, this.renderCache = {}, this.trigger("optgroup_clear") }, updateOption: function (t, i) { var n, s, o, a, r, l, c; if (t = d(t), o = d(i[this.settings.valueField]), null !== t && this.options.hasOwnProperty(t)) { if ("string" != typeof o) throw new Error("Value must be set in option data"); c = this.options[t].$order, o !== t && (delete this.options[t], -1 !== (a = this.items.indexOf(t)) && this.items.splice(a, 1, o)), i.$order = i.$order || c, this.options[o] = i, r = this.renderCache.item, l = this.renderCache.option, r && (delete r[t], delete r[o]), l && (delete l[t], delete l[o]), -1 !== this.items.indexOf(o) && (n = this.getItem(t), s = e(this.render("item", i)), n.hasClass("active") && s.addClass("active"), n.replaceWith(s)), this.lastQuery = null, this.isOpen && this.refreshOptions(!1) } }, removeOption: function (e, t) { e = d(e); var i = this.renderCache.item, n = this.renderCache.option; i && delete i[e], n && delete n[e], delete this.userOptions[e], delete this.options[e], this.lastQuery = null, this.trigger("option_remove", e), this.removeItem(e, t) }, clearOptions: function () { var t = this; t.loadedSearches = {}, t.userOptions = {}, t.renderCache = {}; var i = t.options; e.each(t.options, function (e, n) { -1 == t.items.indexOf(e) && delete i[e] }), t.options = t.sifter.items = i, t.lastQuery = null, t.trigger("option_clear") }, getOption: function (e) { return this.getElementWithValue(e, this.$dropdown_content.find("[data-selectable]")) }, getAdjacentOption: function (t, i) { var n = this.$dropdown.find("[data-selectable]"), s = n.index(t) + i; return s >= 0 && s < n.length ? n.eq(s) : e() }, getElementWithValue: function (t, i) { if (null != (t = d(t))) for (var n = 0, s = i.length; n < s; n++)if (i[n].getAttribute("data-value") === t) return e(i[n]); return e() }, getItem: function (e) { return this.getElementWithValue(e, this.$control.children()) }, addItems: function (t, i) { this.buffer = document.createDocumentFragment(); for (var n = this.$control[0].childNodes, s = 0; s < n.length; s++)this.buffer.appendChild(n[s]); for (var o = e.isArray(t) ? t : [t], a = (s = 0, o.length); s < a; s++)this.isPending = s < a - 1, this.addItem(o[s], i); var r = this.$control[0]; r.insertBefore(this.buffer, r.firstChild), this.buffer = null }, addItem: function (t, i) { p(this, i ? [] : ["change"], function () { var n, s, o, a, r, l = this.settings.mode; t = d(t), -1 === this.items.indexOf(t) ? this.options.hasOwnProperty(t) && ("single" === l && this.clear(i), "multi" === l && this.isFull() || (n = e(this.render("item", this.options[t])), r = this.isFull(), this.items.splice(this.caretPos, 0, t), this.insertAtCaret(n), (!this.isPending || !r && this.isFull()) && this.refreshState(), this.isSetup && (o = this.$dropdown_content.find("[data-selectable]"), this.isPending || (s = this.getOption(t), a = this.getAdjacentOption(s, 1).attr("data-value"), this.refreshOptions(this.isFocused && "single" !== l), a && this.setActiveOption(this.getOption(a))), !o.length || this.isFull() ? this.close() : this.isPending || this.positionDropdown(), this.updatePlaceholder(), this.trigger("item_add", t, n), this.isPending || this.updateOriginalInput({ silent: i })))) : "single" === l && this.close() }) }, removeItem: function (t, i) { var n, s, o; n = t instanceof e ? t : this.getItem(t), t = d(n.attr("data-value")), -1 !== (s = this.items.indexOf(t)) && (n.remove(), n.hasClass("active") && (o = this.$activeItems.indexOf(n[0]), this.$activeItems.splice(o, 1)), this.items.splice(s, 1), this.lastQuery = null, !this.settings.persist && this.userOptions.hasOwnProperty(t) && this.removeOption(t, i), s < this.caretPos && this.setCaret(this.caretPos - 1), this.refreshState(), this.updatePlaceholder(), this.updateOriginalInput({ silent: i }), this.positionDropdown(), this.trigger("item_remove", t, n)) }, createItem: function (t, i) { var n = this, s = n.caretPos; t = t || e.trim(n.$control_input.val() || ""); var o = arguments[arguments.length - 1]; if ("function" != typeof o && (o = function () { }), "boolean" != typeof i && (i = !0), !n.canCreate(t)) return o(), !1; n.lock(); var a, r, l = "function" == typeof n.settings.create ? this.settings.create : function (e) { var t = {}; return t[n.settings.labelField] = e, t[n.settings.valueField] = e, t }, c = (a = function (e) { if (n.unlock(), !e || "object" != typeof e) return o(); var t = d(e[n.settings.valueField]); if ("string" != typeof t) return o(); n.setTextboxValue(""), n.addOption(e), n.setCaret(s), n.addItem(t), n.refreshOptions(i && "single" !== n.settings.mode), o(e) }, r = !1, function () { r || (r = !0, a.apply(this, arguments)) }), h = l.apply(this, [t, c]); return void 0 !== h && c(h), !0 }, refreshItems: function () { this.lastQuery = null, this.isSetup && this.addItem(this.items), this.refreshState(), this.updateOriginalInput() }, refreshState: function () { this.refreshValidityState(), this.refreshClasses() }, refreshValidityState: function () { if (!this.isRequired) return !1; var e = !this.items.length; this.isInvalid = e, this.$control_input.prop("required", e), this.$input.prop("required", !e) }, refreshClasses: function () { var t = this.isFull(), i = this.isLocked; this.$wrapper.toggleClass("rtl", this.rtl), this.$control.toggleClass("focus", this.isFocused).toggleClass("disabled", this.isDisabled).toggleClass("required", this.isRequired).toggleClass("invalid", this.isInvalid).toggleClass("locked", i).toggleClass("full", t).toggleClass("not-full", !t).toggleClass("input-active", this.isFocused && !this.isInputHidden).toggleClass("dropdown-active", this.isOpen).toggleClass("has-options", !e.isEmptyObject(this.options)).toggleClass("has-items", this.items.length > 0), this.$control_input.data("grow", !t && !i) }, isFull: function () { return null !== this.settings.maxItems && this.items.length >= this.settings.maxItems }, updateOriginalInput: function (e) { var t, i, n, s; if (e = e || {}, 1 === this.tagType) { for (n = [], t = 0, i = this.items.length; t < i; t++)s = this.options[this.items[t]][this.settings.labelField] || "", n.push('<option value="' + h(this.items[t]) + '" selected="selected">' + h(s) + "</option>"); n.length || this.$input.attr("multiple") || n.push('<option value="" selected="selected"></option>'), this.$input.html(n.join("")) } else this.$input.val(this.getValue()), this.$input.attr("value", this.$input.val()); this.isSetup && (e.silent || this.trigger("change", this.$input.val())) }, updatePlaceholder: function () { if (this.settings.placeholder) { var e = this.$control_input; this.items.length ? e.removeAttr("placeholder") : e.attr("placeholder", this.settings.placeholder), e.triggerHandler("update", { force: !0 }) } }, open: function () { this.isLocked || this.isOpen || "multi" === this.settings.mode && this.isFull() || (this.focus(), this.isOpen = !0, this.refreshState(), this.$dropdown.css({ visibility: "hidden", display: "block" }), this.positionDropdown(), this.$dropdown.css({ visibility: "visible" }), this.trigger("dropdown_open", this.$dropdown)) }, close: function () { var e = this.isOpen; "single" === this.settings.mode && this.items.length && (this.hideInput(), this.isBlurring || this.$control_input.blur()), this.isOpen = !1, this.$dropdown.hide(), this.setActiveOption(null), this.refreshState(), e && this.trigger("dropdown_close", this.$dropdown) }, positionDropdown: function () { var e = this.$control, t = "body" === this.settings.dropdownParent ? e.offset() : e.position(); t.top += e.outerHeight(!0), this.$dropdown.css({ width: e[0].getBoundingClientRect().width, top: t.top, left: t.left }) }, clear: function (e) { this.items.length && (this.$control.children(":not(input)").remove(), this.items = [], this.lastQuery = null, this.setCaret(0), this.setActiveItem(null), this.updatePlaceholder(), this.updateOriginalInput({ silent: e }), this.refreshState(), this.showInput(), this.trigger("clear")) }, insertAtCaret: function (e) { var t = Math.min(this.caretPos, this.items.length), i = e[0], n = this.buffer || this.$control[0]; 0 === t ? n.insertBefore(i, n.firstChild) : n.insertBefore(i, n.childNodes[t]), this.setCaret(t + 1) }, deleteSelection: function (t) { var i, n, s, o, a, r, l, c, d; if (s = t && 8 === t.keyCode ? -1 : 1, o = f(this.$control_input[0]), this.$activeOption && !this.settings.hideSelected && (l = this.getAdjacentOption(this.$activeOption, -1).attr("data-value")), a = [], this.$activeItems.length) { for (d = this.$control.children(".active:" + (s > 0 ? "last" : "first")), r = this.$control.children(":not(input)").index(d), s > 0 && r++, i = 0, n = this.$activeItems.length; i < n; i++)a.push(e(this.$activeItems[i]).attr("data-value")); t && (t.preventDefault(), t.stopPropagation()) } else (this.isFocused || "single" === this.settings.mode) && this.items.length && (s < 0 && 0 === o.start && 0 === o.length ? a.push(this.items[this.caretPos - 1]) : s > 0 && o.start === this.$control_input.val().length && a.push(this.items[this.caretPos])); if (!a.length || "function" == typeof this.settings.onDelete && !1 === this.settings.onDelete.apply(this, [a])) return !1; for (void 0 !== r && this.setCaret(r); a.length;)this.removeItem(a.pop()); return this.showInput(), this.positionDropdown(), this.refreshOptions(!0), l && (c = this.getOption(l)).length && this.setActiveOption(c), !0 }, advanceSelection: function (e, t) { var i, n, s, o, a; 0 !== e && (this.rtl && (e *= -1), i = e > 0 ? "last" : "first", n = f(this.$control_input[0]), this.isFocused && !this.isInputHidden ? (o = this.$control_input.val().length, (e < 0 ? 0 === n.start && 0 === n.length : n.start === o) && !o && this.advanceCaret(e, t)) : (a = this.$control.children(".active:" + i)).length && (s = this.$control.children(":not(input)").index(a), this.setActiveItem(null), this.setCaret(e > 0 ? s + 1 : s))) }, advanceCaret: function (e, t) { var i, n; 0 !== e && (i = e > 0 ? "next" : "prev", this.isShiftDown ? (n = this.$control_input[i]()).length && (this.hideInput(), this.setActiveItem(n), t && t.preventDefault()) : this.setCaret(this.caretPos + e)) }, setCaret: function (t) { var i, n, s, o; if (t = "single" === this.settings.mode ? this.items.length : Math.max(0, Math.min(this.items.length, t)), !this.isPending) for (i = 0, n = (s = this.$control.children(":not(input)")).length; i < n; i++)o = e(s[i]).detach(), i < t ? this.$control_input.before(o) : this.$control.append(o); this.caretPos = t }, lock: function () { this.close(), this.isLocked = !0, this.refreshState() }, unlock: function () { this.isLocked = !1, this.refreshState() }, disable: function () { this.$input.prop("disabled", !0), this.$control_input.prop("disabled", !0).prop("tabindex", -1), this.isDisabled = !0, this.lock() }, enable: function () { this.$input.prop("disabled", !1), this.$control_input.prop("disabled", !1).prop("tabindex", this.tabIndex), this.isDisabled = !1, this.unlock() }, destroy: function () { var t = this.eventNS, i = this.revertSettings; this.trigger("destroy"), this.off(), this.$wrapper.remove(), this.$dropdown.remove(), this.$input.html("").append(i.$children).removeAttr("tabindex").removeClass("selectized").attr({ tabindex: i.tabindex }).show(), this.$control_input.removeData("grow"), this.$input.removeData("selectize"), 0 == --g.count && g.$testInput && (g.$testInput.remove(), g.$testInput = void 0), e(window).off(t), e(document).off(t), e(document.body).off(t), delete this.$input[0].selectize }, render: function (t, i) { var n, s, o = "", a = !1; return "option" !== t && "item" !== t || (a = !!(n = d(i[this.settings.valueField]))), a && (c(this.renderCache[t]) || (this.renderCache[t] = {}), this.renderCache[t].hasOwnProperty(n)) ? this.renderCache[t][n] : (o = e(this.settings.render[t].apply(this, [i, h])), "option" === t || "option_create" === t ? i[this.settings.disabledField] || o.attr("data-selectable", "") : "optgroup" === t && (s = i[this.settings.optgroupValueField] || "", o.attr("data-group", s), i[this.settings.disabledField] && o.attr("data-disabled", "")), "option" !== t && "item" !== t || o.attr("data-value", n || ""), a && (this.renderCache[t][n] = o[0]), o[0]) }, clearCache: function (e) { void 0 === e ? this.renderCache = {} : delete this.renderCache[e] }, canCreate: function (e) { if (!this.settings.create) return !1; var t = this.settings.createFilter; return e.length && ("function" != typeof t || t.apply(this, [e])) && ("string" != typeof t || new RegExp(t).test(e)) && (!(t instanceof RegExp) || t.test(e)) } }), g.count = 0, g.defaults = { options: [], optgroups: [], plugins: [], delimiter: ",", splitOn: null, persist: !0, diacritics: !0, create: !1, createOnBlur: !1, createFilter: null, highlight: !0, openOnFocus: !0, maxOptions: 1e3, maxItems: null, hideSelected: null, addPrecedence: !1, selectOnTab: !1, preload: !1, allowEmptyOption: !1, closeAfterSelect: !1, scrollDuration: 60, loadThrottle: 300, loadingClass: "loading", dataAttr: "data-data", optgroupField: "optgroup", valueField: "value", labelField: "text", disabledField: "disabled", optgroupLabelField: "label", optgroupValueField: "value", lockOptgroupOrder: !1, sortField: "$order", searchField: ["text"], searchConjunction: "and", mode: null, wrapperClass: "selectize-control", inputClass: "selectize-input", dropdownClass: "selectize-dropdown", dropdownContentClass: "selectize-dropdown-content", dropdownParent: null, copyClassesToDropdown: !0, render: {} }, e.fn.selectize = function (t) { var i = e.fn.selectize.defaults, n = e.extend({}, i, t), s = n.dataAttr, o = n.labelField, a = n.valueField, r = n.disabledField, l = n.optgroupField, c = n.optgroupLabelField, h = n.optgroupValueField; return this.each(function () { if (!this.selectize) { var u = e(this), p = this.tagName.toLowerCase(), f = u.attr("placeholder") || u.attr("data-placeholder"); f || n.allowEmptyOption || (f = u.children('option[value=""]').text()); var m = { placeholder: f, options: [], optgroups: [], items: [] }; "select" === p ? function (t, i) { var u, p, f, m, g = i.options, v = {}, b = function (e) { var t = s && e.attr(s); return "string" == typeof t && t.length ? JSON.parse(t) : null }, y = function (t, s) { t = e(t); var c = d(t.val()); if (c || n.allowEmptyOption) if (v.hasOwnProperty(c)) { if (s) { var h = v[c][l]; h ? e.isArray(h) ? h.push(s) : v[c][l] = [h, s] : v[c][l] = s } } else { var u = b(t) || {}; u[o] = u[o] || t.text(), u[a] = u[a] || c, u[r] = u[r] || t.prop("disabled"), u[l] = u[l] || s, v[c] = u, g.push(u), t.is(":selected") && i.items.push(c) } }, w = function (t) { var n, s, o, a, l; for ((o = (t = e(t)).attr("label")) && ((a = b(t) || {})[c] = o, a[h] = o, a[r] = t.prop("disabled"), i.optgroups.push(a)), n = 0, s = (l = e("option", t)).length; n < s; n++)y(l[n], o) }; for (i.maxItems = t.attr("multiple") ? null : 1, u = 0, p = (m = t.children()).length; u < p; u++)"optgroup" === (f = m[u].tagName.toLowerCase()) ? w(m[u]) : "option" === f && y(m[u]) }(u, m) : function (t, i) { var r, l, c, d, h = t.attr(s); if (h) for (i.options = JSON.parse(h), r = 0, l = i.options.length; r < l; r++)i.items.push(i.options[r][a]); else { var u = e.trim(t.val() || ""); if (!n.allowEmptyOption && !u.length) return; for (r = 0, l = (c = u.split(n.delimiter)).length; r < l; r++)(d = {})[o] = c[r], d[a] = c[r], i.options.push(d); i.items = c } }(u, m), new g(u, e.extend(!0, {}, i, m, t)) } }) }, e.fn.selectize.defaults = g.defaults, e.fn.selectize.support = { validity: l }, g.define("drag_drop", function (t) { if (!e.fn.sortable) throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".'); if ("multi" === this.settings.mode) { var i, n = this; n.lock = (i = n.lock, function () { var e = n.$control.data("sortable"); return e && e.disable(), i.apply(n, arguments) }), n.unlock = function () { var e = n.unlock; return function () { var t = n.$control.data("sortable"); return t && t.enable(), e.apply(n, arguments) } }(), n.setup = function () { var t = n.setup; return function () { t.apply(this, arguments); var i = n.$control.sortable({ items: "[data-value]", forcePlaceholderSize: !0, disabled: n.isLocked, start: function (e, t) { t.placeholder.css("width", t.helper.css("width")), i.css({ overflow: "visible" }) }, stop: function () { i.css({ overflow: "hidden" }); var t = n.$activeItems ? n.$activeItems.slice() : null, s = []; i.children("[data-value]").each(function () { s.push(e(this).attr("data-value")) }), n.setValue(s), n.setActiveItem(t) } }) } }() } }), g.define("dropdown_header", function (t) { var i, n = this; t = e.extend({ title: "Untitled", headerClass: "selectize-dropdown-header", titleRowClass: "selectize-dropdown-header-title", labelClass: "selectize-dropdown-header-label", closeClass: "selectize-dropdown-header-close", html: function (e) { return '<div class="' + e.headerClass + '"><div class="' + e.titleRowClass + '"><span class="' + e.labelClass + '">' + e.title + '</span><a href="javascript:void(0)" class="' + e.closeClass + '">&times;</a></div></div>' } }, t), n.setup = (i = n.setup, function () { i.apply(n, arguments), n.$dropdown_header = e(t.html(t)), n.$dropdown.prepend(n.$dropdown_header) }) }), g.define("optgroup_columns", function (t) { var i, n = this; t = e.extend({ equalizeWidth: !0, equalizeHeight: !0 }, t), this.getAdjacentOption = function (t, i) { var n = t.closest("[data-group]").find("[data-selectable]"), s = n.index(t) + i; return s >= 0 && s < n.length ? n.eq(s) : e() }, this.onKeyDown = (i = n.onKeyDown, function (e) { var t, s, o, a; return !this.isOpen || 37 !== e.keyCode && 39 !== e.keyCode ? i.apply(this, arguments) : (n.ignoreHover = !0, t = (a = this.$activeOption.closest("[data-group]")).find("[data-selectable]").index(this.$activeOption), void ((s = (o = (a = 37 === e.keyCode ? a.prev("[data-group]") : a.next("[data-group]")).find("[data-selectable]")).eq(Math.min(o.length - 1, t))).length && this.setActiveOption(s))) }); var s = function () { var e, t = s.width, i = document; return void 0 === t && ((e = i.createElement("div")).innerHTML = '<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>', e = e.firstChild, i.body.appendChild(e), t = s.width = e.offsetWidth - e.clientWidth, i.body.removeChild(e)), t }, o = function () { var i, o, a, r, l, c, d; if ((o = (d = e("[data-group]", n.$dropdown_content)).length) && n.$dropdown_content.width()) { if (t.equalizeHeight) { for (a = 0, i = 0; i < o; i++)a = Math.max(a, d.eq(i).height()); d.css({ height: a }) } t.equalizeWidth && (c = n.$dropdown_content.innerWidth() - s(), r = Math.round(c / o), d.css({ width: r }), o > 1 && (l = c - r * (o - 1), d.eq(o - 1).css({ width: l }))) } }; (t.equalizeHeight || t.equalizeWidth) && (u.after(this, "positionDropdown", o), u.after(this, "refreshOptions", o)) }), g.define("remove_button", function (t) { t = e.extend({ label: "&times;", title: "Remove", className: "remove", append: !0 }, t); "single" !== this.settings.mode ? function (t, i) { var n, s = t, o = '<a href="javascript:void(0)" class="' + i.className + '" tabindex="-1" title="' + h(i.title) + '">' + i.label + "</a>"; t.setup = (n = s.setup, function () { if (i.append) { var a = s.settings.render.item; s.settings.render.item = function (e) { return i = a.apply(t, arguments), n = o, s = i.search(/(<\/[^>]+>\s*)$/), i.substring(0, s) + n + i.substring(s); var i, n, s } } n.apply(t, arguments), t.$control.on("click", "." + i.className, function (t) { if (t.preventDefault(), !s.isLocked) { var i = e(t.currentTarget).parent(); s.setActiveItem(i), s.deleteSelection() && s.setCaret(s.items.length) } }) }) }(this, t) : function (t, i) { i.className = "remove-single"; var n, s = t, o = '<a href="javascript:void(0)" class="' + i.className + '" tabindex="-1" title="' + h(i.title) + '">' + i.label + "</a>"; t.setup = (n = s.setup, function () { if (i.append) { var a = e(s.$input.context).attr("id"), r = (e("#" + a), s.settings.render.item); s.settings.render.item = function (i) { return n = r.apply(t, arguments), s = o, e("<span>").append(n).append(s); var n, s } } n.apply(t, arguments), t.$control.on("click", "." + i.className, function (e) { e.preventDefault(), s.isLocked || s.clear() }) }) }(this, t) }), g.define("restore_on_backspace", function (e) { var t, i = this; e.text = e.text || function (e) { return e[this.settings.labelField] }, this.onKeyDown = (t = i.onKeyDown, function (i) { var n, s; return 8 === i.keyCode && "" === this.$control_input.val() && !this.$activeItems.length && (n = this.caretPos - 1) >= 0 && n < this.items.length ? (s = this.options[this.items[n]], this.deleteSelection(i) && (this.setTextboxValue(e.text.apply(this, [s])), this.refreshOptions(!0)), void i.preventDefault()) : t.apply(this, arguments) }) }), g }), function () { var e, t, i, n, s, o, a, r, l = [].slice, c = {}.hasOwnProperty; a = function () { }, t = function () { function e() { } return e.prototype.addEventListener = e.prototype.on, e.prototype.on = function (e, t) { return this._callbacks = this._callbacks || {}, this._callbacks[e] || (this._callbacks[e] = []), this._callbacks[e].push(t), this }, e.prototype.emit = function () { var e, t, i, n, s; if (i = arguments[0], e = 2 <= arguments.length ? l.call(arguments, 1) : [], this._callbacks = this._callbacks || {}, t = this._callbacks[i]) for (n = 0, s = t.length; n < s; n++)t[n].apply(this, e); return this }, e.prototype.removeListener = e.prototype.off, e.prototype.removeAllListeners = e.prototype.off, e.prototype.removeEventListener = e.prototype.off, e.prototype.off = function (e, t) { var i, n, s, o; if (!this._callbacks || 0 === arguments.length) return this._callbacks = {}, this; if (!(i = this._callbacks[e])) return this; if (1 === arguments.length) return delete this._callbacks[e], this; for (n = s = 0, o = i.length; s < o; n = ++s)if (i[n] === t) { i.splice(n, 1); break } return this }, e }(), (e = function (e) { var i, n; function s(e, t) { var n, o, a; if (this.element = e, this.version = s.version, this.defaultOptions.previewTemplate = this.defaultOptions.previewTemplate.replace(/\n*/g, ""), this.clickableElements = [], this.listeners = [], this.files = [], "string" == typeof this.element && (this.element = document.querySelector(this.element)), !this.element || null == this.element.nodeType) throw new Error("Invalid dropzone element."); if (this.element.dropzone) throw new Error("Dropzone already attached."); if (s.instances.push(this), this.element.dropzone = this, n = null != (a = s.optionsForElement(this.element)) ? a : {}, this.options = i({}, this.defaultOptions, n, null != t ? t : {}), this.options.forceFallback || !s.isBrowserSupported()) return this.options.fallback.call(this); if (null == this.options.url && (this.options.url = this.element.getAttribute("action")), !this.options.url) throw new Error("No URL provided."); if (this.options.acceptedFiles && this.options.acceptedMimeTypes) throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated."); this.options.acceptedMimeTypes && (this.options.acceptedFiles = this.options.acceptedMimeTypes, delete this.options.acceptedMimeTypes), this.options.method = this.options.method.toUpperCase(), (o = this.getExistingFallback()) && o.parentNode && o.parentNode.removeChild(o), !1 !== this.options.previewsContainer && (this.options.previewsContainer ? this.previewsContainer = s.getElement(this.options.previewsContainer, "previewsContainer") : this.previewsContainer = this.element), this.options.clickable && (!0 === this.options.clickable ? this.clickableElements = [this.element] : this.clickableElements = s.getElements(this.options.clickable, "clickable")), this.init() } return function (e, t) { for (var i in t) c.call(t, i) && (e[i] = t[i]); function n() { this.constructor = e } n.prototype = t.prototype, e.prototype = new n, e.__super__ = t.prototype }(s, t), s.prototype.Emitter = t, s.prototype.events = ["drop", "dragstart", "dragend", "dragenter", "dragover", "dragleave", "addedfile", "removedfile", "thumbnail", "error", "errormultiple", "processing", "processingmultiple", "uploadprogress", "totaluploadprogress", "sending", "sendingmultiple", "success", "successmultiple", "canceled", "canceledmultiple", "complete", "completemultiple", "reset", "maxfilesexceeded", "maxfilesreached", "queuecomplete"], s.prototype.defaultOptions = { url: null, method: "post", withCredentials: !1, parallelUploads: 2, uploadMultiple: !1, maxFilesize: 256, paramName: "file", createImageThumbnails: !0, maxThumbnailFilesize: 10, thumbnailWidth: 120, thumbnailHeight: 120, filesizeBase: 1e3, maxFiles: null, filesizeBase: 1e3, params: {}, clickable: !0, ignoreHiddenFiles: !0, acceptedFiles: null, acceptedMimeTypes: null, autoProcessQueue: !0, autoQueue: !0, addRemoveLinks: !1, previewsContainer: null, capture: null, dictDefaultMessage: "Drop files here to upload", dictFallbackMessage: "Your browser does not support drag'n'drop file uploads.", dictFallbackText: "Please use the fallback form below to upload your files like in the olden days.", dictFileTooBig: "File is too big ({{filesize}}MB). Max filesize: {{maxFilesize}}MB.", dictInvalidFileType: "You can't upload files of this type.", dictResponseError: "Server responded with {{statusCode}} code.", dictCancelUpload: "Cancel upload", dictCancelUploadConfirmation: "Are you sure you want to cancel this upload?", dictRemoveFile: "Remove file", dictRemoveFileConfirmation: null, dictMaxFilesExceeded: "You can not upload any more files.", accept: function (e, t) { return t() }, init: function () { return a }, forceFallback: !1, fallback: function () { var e, t, i, n, o, a; for (this.element.className = this.element.className + " dz-browser-not-supported", n = 0, o = (a = this.element.getElementsByTagName("div")).length; n < o; n++)e = a[n], /(^| )dz-message($| )/.test(e.className) && (t = e, e.className = "dz-message"); return t || (t = s.createElement('<div class="dz-message"><span></span></div>'), this.element.appendChild(t)), (i = t.getElementsByTagName("span")[0]) && (i.textContent = this.options.dictFallbackMessage), this.element.appendChild(this.getFallbackForm()) }, resize: function (e) { var t, i, n; return t = { srcX: 0, srcY: 0, srcWidth: e.width, srcHeight: e.height }, i = e.width / e.height, t.optWidth = this.options.thumbnailWidth, t.optHeight = this.options.thumbnailHeight, null == t.optWidth && null == t.optHeight ? (t.optWidth = t.srcWidth, t.optHeight = t.srcHeight) : null == t.optWidth ? t.optWidth = i * t.optHeight : null == t.optHeight && (t.optHeight = 1 / i * t.optWidth), n = t.optWidth / t.optHeight, e.height < t.optHeight || e.width < t.optWidth ? (t.trgHeight = t.srcHeight, t.trgWidth = t.srcWidth) : i > n ? (t.srcHeight = e.height, t.srcWidth = t.srcHeight * n) : (t.srcWidth = e.width, t.srcHeight = t.srcWidth / n), t.srcX = (e.width - t.srcWidth) / 2, t.srcY = (e.height - t.srcHeight) / 2, t }, drop: function (e) { return this.element.classList.remove("dz-drag-hover") }, dragstart: a, dragend: function (e) { return this.element.classList.remove("dz-drag-hover") }, dragenter: function (e) { return this.element.classList.add("dz-drag-hover") }, dragover: function (e) { return this.element.classList.add("dz-drag-hover") }, dragleave: function (e) { return this.element.classList.remove("dz-drag-hover") }, paste: a, reset: function () { return this.element.classList.remove("dz-started") }, addedfile: function (e) { var t, i, n, o, a, r, l, c, d, h, u, p, f; if (this.element === this.previewsContainer && this.element.classList.add("dz-started"), this.previewsContainer) { for (e.previewElement = s.createElement(this.options.previewTemplate.trim()), e.previewTemplate = e.previewElement, this.previewsContainer.appendChild(e.previewElement), n = 0, r = (d = e.previewElement.querySelectorAll("[data-dz-name]")).length; n < r; n++)d[n].textContent = e.name; for (o = 0, l = (h = e.previewElement.querySelectorAll("[data-dz-size]")).length; o < l; o++)h[o].innerHTML = this.filesize(e.size); for (this.options.addRemoveLinks && (e._removeLink = s.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>' + this.options.dictRemoveFile + "</a>"), e.previewElement.appendChild(e._removeLink)), f = this, t = function (t) { return t.preventDefault(), t.stopPropagation(), e.status === s.UPLOADING ? s.confirm(f.options.dictCancelUploadConfirmation, function () { return f.removeFile(e) }) : f.options.dictRemoveFileConfirmation ? s.confirm(f.options.dictRemoveFileConfirmation, function () { return f.removeFile(e) }) : f.removeFile(e) }, p = [], a = 0, c = (u = e.previewElement.querySelectorAll("[data-dz-remove]")).length; a < c; a++)i = u[a], p.push(i.addEventListener("click", t)); return p } }, removedfile: function (e) { var t; return e.previewElement && null != (t = e.previewElement) && t.parentNode.removeChild(e.previewElement), this._updateMaxFilesReachedClass() }, thumbnail: function (e, t) { var i, n, s, o; if (e.previewElement) { for (e.previewElement.classList.remove("dz-file-preview"), n = 0, s = (o = e.previewElement.querySelectorAll("[data-dz-thumbnail]")).length; n < s; n++)(i = o[n]).alt = e.name, i.src = t; return setTimeout(function () { return e.previewElement.classList.add("dz-image-preview") }, 1) } }, error: function (e, t) { var i, n, s, o, a; if (e.previewElement) { for (e.previewElement.classList.add("dz-error"), "String" != typeof t && t.error && (t = t.error), a = [], n = 0, s = (o = e.previewElement.querySelectorAll("[data-dz-errormessage]")).length; n < s; n++)i = o[n], a.push(i.textContent = t); return a } }, errormultiple: a, processing: function (e) { if (e.previewElement && (e.previewElement.classList.add("dz-processing"), e._removeLink)) return e._removeLink.textContent = this.options.dictCancelUpload }, processingmultiple: a, uploadprogress: function (e, t, i) { var n, s, o, a, r; if (e.previewElement) { for (r = [], s = 0, o = (a = e.previewElement.querySelectorAll("[data-dz-uploadprogress]")).length; s < o; s++)"PROGRESS" === (n = a[s]).nodeName ? r.push(n.value = t) : r.push(n.style.width = t + "%"); return r } }, totaluploadprogress: a, sending: a, sendingmultiple: a, success: function (e) { if (e.previewElement) return e.previewElement.classList.add("dz-success") }, successmultiple: a, canceled: function (e) { return this.emit("error", e, "Upload canceled.") }, canceledmultiple: a, complete: function (e) { if (e._removeLink && (e._removeLink.textContent = this.options.dictRemoveFile), e.previewElement) return e.previewElement.classList.add("dz-complete") }, completemultiple: a, maxfilesexceeded: a, maxfilesreached: a, queuecomplete: a, previewTemplate: '<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>' }, i = function () { var e, t, i, n, s, o, a; for (n = arguments[0], o = 0, a = (i = 2 <= arguments.length ? l.call(arguments, 1) : []).length; o < a; o++)for (e in t = i[o]) s = t[e], n[e] = s; return n }, s.prototype.getAcceptedFiles = function () { var e, t, i, n, s; for (s = [], t = 0, i = (n = this.files).length; t < i; t++)(e = n[t]).accepted && s.push(e); return s }, s.prototype.getRejectedFiles = function () { var e, t, i, n, s; for (s = [], t = 0, i = (n = this.files).length; t < i; t++)(e = n[t]).accepted || s.push(e); return s }, s.prototype.getFilesWithStatus = function (e) { var t, i, n, s, o; for (o = [], i = 0, n = (s = this.files).length; i < n; i++)(t = s[i]).status === e && o.push(t); return o }, s.prototype.getQueuedFiles = function () { return this.getFilesWithStatus(s.QUEUED) }, s.prototype.getUploadingFiles = function () { return this.getFilesWithStatus(s.UPLOADING) }, s.prototype.getActiveFiles = function () { var e, t, i, n, o; for (o = [], t = 0, i = (n = this.files).length; t < i; t++)(e = n[t]).status !== s.UPLOADING && e.status !== s.QUEUED || o.push(e); return o }, s.prototype.init = function () { var e, t, i, n, o, a, r, l; for ("form" === this.element.tagName && this.element.setAttribute("enctype", "multipart/form-data"), this.element.classList.contains("dropzone") && !this.element.querySelector(".dz-message") && this.element.appendChild(s.createElement('<div class="dz-default dz-message"><span>' + this.options.dictDefaultMessage + "</span></div>")), this.clickableElements.length && (l = this, (i = function () { return l.hiddenFileInput && document.body.removeChild(l.hiddenFileInput), l.hiddenFileInput = document.createElement("input"), l.hiddenFileInput.setAttribute("type", "file"), (null == l.options.maxFiles || l.options.maxFiles > 1) && l.hiddenFileInput.setAttribute("multiple", "multiple"), l.hiddenFileInput.className = "dz-hidden-input", null != l.options.acceptedFiles && l.hiddenFileInput.setAttribute("accept", l.options.acceptedFiles), null != l.options.capture && l.hiddenFileInput.setAttribute("capture", l.options.capture), l.hiddenFileInput.style.visibility = "hidden", l.hiddenFileInput.style.position = "absolute", l.hiddenFileInput.style.top = "0", l.hiddenFileInput.style.left = "0", l.hiddenFileInput.style.height = "0", l.hiddenFileInput.style.width = "0", document.body.appendChild(l.hiddenFileInput), l.hiddenFileInput.addEventListener("change", function () { var e, t, n, s; if ((t = l.hiddenFileInput.files).length) for (n = 0, s = t.length; n < s; n++)e = t[n], l.addFile(e); return i() }) })()), this.URL = null != (a = window.URL) ? a : window.webkitURL, n = 0, o = (r = this.events).length; n < o; n++)e = r[n], this.on(e, this.options[e]); return this.on("uploadprogress", function (e) { return function () { return e.updateTotalUploadProgress() } }(this)), this.on("removedfile", function (e) { return function () { return e.updateTotalUploadProgress() } }(this)), this.on("canceled", function (e) { return function (t) { return e.emit("complete", t) } }(this)), this.on("complete", function (e) { return function (t) { if (0 === e.getUploadingFiles().length && 0 === e.getQueuedFiles().length) return setTimeout(function () { return e.emit("queuecomplete") }, 0) } }(this)), t = function (e) { return e.stopPropagation(), e.preventDefault ? e.preventDefault() : e.returnValue = !1 }, this.listeners = [{ element: this.element, events: { dragstart: function (e) { return function (t) { return e.emit("dragstart", t) } }(this), dragenter: function (e) { return function (i) { return t(i), e.emit("dragenter", i) } }(this), dragover: function (e) { return function (i) { var n; try { n = i.dataTransfer.effectAllowed } catch (e) { } return i.dataTransfer.dropEffect = "move" === n || "linkMove" === n ? "move" : "copy", t(i), e.emit("dragover", i) } }(this), dragleave: function (e) { return function (t) { return e.emit("dragleave", t) } }(this), drop: function (e) { return function (i) { return t(i), e.drop(i) } }(this), dragend: function (e) { return function (t) { return e.emit("dragend", t) } }(this) } }], this.clickableElements.forEach(function (e) { return function (t) { return e.listeners.push({ element: t, events: { click: function (i) { if (t !== e.element || i.target === e.element || s.elementInside(i.target, e.element.querySelector(".dz-message"))) return e.hiddenFileInput.click() } } }) } }(this)), this.enable(), this.options.init.call(this) }, s.prototype.destroy = function () { var e; return this.disable(), this.removeAllFiles(!0), (null != (e = this.hiddenFileInput) ? e.parentNode : void 0) && (this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput), this.hiddenFileInput = null), delete this.element.dropzone, s.instances.splice(s.instances.indexOf(this), 1) }, s.prototype.updateTotalUploadProgress = function () { var e, t, i, n, s, o, a; if (i = 0, t = 0, this.getActiveFiles().length) { for (s = 0, o = (a = this.getActiveFiles()).length; s < o; s++)i += (e = a[s]).upload.bytesSent, t += e.upload.total; n = 100 * i / t } else n = 100; return this.emit("totaluploadprogress", n, t, i) }, s.prototype._getParamName = function (e) { return "function" == typeof this.options.paramName ? this.options.paramName(e) : this.options.paramName + (this.options.uploadMultiple ? "[" + e + "]" : "") }, s.prototype.getFallbackForm = function () { var e, t, i, n; return (e = this.getExistingFallback()) ? e : (i = '<div class="dz-fallback">', this.options.dictFallbackText && (i += "<p>" + this.options.dictFallbackText + "</p>"), i += '<input type="file" name="' + this._getParamName(0) + '" ' + (this.options.uploadMultiple ? 'multiple="multiple"' : void 0) + ' /><input type="submit" value="Upload!"></div>', t = s.createElement(i), "FORM" !== this.element.tagName ? (n = s.createElement('<form action="' + this.options.url + '" enctype="multipart/form-data" method="' + this.options.method + '"></form>')).appendChild(t) : (this.element.setAttribute("enctype", "multipart/form-data"), this.element.setAttribute("method", this.options.method)), null != n ? n : t) }, s.prototype.getExistingFallback = function () { var e, t, i, n, s, o; for (t = function (e) { var t, i, n; for (i = 0, n = e.length; i < n; i++)if (t = e[i], /(^| )fallback($| )/.test(t.className)) return t }, n = 0, s = (o = ["div", "form"]).length; n < s; n++)if (i = o[n], e = t(this.element.getElementsByTagName(i))) return e }, s.prototype.setupEventListeners = function () { var e, t, i, n, s, o, a; for (a = [], n = 0, s = (o = this.listeners).length; n < s; n++)e = o[n], a.push(function () { var n, s; for (t in s = [], n = e.events) i = n[t], s.push(e.element.addEventListener(t, i, !1)); return s }()); return a }, s.prototype.removeEventListeners = function () { var e, t, i, n, s, o, a; for (a = [], n = 0, s = (o = this.listeners).length; n < s; n++)e = o[n], a.push(function () { var n, s; for (t in s = [], n = e.events) i = n[t], s.push(e.element.removeEventListener(t, i, !1)); return s }()); return a }, s.prototype.disable = function () { var e, t, i, n, s; for (this.clickableElements.forEach(function (e) { return e.classList.remove("dz-clickable") }), this.removeEventListeners(), s = [], t = 0, i = (n = this.files).length; t < i; t++)e = n[t], s.push(this.cancelUpload(e)); return s }, s.prototype.enable = function () { return this.clickableElements.forEach(function (e) { return e.classList.add("dz-clickable") }), this.setupEventListeners() }, s.prototype.filesize = function (e) { var t, i, n, s, o, a, r; for (i = n = null, t = a = 0, r = (o = ["TB", "GB", "MB", "KB", "b"]).length; a < r; t = ++a)if (s = o[t], e >= Math.pow(this.options.filesizeBase, 4 - t) / 10) { i = e / Math.pow(this.options.filesizeBase, 4 - t), n = s; break } return "<strong>" + (i = Math.round(10 * i) / 10) + "</strong> " + n }, s.prototype._updateMaxFilesReachedClass = function () { return null != this.options.maxFiles && this.getAcceptedFiles().length >= this.options.maxFiles ? (this.getAcceptedFiles().length === this.options.maxFiles && this.emit("maxfilesreached", this.files), this.element.classList.add("dz-max-files-reached")) : this.element.classList.remove("dz-max-files-reached") }, s.prototype.drop = function (e) { var t, i; e.dataTransfer && (this.emit("drop", e), (t = e.dataTransfer.files).length && ((i = e.dataTransfer.items) && i.length && null != i[0].webkitGetAsEntry ? this._addFilesFromItems(i) : this.handleFiles(t))) }, s.prototype.paste = function (e) { var t, i; if (null != (null != e && null != (i = e.clipboardData) ? i.items : void 0)) return this.emit("paste", e), (t = e.clipboardData.items).length ? this._addFilesFromItems(t) : void 0 }, s.prototype.handleFiles = function (e) { var t, i, n, s; for (s = [], i = 0, n = e.length; i < n; i++)t = e[i], s.push(this.addFile(t)); return s }, s.prototype._addFilesFromItems = function (e) { var t, i, n, s, o; for (o = [], n = 0, s = e.length; n < s; n++)null != (i = e[n]).webkitGetAsEntry && (t = i.webkitGetAsEntry()) ? t.isFile ? o.push(this.addFile(i.getAsFile())) : t.isDirectory ? o.push(this._addFilesFromDirectory(t, t.name)) : o.push(void 0) : null != i.getAsFile && (null == i.kind || "file" === i.kind) ? o.push(this.addFile(i.getAsFile())) : o.push(void 0); return o }, s.prototype._addFilesFromDirectory = function (e, t) { var i, n, s; return i = e.createReader(), s = this, n = function (e) { var i, n, o; for (n = 0, o = e.length; n < o; n++)(i = e[n]).isFile ? i.file(function (e) { if (!s.options.ignoreHiddenFiles || "." !== e.name.substring(0, 1)) return e.fullPath = t + "/" + e.name, s.addFile(e) }) : i.isDirectory && s._addFilesFromDirectory(i, t + "/" + i.name) }, i.readEntries(n, function (e) { return "undefined" != typeof console && null !== console && "function" == typeof console.log ? console.log(e) : void 0 }) }, s.prototype.accept = function (e, t) { return e.size > 1024 * this.options.maxFilesize * 1024 ? t(this.options.dictFileTooBig.replace("{{filesize}}", Math.round(e.size / 1024 / 10.24) / 100).replace("{{maxFilesize}}", this.options.maxFilesize)) : s.isValidFile(e, this.options.acceptedFiles) ? null != this.options.maxFiles && this.getAcceptedFiles().length >= this.options.maxFiles ? (t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}", this.options.maxFiles)), this.emit("maxfilesexceeded", e)) : this.options.accept.call(this, e, t) : t(this.options.dictInvalidFileType) }, s.prototype.addFile = function (e) { return e.upload = { progress: 0, total: e.size, bytesSent: 0 }, this.files.push(e), e.status = s.ADDED, this.emit("addedfile", e), this._enqueueThumbnail(e), this.accept(e, (t = this, function (i) { return i ? (e.accepted = !1, t._errorProcessing([e], i)) : (e.accepted = !0, t.options.autoQueue && t.enqueueFile(e)), t._updateMaxFilesReachedClass() })); var t }, s.prototype.enqueueFiles = function (e) { var t, i, n; for (i = 0, n = e.length; i < n; i++)t = e[i], this.enqueueFile(t); return null }, s.prototype.enqueueFile = function (e) { if (e.status !== s.ADDED || !0 !== e.accepted) throw new Error("This file can't be queued because it has already been processed or was rejected."); if (e.status = s.QUEUED, this.options.autoProcessQueue) return setTimeout((t = this, function () { return t.processQueue() }), 0); var t }, s.prototype._thumbnailQueue = [], s.prototype._processingThumbnail = !1, s.prototype._enqueueThumbnail = function (e) { if (this.options.createImageThumbnails && e.type.match(/image.*/) && e.size <= 1024 * this.options.maxThumbnailFilesize * 1024) return this._thumbnailQueue.push(e), setTimeout((t = this, function () { return t._processThumbnailQueue() }), 0); var t }, s.prototype._processThumbnailQueue = function () { var e; if (!this._processingThumbnail && 0 !== this._thumbnailQueue.length) return this._processingThumbnail = !0, this.createThumbnail(this._thumbnailQueue.shift(), (e = this, function () { return e._processingThumbnail = !1, e._processThumbnailQueue() })) }, s.prototype.removeFile = function (e) { if (e.status === s.UPLOADING && this.cancelUpload(e), this.files = r(this.files, e), this.emit("removedfile", e), 0 === this.files.length) return this.emit("reset") }, s.prototype.removeAllFiles = function (e) { var t, i, n, o; for (null == e && (e = !1), i = 0, n = (o = this.files.slice()).length; i < n; i++)((t = o[i]).status !== s.UPLOADING || e) && this.removeFile(t); return null }, s.prototype.createThumbnail = function (e, t) { var i, n; return (i = new FileReader).onload = (n = this, function () { return "image/svg+xml" === e.type ? (n.emit("thumbnail", e, i.result), void (null != t && t())) : n.createThumbnailFromUrl(e, i.result, t) }), i.readAsDataURL(e) }, s.prototype.createThumbnailFromUrl = function (e, t, i) { var n, s; return (n = document.createElement("img")).onload = (s = this, function () { var t, a, r, l, c, d, h, u; if (e.width = n.width, e.height = n.height, null == (r = s.options.resize.call(s, e)).trgWidth && (r.trgWidth = r.optWidth), null == r.trgHeight && (r.trgHeight = r.optHeight), a = (t = document.createElement("canvas")).getContext("2d"), t.width = r.trgWidth, t.height = r.trgHeight, o(a, n, null != (c = r.srcX) ? c : 0, null != (d = r.srcY) ? d : 0, r.srcWidth, r.srcHeight, null != (h = r.trgX) ? h : 0, null != (u = r.trgY) ? u : 0, r.trgWidth, r.trgHeight), l = t.toDataURL("image/png"), s.emit("thumbnail", e, l), null != i) return i() }), null != i && (n.onerror = i), n.src = t }, s.prototype.processQueue = function () { var e, t, i, n; if (t = this.options.parallelUploads, e = i = this.getUploadingFiles().length, !(i >= t) && (n = this.getQueuedFiles()).length > 0) { if (this.options.uploadMultiple) return this.processFiles(n.slice(0, t - i)); for (; e < t;) { if (!n.length) return; this.processFile(n.shift()), e++ } } }, s.prototype.processFile = function (e) { return this.processFiles([e]) }, s.prototype.processFiles = function (e) { var t, i, n; for (i = 0, n = e.length; i < n; i++)(t = e[i]).processing = !0, t.status = s.UPLOADING, this.emit("processing", t); return this.options.uploadMultiple && this.emit("processingmultiple", e), this.uploadFiles(e) }, s.prototype._getFilesWithXhr = function (e) { var t; return function () { var i, n, s, o; for (o = [], i = 0, n = (s = this.files).length; i < n; i++)(t = s[i]).xhr === e && o.push(t); return o }.call(this) }, s.prototype.cancelUpload = function (e) { var t, i, n, o, a, r, l; if (e.status === s.UPLOADING) { for (n = 0, a = (i = this._getFilesWithXhr(e.xhr)).length; n < a; n++)(t = i[n]).status = s.CANCELED; for (e.xhr.abort(), o = 0, r = i.length; o < r; o++)t = i[o], this.emit("canceled", t); this.options.uploadMultiple && this.emit("canceledmultiple", i) } else (l = e.status) !== s.ADDED && l !== s.QUEUED || (e.status = s.CANCELED, this.emit("canceled", e), this.options.uploadMultiple && this.emit("canceledmultiple", [e])); if (this.options.autoProcessQueue) return this.processQueue() }, n = function () { var e, t; return t = arguments[0], e = 2 <= arguments.length ? l.call(arguments, 1) : [], "function" == typeof t ? t.apply(this, e) : t }, s.prototype.uploadFile = function (e) { return this.uploadFiles([e]) }, s.prototype.uploadFiles = function (e) { var t, o, a, r, l, c, d, h, u, p, f, m, g, v, b, y, w, _, C, k, x, T, $, S, M, D, E, A, F, I, P, R, O, L; for (_ = new XMLHttpRequest, C = 0, $ = e.length; C < $; C++)(t = e[C]).xhr = _; for (r in m = n(this.options.method, e), y = n(this.options.url, e), _.open(m, y, !0), _.withCredentials = !!this.options.withCredentials, v = null, L = this, a = function () { var i, n, s; for (s = [], i = 0, n = e.length; i < n; i++)t = e[i], s.push(L._errorProcessing(e, v || L.options.dictResponseError.replace("{{statusCode}}", _.status), _)); return s }, b = function (i) { return function (n) { var s, o, a, r, l, c, d, h, u; if (null != n) for (o = 100 * n.loaded / n.total, a = 0, c = e.length; a < c; a++)(t = e[a]).upload = { progress: o, total: n.total, bytesSent: n.loaded }; else { for (s = !0, o = 100, r = 0, d = e.length; r < d; r++)100 === (t = e[r]).upload.progress && t.upload.bytesSent === t.upload.total || (s = !1), t.upload.progress = o, t.upload.bytesSent = t.upload.total; if (s) return } for (u = [], l = 0, h = e.length; l < h; l++)t = e[l], u.push(i.emit("uploadprogress", t, o, t.upload.bytesSent)); return u } }(this), _.onload = function (t) { return function (i) { var n; if (e[0].status !== s.CANCELED && 4 === _.readyState) { if (v = _.responseText, _.getResponseHeader("content-type") && ~_.getResponseHeader("content-type").indexOf("application/json")) try { v = JSON.parse(v) } catch (e) { i = e, v = "Invalid JSON response from server." } return b(), 200 <= (n = _.status) && n < 300 ? t._finished(e, v, i) : a() } } }(this), _.onerror = function () { if (e[0].status !== s.CANCELED) return a() }, (null != (A = _.upload) ? A : _).onprogress = b, c = { Accept: "application/json", "Cache-Control": "no-cache", "X-Requested-With": "XMLHttpRequest" }, this.options.headers && i(c, this.options.headers), c) l = c[r], _.setRequestHeader(r, l); if (o = new FormData, this.options.params) for (f in F = this.options.params) w = F[f], o.append(f, w); for (k = 0, S = e.length; k < S; k++)t = e[k], this.emit("sending", t, _, o); if (this.options.uploadMultiple && this.emit("sendingmultiple", e, _, o), "FORM" === this.element.tagName) for (x = 0, M = (I = this.element.querySelectorAll("input, textarea, select, button")).length; x < M; x++)if (u = (h = I[x]).getAttribute("name"), p = h.getAttribute("type"), "SELECT" === h.tagName && h.hasAttribute("multiple")) for (T = 0, D = (P = h.options).length; T < D; T++)(g = P[T]).selected && o.append(u, g.value); else (!p || "checkbox" !== (R = p.toLowerCase()) && "radio" !== R || h.checked) && o.append(u, h.value); for (d = E = 0, O = e.length - 1; 0 <= O ? E <= O : E >= O; d = 0 <= O ? ++E : --E)o.append(this._getParamName(d), e[d], e[d].name); return _.send(o) }, s.prototype._finished = function (e, t, i) { var n, o, a; for (o = 0, a = e.length; o < a; o++)(n = e[o]).status = s.SUCCESS, this.emit("success", n, t, i), this.emit("complete", n); if (this.options.uploadMultiple && (this.emit("successmultiple", e, t, i), this.emit("completemultiple", e)), this.options.autoProcessQueue) return this.processQueue() }, s.prototype._errorProcessing = function (e, t, i) { var n, o, a; for (o = 0, a = e.length; o < a; o++)(n = e[o]).status = s.ERROR, this.emit("error", n, t, i), this.emit("complete", n); if (this.options.uploadMultiple && (this.emit("errormultiple", e, t, i), this.emit("completemultiple", e)), this.options.autoProcessQueue) return this.processQueue() }, s }()).version = "4.0.1", e.options = {}, e.optionsForElement = function (t) { return t.getAttribute("id") ? e.options[i(t.getAttribute("id"))] : void 0 }, e.instances = [], e.forElement = function (e) { if ("string" == typeof e && (e = document.querySelector(e)), null == (null != e ? e.dropzone : void 0)) throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone."); return e.dropzone }, e.autoDiscover = !0, e.discover = function () { var t, i, n, s, o, a; for (document.querySelectorAll ? n = document.querySelectorAll(".dropzone") : (n = [], (t = function (e) { var t, i, s, o; for (o = [], i = 0, s = e.length; i < s; i++)t = e[i], /(^| )dropzone($| )/.test(t.className) ? o.push(n.push(t)) : o.push(void 0); return o })(document.getElementsByTagName("div")), t(document.getElementsByTagName("form"))), a = [], s = 0, o = n.length; s < o; s++)i = n[s], !1 !== e.optionsForElement(i) ? a.push(new e(i)) : a.push(void 0); return a }, e.blacklistedBrowsers = [/opera.*Macintosh.*version\/12/i], e.isBrowserSupported = function () { var t, i, n, s; if (t = !0, window.File && window.FileReader && window.FileList && window.Blob && window.FormData && document.querySelector) if ("classList" in document.createElement("a")) for (i = 0, n = (s = e.blacklistedBrowsers).length; i < n; i++)s[i].test(navigator.userAgent) && (t = !1); else t = !1; else t = !1; return t }, r = function (e, t) { var i, n, s, o; for (o = [], n = 0, s = e.length; n < s; n++)(i = e[n]) !== t && o.push(i); return o }, i = function (e) { return e.replace(/[\-_](\w)/g, function (e) { return e.charAt(1).toUpperCase() }) }, e.createElement = function (e) { var t; return (t = document.createElement("div")).innerHTML = e, t.childNodes[0] }, e.elementInside = function (e, t) { if (e === t) return !0; for (; e = e.parentNode;)if (e === t) return !0; return !1 }, e.getElement = function (e, t) { var i; if ("string" == typeof e ? i = document.querySelector(e) : null != e.nodeType && (i = e), null == i) throw new Error("Invalid `" + t + "` option provided. Please provide a CSS selector or a plain HTML element."); return i }, e.getElements = function (e, t) { var i, n, s, o, a, r, l; if (e instanceof Array) { n = []; try { for (s = 0, a = e.length; s < a; s++)i = e[s], n.push(this.getElement(i, t)) } catch (e) { e, n = null } } else if ("string" == typeof e) for (n = [], o = 0, r = (l = document.querySelectorAll(e)).length; o < r; o++)i = l[o], n.push(i); else null != e.nodeType && (n = [e]); if (null == n || !n.length) throw new Error("Invalid `" + t + "` option provided. Please provide a CSS selector, a plain HTML element or a list of those."); return n }, e.confirm = function (e, t, i) { return window.confirm(e) ? t() : null != i ? i() : void 0 }, e.isValidFile = function (e, t) { var i, n, s, o, a; if (!t) return !0; for (t = t.split(","), i = (n = e.type).replace(/\/.*$/, ""), o = 0, a = t.length; o < a; o++)if ("." === (s = (s = t[o]).trim()).charAt(0)) { if (-1 !== e.name.toLowerCase().indexOf(s.toLowerCase(), e.name.length - s.length)) return !0 } else if (/\/\*$/.test(s)) { if (i === s.replace(/\/.*$/, "")) return !0 } else if (n === s) return !0; return !1 }, "undefined" != typeof jQuery && null !== jQuery && (jQuery.fn.dropzone = function (t) { return this.each(function () { return new e(this, t) }) }), "undefined" != typeof module && null !== module ? module.exports = e : window.Dropzone = e, e.ADDED = "added", e.QUEUED = "queued", e.ACCEPTED = e.QUEUED, e.UPLOADING = "uploading", e.PROCESSING = e.UPLOADING, e.CANCELED = "canceled", e.ERROR = "error", e.SUCCESS = "success", s = function (e) { var t, i, n, s, o, a, r, l; for (e.naturalWidth, o = e.naturalHeight, (t = document.createElement("canvas")).width = 1, t.height = o, (i = t.getContext("2d")).drawImage(e, 0, 0), n = i.getImageData(0, 0, 1, o).data, l = 0, s = o, a = o; a > l;)0 === n[4 * (a - 1) + 3] ? s = a : l = a, a = s + l >> 1; return 0 === (r = a / o) ? 1 : r }, o = function (e, t, i, n, o, a, r, l, c, d) { var h; return h = s(t), e.drawImage(t, i, n, o, a, r, l, c, d / h) }, n = function (e, t) { var i, n, s, o, a, r, l, c, d; if (s = !1, d = !0, n = e.document, c = n.documentElement, i = n.addEventListener ? "addEventListener" : "attachEvent", l = n.addEventListener ? "removeEventListener" : "detachEvent", r = n.addEventListener ? "" : "on", o = function (i) { if ("readystatechange" !== i.type || "complete" === n.readyState) return ("load" === i.type ? e : n)[l](r + i.type, o, !1), !s && (s = !0) ? t.call(e, i.type || i) : void 0 }, a = function () { try { c.doScroll("left") } catch (e) { return e, void setTimeout(a, 50) } return o("poll") }, "complete" !== n.readyState) { if (n.createEventObject && c.doScroll) { try { d = !e.frameElement } catch (e) { } d && a() } return n[i](r + "DOMContentLoaded", o, !1), n[i](r + "readystatechange", o, !1), e[i](r + "load", o, !1) } }, e._autoDiscoverFunction = function () { if (e.autoDiscover) return e.discover() }, n(window, e._autoDiscoverFunction) }.call(this), function (e) { "function" == typeof define && define.amd ? define(["jquery"], e) : "object" == typeof exports ? e(require("jquery")) : e(jQuery) }(function (e, t) { function i() { return new Date(Date.UTC.apply(Date, arguments)) } function n() { var e = new Date; return i(e.getFullYear(), e.getMonth(), e.getDate()) } function s(e, t) { return e.getUTCFullYear() === t.getUTCFullYear() && e.getUTCMonth() === t.getUTCMonth() && e.getUTCDate() === t.getUTCDate() } function o(i, n) { return function () { return n !== t && e.fn.datepicker.deprecated(n), this[i].apply(this, arguments) } } var a, r = (a = { get: function (e) { return this.slice(e)[0] }, contains: function (e) { for (var t = e && e.valueOf(), i = 0, n = this.length; i < n; i++)if (0 <= this[i].valueOf() - t && this[i].valueOf() - t < 864e5) return i; return -1 }, remove: function (e) { this.splice(e, 1) }, replace: function (t) { t && (e.isArray(t) || (t = [t]), this.clear(), this.push.apply(this, t)) }, clear: function () { this.length = 0 }, copy: function () { var e = new r; return e.replace(this), e } }, function () { var t = []; return t.push.apply(t, arguments), e.extend(t, a), t }), l = function (t, i) { e.data(t, "datepicker", this), this._process_options(i), this.dates = new r, this.viewDate = this.o.defaultViewDate, this.focusDate = null, this.element = e(t), this.isInput = this.element.is("input"), this.inputField = this.isInput ? this.element : this.element.find("input"), this.component = !!this.element.hasClass("date") && this.element.find(".add-on, .input-group-addon, .btn"), this.component && 0 === this.component.length && (this.component = !1), this.isInline = !this.component && this.element.is("div"), this.picker = e(m.template), this._check_template(this.o.templates.leftArrow) && this.picker.find(".prev").html(this.o.templates.leftArrow), this._check_template(this.o.templates.rightArrow) && this.picker.find(".next").html(this.o.templates.rightArrow), this._buildEvents(), this._attachEvents(), this.isInline ? this.picker.addClass("datepicker-inline").appendTo(this.element) : this.picker.addClass("datepicker-dropdown dropdown-menu"), this.o.rtl && this.picker.addClass("datepicker-rtl"), this.o.calendarWeeks && this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan", function (e, t) { return Number(t) + 1 }), this._process_options({ startDate: this._o.startDate, endDate: this._o.endDate, daysOfWeekDisabled: this.o.daysOfWeekDisabled, daysOfWeekHighlighted: this.o.daysOfWeekHighlighted, datesDisabled: this.o.datesDisabled }), this._allow_update = !1, this.setViewMode(this.o.startView), this._allow_update = !0, this.fillDow(), this.fillMonths(), this.update(), this.isInline && this.show() }; l.prototype = { constructor: l, _resolveViewName: function (t) { return e.each(m.viewModes, function (i, n) { if (t === i || -1 !== e.inArray(t, n.names)) return t = i, !1 }), t }, _resolveDaysOfWeek: function (t) { return e.isArray(t) || (t = t.split(/[,\s]*/)), e.map(t, Number) }, _check_template: function (i) { try { return i !== t && "" !== i && ((i.match(/[<>]/g) || []).length <= 0 || e(i).length > 0) } catch (e) { return !1 } }, _process_options: function (t) { this._o = e.extend({}, this._o, t); var s = this.o = e.extend({}, this._o), o = s.language; f[o] || (o = o.split("-")[0], f[o] || (o = u.language)), s.language = o, s.startView = this._resolveViewName(s.startView), s.minViewMode = this._resolveViewName(s.minViewMode), s.maxViewMode = this._resolveViewName(s.maxViewMode), s.startView = Math.max(this.o.minViewMode, Math.min(this.o.maxViewMode, s.startView)), !0 !== s.multidate && (s.multidate = Number(s.multidate) || !1, !1 !== s.multidate && (s.multidate = Math.max(0, s.multidate))), s.multidateSeparator = String(s.multidateSeparator), s.weekStart %= 7, s.weekEnd = (s.weekStart + 6) % 7; var a = m.parseFormat(s.format); s.startDate !== -1 / 0 && (s.startDate ? s.startDate instanceof Date ? s.startDate = this._local_to_utc(this._zero_time(s.startDate)) : s.startDate = m.parseDate(s.startDate, a, s.language, s.assumeNearbyYear) : s.startDate = -1 / 0), s.endDate !== 1 / 0 && (s.endDate ? s.endDate instanceof Date ? s.endDate = this._local_to_utc(this._zero_time(s.endDate)) : s.endDate = m.parseDate(s.endDate, a, s.language, s.assumeNearbyYear) : s.endDate = 1 / 0), s.daysOfWeekDisabled = this._resolveDaysOfWeek(s.daysOfWeekDisabled || []), s.daysOfWeekHighlighted = this._resolveDaysOfWeek(s.daysOfWeekHighlighted || []), s.datesDisabled = s.datesDisabled || [], e.isArray(s.datesDisabled) || (s.datesDisabled = s.datesDisabled.split(",")), s.datesDisabled = e.map(s.datesDisabled, function (e) { return m.parseDate(e, a, s.language, s.assumeNearbyYear) }); var r = String(s.orientation).toLowerCase().split(/\s+/g), l = s.orientation.toLowerCase(); if (r = e.grep(r, function (e) { return /^auto|left|right|top|bottom$/.test(e) }), s.orientation = { x: "auto", y: "auto" }, l && "auto" !== l) if (1 === r.length) switch (r[0]) { case "top": case "bottom": s.orientation.y = r[0]; break; case "left": case "right": s.orientation.x = r[0] } else l = e.grep(r, function (e) { return /^left|right$/.test(e) }), s.orientation.x = l[0] || "auto", l = e.grep(r, function (e) { return /^top|bottom$/.test(e) }), s.orientation.y = l[0] || "auto"; else; if (s.defaultViewDate instanceof Date || "string" == typeof s.defaultViewDate) s.defaultViewDate = m.parseDate(s.defaultViewDate, a, s.language, s.assumeNearbyYear); else if (s.defaultViewDate) { var c = s.defaultViewDate.year || (new Date).getFullYear(), d = s.defaultViewDate.month || 0, h = s.defaultViewDate.day || 1; s.defaultViewDate = i(c, d, h) } else s.defaultViewDate = n() }, _events: [], _secondaryEvents: [], _applyEvents: function (e) { for (var i, n, s, o = 0; o < e.length; o++)i = e[o][0], 2 === e[o].length ? (n = t, s = e[o][1]) : 3 === e[o].length && (n = e[o][1], s = e[o][2]), i.on(s, n) }, _unapplyEvents: function (e) { for (var i, n, s, o = 0; o < e.length; o++)i = e[o][0], 2 === e[o].length ? (s = t, n = e[o][1]) : 3 === e[o].length && (s = e[o][1], n = e[o][2]), i.off(n, s) }, _buildEvents: function () { var t = { keyup: e.proxy(function (t) { -1 === e.inArray(t.keyCode, [27, 37, 39, 38, 40, 32, 13, 9]) && this.update() }, this), keydown: e.proxy(this.keydown, this), paste: e.proxy(this.paste, this) }; !0 === this.o.showOnFocus && (t.focus = e.proxy(this.show, this)), this.isInput ? this._events = [[this.element, t]] : this.component && this.inputField.length ? this._events = [[this.inputField, t], [this.component, { click: e.proxy(this.show, this) }]] : this._events = [[this.element, { click: e.proxy(this.show, this), keydown: e.proxy(this.keydown, this) }]], this._events.push([this.element, "*", { blur: e.proxy(function (e) { this._focused_from = e.target }, this) }], [this.element, { blur: e.proxy(function (e) { this._focused_from = e.target }, this) }]), this.o.immediateUpdates && this._events.push([this.element, { "changeYear changeMonth": e.proxy(function (e) { this.update(e.date) }, this) }]), this._secondaryEvents = [[this.picker, { click: e.proxy(this.click, this) }], [this.picker, ".prev, .next", { click: e.proxy(this.navArrowsClick, this) }], [this.picker, ".day:not(.disabled)", { click: e.proxy(this.dayCellClick, this) }], [e(window), { resize: e.proxy(this.place, this) }], [e(document), { "mousedown touchstart": e.proxy(function (e) { this.element.is(e.target) || this.element.find(e.target).length || this.picker.is(e.target) || this.picker.find(e.target).length || this.isInline || this.hide() }, this) }]] }, _attachEvents: function () { this._detachEvents(), this._applyEvents(this._events) }, _detachEvents: function () { this._unapplyEvents(this._events) }, _attachSecondaryEvents: function () { this._detachSecondaryEvents(), this._applyEvents(this._secondaryEvents) }, _detachSecondaryEvents: function () { this._unapplyEvents(this._secondaryEvents) }, _trigger: function (t, i) { var n = i || this.dates.get(-1), s = this._utc_to_local(n); this.element.trigger({ type: t, date: s, viewMode: this.viewMode, dates: e.map(this.dates, this._utc_to_local), format: e.proxy(function (e, t) { 0 === arguments.length ? (e = this.dates.length - 1, t = this.o.format) : "string" == typeof e && (t = e, e = this.dates.length - 1), t = t || this.o.format; var i = this.dates.get(e); return m.formatDate(i, t, this.o.language) }, this) }) }, show: function () { if (!(this.inputField.prop("disabled") || this.inputField.prop("readonly") && !1 === this.o.enableOnReadonly)) return this.isInline || this.picker.appendTo(this.o.container), this.place(), this.picker.show(), this._attachSecondaryEvents(), this._trigger("show"), (window.navigator.msMaxTouchPoints || "ontouchstart" in document) && this.o.disableTouchKeyboard && e(this.element).blur(), this }, hide: function () { return this.isInline || !this.picker.is(":visible") ? this : (this.focusDate = null, this.picker.hide().detach(), this._detachSecondaryEvents(), this.setViewMode(this.o.startView), this.o.forceParse && this.inputField.val() && this.setValue(), this._trigger("hide"), this) }, destroy: function () { return this.hide(), this._detachEvents(), this._detachSecondaryEvents(), this.picker.remove(), delete this.element.data().datepicker, this.isInput || delete this.element.data().date, this }, paste: function (t) { var i; if (t.originalEvent.clipboardData && t.originalEvent.clipboardData.types && -1 !== e.inArray("text/plain", t.originalEvent.clipboardData.types)) i = t.originalEvent.clipboardData.getData("text/plain"); else { if (!window.clipboardData) return; i = window.clipboardData.getData("Text") } this.setDate(i), this.update(), t.preventDefault() }, _utc_to_local: function (e) { if (!e) return e; var t = new Date(e.getTime() + 6e4 * e.getTimezoneOffset()); return t.getTimezoneOffset() !== e.getTimezoneOffset() && (t = new Date(e.getTime() + 6e4 * t.getTimezoneOffset())), t }, _local_to_utc: function (e) { return e && new Date(e.getTime() - 6e4 * e.getTimezoneOffset()) }, _zero_time: function (e) { return e && new Date(e.getFullYear(), e.getMonth(), e.getDate()) }, _zero_utc_time: function (e) { return e && i(e.getUTCFullYear(), e.getUTCMonth(), e.getUTCDate()) }, getDates: function () { return e.map(this.dates, this._utc_to_local) }, getUTCDates: function () { return e.map(this.dates, function (e) { return new Date(e) }) }, getDate: function () { return this._utc_to_local(this.getUTCDate()) }, getUTCDate: function () { var e = this.dates.get(-1); return e !== t ? new Date(e) : null }, clearDates: function () { this.inputField.val(""), this.update(), this._trigger("changeDate"), this.o.autoclose && this.hide() }, setDates: function () { var t = e.isArray(arguments[0]) ? arguments[0] : arguments; return this.update.apply(this, t), this._trigger("changeDate"), this.setValue(), this }, setUTCDates: function () { var t = e.isArray(arguments[0]) ? arguments[0] : arguments; return this.setDates.apply(this, e.map(t, this._utc_to_local)), this }, setDate: o("setDates"), setUTCDate: o("setUTCDates"), remove: o("destroy", "Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"), setValue: function () { var e = this.getFormattedDate(); return this.inputField.val(e), this }, getFormattedDate: function (i) { i === t && (i = this.o.format); var n = this.o.language; return e.map(this.dates, function (e) { return m.formatDate(e, i, n) }).join(this.o.multidateSeparator) }, getStartDate: function () { return this.o.startDate }, setStartDate: function (e) { return this._process_options({ startDate: e }), this.update(), this.updateNavArrows(), this }, getEndDate: function () { return this.o.endDate }, setEndDate: function (e) { return this._process_options({ endDate: e }), this.update(), this.updateNavArrows(), this }, setDaysOfWeekDisabled: function (e) { return this._process_options({ daysOfWeekDisabled: e }), this.update(), this }, setDaysOfWeekHighlighted: function (e) { return this._process_options({ daysOfWeekHighlighted: e }), this.update(), this }, setDatesDisabled: function (e) { return this._process_options({ datesDisabled: e }), this.update(), this }, place: function () { if (this.isInline) return this; var t = this.picker.outerWidth(), i = this.picker.outerHeight(), n = e(this.o.container), s = n.width(), o = "body" === this.o.container ? e(document).scrollTop() : n.scrollTop(), a = n.offset(), r = [0]; this.element.parents().each(function () { var t = e(this).css("z-index"); "auto" !== t && 0 !== Number(t) && r.push(Number(t)) }); var l = Math.max.apply(Math, r) + this.o.zIndexOffset, c = this.component ? this.component.parent().offset() : this.element.offset(), d = this.component ? this.component.outerHeight(!0) : this.element.outerHeight(!1), h = this.component ? this.component.outerWidth(!0) : this.element.outerWidth(!1), u = c.left - a.left, p = c.top - a.top; "body" !== this.o.container && (p += o), this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"), "auto" !== this.o.orientation.x ? (this.picker.addClass("datepicker-orient-" + this.o.orientation.x), "right" === this.o.orientation.x && (u -= t - h)) : c.left < 0 ? (this.picker.addClass("datepicker-orient-left"), u -= c.left - 10) : u + t > s ? (this.picker.addClass("datepicker-orient-right"), u += h - t) : this.o.rtl ? this.picker.addClass("datepicker-orient-right") : this.picker.addClass("datepicker-orient-left"); var f = this.o.orientation.y; if ("auto" === f && (f = -o + p - i < 0 ? "bottom" : "top"), this.picker.addClass("datepicker-orient-" + f), "top" === f ? p -= i + parseInt(this.picker.css("padding-top")) : p += d, this.o.rtl) { var m = s - (u + h); this.picker.css({ top: p, right: m, zIndex: l }) } else this.picker.css({ top: p, left: u, zIndex: l }); return this }, _allow_update: !0, update: function () { if (!this._allow_update) return this; var t = this.dates.copy(), i = [], n = !1; return arguments.length ? (e.each(arguments, e.proxy(function (e, t) { t instanceof Date && (t = this._local_to_utc(t)), i.push(t) }, this)), n = !0) : (i = (i = this.isInput ? this.element.val() : this.element.data("date") || this.inputField.val()) && this.o.multidate ? i.split(this.o.multidateSeparator) : [i], delete this.element.data().date), i = e.map(i, e.proxy(function (e) { return m.parseDate(e, this.o.format, this.o.language, this.o.assumeNearbyYear) }, this)), i = e.grep(i, e.proxy(function (e) { return !this.dateWithinRange(e) || !e }, this), !0), this.dates.replace(i), this.o.updateViewDate && (this.dates.length ? this.viewDate = new Date(this.dates.get(-1)) : this.viewDate < this.o.startDate ? this.viewDate = new Date(this.o.startDate) : this.viewDate > this.o.endDate ? this.viewDate = new Date(this.o.endDate) : this.viewDate = this.o.defaultViewDate), n ? (this.setValue(), this.element.change()) : this.dates.length && String(t) !== String(this.dates) && n && (this._trigger("changeDate"), this.element.change()), !this.dates.length && t.length && (this._trigger("clearDate"), this.element.change()), this.fill(), this }, fillDow: function () { if (this.o.showWeekDays) { var t = this.o.weekStart, i = "<tr>"; for (this.o.calendarWeeks && (i += '<th class="cw">&#160;</th>'); t < this.o.weekStart + 7;)i += '<th class="dow', -1 !== e.inArray(t, this.o.daysOfWeekDisabled) && (i += " disabled"), i += '">' + f[this.o.language].daysMin[t++ % 7] + "</th>"; i += "</tr>", this.picker.find(".datepicker-days thead").append(i) } }, fillMonths: function () { for (var e = this._utc_to_local(this.viewDate), t = "", i = 0; i < 12; i++)t += '<span class="month' + (e && e.getMonth() === i ? " focused" : "") + '">' + f[this.o.language].monthsShort[i] + "</span>"; this.picker.find(".datepicker-months td").html(t) }, setRange: function (t) { t && t.length ? this.range = e.map(t, function (e) { return e.valueOf() }) : delete this.range, this.fill() }, getClassNames: function (t) { var i = [], o = this.viewDate.getUTCFullYear(), a = this.viewDate.getUTCMonth(), r = n(); return t.getUTCFullYear() < o || t.getUTCFullYear() === o && t.getUTCMonth() < a ? i.push("old") : (t.getUTCFullYear() > o || t.getUTCFullYear() === o && t.getUTCMonth() > a) && i.push("new"), this.focusDate && t.valueOf() === this.focusDate.valueOf() && i.push("focused"), this.o.todayHighlight && s(t, r) && i.push("today"), -1 !== this.dates.contains(t) && i.push("active"), this.dateWithinRange(t) || i.push("disabled"), this.dateIsDisabled(t) && i.push("disabled", "disabled-date"), -1 !== e.inArray(t.getUTCDay(), this.o.daysOfWeekHighlighted) && i.push("highlighted"), this.range && (t > this.range[0] && t < this.range[this.range.length - 1] && i.push("range"), -1 !== e.inArray(t.valueOf(), this.range) && i.push("selected"), t.valueOf() === this.range[0] && i.push("range-start"), t.valueOf() === this.range[this.range.length - 1] && i.push("range-end")), i }, _fill_yearsView: function (i, n, s, o, a, r, l) { for (var c, d, h, u = "", p = s / 10, f = this.picker.find(i), m = Math.floor(o / s) * s, g = m + 9 * p, v = Math.floor(this.viewDate.getFullYear() / p) * p, b = e.map(this.dates, function (e) { return Math.floor(e.getUTCFullYear() / p) * p }), y = m - p; y <= g + p; y += p)c = [n], d = null, y === m - p ? c.push("old") : y === g + p && c.push("new"), -1 !== e.inArray(y, b) && c.push("active"), (y < a || y > r) && c.push("disabled"), y === v && c.push("focused"), l !== e.noop && ((h = l(new Date(y, 0, 1))) === t ? h = {} : "boolean" == typeof h ? h = { enabled: h } : "string" == typeof h && (h = { classes: h }), !1 === h.enabled && c.push("disabled"), h.classes && (c = c.concat(h.classes.split(/\s+/))), h.tooltip && (d = h.tooltip)), u += '<span class="' + c.join(" ") + '"' + (d ? ' title="' + d + '"' : "") + ">" + y + "</span>"; f.find(".datepicker-switch").text(m + "-" + g), f.find("td").html(u) }, fill: function () { var n, s, o = new Date(this.viewDate), a = o.getUTCFullYear(), r = o.getUTCMonth(), l = this.o.startDate !== -1 / 0 ? this.o.startDate.getUTCFullYear() : -1 / 0, c = this.o.startDate !== -1 / 0 ? this.o.startDate.getUTCMonth() : -1 / 0, d = this.o.endDate !== 1 / 0 ? this.o.endDate.getUTCFullYear() : 1 / 0, h = this.o.endDate !== 1 / 0 ? this.o.endDate.getUTCMonth() : 1 / 0, u = f[this.o.language].today || f.en.today || "", p = f[this.o.language].clear || f.en.clear || "", g = f[this.o.language].titleFormat || f.en.titleFormat; if (!isNaN(a) && !isNaN(r)) { this.picker.find(".datepicker-days .datepicker-switch").text(m.formatDate(o, g, this.o.language)), this.picker.find("tfoot .today").text(u).css("display", !0 === this.o.todayBtn || "linked" === this.o.todayBtn ? "table-cell" : "none"), this.picker.find("tfoot .clear").text(p).css("display", !0 === this.o.clearBtn ? "table-cell" : "none"), this.picker.find("thead .datepicker-title").text(this.o.title).css("display", "string" == typeof this.o.title && "" !== this.o.title ? "table-cell" : "none"), this.updateNavArrows(), this.fillMonths(); var v = i(a, r, 0), b = v.getUTCDate(); v.setUTCDate(b - (v.getUTCDay() - this.o.weekStart + 7) % 7); var y = new Date(v); v.getUTCFullYear() < 100 && y.setUTCFullYear(v.getUTCFullYear()), y.setUTCDate(y.getUTCDate() + 42), y = y.valueOf(); for (var w, _, C = []; v.valueOf() < y;) { if ((w = v.getUTCDay()) === this.o.weekStart && (C.push("<tr>"), this.o.calendarWeeks)) { var k = new Date(+v + (this.o.weekStart - w - 7) % 7 * 864e5), x = new Date(Number(k) + (11 - k.getUTCDay()) % 7 * 864e5), T = new Date(Number(T = i(x.getUTCFullYear(), 0, 1)) + (11 - T.getUTCDay()) % 7 * 864e5), $ = (x - T) / 864e5 / 7 + 1; C.push('<td class="cw">' + $ + "</td>") } (_ = this.getClassNames(v)).push("day"); var S = v.getUTCDate(); this.o.beforeShowDay !== e.noop && ((s = this.o.beforeShowDay(this._utc_to_local(v))) === t ? s = {} : "boolean" == typeof s ? s = { enabled: s } : "string" == typeof s && (s = { classes: s }), !1 === s.enabled && _.push("disabled"), s.classes && (_ = _.concat(s.classes.split(/\s+/))), s.tooltip && (n = s.tooltip), s.content && (S = s.content)), _ = e.isFunction(e.uniqueSort) ? e.uniqueSort(_) : e.unique(_), C.push('<td class="' + _.join(" ") + '"' + (n ? ' title="' + n + '"' : "") + ' data-date="' + v.getTime().toString() + '">' + S + "</td>"), n = null, w === this.o.weekEnd && C.push("</tr>"), v.setUTCDate(v.getUTCDate() + 1) } this.picker.find(".datepicker-days tbody").html(C.join("")); var M = f[this.o.language].monthsTitle || f.en.monthsTitle || "Months", D = this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode < 2 ? M : a).end().find("tbody span").removeClass("active"); if (e.each(this.dates, function (e, t) { t.getUTCFullYear() === a && D.eq(t.getUTCMonth()).addClass("active") }), (a < l || a > d) && D.addClass("disabled"), a === l && D.slice(0, c).addClass("disabled"), a === d && D.slice(h + 1).addClass("disabled"), this.o.beforeShowMonth !== e.noop) { var E = this; e.each(D, function (i, n) { var s = new Date(a, i, 1), o = E.o.beforeShowMonth(s); o === t ? o = {} : "boolean" == typeof o ? o = { enabled: o } : "string" == typeof o && (o = { classes: o }), !1 !== o.enabled || e(n).hasClass("disabled") || e(n).addClass("disabled"), o.classes && e(n).addClass(o.classes), o.tooltip && e(n).prop("title", o.tooltip) }) } this._fill_yearsView(".datepicker-years", "year", 10, a, l, d, this.o.beforeShowYear), this._fill_yearsView(".datepicker-decades", "decade", 100, a, l, d, this.o.beforeShowDecade), this._fill_yearsView(".datepicker-centuries", "century", 1e3, a, l, d, this.o.beforeShowCentury) } }, updateNavArrows: function () { if (this._allow_update) { var e, t, i = new Date(this.viewDate), n = i.getUTCFullYear(), s = i.getUTCMonth(), o = this.o.startDate !== -1 / 0 ? this.o.startDate.getUTCFullYear() : -1 / 0, a = this.o.startDate !== -1 / 0 ? this.o.startDate.getUTCMonth() : -1 / 0, r = this.o.endDate !== 1 / 0 ? this.o.endDate.getUTCFullYear() : 1 / 0, l = this.o.endDate !== 1 / 0 ? this.o.endDate.getUTCMonth() : 1 / 0, c = 1; switch (this.viewMode) { case 4: c *= 10; case 3: c *= 10; case 2: c *= 10; case 1: e = Math.floor(n / c) * c <= o, t = Math.floor(n / c) * c + c > r; break; case 0: e = n <= o && s <= a, t = n >= r && s >= l }this.picker.find(".prev").toggleClass("disabled", e), this.picker.find(".next").toggleClass("disabled", t) } }, click: function (t) { var s, o, a; t.preventDefault(), t.stopPropagation(), (s = e(t.target)).hasClass("datepicker-switch") && this.viewMode !== this.o.maxViewMode && this.setViewMode(this.viewMode + 1), s.hasClass("today") && !s.hasClass("day") && (this.setViewMode(0), this._setDate(n(), "linked" === this.o.todayBtn ? null : "view")), s.hasClass("clear") && this.clearDates(), s.hasClass("disabled") || (s.hasClass("month") || s.hasClass("year") || s.hasClass("decade") || s.hasClass("century")) && (this.viewDate.setUTCDate(1), 1, 1 === this.viewMode ? (a = s.parent().find("span").index(s), o = this.viewDate.getUTCFullYear(), this.viewDate.setUTCMonth(a)) : (a = 0, o = Number(s.text()), this.viewDate.setUTCFullYear(o)), this._trigger(m.viewModes[this.viewMode - 1].e, this.viewDate), this.viewMode === this.o.minViewMode ? this._setDate(i(o, a, 1)) : (this.setViewMode(this.viewMode - 1), this.fill())), this.picker.is(":visible") && this._focused_from && this._focused_from.focus(), delete this._focused_from }, dayCellClick: function (t) { var i = e(t.currentTarget).data("date"), n = new Date(i); this.o.updateViewDate && (n.getUTCFullYear() !== this.viewDate.getUTCFullYear() && this._trigger("changeYear", this.viewDate), n.getUTCMonth() !== this.viewDate.getUTCMonth() && this._trigger("changeMonth", this.viewDate)), this._setDate(n) }, navArrowsClick: function (t) { var i = e(t.currentTarget).hasClass("prev") ? -1 : 1; 0 !== this.viewMode && (i *= 12 * m.viewModes[this.viewMode].navStep), this.viewDate = this.moveMonth(this.viewDate, i), this._trigger(m.viewModes[this.viewMode].e, this.viewDate), this.fill() }, _toggle_multidate: function (e) { var t = this.dates.contains(e); if (e || this.dates.clear(), -1 !== t ? (!0 === this.o.multidate || this.o.multidate > 1 || this.o.toggleActive) && this.dates.remove(t) : !1 === this.o.multidate ? (this.dates.clear(), this.dates.push(e)) : this.dates.push(e), "number" == typeof this.o.multidate) for (; this.dates.length > this.o.multidate;)this.dates.remove(0) }, _setDate: function (e, t) { t && "date" !== t || this._toggle_multidate(e && new Date(e)), (!t && this.o.updateViewDate || "view" === t) && (this.viewDate = e && new Date(e)), this.fill(), this.setValue(), t && "view" === t || this._trigger("changeDate"), this.inputField.trigger("change"), !this.o.autoclose || t && "date" !== t || this.hide() }, moveDay: function (e, t) { var i = new Date(e); return i.setUTCDate(e.getUTCDate() + t), i }, moveWeek: function (e, t) { return this.moveDay(e, 7 * t) }, moveMonth: function (e, t) { if (!(i = e) || isNaN(i.getTime())) return this.o.defaultViewDate; var i; if (!t) return e; var n, s, o = new Date(e.valueOf()), a = o.getUTCDate(), r = o.getUTCMonth(), l = Math.abs(t); if (t = t > 0 ? 1 : -1, 1 === l) s = -1 === t ? function () { return o.getUTCMonth() === r } : function () { return o.getUTCMonth() !== n }, n = r + t, o.setUTCMonth(n), n = (n + 12) % 12; else { for (var c = 0; c < l; c++)o = this.moveMonth(o, t); n = o.getUTCMonth(), o.setUTCDate(a), s = function () { return n !== o.getUTCMonth() } } for (; s();)o.setUTCDate(--a), o.setUTCMonth(n); return o }, moveYear: function (e, t) { return this.moveMonth(e, 12 * t) }, moveAvailableDate: function (e, t, i) { do { if (e = this[i](e, t), !this.dateWithinRange(e)) return !1; i = "moveDay" } while (this.dateIsDisabled(e)); return e }, weekOfDateIsDisabled: function (t) { return -1 !== e.inArray(t.getUTCDay(), this.o.daysOfWeekDisabled) }, dateIsDisabled: function (t) { return this.weekOfDateIsDisabled(t) || e.grep(this.o.datesDisabled, function (e) { return s(t, e) }).length > 0 }, dateWithinRange: function (e) { return e >= this.o.startDate && e <= this.o.endDate }, keydown: function (e) { if (this.picker.is(":visible")) { var t, i, n = !1, s = this.focusDate || this.viewDate; switch (e.keyCode) { case 27: this.focusDate ? (this.focusDate = null, this.viewDate = this.dates.get(-1) || this.viewDate, this.fill()) : this.hide(), e.preventDefault(), e.stopPropagation(); break; case 37: case 38: case 39: case 40: if (!this.o.keyboardNavigation || 7 === this.o.daysOfWeekDisabled.length) break; t = 37 === e.keyCode || 38 === e.keyCode ? -1 : 1, 0 === this.viewMode ? e.ctrlKey ? (i = this.moveAvailableDate(s, t, "moveYear")) && this._trigger("changeYear", this.viewDate) : e.shiftKey ? (i = this.moveAvailableDate(s, t, "moveMonth")) && this._trigger("changeMonth", this.viewDate) : 37 === e.keyCode || 39 === e.keyCode ? i = this.moveAvailableDate(s, t, "moveDay") : this.weekOfDateIsDisabled(s) || (i = this.moveAvailableDate(s, t, "moveWeek")) : 1 === this.viewMode ? (38 !== e.keyCode && 40 !== e.keyCode || (t *= 4), i = this.moveAvailableDate(s, t, "moveMonth")) : 2 === this.viewMode && (38 !== e.keyCode && 40 !== e.keyCode || (t *= 4), i = this.moveAvailableDate(s, t, "moveYear")), i && (this.focusDate = this.viewDate = i, this.setValue(), this.fill(), e.preventDefault()); break; case 13: if (!this.o.forceParse) break; s = this.focusDate || this.dates.get(-1) || this.viewDate, this.o.keyboardNavigation && (this._toggle_multidate(s), n = !0), this.focusDate = null, this.viewDate = this.dates.get(-1) || this.viewDate, this.setValue(), this.fill(), this.picker.is(":visible") && (e.preventDefault(), e.stopPropagation(), this.o.autoclose && this.hide()); break; case 9: this.focusDate = null, this.viewDate = this.dates.get(-1) || this.viewDate, this.fill(), this.hide() }n && (this.dates.length ? this._trigger("changeDate") : this._trigger("clearDate"), this.inputField.trigger("change")) } else 40 !== e.keyCode && 27 !== e.keyCode || (this.show(), e.stopPropagation()) }, setViewMode: function (e) { this.viewMode = e, this.picker.children("div").hide().filter(".datepicker-" + m.viewModes[this.viewMode].clsName).show(), this.updateNavArrows(), this._trigger("changeViewMode", new Date(this.viewDate)) } }; var c = function (t, i) { e.data(t, "datepicker", this), this.element = e(t), this.inputs = e.map(i.inputs, function (e) { return e.jquery ? e[0] : e }), delete i.inputs, this.keepEmptyValues = i.keepEmptyValues, delete i.keepEmptyValues, h.call(e(this.inputs), i).on("changeDate", e.proxy(this.dateUpdated, this)), this.pickers = e.map(this.inputs, function (t) { return e.data(t, "datepicker") }), this.updateDates() }; c.prototype = { updateDates: function () { this.dates = e.map(this.pickers, function (e) { return e.getUTCDate() }), this.updateRanges() }, updateRanges: function () { var t = e.map(this.dates, function (e) { return e.valueOf() }); e.each(this.pickers, function (e, i) { i.setRange(t) }) }, clearDates: function () { e.each(this.pickers, function (e, t) { t.clearDates() }) }, dateUpdated: function (i) { if (!this.updating) { this.updating = !0; var n = e.data(i.target, "datepicker"); if (n !== t) { var s = n.getUTCDate(), o = this.keepEmptyValues, a = e.inArray(i.target, this.inputs), r = a - 1, l = a + 1, c = this.inputs.length; if (-1 !== a) { if (e.each(this.pickers, function (e, t) { t.getUTCDate() || t !== n && o || t.setUTCDate(s) }), s < this.dates[r]) for (; r >= 0 && s < this.dates[r];)this.pickers[r--].setUTCDate(s); else if (s > this.dates[l]) for (; l < c && s > this.dates[l];)this.pickers[l++].setUTCDate(s); this.updateDates(), delete this.updating } } } }, destroy: function () { e.map(this.pickers, function (e) { e.destroy() }), e(this.inputs).off("changeDate", this.dateUpdated), delete this.element.data().datepicker }, remove: o("destroy", "Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead") }; var d = e.fn.datepicker, h = function (i) { var n, s = Array.apply(null, arguments); if (s.shift(), this.each(function () { var t = e(this), o = t.data("datepicker"), a = "object" == typeof i && i; if (!o) { var r = function (t, i) { var n = e(t).data(), s = {}, o = new RegExp("^" + i.toLowerCase() + "([A-Z])"); function a(e, t) { return t.toLowerCase() } for (var r in i = new RegExp("^" + i.toLowerCase()), n) i.test(r) && (s[r.replace(o, a)] = n[r]); return s }(this, "date"), d = function (t) { var i = {}; if (f[t] || (t = t.split("-")[0], f[t])) { var n = f[t]; return e.each(p, function (e, t) { t in n && (i[t] = n[t]) }), i } }(e.extend({}, u, r, a).language), h = e.extend({}, u, d, r, a); t.hasClass("input-daterange") || h.inputs ? (e.extend(h, { inputs: h.inputs || t.find("input").toArray() }), o = new c(this, h)) : o = new l(this, h), t.data("datepicker", o) } "string" == typeof i && "function" == typeof o[i] && (n = o[i].apply(o, s)) }), n === t || n instanceof l || n instanceof c) return this; if (this.length > 1) throw new Error("Using only allowed for the collection of a single element (" + i + " function)"); return n }; e.fn.datepicker = h; var u = e.fn.datepicker.defaults = { assumeNearbyYear: !1, autoclose: !1, beforeShowDay: e.noop, beforeShowMonth: e.noop, beforeShowYear: e.noop, beforeShowDecade: e.noop, beforeShowCentury: e.noop, calendarWeeks: !1, clearBtn: !1, toggleActive: !1, daysOfWeekDisabled: [], daysOfWeekHighlighted: [], datesDisabled: [], endDate: 1 / 0, forceParse: !0, format: "mm/dd/yyyy", keepEmptyValues: !1, keyboardNavigation: !0, language: "en", minViewMode: 0, maxViewMode: 4, multidate: !1, multidateSeparator: ",", orientation: "auto", rtl: !1, startDate: -1 / 0, startView: 0, todayBtn: !1, todayHighlight: !1, updateViewDate: !0, weekStart: 0, disableTouchKeyboard: !1, enableOnReadonly: !0, showOnFocus: !0, zIndexOffset: 10, container: "body", immediateUpdates: !1, title: "", templates: { leftArrow: "&#x00AB;", rightArrow: "&#x00BB;" }, showWeekDays: !0 }, p = e.fn.datepicker.locale_opts = ["format", "rtl", "weekStart"]; e.fn.datepicker.Constructor = l; var f = e.fn.datepicker.dates = { en: { days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], daysShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], daysMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], monthsShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], today: "Today", clear: "Clear", titleFormat: "MM yyyy" } }, m = { viewModes: [{ names: ["days", "month"], clsName: "days", e: "changeMonth" }, { names: ["months", "year"], clsName: "months", e: "changeYear", navStep: 1 }, { names: ["years", "decade"], clsName: "years", e: "changeDecade", navStep: 10 }, { names: ["decades", "century"], clsName: "decades", e: "changeCentury", navStep: 100 }, { names: ["centuries", "millennium"], clsName: "centuries", e: "changeMillennium", navStep: 1e3 }], validParts: /dd?|DD?|mm?|MM?|yy(?:yy)?/g, nonpunctuation: /[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g, parseFormat: function (e) { if ("function" == typeof e.toValue && "function" == typeof e.toDisplay) return e; var t = e.replace(this.validParts, "\0").split("\0"), i = e.match(this.validParts); if (!t || !t.length || !i || 0 === i.length) throw new Error("Invalid date format."); return { separators: t, parts: i } }, parseDate: function (i, s, o, a) { if (!i) return t; if (i instanceof Date) return i; if ("string" == typeof s && (s = m.parseFormat(s)), s.toValue) return s.toValue(i, s, o); var r, c, d, h, u, p = { d: "moveDay", m: "moveMonth", w: "moveWeek", y: "moveYear" }, g = { yesterday: "-1d", today: "+0d", tomorrow: "+1d" }; if (i in g && (i = g[i]), /^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(i)) { for (r = i.match(/([\-+]\d+)([dmwy])/gi), i = new Date, h = 0; h < r.length; h++)c = r[h].match(/([\-+]\d+)([dmwy])/i), d = Number(c[1]), u = p[c[2].toLowerCase()], i = l.prototype[u](i, d); return l.prototype._zero_utc_time(i) } r = i && i.match(this.nonpunctuation) || []; var v, b, y = {}, w = ["yyyy", "yy", "M", "MM", "m", "mm", "d", "dd"], _ = { yyyy: function (e, t) { return e.setUTCFullYear(a ? (!0 === (n = a) && (n = 10), (i = t) < 100 && (i += 2e3) > (new Date).getFullYear() + n && (i -= 100), i) : t); var i, n }, m: function (e, t) { if (isNaN(e)) return e; for (t -= 1; t < 0;)t += 12; for (t %= 12, e.setUTCMonth(t); e.getUTCMonth() !== t;)e.setUTCDate(e.getUTCDate() - 1); return e }, d: function (e, t) { return e.setUTCDate(t) } }; _.yy = _.yyyy, _.M = _.MM = _.mm = _.m, _.dd = _.d, i = n(); var C = s.parts.slice(); function k() { var e = this.slice(0, r[h].length), t = r[h].slice(0, e.length); return e.toLowerCase() === t.toLowerCase() } if (r.length !== C.length && (C = e(C).filter(function (t, i) { return -1 !== e.inArray(i, w) }).toArray()), r.length === C.length) { var x, T, $; for (h = 0, x = C.length; h < x; h++) { if (v = parseInt(r[h], 10), c = C[h], isNaN(v)) switch (c) { case "MM": b = e(f[o].months).filter(k), v = e.inArray(b[0], f[o].months) + 1; break; case "M": b = e(f[o].monthsShort).filter(k), v = e.inArray(b[0], f[o].monthsShort) + 1 }y[c] = v } for (h = 0; h < w.length; h++)($ = w[h]) in y && !isNaN(y[$]) && (T = new Date(i), _[$](T, y[$]), isNaN(T) || (i = T)) } return i }, formatDate: function (t, i, n) { if (!t) return ""; if ("string" == typeof i && (i = m.parseFormat(i)), i.toDisplay) return i.toDisplay(t, i, n); var s = { d: t.getUTCDate(), D: f[n].daysShort[t.getUTCDay()], DD: f[n].days[t.getUTCDay()], m: t.getUTCMonth() + 1, M: f[n].monthsShort[t.getUTCMonth()], MM: f[n].months[t.getUTCMonth()], yy: t.getUTCFullYear().toString().substring(2), yyyy: t.getUTCFullYear() }; s.dd = (s.d < 10 ? "0" : "") + s.d, s.mm = (s.m < 10 ? "0" : "") + s.m, t = []; for (var o = e.extend([], i.separators), a = 0, r = i.parts.length; a <= r; a++)o.length && t.push(o.shift()), t.push(s[i.parts[a]]); return t.join("") }, headTemplate: '<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">' + u.templates.leftArrow + '</th><th colspan="5" class="datepicker-switch"></th><th class="next">' + u.templates.rightArrow + "</th></tr></thead>", contTemplate: '<tbody><tr><td colspan="7"></td></tr></tbody>', footTemplate: '<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>' }; m.template = '<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">' + m.headTemplate + "<tbody></tbody>" + m.footTemplate + '</table></div><div class="datepicker-months"><table class="table-condensed">' + m.headTemplate + m.contTemplate + m.footTemplate + '</table></div><div class="datepicker-years"><table class="table-condensed">' + m.headTemplate + m.contTemplate + m.footTemplate + '</table></div><div class="datepicker-decades"><table class="table-condensed">' + m.headTemplate + m.contTemplate + m.footTemplate + '</table></div><div class="datepicker-centuries"><table class="table-condensed">' + m.headTemplate + m.contTemplate + m.footTemplate + "</table></div></div>", e.fn.datepicker.DPGlobal = m, e.fn.datepicker.noConflict = function () { return e.fn.datepicker = d, this }, e.fn.datepicker.version = "1.8.0", e.fn.datepicker.deprecated = function (e) { var t = window.console; t && t.warn && t.warn("DEPRECATED: " + e) }, e(document).on("focus.datepicker.data-api click.datepicker.data-api", '[data-provide="datepicker"]', function (t) { var i = e(this); i.data("datepicker") || (t.preventDefault(), h.call(i, "show")) }), e(function () { h.call(e('[data-provide="datepicker-inline"]')) }) }), jQuery.fn.datepicker.dates.ar = { days: ["", "", "", "", "", "", "", ""], daysShort: ["", "", "", "", "", "", "", ""], daysMin: ["", "", "", "", "", "", "", ""], months: ["", "", "", "", "", "", "", "", "", "", "", ""], monthsShort: ["", "", "", "", "", "", "", "", "", "", "", ""], today: " ", rtl: !0 }, function () { "use strict"; var e = ["decimals", "thousand", "mark", "prefix", "postfix", "encoder", "decoder", "negativeBefore", "negative", "edit", "undo"]; function t(e) { return e.split("").reverse().join("") } function i(e, t) { return e.substring(0, t.length) === t } function n(e, t, i) { if ((e[t] || e[i]) && e[t] === e[i]) throw new Error(t) } function s(e) { return "number" == typeof e && isFinite(e) } function o(e, i, n, o, a, r, l, c, d, h, u, p) { var f, m, g, v = p, b = "", y = ""; return r && (p = r(p)), !!s(p) && (!1 !== e && 0 === parseFloat(p.toFixed(e)) && (p = 0), p < 0 && (f = !0, p = Math.abs(p)), !1 !== e && (p = function (e, t) { var i = Math.pow(10, t); return (Math.round(e * i) / i).toFixed(t) }(p, e)), -1 !== (p = p.toString()).indexOf(".") ? (g = (m = p.split("."))[0], n && (b = n + m[1])) : g = p, i && (g = t(g).match(/.{1,3}/g), g = t(g.join(t(i)))), f && c && (y += c), o && (y += o), f && d && (y += d), y += g, y += b, a && (y += a), h && (y = h(y, v)), y) } function a(e, t, n, o, a, r, l, c, d, h, u, p) { var f, m = ""; return u && (p = u(p)), !(!p || "string" != typeof p) && (c && i(p, c) && (p = p.replace(c, ""), f = !0), o && i(p, o) && (p = p.replace(o, "")), d && i(p, d) && (p = p.replace(d, ""), f = !0), a && function (e, t) { return e.slice(-1 * t.length) === t }(p, a) && (p = p.slice(0, -1 * a.length)), t && (p = p.split(t).join("")), n && (p = p.replace(n, ".")), f && (m += "-"), "" !== (m = (m += p).replace(/[^0-9\.\-.]/g, "")) && (m = Number(m), l && (m = l(m)), !!s(m) && m)) } function r(t, i, n) { var s, o = []; for (s = 0; s < e.length; s += 1)o.push(t[e[s]]); return o.push(n), i.apply("", o) } window.wNumb = function t(i) { if (!(this instanceof t)) return new t(i); "object" == typeof i && (i = function (t) { var i, s, o, a = {}; for (i = 0; i < e.length; i += 1)if (void 0 === (o = t[s = e[i]])) "negative" !== s || a.negativeBefore ? "mark" === s && "." !== a.thousand ? a[s] = "." : a[s] = !1 : a[s] = "-"; else if ("decimals" === s) { if (!(o >= 0 && o < 8)) throw new Error(s); a[s] = o } else if ("encoder" === s || "decoder" === s || "edit" === s || "undo" === s) { if ("function" != typeof o) throw new Error(s); a[s] = o } else { if ("string" != typeof o) throw new Error(s); a[s] = o } return n(a, "mark", "thousand"), n(a, "prefix", "negative"), n(a, "prefix", "negativeBefore"), a }(i), this.to = function (e) { return r(i, o, e) }, this.from = function (e) { return r(i, a, e) }) } }(), function (e) { "use strict"; function t(t) { return t instanceof e || e.zepto && e.zepto.isZ(t) } var i = [function (t, i) { if ("string" == typeof t && 0 === t.indexOf("-inline-")) return this.method = i || "html", this.target = this.el = e(t.replace("-inline-", "") || "<div/>"), !0 }, function (t) { if ("string" == typeof t && 0 !== t.indexOf("-")) { this.method = "val"; var i = document.createElement("input"); return i.name = t, i.type = "hidden", this.target = this.el = e(i), !0 } }, function (e) { if ("function" == typeof e) return this.target = !1, this.method = e, !0 }, function (e, i) { if (t(e) && !i) return e.is("input, select, textarea") ? (this.method = "val", this.target = e.on("change.liblink", this.changeHandler)) : (this.target = e, this.method = "html"), !0 }, function (e, i) { if (t(e) && ("function" == typeof i || "string" == typeof i && e[i])) return this.method = i, this.target = e, !0 }]; function n(t, n, s) { var o = this, a = !1; if (this.changeHandler = function (t) { var i = o.formatInstance.from(e(this).val()); if (!1 === i || isNaN(i)) return e(this).val(o.lastSetValue), !1; o.changeHandlerMethod.call("", t, i) }, this.el = !1, this.formatInstance = s, e.each(i, function (e, i) { return !(a = i.call(o, t, n)) }), !a) throw new RangeError("(Link) Invalid Link.") } function s(e) { this.items = [], this.elements = [], this.origin = e } n.prototype.set = function (e) { var t = Array.prototype.slice.call(arguments).slice(1); this.lastSetValue = this.formatInstance.to(e), t.unshift(this.lastSetValue), ("function" == typeof this.method ? this.method : this.target[this.method]).apply(this.target, t) }, s.prototype.push = function (e, t) { this.items.push(e), t && this.elements.push(t) }, s.prototype.reconfirm = function (e) { var t; for (t = 0; t < this.elements.length; t += 1)this.origin.LinkConfirm(e, this.elements[t]) }, s.prototype.remove = function (e) { var t; for (t = 0; t < this.items.length; t += 1)this.items[t].target.off(".liblink"); for (t = 0; t < this.elements.length; t += 1)this.elements[t].remove() }, s.prototype.change = function (e) { if (this.origin.LinkIsEmitting) return !1; this.origin.LinkIsEmitting = !0; var t, i = Array.prototype.slice.call(arguments, 1); for (i.unshift(e), t = 0; t < this.items.length; t += 1)this.items[t].set.apply(this.items[t], i); this.origin.LinkIsEmitting = !1 }, e.fn.Link = function (t) { var i = this; if (!1 === t) return i.each(function () { this.linkAPI && (e.map(this.linkAPI, function (e) { e.remove() }), delete this.linkAPI) }); if (void 0 === t) t = 0; else if ("string" != typeof t) throw new Error("Flag must be string."); return { to: function (o, a, r) { return i.each(function () { (function (t, i, o, a) { 0 === t && (t = this.LinkDefaultFlag), this.linkAPI || (this.linkAPI = {}), this.linkAPI[t] || (this.linkAPI[t] = new s(this)); var r = new n(i, o, a || this.LinkDefaultFormatter); r.target || (r.target = e(this)), r.changeHandlerMethod = this.LinkConfirm(t, r.el), this.linkAPI[t].push(r, r.el), this.LinkUpdate(t) }).call(this, t, o, a, r) }) } } } }(window.jQuery || window.Zepto), function (e) { "use strict"; function t(e) { return "number" == typeof e && !isNaN(e) && isFinite(e) } function i(e, t, i) { e.addClass(t), setTimeout(function () { e.removeClass(t) }, i) } function n(e) { return Math.max(Math.min(e, 100), 0) } function s(t) { return e.isArray(t) ? t : [t] } var o = e(document), a = e.fn.val, r = ".nui", l = window.navigator.pointerEnabled ? { start: "pointerdown", move: "pointermove", end: "pointerup" } : window.navigator.msPointerEnabled ? { start: "MSPointerDown", move: "MSPointerMove", end: "MSPointerUp" } : { start: "mousedown touchstart", move: "mousemove touchmove", end: "mouseup touchend" }, c = ["noUi-target", "noUi-base", "noUi-origin", "noUi-handle", "noUi-horizontal", "noUi-vertical", "noUi-background", "noUi-connect", "noUi-ltr", "noUi-rtl", "noUi-dragable", "", "noUi-state-drag", "", "noUi-state-tap", "noUi-active", "", "noUi-stacking"]; function d(e, t) { return 100 / (t - e) } function h(e, t) { return 100 * t / (e[1] - e[0]) } function u(e, t) { for (var i = 1; e >= t[i];)i += 1; return i } function p(e, t, i) { if (i >= e.slice(-1)[0]) return 100; var n, s, o, a, r = u(i, e); return n = e[r - 1], s = e[r], o = t[r - 1], a = t[r], o + function (e, t) { return h(e, e[0] < 0 ? t + Math.abs(e[0]) : t - e[0]) }([n, s], i) / d(o, a) } function f(e, t, i, n) { if (100 === n) return n; var s, o, a = u(n, e); return i ? n - (s = e[a - 1]) > ((o = e[a]) - s) / 2 ? o : s : t[a - 1] ? e[a - 1] + function (e, t) { return Math.round(e / t) * t }(n - e[a - 1], t[a - 1]) : n } function m(e, i, n) { var s; if ("number" == typeof i && (i = [i]), "[object Array]" !== Object.prototype.toString.call(i)) throw new Error("noUiSlider: 'range' contains invalid value."); if (!t(s = "min" === e ? 0 : "max" === e ? 100 : parseFloat(e)) || !t(i[0])) throw new Error("noUiSlider: 'range' value isn't numeric."); n.xPct.push(s), n.xVal.push(i[0]), s ? n.xSteps.push(!isNaN(i[1]) && i[1]) : isNaN(i[1]) || (n.xSteps[0] = i[1]) } function g(e, t, i) { if (!t) return !0; i.xSteps[e] = h([i.xVal[e], i.xVal[e + 1]], t) / d(i.xPct[e], i.xPct[e + 1]) } function v(e, t, i, n) { this.xPct = [], this.xVal = [], this.xSteps = [n || !1], this.xNumSteps = [!1], this.snap = t, this.direction = i; var s, o = []; for (s in e) e.hasOwnProperty(s) && o.push([e[s], s]); for (o.sort(function (e, t) { return e[0] - t[0] }), s = 0; s < o.length; s++)m(o[s][1], o[s][0], this); for (this.xNumSteps = this.xSteps.slice(0), s = 0; s < this.xNumSteps.length; s++)g(s, this.xNumSteps[s], this) } v.prototype.getMargin = function (e) { return 2 === this.xPct.length && h(this.xVal, e) }, v.prototype.toStepping = function (e) { return e = p(this.xVal, this.xPct, e), this.direction && (e = 100 - e), e }, v.prototype.fromStepping = function (e) { return this.direction && (e = 100 - e), t = function (e, t, i) { if (i >= 100) return e.slice(-1)[0]; var n, s = u(i, t); return function (e, t) { return t * (e[1] - e[0]) / 100 + e[0] }([e[s - 1], e[s]], (i - (n = t[s - 1])) * d(n, t[s])) }(this.xVal, this.xPct, e), i = Math.pow(10, 7), Number((Math.round(t * i) / i).toFixed(7)); var t, i }, v.prototype.getStep = function (e) { return this.direction && (e = 100 - e), e = f(this.xPct, this.xSteps, this.snap, e), this.direction && (e = 100 - e), e }, v.prototype.getApplicableStep = function (e) { var t = u(e, this.xPct), i = 100 === e ? 2 : 1; return [this.xNumSteps[t - 2], this.xVal[t - i], this.xNumSteps[t - i]] }, v.prototype.convert = function (e) { return this.getStep(this.toStepping(e)) }; var b = { to: function (e) { return e.toFixed(2) }, from: Number }; function y(e, i) { if (!t(i)) throw new Error("noUiSlider: 'step' is not numeric."); e.singleStep = i } function w(t, i) { if ("object" != typeof i || e.isArray(i)) throw new Error("noUiSlider: 'range' is not an object."); if (void 0 === i.min || void 0 === i.max) throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'."); t.spectrum = new v(i, t.snap, t.dir, t.singleStep) } function _(t, i) { if (i = s(i), !e.isArray(i) || !i.length || i.length > 2) throw new Error("noUiSlider: 'start' option is incorrect."); t.handles = i.length, t.start = i } function C(e, t) { if (e.snap = t, "boolean" != typeof t) throw new Error("noUiSlider: 'snap' option must be a boolean.") } function k(e, t) { if (e.animate = t, "boolean" != typeof t) throw new Error("noUiSlider: 'animate' option must be a boolean.") } function x(e, t) { if ("lower" === t && 1 === e.handles) e.connect = 1; else if ("upper" === t && 1 === e.handles) e.connect = 2; else if (!0 === t && 2 === e.handles) e.connect = 3; else { if (!1 !== t) throw new Error("noUiSlider: 'connect' option doesn't match handle count."); e.connect = 0 } } function T(e, t) { switch (t) { case "horizontal": e.ort = 0; break; case "vertical": e.ort = 1; break; default: throw new Error("noUiSlider: 'orientation' option is invalid.") } } function $(e, i) { if (!t(i)) throw new Error("noUiSlider: 'margin' option must be numeric."); if (e.margin = e.spectrum.getMargin(i), !e.margin) throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.") } function S(e, i) { if (!t(i)) throw new Error("noUiSlider: 'limit' option must be numeric."); if (e.limit = e.spectrum.getMargin(i), !e.limit) throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.") } function M(e, t) { switch (t) { case "ltr": e.dir = 0; break; case "rtl": e.dir = 1, e.connect = [0, 2, 1, 3][e.connect]; break; default: throw new Error("noUiSlider: 'direction' option was not recognized.") } } function D(e, t) { if ("string" != typeof t) throw new Error("noUiSlider: 'behaviour' must be a string containing options."); var i = t.indexOf("tap") >= 0, n = t.indexOf("drag") >= 0, s = t.indexOf("fixed") >= 0, o = t.indexOf("snap") >= 0; e.events = { tap: i || o, drag: n, fixed: s, snap: o } } function E(e, t) { if (e.format = t, "function" == typeof t.to && "function" == typeof t.from) return !0; throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.") } function A(t, i) { var n = e("<div><div/></div>").addClass(c[2]), s = ["-lower", "-upper"]; return t && s.reverse(), n.children().addClass(c[3] + " " + c[3] + s[i]), n } function F(t, a, d) { var h, u, p = e(t), f = [-1, -1], m = a.spectrum, g = [], v = ["lower", "upper"].slice(0, a.handles); function b() { return h[["width", "height"][a.ort]]() } function y(e) { var t, i = [p.val()]; for (t = 0; t < e.length; t += 1)p.trigger(e[t], i) } function w(e) { return 1 === e.length ? e[0] : a.dir ? e.reverse() : e } function _(t) { var i = e.inArray(t, v); p[0].linkAPI && p[0].linkAPI[t] && p[0].linkAPI[t].change(g[i], u[i].children(), p) } function C(e, t, i, n) { return e = e.replace(/\s/g, r + " ") + r, t.on(e, function (e) { return !p.attr("disabled") && (!p.hasClass(c[14]) && ((e = function (e) { e.preventDefault(); var t, i, n = 0 === e.type.indexOf("touch"), s = 0 === e.type.indexOf("mouse"), o = 0 === e.type.indexOf("pointer"), a = e; return 0 === e.type.indexOf("MSPointer") && (o = !0), e.originalEvent && (e = e.originalEvent), n && (t = e.changedTouches[0].pageX, i = e.changedTouches[0].pageY), (s || o) && (o || void 0 !== window.pageXOffset || (window.pageXOffset = document.documentElement.scrollLeft, window.pageYOffset = document.documentElement.scrollTop), t = e.clientX + window.pageXOffset, i = e.clientY + window.pageYOffset), a.points = [t, i], a.cursor = s, a }(e)).calcPoint = e.points[a.ort], void i(e, n))) }) } function k(e, t) { var i, s, o, a, r, l, c = t.handles || u, d = !1, h = 100 * (e.calcPoint - t.start) / b(), p = c[0][0] !== u[0][0] ? 1 : 0; s = h, o = t.positions, a = c.length > 1, r = s + o[0], l = s + o[1], i = a ? (r < 0 && (l += Math.abs(r)), l > 100 && (r -= l - 100), [n(r), n(l)]) : [r, l], d = S(c[0], i[p], 1 === c.length), c.length > 1 && (d = S(c[1], i[p ? 0 : 1], !1) || d), d && y(["slide"]) } function x(t) { e("." + c[15]).removeClass(c[15]), t.cursor && e("body").css("cursor", "").off(r), o.off(r), p.removeClass(c[12]), y(["set", "change"]) } function T(t, i) { 1 === i.handles.length && i.handles[0].children().addClass(c[15]), t.stopPropagation(), C(l.move, o, k, { start: t.calcPoint, handles: i.handles, positions: [f[0], f[u.length - 1]] }), C(l.end, o, x, null), t.cursor && (e("body").css("cursor", e(t.target).css("cursor")), u.length > 1 && p.addClass(c[12]), e("body").on("selectstart" + r, !1)) } function $(t) { var n, s = t.calcPoint, o = 0; t.stopPropagation(), e.each(u, function () { o += this.offset()[a.style] }), o = s < o / 2 || 1 === u.length ? 0 : 1, n = 100 * (s -= h.offset()[a.style]) / b(), a.events.snap || i(p, c[14], 300), S(u[o], n), y(["slide", "set", "change"]), a.events.snap && T(t, { handles: [u[o]] }) } function S(e, t, i) { var s = e[0] !== u[0][0] ? 1 : 0, o = f[0] + a.margin, r = f[1] - a.margin, l = f[0] + a.limit, d = f[1] - a.limit; return u.length > 1 && (t = s ? Math.max(t, o) : Math.min(t, r)), !1 !== i && a.limit && u.length > 1 && (t = s ? Math.min(t, l) : Math.max(t, d)), t = m.getStep(t), (t = n(parseFloat(t.toFixed(7)))) !== f[s] && (e.css(a.style, t + "%"), e.is(":first-child") && e.toggleClass(c[17], t > 50), f[s] = t, g[s] = m.fromStepping(t), _(v[s]), !0) } if (a.dir && v.reverse(), t.LinkUpdate = _, t.LinkConfirm = function (t, i) { var n = e.inArray(t, v); return i && i.appendTo(u[n].children()), a.dir && a.handles > 1 && (n = 1 === n ? 0 : 1), function (e) { return function (t, i) { p.val([e ? null : i, e ? i : null], !0) } }(n) }, t.LinkDefaultFormatter = a.format, t.LinkDefaultFlag = "lower", t.reappend = function () { var e, t; for (e = 0; e < v.length; e += 1)this.linkAPI && this.linkAPI[t = v[e]] && this.linkAPI[t].reconfirm(t) }, p.hasClass(c[0])) throw new Error("Slider was already initialized."); h = function (t, i, n) { return n.addClass([c[0], c[8 + t], c[4 + i]].join(" ")), e("<div/>").appendTo(n).addClass(c[1]) }(a.dir, a.ort, p), u = function (e, t, i) { var n, s = []; for (n = 0; n < e; n += 1)s.push(A(t, n).appendTo(i)); return s }(a.handles, a.dir, h), function (e, t, i) { switch (e) { case 1: t.addClass(c[7]), i[0].addClass(c[6]); break; case 3: i[1].addClass(c[6]); case 2: i[0].addClass(c[7]); case 0: t.addClass(c[6]) } }(a.connect, p, u), function (e) { var t, i; if (!e.fixed) for (t = 0; t < u.length; t += 1)C(l.start, u[t].children(), T, { handles: [u[t]] }); e.tap && C(l.start, h, $, { handles: u }), e.drag && (i = h.find("." + c[7]).addClass(c[10]), e.fixed && (i = i.add(h.children().not(i).children())), C(l.start, i, T, { handles: u })) }(a.events), t.vSet = function (e) { if (p[0].LinkIsEmitting) return this; var t, n = s(e); return a.dir && a.handles > 1 && n.reverse(), a.animate && -1 !== f[0] && i(p, c[14], 300), t = u.length > 1 ? 3 : 1, 1 === n.length && (t = 1), function (e, t) { var i, n, s; for (a.limit && (e += 1), i = 0; i < e; i += 1)null !== (s = t[n = i % 2]) && !1 !== s && ("number" == typeof s && (s = String(s)), (!1 === (s = a.format.from(s)) || isNaN(s) || !1 === S(u[n], m.toStepping(s), i === 3 - a.dir)) && _(v[n])) }(t, n), y(["set"]), this }, t.vGet = function () { var e, t = []; for (e = 0; e < a.handles; e += 1)t[e] = a.format.to(g[e]); return w(t) }, t.destroy = function () { return e(this).off(r).removeClass(c.join(" ")).empty(), delete this.LinkUpdate, delete this.LinkConfirm, delete this.LinkDefaultFormatter, delete this.LinkDefaultFlag, delete this.reappend, delete this.vGet, delete this.vSet, delete this.getCurrentStep, delete this.getInfo, delete this.destroy, d }, t.getCurrentStep = function () { return w(e.map(f, function (e, t) { var i, n, s = m.getApplicableStep(e), o = (i = String(s[2]), (n = i.split(".")).length > 1 ? n[1].length : 0), a = g[t], r = 100 === e ? null : s[2], l = Number((a - s[2]).toFixed(o)); return [[0 === e ? null : l >= s[1] ? s[2] : s[0] || !1, r]] })) }, t.getOriginalOptions = function () { return d }, t.getInfo = function () { return [m, a.style, a.ort] }, p.val(a.start) } function I(t) { var i = function (t) { var i, n = { margin: 0, limit: 0, animate: !0, format: b }; return i = { step: { r: !1, t: y }, start: { r: !0, t: _ }, connect: { r: !0, t: x }, direction: { r: !0, t: M }, snap: { r: !1, t: C }, animate: { r: !1, t: k }, range: { r: !0, t: w }, orientation: { r: !1, t: T }, margin: { r: !1, t: $ }, limit: { r: !1, t: S }, behaviour: { r: !0, t: D }, format: { r: !1, t: E } }, t = e.extend({ connect: !1, direction: "ltr", behaviour: "tap", orientation: "horizontal" }, t), e.each(i, function (e, i) { if (void 0 === t[e]) { if (i.r) throw new Error("noUiSlider: '" + e + "' is required."); return !0 } i.t(n, t[e]) }), n.style = n.ort ? "top" : "left", n }(t); return this.each(function () { F(this, i, t) }) } function P() { return this[0][arguments.length ? "vSet" : "vGet"].apply(this[0], arguments) } function R(t, i, n, s) { var o, a = t.direction, r = {}, l = t.xVal[0], c = t.xVal[t.xVal.length - 1], d = !1, h = !1, u = 0; return t.direction = 0, o = s.slice().sort(function (e, t) { return e - t }), (s = e.grep(o, function (t, i) { return i === e.inArray(t, o) }))[0] !== l && (s.unshift(l), d = !0), s[s.length - 1] !== c && (s.push(c), h = !0), e.each(s, function (o) { var a, l, c, p, f, m, g, v, b, y = s[o], w = s[o + 1]; if ("steps" === n && (a = t.xNumSteps[o]), a || (a = w - y), !1 !== y && void 0 !== w) for (l = y; l <= w; l += a) { for (g = (f = (p = t.toStepping(l)) - u) / i, b = f / (v = Math.round(g)), c = 1; c <= v; c += 1)r[(u + c * b).toFixed(5)] = ["x", 0]; m = e.inArray(l, s) > -1 ? 1 : "steps" === n ? 2 : 0, !o && d && (m = 0), l === w && h || (r[p.toFixed(5)] = [l, m]), u = p } }), t.direction = a, r } e.fn.val = function (t) { function i(e) { return e.hasClass(c[0]) ? P : a } if (!arguments.length) { var n = e(this[0]); return i(n).call(n) } var s = e.isFunction(t); return this.each(function (n) { var o = t, a = e(this); s && (o = t.call(this, n, a.val())), i(a).call(a, o) }) }, e.fn.noUiSlider = function (t, i) { switch (t) { case "step": return this[0].getCurrentStep(); case "options": return this[0].getOriginalOptions() }return (i ? function (t) { return this.each(function () { if (this.destroy) { var i = e(this).val(), n = this.destroy(), s = e.extend({}, n, t); e(this).noUiSlider(s), this.reappend(), n.start === s.start && e(this).val(i) } else e(this).noUiSlider(t) }) } : I).call(this, t) }, e.fn.noUiSlider_pips = function (t) { var i = t.mode, n = t.density || 1, s = t.filter || !1, o = t.values || !1, a = t.format || { to: Math.round }, r = t.stepped || !1; return this.each(function () { var t = this.getInfo(), l = function (t, i, n, s) { if ("range" === i || "steps" === i) return t.xVal; if ("count" === i) { var o, a = 100 / (n - 1), r = 0; for (n = []; (o = r++ * a) <= 100;)n.push(o); i = "positions" } return "positions" === i ? e.map(n, function (e) { return t.fromStepping(s ? t.getStep(e) : e) }) : "values" === i ? s ? e.map(n, function (e) { return t.fromStepping(t.getStep(t.toStepping(e))) }) : n : void 0 }(t[0], i, o, r), c = R(t[0], n, i, l); return e(this).append(function (t, i, n, s, o, a) { var r = ["horizontal", "vertical"][i], l = e("<div/>"); function c(e, i, n) { return 'class="' + i + " " + i + "-" + r + " " + i + (s = n[1], n[0], ["-normal", "-large", "-sub"][s]) + '" style="' + t + ": " + e + '%"'; var s } return l.addClass("noUi-pips noUi-pips-" + r), e.each(s, function (e, t) { n && (e = 100 - e), t[1] = t[1] && o ? o(t[0], t[1]) : t[1], l.append("<div " + c(e, "noUi-marker", t) + "></div>"), t[1] && l.append("<div " + c(e, "noUi-value", t) + ">" + a.to(t[0]) + "</div>") }), l }(t[1], t[2], t[0].direction, c, s, a)) }) } }(window.jQuery || window.Zepto), function (e) { "use strict"; var t = "rating-clear", i = "." + t, n = { min: 1, max: 5, "empty-value": 0, iconLib: "glyphicon", activeIcon: "glyphicon-star", inactiveIcon: "glyphicon-star-empty", clearable: !1, clearableIcon: "glyphicon-remove", inline: !1, readonly: !1 }; function s(e) { return "[data-value" + (e ? "=" + e : "") + "]" } function o(e, t, i) { var n = i.activeIcon, s = i.inactiveIcon; e.removeClass(t ? s : n).addClass(t ? n : s) } var a = function (i, s) { var o = this.$input = i; this.options = function (t, i) { var s = e.extend({}, n, t.data(), i); return s.inline = "" === s.inline || s.inline, s.readonly = "" === s.readonly || s.readonly, !1 === s.clearable ? s.clearableLabel = "" : s.clearableLabel = s.clearable, s.clearable = "" === s.clearable || s.clearable, s }(o, s); var a = this.$el = function (i, n) { if (n.inline) var s = e('<span class="rating-input"></span>'); else s = e('<div class="rating-input"></div>'); s.addClass(i.attr("class")), s.removeClass("rating"); for (var o = n.min; o <= n.max; o++)s.append('<i class="' + n.iconLib + '" data-value="' + o + '"></i>'); return n.clearable && !n.readonly && s.append('<a class="' + t + '"> &nbsp; <i class="' + n.iconLib + " " + n.clearableIcon + '"/>' + n.clearableLabel + "</a>"), s }(o, this.options); o.addClass("hidden").before(a), o.attr("type", "hidden"), this.highlight(o.val()) }; a.VERSION = "0.4.0", a.DEFAULTS = n, a.prototype = { clear: function () { this.setValue(this.options["empty-value"]) }, setValue: function (e) { this.highlight(e), this.updateInput(e) }, highlight: function (e, t) { var n = this.options, a = this.$el; if (e >= this.options.min && e <= this.options.max) { var r = a.find(s(e)); o(r.prevAll("i").andSelf(), !0, n), o(r.nextAll("i"), !1, n) } else o(a.find(s()), !1, n); t || (e && e != this.options["empty-value"] ? a.find(i).removeClass("hidden") : a.find(i).addClass("hidden")) }, updateInput: function (e) { var t = this.$input; t.val() != e && t.val(e).change() } }, (e.fn.rating = function (t) { return this.filter("input[type=number]").each(function () { var n = e(this), o = new a(n, "object" == typeof t && t || {}); o.options.readonly || o.$el.on("mouseenter", s(), function () { o.highlight(e(this).data("value"), !0) }).on("mouseleave", s(), function () { o.highlight(n.val(), !0) }).on("click", s(), function () { o.setValue(e(this).data("value")) }).on("click", i, function () { o.clear() }) }) }).Constructor = a, e(function () { e("input.rating[type=number]").each(function () { e(this).rating() }) }) }(jQuery), function (e) { e.fn.extend({ slimScroll: function (i) { var n = e.extend({ width: "auto", height: "250px", size: "7px", color: "#000", position: "right", distance: "1px", start: "top", opacity: .4, alwaysVisible: !1, disableFadeOut: !1, railVisible: !1, railColor: "#333", railOpacity: .2, railDraggable: !0, railClass: "slimScrollRail", barClass: "slimScrollBar", wrapperClass: "slimScrollDiv", allowPageScroll: !1, wheelStep: 20, touchScrollStep: 200, borderRadius: "7px", railBorderRadius: "7px" }, i); return this.each(function () { var s, o, a, r, l, c, d, h, u = "<div></div>", p = 30, f = !1, m = e(this); if (m.parent().hasClass(n.wrapperClass)) { var g = m.scrollTop(); if (_ = m.closest("." + n.barClass), w = m.closest("." + n.railClass), T(), e.isPlainObject(i)) { if ("height" in i && "auto" == i.height) { m.parent().css("height", "auto"), m.css("height", "auto"); var v = m.parent().parent().height(); m.parent().css("height", v), m.css("height", v) } if ("scrollTo" in i) g = parseInt(n.scrollTo); else if ("scrollBy" in i) g += parseInt(n.scrollBy); else if ("destroy" in i) return _.remove(), w.remove(), void m.unwrap(); x(g, !1, !0) } } else if (!(e.isPlainObject(i) && "destroy" in i)) { n.height = "auto" == n.height ? m.parent().height() : n.height; var b = e(u).addClass(n.wrapperClass).css({ position: "relative", overflow: "hidden", width: n.width, height: n.height }); m.css({ overflow: "hidden", width: n.width, height: n.height }); var y, w = e(u).addClass(n.railClass).css({ width: n.size, height: "100%", position: "absolute", top: 0, display: n.alwaysVisible && n.railVisible ? "block" : "none", "border-radius": n.railBorderRadius, background: n.railColor, opacity: n.railOpacity, zIndex: 90 }), _ = e(u).addClass(n.barClass).css({ background: n.color, width: n.size, position: "absolute", top: 0, opacity: n.opacity, display: n.alwaysVisible ? "block" : "none", "border-radius": n.borderRadius, BorderRadius: n.borderRadius, MozBorderRadius: n.borderRadius, WebkitBorderRadius: n.borderRadius, zIndex: 99 }), C = "right" == n.position ? { right: n.distance } : { left: n.distance }; w.css(C), _.css(C), m.wrap(b), m.parent().append(_), m.parent().append(w), n.railDraggable && _.bind("mousedown", function (i) { var n = e(document); return a = !0, t = parseFloat(_.css("top")), pageY = i.pageY, n.bind("mousemove.slimscroll", function (e) { currTop = t + e.pageY - pageY, _.css("top", currTop), x(0, _.position().top, !1) }), n.bind("mouseup.slimscroll", function (e) { a = !1, S(), n.unbind(".slimscroll") }), !1 }).bind("selectstart.slimscroll", function (e) { return e.stopPropagation(), e.preventDefault(), !1 }), w.hover(function () { $() }, function () { S() }), _.hover(function () { o = !0 }, function () { o = !1 }), m.hover(function () { s = !0, $(), S() }, function () { s = !1, S() }), m.bind("touchstart", function (e, t) { e.originalEvent.touches.length && (l = e.originalEvent.touches[0].pageY) }), m.bind("touchmove", function (e) { (f || e.originalEvent.preventDefault(), e.originalEvent.touches.length) && (x((l - e.originalEvent.touches[0].pageY) / n.touchScrollStep, !0), l = e.originalEvent.touches[0].pageY) }), T(), "bottom" === n.start ? (_.css({ top: m.outerHeight() - _.outerHeight() }), x(0, !0)) : "top" !== n.start && (x(e(n.start).position().top, null, !0), n.alwaysVisible || _.hide()), y = this, window.addEventListener ? (y.addEventListener("DOMMouseScroll", k, !1), y.addEventListener("mousewheel", k, !1)) : document.attachEvent("onmousewheel", k) } function k(t) { if (s) { var i = 0; (t = t || window.event).wheelDelta && (i = -t.wheelDelta / 120), t.detail && (i = t.detail / 3); var o = t.target || t.srcTarget || t.srcElement; e(o).closest("." + n.wrapperClass).is(m.parent()) && x(i, !0), t.preventDefault && !f && t.preventDefault(), f || (t.returnValue = !1) } } function x(e, t, i) { f = !1; var s = e, o = m.outerHeight() - _.outerHeight(); if (t && (s = parseInt(_.css("top")) + e * parseInt(n.wheelStep) / 100 * _.outerHeight(), s = Math.min(Math.max(s, 0), o), s = e > 0 ? Math.ceil(s) : Math.floor(s), _.css({ top: s + "px" })), s = (d = parseInt(_.css("top")) / (m.outerHeight() - _.outerHeight())) * (m[0].scrollHeight - m.outerHeight()), i) { var a = (s = e) / m[0].scrollHeight * m.outerHeight(); a = Math.min(Math.max(a, 0), o), _.css({ top: a + "px" }) } m.scrollTop(s), m.trigger("slimscrolling", ~~s), $(), S() } function T() { c = Math.max(m.outerHeight() / m[0].scrollHeight * m.outerHeight(), p), _.css({ height: c + "px" }); var e = c == m.outerHeight() ? "none" : "block"; _.css({ display: e }) } function $() { if (T(), clearTimeout(r), d == ~~d) { if (f = n.allowPageScroll, h != d) { var e = 0 == ~~d ? "top" : "bottom"; m.trigger("slimscroll", e) } } else f = !1; h = d, c >= m.outerHeight() ? f = !0 : (_.stop(!0, !0).fadeIn("fast"), n.railVisible && w.stop(!0, !0).fadeIn("fast")) } function S() { n.alwaysVisible || (r = setTimeout(function () { n.disableFadeOut && s || o || a || (_.fadeOut("slow"), w.fadeOut("slow")) }, 1e3)) } }), this } }), e.fn.extend({ slimscroll: e.fn.slimScroll }) }(jQuery), function () { function e() { } var t = e.prototype, i = this, n = i.EventEmitter; function s(e, t) { for (var i = e.length; i--;)if (e[i].listener === t) return i; return -1 } function o(e) { return function () { return this[e].apply(this, arguments) } } t.getListeners = function (e) { var t, i, n = this._getEvents(); if ("object" == typeof e) for (i in t = {}, n) n.hasOwnProperty(i) && e.test(i) && (t[i] = n[i]); else t = n[e] || (n[e] = []); return t }, t.flattenListeners = function (e) { var t, i = []; for (t = 0; t < e.length; t += 1)i.push(e[t].listener); return i }, t.getListenersAsObject = function (e) { var t, i = this.getListeners(e); return i instanceof Array && ((t = {})[e] = i), t || i }, t.addListener = function (e, t) { var i, n = this.getListenersAsObject(e), o = "object" == typeof t; for (i in n) n.hasOwnProperty(i) && -1 === s(n[i], t) && n[i].push(o ? t : { listener: t, once: !1 }); return this }, t.on = o("addListener"), t.addOnceListener = function (e, t) { return this.addListener(e, { listener: t, once: !0 }) }, t.once = o("addOnceListener"), t.defineEvent = function (e) { return this.getListeners(e), this }, t.defineEvents = function (e) { for (var t = 0; t < e.length; t += 1)this.defineEvent(e[t]); return this }, t.removeListener = function (e, t) { var i, n, o = this.getListenersAsObject(e); for (n in o) o.hasOwnProperty(n) && -1 !== (i = s(o[n], t)) && o[n].splice(i, 1); return this }, t.off = o("removeListener"), t.addListeners = function (e, t) { return this.manipulateListeners(!1, e, t) }, t.removeListeners = function (e, t) { return this.manipulateListeners(!0, e, t) }, t.manipulateListeners = function (e, t, i) { var n, s, o = e ? this.removeListener : this.addListener, a = e ? this.removeListeners : this.addListeners; if ("object" != typeof t || t instanceof RegExp) for (n = i.length; n--;)o.call(this, t, i[n]); else for (n in t) t.hasOwnProperty(n) && (s = t[n]) && ("function" == typeof s ? o.call(this, n, s) : a.call(this, n, s)); return this }, t.removeEvent = function (e) { var t, i = typeof e, n = this._getEvents(); if ("string" === i) delete n[e]; else if ("object" === i) for (t in n) n.hasOwnProperty(t) && e.test(t) && delete n[t]; else delete this._events; return this }, t.removeAllListeners = o("removeEvent"), t.emitEvent = function (e, t) { var i, n, s, o = this.getListenersAsObject(e); for (s in o) if (o.hasOwnProperty(s)) for (n = o[s].length; n--;)!0 === (i = o[s][n]).once && this.removeListener(e, i.listener), i.listener.apply(this, t || []) === this._getOnceReturnValue() && this.removeListener(e, i.listener); return this }, t.trigger = o("emitEvent"), t.emit = function (e) { var t = Array.prototype.slice.call(arguments, 1); return this.emitEvent(e, t) }, t.setOnceReturnValue = function (e) { return this._onceReturnValue = e, this }, t._getOnceReturnValue = function () { return !this.hasOwnProperty("_onceReturnValue") || this._onceReturnValue }, t._getEvents = function () { return this._events || (this._events = {}) }, e.noConflict = function () { return i.EventEmitter = n, e }, "function" == typeof define && define.amd ? define("eventEmitter/EventEmitter", [], function () { return e }) : "object" == typeof module && module.exports ? module.exports = e : this.EventEmitter = e }.call(this), function (e) { var t = document.documentElement, i = function () { }; function n(t) { var i = e.event; return i.target = i.target || i.srcElement || t, i } t.addEventListener ? i = function (e, t, i) { e.addEventListener(t, i, !1) } : t.attachEvent && (i = function (e, t, i) { e[t + i] = i.handleEvent ? function () { var t = n(e); i.handleEvent.call(i, t) } : function () { var t = n(e); i.call(e, t) }, e.attachEvent("on" + t, e[t + i]) }); var s = function () { }; t.removeEventListener ? s = function (e, t, i) { e.removeEventListener(t, i, !1) } : t.detachEvent && (s = function (e, t, i) { e.detachEvent("on" + t, e[t + i]); try { delete e[t + i] } catch (n) { e[t + i] = void 0 } }); var o = { bind: i, unbind: s }; "function" == typeof define && define.amd ? define("eventie/eventie", o) : e.eventie = o }(this), function (e, t) { "function" == typeof define && define.amd ? define(["eventEmitter/EventEmitter", "eventie/eventie"], function (i, n) { return t(e, i, n) }) : "object" == typeof exports ? module.exports = t(e, require("wolfy87-eventemitter"), require("eventie")) : e.imagesLoaded = t(e, e.EventEmitter, e.eventie) }(window, function (e, t, i) { var n = e.jQuery, s = e.console, o = void 0 !== s; function a(e, t) { for (var i in t) e[i] = t[i]; return e } var r = Object.prototype.toString; function l(e) { var t = []; if (function (e) { return "[object Array]" === r.call(e) }(e)) t = e; else if ("number" == typeof e.length) for (var i = 0, n = e.length; i < n; i++)t.push(e[i]); else t.push(e); return t } function c(e, t, i) { if (!(this instanceof c)) return new c(e, t); "string" == typeof e && (e = document.querySelectorAll(e)), this.elements = l(e), this.options = a({}, this.options), "function" == typeof t ? i = t : a(this.options, t), i && this.on("always", i), this.getImages(), n && (this.jqDeferred = new n.Deferred); var s = this; setTimeout(function () { s.check() }) } function d(e) { this.img = e } c.prototype = new t, c.prototype.options = {}, c.prototype.getImages = function () { this.images = []; for (var e = 0, t = this.elements.length; e < t; e++) { var i = this.elements[e]; "IMG" === i.nodeName && this.addImage(i); var n = i.nodeType; if (n && (1 === n || 9 === n || 11 === n)) for (var s = i.querySelectorAll("img"), o = 0, a = s.length; o < a; o++) { var r = s[o]; this.addImage(r) } } }, c.prototype.addImage = function (e) { var t = new d(e); this.images.push(t) }, c.prototype.check = function () { var e = this, t = 0, i = this.images.length; if (this.hasAnyBroken = !1, i) for (var n = 0; n < i; n++) { var a = this.images[n]; a.on("confirm", r), a.check() } else this.complete(); function r(n, a) { return e.options.debug && o && s.log("confirm", n, a), e.progress(n), ++t === i && e.complete(), !0 } }, c.prototype.progress = function (e) { this.hasAnyBroken = this.hasAnyBroken || !e.isLoaded; var t = this; setTimeout(function () { t.emit("progress", t, e), t.jqDeferred && t.jqDeferred.notify && t.jqDeferred.notify(t, e) }) }, c.prototype.complete = function () { var e = this.hasAnyBroken ? "fail" : "done"; this.isComplete = !0; var t = this; setTimeout(function () { if (t.emit(e, t), t.emit("always", t), t.jqDeferred) { var i = t.hasAnyBroken ? "reject" : "resolve"; t.jqDeferred[i](t) } }) }, n && (n.fn.imagesLoaded = function (e, t) { return new c(this, e, t).jqDeferred.promise(n(this)) }), d.prototype = new t, d.prototype.check = function () { var e = h[this.img.src] || new u(this.img.src); if (e.isConfirmed) this.confirm(e.isLoaded, "cached was confirmed"); else if (this.img.complete && void 0 !== this.img.naturalWidth) this.confirm(0 !== this.img.naturalWidth, "naturalWidth"); else { var t = this; e.on("confirm", function (e, i) { return t.confirm(e.isLoaded, i), !0 }), e.check() } }, d.prototype.confirm = function (e, t) { this.isLoaded = e, this.emit("confirm", this, t) }; var h = {}; function u(e) { this.src = e, h[e] = this } return u.prototype = new t, u.prototype.check = function () { if (!this.isChecked) { var e = new Image; i.bind(e, "load", this), i.bind(e, "error", this), e.src = this.src, this.isChecked = !0 } }, u.prototype.handleEvent = function (e) { var t = "on" + e.type; this[t] && this[t](e) }, u.prototype.onload = function (e) { this.confirm(!0, "onload"), this.unbindProxyEvents(e) }, u.prototype.onerror = function (e) { this.confirm(!1, "onerror"), this.unbindProxyEvents(e) }, u.prototype.confirm = function (e, t) { this.isConfirmed = !0, this.isLoaded = e, this.emit("confirm", this, t) }, u.prototype.unbindProxyEvents = function (e) { i.unbind(e.target, "load", this), i.unbind(e.target, "error", this) }, c }), function (e, t, i, n) { "use strict"; var s = i("html"), o = i(e), a = i(t), r = i.fancybox = function () { r.open.apply(this, arguments) }, l = navigator.userAgent.match(/msie/i), c = null, d = void 0 !== t.createTouch, h = function (e) { return e && e.hasOwnProperty && e instanceof i }, u = function (e) { return e && "string" === i.type(e) }, p = function (e) { return u(e) && e.indexOf("%") > 0 }, f = function (e, t) { var i = parseInt(e, 10) || 0; return t && p(e) && (i = r.getViewport()[t] / 100 * i), Math.ceil(i) }, m = function (e, t) { return f(e, t) + "px" }; i.extend(r, { version: "2.1.5", defaults: { padding: 15, margin: 20, width: 800, height: 600, minWidth: 100, minHeight: 100, maxWidth: 9999, maxHeight: 9999, pixelRatio: 1, autoSize: !0, autoHeight: !1, autoWidth: !1, autoResize: !0, autoCenter: !d, fitToView: !0, aspectRatio: !1, topRatio: .5, leftRatio: .5, scrolling: "auto", wrapCSS: "", arrows: !0, closeBtn: !0, closeClick: !1, nextClick: !1, mouseWheel: !0, autoPlay: !1, playSpeed: 3e3, preload: 3, modal: !1, loop: !0, ajax: { dataType: "html", headers: { "X-fancyBox": !0 } }, iframe: { scrolling: "auto", preload: !0 }, swf: { wmode: "transparent", allowfullscreen: "true", allowscriptaccess: "always" }, keys: { next: { 13: "left", 34: "up", 39: "left", 40: "up" }, prev: { 8: "right", 33: "down", 37: "right", 38: "down" }, close: [27], play: [32], toggle: [70] }, direction: { next: "left", prev: "right" }, scrollOutside: !0, index: 0, type: null, href: null, content: null, title: null, tpl: { wrap: '<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>', image: '<img class="fancybox-image" src="{href}" alt="" />', iframe: '<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen' + (l ? ' allowtransparency="true"' : "") + "></iframe>", error: '<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>', closeBtn: '<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>', next: '<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>', prev: '<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>' }, openEffect: "fade", openSpeed: 250, openEasing: "swing", openOpacity: !0, openMethod: "zoomIn", closeEffect: "fade", closeSpeed: 250, closeEasing: "swing", closeOpacity: !0, closeMethod: "zoomOut", nextEffect: "elastic", nextSpeed: 250, nextEasing: "swing", nextMethod: "changeIn", prevEffect: "elastic", prevSpeed: 250, prevEasing: "swing", prevMethod: "changeOut", helpers: { overlay: !0, title: !0 }, onCancel: i.noop, beforeLoad: i.noop, afterLoad: i.noop, beforeShow: i.noop, afterShow: i.noop, beforeChange: i.noop, beforeClose: i.noop, afterClose: i.noop }, group: {}, opts: {}, previous: null, coming: null, current: null, isActive: !1, isOpen: !1, isOpened: !1, wrap: null, skin: null, outer: null, inner: null, player: { timer: null, isActive: !1 }, ajaxLoad: null, imgPreload: null, transitions: {}, helpers: {}, open: function (e, t) { if (e && (i.isPlainObject(t) || (t = {}), !1 !== r.close(!0))) return i.isArray(e) || (e = h(e) ? i(e).get() : [e]), i.each(e, function (n, s) { var o, a, l, c, d, p, f, m = {}; "object" === i.type(s) && (s.nodeType && (s = i(s)), h(s) ? (m = { href: s.data("fancybox-href") || s.attr("href"), title: s.data("fancybox-title") || s.attr("title"), isDom: !0, element: s }, i.metadata && i.extend(!0, m, s.metadata())) : m = s), o = t.href || m.href || (u(s) ? s : null), a = void 0 !== t.title ? t.title : m.title || "", !(c = (l = t.content || m.content) ? "html" : t.type || m.type) && m.isDom && ((c = s.data("fancybox-type")) || (c = (d = s.prop("class").match(/fancybox\.(\w+)/)) ? d[1] : null)), u(o) && (c || (r.isImage(o) ? c = "image" : r.isSWF(o) ? c = "swf" : "#" === o.charAt(0) ? c = "inline" : u(s) && (c = "html", l = s)), "ajax" === c && (p = o.split(/\s+/, 2), o = p.shift(), f = p.shift())), l || ("inline" === c ? o ? l = i(u(o) ? o.replace(/.*(?=#[^\s]+$)/, "") : o) : m.isDom && (l = s) : "html" === c ? l = o : c || o || !m.isDom || (c = "inline", l = s)), i.extend(m, { href: o, type: c, content: l, title: a, selector: f }), e[n] = m }), r.opts = i.extend(!0, {}, r.defaults, t), void 0 !== t.keys && (r.opts.keys = !!t.keys && i.extend({}, r.defaults.keys, t.keys)), r.group = e, r._start(r.opts.index) }, cancel: function () { var e = r.coming; e && !1 !== r.trigger("onCancel") && (r.hideLoading(), r.ajaxLoad && r.ajaxLoad.abort(), r.ajaxLoad = null, r.imgPreload && (r.imgPreload.onload = r.imgPreload.onerror = null), e.wrap && e.wrap.stop(!0, !0).trigger("onReset").remove(), r.coming = null, r.current || r._afterZoomOut(e)) }, close: function (e) { r.cancel(), !1 !== r.trigger("beforeClose") && (r.unbindEvents(), r.isActive && (r.isOpen && !0 !== e ? (r.isOpen = r.isOpened = !1, r.isClosing = !0, i(".fancybox-item, .fancybox-nav").remove(), r.wrap.stop(!0, !0).removeClass("fancybox-opened"), r.transitions[r.current.closeMethod]()) : (i(".fancybox-wrap").stop(!0).trigger("onReset").remove(), r._afterZoomOut()))) }, play: function (e) { var t = function () { clearTimeout(r.player.timer) }, i = function () { t(), r.current && r.player.isActive && (r.player.timer = setTimeout(r.next, r.current.playSpeed)) }, n = function () { t(), a.unbind(".player"), r.player.isActive = !1, r.trigger("onPlayEnd") }; !0 === e || !r.player.isActive && !1 !== e ? r.current && (r.current.loop || r.current.index < r.group.length - 1) && (r.player.isActive = !0, a.bind({ "onCancel.player beforeClose.player": n, "onUpdate.player": i, "beforeLoad.player": t }), i(), r.trigger("onPlayStart")) : n() }, next: function (e) { var t = r.current; t && (u(e) || (e = t.direction.next), r.jumpto(t.index + 1, e, "next")) }, prev: function (e) { var t = r.current; t && (u(e) || (e = t.direction.prev), r.jumpto(t.index - 1, e, "prev")) }, jumpto: function (e, t, i) { var n = r.current; n && (e = f(e), r.direction = t || n.direction[e >= n.index ? "next" : "prev"], r.router = i || "jumpto", n.loop && (e < 0 && (e = n.group.length + e % n.group.length), e %= n.group.length), void 0 !== n.group[e] && (r.cancel(), r._start(e))) }, reposition: function (e, t) { var n, s = r.current, o = s ? s.wrap : null; o && (n = r._getPosition(t), e && "scroll" === e.type ? (delete n.position, o.stop(!0, !0).animate(n, 200)) : (o.css(n), s.pos = i.extend({}, s.dim, n))) }, update: function (e) { var t = e && e.type, i = !t || "orientationchange" === t; i && (clearTimeout(c), c = null), r.isOpen && !c && (c = setTimeout(function () { var n = r.current; n && !r.isClosing && (r.wrap.removeClass("fancybox-tmp"), (i || "load" === t || "resize" === t && n.autoResize) && r._setDimension(), "scroll" === t && n.canShrink || r.reposition(e), r.trigger("onUpdate"), c = null) }, i && !d ? 0 : 300)) }, toggle: function (e) { r.isOpen && (r.current.fitToView = "boolean" === i.type(e) ? e : !r.current.fitToView, d && (r.wrap.removeAttr("style").addClass("fancybox-tmp"), r.trigger("onUpdate")), r.update()) }, hideLoading: function () { a.unbind(".loading"), i("#fancybox-loading").remove() }, showLoading: function () { var e, t; r.hideLoading(), e = i('<div id="fancybox-loading"><div></div></div>').click(r.cancel).appendTo("body"), a.bind("keydown.loading", function (e) { 27 === (e.which || e.keyCode) && (e.preventDefault(), r.cancel()) }), r.defaults.fixed || (t = r.getViewport(), e.css({ position: "absolute", top: .5 * t.h + t.y, left: .5 * t.w + t.x })) }, getViewport: function () { var t = r.current && r.current.locked || !1, i = { x: o.scrollLeft(), y: o.scrollTop() }; return t ? (i.w = t[0].clientWidth, i.h = t[0].clientHeight) : (i.w = d && e.innerWidth ? e.innerWidth : o.width(), i.h = d && e.innerHeight ? e.innerHeight : o.height()), i }, unbindEvents: function () { r.wrap && h(r.wrap) && r.wrap.unbind(".fb"), a.unbind(".fb"), o.unbind(".fb") }, bindEvents: function () { var e, t = r.current; t && (o.bind("orientationchange.fb" + (d ? "" : " resize.fb") + (t.autoCenter && !t.locked ? " scroll.fb" : ""), r.update), (e = t.keys) && a.bind("keydown.fb", function (n) { var s = n.which || n.keyCode, o = n.target || n.srcElement; if (27 === s && r.coming) return !1; n.ctrlKey || n.altKey || n.shiftKey || n.metaKey || o && (o.type || i(o).is("[contenteditable]")) || i.each(e, function (e, o) { return t.group.length > 1 && void 0 !== o[s] ? (r[e](o[s]), n.preventDefault(), !1) : i.inArray(s, o) > -1 ? (r[e](), n.preventDefault(), !1) : void 0 }) }), i.fn.mousewheel && t.mouseWheel && r.wrap.bind("mousewheel.fb", function (e, n, s, o) { for (var a, l = e.target || null, c = i(l), d = !1; c.length && !(d || c.is(".fancybox-skin") || c.is(".fancybox-wrap"));)d = (a = c[0]) && !(a.style.overflow && "hidden" === a.style.overflow) && (a.clientWidth && a.scrollWidth > a.clientWidth || a.clientHeight && a.scrollHeight > a.clientHeight), c = i(c).parent(); 0 === n || d || r.group.length > 1 && !t.canShrink && (o > 0 || s > 0 ? r.prev(o > 0 ? "down" : "left") : (o < 0 || s < 0) && r.next(o < 0 ? "up" : "right"), e.preventDefault()) })) }, trigger: function (e, t) { var n, s = t || r.coming || r.current; if (s) { if (i.isFunction(s[e]) && (n = s[e].apply(s, Array.prototype.slice.call(arguments, 1))), !1 === n) return !1; s.helpers && i.each(s.helpers, function (t, n) { n && r.helpers[t] && i.isFunction(r.helpers[t][e]) && r.helpers[t][e](i.extend(!0, {}, r.helpers[t].defaults, n), s) }), a.trigger(e) } }, isImage: function (e) { return u(e) && e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i) }, isSWF: function (e) { return u(e) && e.match(/\.(swf)((\?|#).*)?$/i) }, _start: function (e) { var t, n, s, o, a, l = {}; if (e = f(e), !(t = r.group[e] || null)) return !1; if (o = (l = i.extend(!0, {}, r.opts, t)).margin, a = l.padding, "number" === i.type(o) && (l.margin = [o, o, o, o]), "number" === i.type(a) && (l.padding = [a, a, a, a]), l.modal && i.extend(!0, l, { closeBtn: !1, closeClick: !1, nextClick: !1, arrows: !1, mouseWheel: !1, keys: null, helpers: { overlay: { closeClick: !1 } } }), l.autoSize && (l.autoWidth = l.autoHeight = !0), "auto" === l.width && (l.autoWidth = !0), "auto" === l.height && (l.autoHeight = !0), l.group = r.group, l.index = e, r.coming = l, !1 !== r.trigger("beforeLoad")) { if (s = l.type, n = l.href, !s) return r.coming = null, !(!r.current || !r.router || "jumpto" === r.router) && (r.current.index = e, r[r.router](r.direction)); if (r.isActive = !0, "image" !== s && "swf" !== s || (l.autoHeight = l.autoWidth = !1, l.scrolling = "visible"), "image" === s && (l.aspectRatio = !0), "iframe" === s && d && (l.scrolling = "scroll"), l.wrap = i(l.tpl.wrap).addClass("fancybox-" + (d ? "mobile" : "desktop") + " fancybox-type-" + s + " fancybox-tmp " + l.wrapCSS).appendTo(l.parent || "body"), i.extend(l, { skin: i(".fancybox-skin", l.wrap), outer: i(".fancybox-outer", l.wrap), inner: i(".fancybox-inner", l.wrap) }), i.each(["Top", "Right", "Bottom", "Left"], function (e, t) { l.skin.css("padding" + t, m(l.padding[e])) }), r.trigger("onReady"), "inline" === s || "html" === s) { if (!l.content || !l.content.length) return r._error("content") } else if (!n) return r._error("href"); "image" === s ? r._loadImage() : "ajax" === s ? r._loadAjax() : "iframe" === s ? r._loadIframe() : r._afterLoad() } else r.coming = null }, _error: function (e) { i.extend(r.coming, { type: "html", autoWidth: !0, autoHeight: !0, minWidth: 0, minHeight: 0, scrolling: "no", hasError: e, content: r.coming.tpl.error }), r._afterLoad() }, _loadImage: function () { var e = r.imgPreload = new Image; e.onload = function () { this.onload = this.onerror = null, r.coming.width = this.width / r.opts.pixelRatio, r.coming.height = this.height / r.opts.pixelRatio, r._afterLoad() }, e.onerror = function () { this.onload = this.onerror = null, r._error("image") }, e.src = r.coming.href, !0 !== e.complete && r.showLoading() }, _loadAjax: function () { var e = r.coming; r.showLoading(), r.ajaxLoad = i.ajax(i.extend({}, e.ajax, { url: e.href, error: function (e, t) { r.coming && "abort" !== t ? r._error("ajax", e) : r.hideLoading() }, success: function (t, i) { "success" === i && (e.content = t, r._afterLoad()) } })) }, _loadIframe: function () { var e = r.coming, t = i(e.tpl.iframe.replace(/\{rnd\}/g, (new Date).getTime())).attr("scrolling", d ? "auto" : e.iframe.scrolling).attr("src", e.href); i(e.wrap).bind("onReset", function () { try { i(this).find("iframe").hide().attr("src", "//about:blank").end().empty() } catch (e) { } }), e.iframe.preload && (r.showLoading(), t.one("load", function () { i(this).data("ready", 1), d || i(this).bind("load.fb", r.update), i(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(), r._afterLoad() })), e.content = t.appendTo(e.inner), e.iframe.preload || r._afterLoad() }, _preloadImages: function () { var e, t, i = r.group, n = r.current, s = i.length, o = n.preload ? Math.min(n.preload, s - 1) : 0; for (t = 1; t <= o; t += 1)"image" === (e = i[(n.index + t) % s]).type && e.href && ((new Image).src = e.href) }, _afterLoad: function () { var e, t, n, s, o, a, l = r.coming, c = r.current, d = "fancybox-placeholder"; if (r.hideLoading(), l && !1 !== r.isActive) { if (!1 === r.trigger("afterLoad", l, c)) return l.wrap.stop(!0).trigger("onReset").remove(), void (r.coming = null); switch (c && (r.trigger("beforeChange", c), c.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()), r.unbindEvents(), e = l, t = l.content, n = l.type, s = l.scrolling, i.extend(r, { wrap: e.wrap, skin: e.skin, outer: e.outer, inner: e.inner, current: e, previous: c }), o = e.href, n) { case "inline": case "ajax": case "html": e.selector ? t = i("<div>").html(t).find(e.selector) : h(t) && (t.data(d) || t.data(d, i('<div class="' + d + '"></div>').insertAfter(t).hide()), t = t.show().detach(), e.wrap.bind("onReset", function () { i(this).find(t).length && t.hide().replaceAll(t.data(d)).data(d, !1) })); break; case "image": t = e.tpl.image.replace("{href}", o); break; case "swf": t = '<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="' + o + '"></param>', a = "", i.each(e.swf, function (e, i) { t += '<param name="' + e + '" value="' + i + '"></param>', a += " " + e + '="' + i + '"' }), t += '<embed src="' + o + '" type="application/x-shockwave-flash" width="100%" height="100%"' + a + "></embed></object>" }h(t) && t.parent().is(e.inner) || e.inner.append(t), r.trigger("beforeShow"), e.inner.css("overflow", "yes" === s ? "scroll" : "no" === s ? "hidden" : s), r._setDimension(), r.reposition(), r.isOpen = !1, r.coming = null, r.bindEvents(), r.isOpened ? c.prevMethod && r.transitions[c.prevMethod]() : i(".fancybox-wrap").not(e.wrap).stop(!0).trigger("onReset").remove(), r.transitions[r.isOpened ? e.nextMethod : e.openMethod](), r._preloadImages() } }, _setDimension: function () { var e, t, n, s, o, a, l, c, d, h, u, g, v, b, y, w, _, C = r.getViewport(), k = 0, x = r.wrap, T = r.skin, $ = r.inner, S = r.current, M = S.width, D = S.height, E = S.minWidth, A = S.minHeight, F = S.maxWidth, I = S.maxHeight, P = S.scrolling, R = S.scrollOutside ? S.scrollbarWidth : 0, O = S.margin, L = f(O[1] + O[3]), j = f(O[0] + O[2]); if (x.add(T).add($).width("auto").height("auto").removeClass("fancybox-tmp"), o = L + (n = f(T.outerWidth(!0) - T.width())), a = j + (s = f(T.outerHeight(!0) - T.height())), l = p(M) ? (C.w - o) * f(M) / 100 : M, c = p(D) ? (C.h - a) * f(D) / 100 : D, "iframe" === S.type) { if (w = S.content, S.autoHeight && 1 === w.data("ready")) try { w[0].contentWindow.document.location && ($.width(l).height(9999), _ = w.contents().find("body"), R && _.css("overflow-x", "hidden"), c = _.outerHeight(!0)) } catch (e) { } } else (S.autoWidth || S.autoHeight) && ($.addClass("fancybox-tmp"), S.autoWidth || $.width(l), S.autoHeight || $.height(c), S.autoWidth && (l = $.width()), S.autoHeight && (c = $.height()), $.removeClass("fancybox-tmp")); if (M = f(l), D = f(c), u = l / c, E = f(p(E) ? f(E, "w") - o : E), F = f(p(F) ? f(F, "w") - o : F), A = f(p(A) ? f(A, "h") - a : A), d = F, h = I = f(p(I) ? f(I, "h") - a : I), S.fitToView && (F = Math.min(C.w - o, F), I = Math.min(C.h - a, I)), b = C.w - L, y = C.h - j, S.aspectRatio ? (M > F && (D = f((M = F) / u)), D > I && (M = f((D = I) * u)), M < E && (D = f((M = E) / u)), D < A && (M = f((D = A) * u))) : (M = Math.max(E, Math.min(M, F)), S.autoHeight && "iframe" !== S.type && ($.width(M), D = $.height()), D = Math.max(A, Math.min(D, I))), S.fitToView) if ($.width(M).height(D), x.width(M + n), g = x.width(), v = x.height(), S.aspectRatio) for (; (g > b || v > y) && M > E && D > A && !(k++ > 19);)D = Math.max(A, Math.min(I, D - 10)), (M = f(D * u)) < E && (D = f((M = E) / u)), M > F && (D = f((M = F) / u)), $.width(M).height(D), x.width(M + n), g = x.width(), v = x.height(); else M = Math.max(E, Math.min(M, M - (g - b))), D = Math.max(A, Math.min(D, D - (v - y))); R && "auto" === P && D < c && M + n + R < b && (M += R), $.width(M).height(D), x.width(M + n), g = x.width(), v = x.height(), e = (g > b || v > y) && M > E && D > A, t = S.aspectRatio ? M < d && D < h && M < l && D < c : (M < d || D < h) && (M < l || D < c), i.extend(S, { dim: { width: m(g), height: m(v) }, origWidth: l, origHeight: c, canShrink: e, canExpand: t, wPadding: n, hPadding: s, wrapSpace: v - T.outerHeight(!0), skinSpace: T.height() - D }), !w && S.autoHeight && D > A && D < I && !t && $.height("auto") }, _getPosition: function (e) { var t = r.current, i = r.getViewport(), n = t.margin, s = r.wrap.width() + n[1] + n[3], o = r.wrap.height() + n[0] + n[2], a = { position: "absolute", top: n[0], left: n[3] }; return t.autoCenter && t.fixed && !e && o <= i.h && s <= i.w ? a.position = "fixed" : t.locked || (a.top += i.y, a.left += i.x), a.top = m(Math.max(a.top, a.top + (i.h - o) * t.topRatio)), a.left = m(Math.max(a.left, a.left + (i.w - s) * t.leftRatio)), a }, _afterZoomIn: function () { var e = r.current; e && (r.isOpen = r.isOpened = !0, r.wrap.css("overflow", "visible").addClass("fancybox-opened"), r.update(), (e.closeClick || e.nextClick && r.group.length > 1) && r.inner.css("cursor", "pointer").bind("click.fb", function (t) { i(t.target).is("a") || i(t.target).parent().is("a") || (t.preventDefault(), r[e.closeClick ? "close" : "next"]()) }), e.closeBtn && i(e.tpl.closeBtn).appendTo(r.skin).bind("click.fb", function (e) { e.preventDefault(), r.close() }), e.arrows && r.group.length > 1 && ((e.loop || e.index > 0) && i(e.tpl.prev).appendTo(r.outer).bind("click.fb", r.prev), (e.loop || e.index < r.group.length - 1) && i(e.tpl.next).appendTo(r.outer).bind("click.fb", r.next)), r.trigger("afterShow"), e.loop || e.index !== e.group.length - 1 ? r.opts.autoPlay && !r.player.isActive && (r.opts.autoPlay = !1, r.play()) : r.play(!1)) }, _afterZoomOut: function (e) { e = e || r.current, i(".fancybox-wrap").trigger("onReset").remove(), i.extend(r, { group: {}, opts: {}, router: !1, current: null, isActive: !1, isOpened: !1, isOpen: !1, isClosing: !1, wrap: null, skin: null, outer: null, inner: null }), r.trigger("afterClose", e) } }), r.transitions = { getOrigPosition: function () { var e = r.current, t = e.element, i = e.orig, n = {}, s = 50, o = 50, a = e.hPadding, l = e.wPadding, c = r.getViewport(); return !i && e.isDom && t.is(":visible") && ((i = t.find("img:first")).length || (i = t)), h(i) ? (n = i.offset(), i.is("img") && (s = i.outerWidth(), o = i.outerHeight())) : (n.top = c.y + (c.h - o) * e.topRatio, n.left = c.x + (c.w - s) * e.leftRatio), ("fixed" === r.wrap.css("position") || e.locked) && (n.top -= c.y, n.left -= c.x), n = { top: m(n.top - a * e.topRatio), left: m(n.left - l * e.leftRatio), width: m(s + l), height: m(o + a) } }, step: function (e, t) { var i, n, s = t.prop, o = r.current, a = o.wrapSpace, l = o.skinSpace; "width" !== s && "height" !== s || (i = t.end === t.start ? 1 : (e - t.start) / (t.end - t.start), r.isClosing && (i = 1 - i), n = e - ("width" === s ? o.wPadding : o.hPadding), r.skin[s](f("width" === s ? n : n - a * i)), r.inner[s](f("width" === s ? n : n - a * i - l * i))) }, zoomIn: function () { var e = r.current, t = e.pos, n = e.openEffect, s = "elastic" === n, o = i.extend({ opacity: 1 }, t); delete o.position, s ? (t = this.getOrigPosition(), e.openOpacity && (t.opacity = .1)) : "fade" === n && (t.opacity = .1), r.wrap.css(t).animate(o, { duration: "none" === n ? 0 : e.openSpeed, easing: e.openEasing, step: s ? this.step : null, complete: r._afterZoomIn }) }, zoomOut: function () { var e = r.current, t = e.closeEffect, i = "elastic" === t, n = { opacity: .1 }; i && (n = this.getOrigPosition(), e.closeOpacity && (n.opacity = .1)), r.wrap.animate(n, { duration: "none" === t ? 0 : e.closeSpeed, easing: e.closeEasing, step: i ? this.step : null, complete: r._afterZoomOut }) }, changeIn: function () { var e, t = r.current, i = t.nextEffect, n = t.pos, s = { opacity: 1 }, o = r.direction; n.opacity = .1, "elastic" === i && (e = "down" === o || "up" === o ? "top" : "left", "down" === o || "right" === o ? (n[e] = m(f(n[e]) - 200), s[e] = "+=200px") : (n[e] = m(f(n[e]) + 200), s[e] = "-=200px")), "none" === i ? r._afterZoomIn() : r.wrap.css(n).animate(s, { duration: t.nextSpeed, easing: t.nextEasing, complete: r._afterZoomIn }) }, changeOut: function () { var e = r.previous, t = e.prevEffect, n = { opacity: .1 }, s = r.direction; "elastic" === t && (n["down" === s || "up" === s ? "top" : "left"] = ("up" === s || "left" === s ? "-" : "+") + "=200px"), e.wrap.animate(n, { duration: "none" === t ? 0 : e.prevSpeed, easing: e.prevEasing, complete: function () { i(this).trigger("onReset").remove() } }) } }, r.helpers.overlay = { defaults: { closeClick: !0, speedOut: 200, showEarly: !0, css: {}, locked: !d, fixed: !0 }, overlay: null, fixed: !1, el: i("html"), create: function (e) { e = i.extend({}, this.defaults, e), this.overlay && this.close(), this.overlay = i('<div class="fancybox-overlay"></div>').appendTo(r.coming ? r.coming.parent : e.parent), this.fixed = !1, e.fixed && r.defaults.fixed && (this.overlay.addClass("fancybox-overlay-fixed"), this.fixed = !0) }, open: function (e) { var t = this; e = i.extend({}, this.defaults, e), this.overlay ? this.overlay.unbind(".overlay").width("auto").height("auto") : this.create(e), this.fixed || (o.bind("resize.overlay", i.proxy(this.update, this)), this.update()), e.closeClick && this.overlay.bind("click.overlay", function (e) { if (i(e.target).hasClass("fancybox-overlay")) return r.isActive ? r.close() : t.close(), !1 }), this.overlay.css(e.css).show() }, close: function () { var e, t; o.unbind("resize.overlay"), this.el.hasClass("fancybox-lock") && (i(".fancybox-margin").removeClass("fancybox-margin"), e = o.scrollTop(), t = o.scrollLeft(), this.el.removeClass("fancybox-lock"), o.scrollTop(e).scrollLeft(t)), i(".fancybox-overlay").remove().hide(), i.extend(this, { overlay: null, fixed: !1 }) }, update: function () { var e, i = "100%"; this.overlay.width(i).height("100%"), l ? (e = Math.max(t.documentElement.offsetWidth, t.body.offsetWidth), a.width() > e && (i = a.width())) : a.width() > o.width() && (i = a.width()), this.overlay.width(i).height(a.height()) }, onReady: function (e, t) { var n = this.overlay; i(".fancybox-overlay").stop(!0, !0), n || this.create(e), e.locked && this.fixed && t.fixed && (n || (this.margin = a.height() > o.height() && i("html").css("margin-right").replace("px", "")), t.locked = this.overlay.append(t.wrap), t.fixed = !1), !0 === e.showEarly && this.beforeShow.apply(this, arguments) }, beforeShow: function (e, t) { var n, s; t.locked && (!1 !== this.margin && (i("*").filter(function () { return "fixed" === i(this).css("position") && !i(this).hasClass("fancybox-overlay") && !i(this).hasClass("fancybox-wrap") }).addClass("fancybox-margin"), this.el.addClass("fancybox-margin")), n = o.scrollTop(), s = o.scrollLeft(), this.el.addClass("fancybox-lock"), o.scrollTop(n).scrollLeft(s)), this.open(e) }, onUpdate: function () { this.fixed || this.update() }, afterClose: function (e) { this.overlay && !r.coming && this.overlay.fadeOut(e.speedOut, i.proxy(this.close, this)) } }, r.helpers.title = { defaults: { type: "float", position: "bottom" }, beforeShow: function (e) { var t, n, s = r.current, o = s.title, a = e.type; if (i.isFunction(o) && (o = o.call(s.element, s)), u(o) && "" !== i.trim(o)) { switch (t = i('<div class="fancybox-title fancybox-title-' + a + '-wrap">' + o + "</div>"), a) { case "inside": n = r.skin; break; case "outside": n = r.wrap; break; case "over": n = r.inner; break; default: n = r.skin, t.appendTo("body"), l && t.width(t.width()), t.wrapInner('<span class="child"></span>'), r.current.margin[2] += Math.abs(f(t.css("margin-bottom"))) }t["top" === e.position ? "prependTo" : "appendTo"](n) } } }, i.fn.fancybox = function (e) { var t, n = i(this), s = this.selector || "", o = function (o) { var a, l, c = i(this).blur(), d = t; o.ctrlKey || o.altKey || o.shiftKey || o.metaKey || c.is(".fancybox-wrap") || (a = e.groupAttr || "data-fancybox-group", (l = c.attr(a)) || (a = "rel", l = c.get(0)[a]), l && "" !== l && "nofollow" !== l && (d = (c = (c = s.length ? i(s) : n).filter("[" + a + '="' + l + '"]')).index(this)), e.index = d, !1 !== r.open(c, e) && o.preventDefault()) }; return t = (e = e || {}).index || 0, s && !1 !== e.live ? a.undelegate(s, "click.fb-start").delegate(s + ":not('.fancybox-item, .fancybox-nav')", "click.fb-start", o) : n.unbind("click.fb-start").bind("click.fb-start", o), this.filter("[data-fancybox-start=1]").trigger("click"), this }, a.ready(function () { var t, n, o, a; void 0 === i.scrollbarWidth && (i.scrollbarWidth = function () { var e = i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"), t = e.children(), n = t.innerWidth() - t.height(99).innerWidth(); return e.remove(), n }), void 0 === i.support.fixedPosition && (i.support.fixedPosition = (o = i('<div style="position:fixed;top:20px;"></div>').appendTo("body"), a = 20 === o[0].offsetTop || 15 === o[0].offsetTop, o.remove(), a)), i.extend(r.defaults, { scrollbarWidth: i.scrollbarWidth(), fixed: i.support.fixedPosition, parent: i("body") }), t = i(e).width(), s.addClass("fancybox-lock-test"), n = i(e).width(), s.removeClass("fancybox-lock-test"), i("<style type='text/css'>.fancybox-margin{margin-right:" + (n - t) + "px;}</style>").appendTo("head") }) }(window, document, jQuery), function () { var e = [].slice; !function (t, i) { "use strict"; var n; n = function () { function e(e, i) { var n; null == i && (i = {}), this.$element = t(e), this.options = t.extend({}, t.fn.bootstrapSwitch.defaults, { state: this.$element.is(":checked"), size: this.$element.data("size"), animate: this.$element.data("animate"), disabled: this.$element.is(":disabled"), readonly: this.$element.is("[readonly]"), indeterminate: this.$element.data("indeterminate"), inverse: this.$element.data("inverse"), radioAllOff: this.$element.data("radio-all-off"), onColor: this.$element.data("on-color"), offColor: this.$element.data("off-color"), onText: this.$element.data("on-text"), offText: this.$element.data("off-text"), labelText: this.$element.data("label-text"), handleWidth: this.$element.data("handle-width"), labelWidth: this.$element.data("label-width"), baseClass: this.$element.data("base-class"), wrapperClass: this.$element.data("wrapper-class") }, i), this.prevOptions = {}, this.$wrapper = t("<div>", { class: (n = this, function () { var e; return (e = ["" + n.options.baseClass].concat(n._getClasses(n.options.wrapperClass))).push(n.options.state ? n.options.baseClass + "-on" : n.options.baseClass + "-off"), null != n.options.size && e.push(n.options.baseClass + "-" + n.options.size), n.options.disabled && e.push(n.options.baseClass + "-disabled"), n.options.readonly && e.push(n.options.baseClass + "-readonly"), n.options.indeterminate && e.push(n.options.baseClass + "-indeterminate"), n.options.inverse && e.push(n.options.baseClass + "-inverse"), n.$element.attr("id") && e.push(n.options.baseClass + "-id-" + n.$element.attr("id")), e.join(" ") })() }), this.$container = t("<div>", { class: this.options.baseClass + "-container" }), this.$on = t("<span>", { html: this.options.onText, class: this.options.baseClass + "-handle-on " + this.options.baseClass + "-" + this.options.onColor }), this.$off = t("<span>", { html: this.options.offText, class: this.options.baseClass + "-handle-off " + this.options.baseClass + "-" + this.options.offColor }), this.$label = t("<span>", { html: this.options.labelText, class: this.options.baseClass + "-label" }), this.$element.on("init.bootstrapSwitch", function (t) { return function () { return t.options.onInit.apply(e, arguments) } }(this)), this.$element.on("switchChange.bootstrapSwitch", function (i) { return function (n) { if (!1 === i.options.onSwitchChange.apply(e, arguments)) return i.$element.is(":radio") ? t("[name='" + i.$element.attr("name") + "']").trigger("previousState.bootstrapSwitch", !0) : i.$element.trigger("previousState.bootstrapSwitch", !0) } }(this)), this.$container = this.$element.wrap(this.$container).parent(), this.$wrapper = this.$container.wrap(this.$wrapper).parent(), this.$element.before(this.options.inverse ? this.$off : this.$on).before(this.$label).before(this.options.inverse ? this.$on : this.$off), this.options.indeterminate && this.$element.prop("indeterminate", !0), this._init(), this._elementHandlers(), this._handleHandlers(), this._labelHandlers(), this._formHandler(), this._externalLabelHandler(), this.$element.trigger("init.bootstrapSwitch", this.options.state) } return e.prototype._constructor = e, e.prototype.setPrevOptions = function () { return this.prevOptions = t.extend(!0, {}, this.options) }, e.prototype.state = function (e, i) { return void 0 === e ? this.options.state : this.options.disabled || this.options.readonly ? this.$element : this.options.state && !this.options.radioAllOff && this.$element.is(":radio") ? this.$element : (this.$element.is(":radio") ? t("[name='" + this.$element.attr("name") + "']").trigger("setPreviousOptions.bootstrapSwitch") : this.$element.trigger("setPreviousOptions.bootstrapSwitch"), this.options.indeterminate && this.indeterminate(!1), e = !!e, this.$element.prop("checked", e).trigger("change.bootstrapSwitch", i), this.$element) }, e.prototype.toggleState = function (e) { return this.options.disabled || this.options.readonly ? this.$element : this.options.indeterminate ? (this.indeterminate(!1), this.state(!0)) : this.$element.prop("checked", !this.options.state).trigger("change.bootstrapSwitch", e) }, e.prototype.size = function (e) { return void 0 === e ? this.options.size : (null != this.options.size && this.$wrapper.removeClass(this.options.baseClass + "-" + this.options.size), e && this.$wrapper.addClass(this.options.baseClass + "-" + e), this._width(), this._containerPosition(), this.options.size = e, this.$element) }, e.prototype.animate = function (e) { return void 0 === e ? this.options.animate : (e = !!e) === this.options.animate ? this.$element : this.toggleAnimate() }, e.prototype.toggleAnimate = function () { return this.options.animate = !this.options.animate, this.$wrapper.toggleClass(this.options.baseClass + "-animate"), this.$element }, e.prototype.disabled = function (e) { return void 0 === e ? this.options.disabled : (e = !!e) === this.options.disabled ? this.$element : this.toggleDisabled() }, e.prototype.toggleDisabled = function () { return this.options.disabled = !this.options.disabled, this.$element.prop("disabled", this.options.disabled), this.$wrapper.toggleClass(this.options.baseClass + "-disabled"), this.$element }, e.prototype.readonly = function (e) { return void 0 === e ? this.options.readonly : (e = !!e) === this.options.readonly ? this.$element : this.toggleReadonly() }, e.prototype.toggleReadonly = function () { return this.options.readonly = !this.options.readonly, this.$element.prop("readonly", this.options.readonly), this.$wrapper.toggleClass(this.options.baseClass + "-readonly"), this.$element }, e.prototype.indeterminate = function (e) { return void 0 === e ? this.options.indeterminate : (e = !!e) === this.options.indeterminate ? this.$element : this.toggleIndeterminate() }, e.prototype.toggleIndeterminate = function () { return this.options.indeterminate = !this.options.indeterminate, this.$element.prop("indeterminate", this.options.indeterminate), this.$wrapper.toggleClass(this.options.baseClass + "-indeterminate"), this._containerPosition(), this.$element }, e.prototype.inverse = function (e) { return void 0 === e ? this.options.inverse : (e = !!e) === this.options.inverse ? this.$element : this.toggleInverse() }, e.prototype.toggleInverse = function () { var e, t; return this.$wrapper.toggleClass(this.options.baseClass + "-inverse"), t = this.$on.clone(!0), e = this.$off.clone(!0), this.$on.replaceWith(e), this.$off.replaceWith(t), this.$on = e, this.$off = t, this.options.inverse = !this.options.inverse, this.$element }, e.prototype.onColor = function (e) { var t; return t = this.options.onColor, void 0 === e ? t : (null != t && this.$on.removeClass(this.options.baseClass + "-" + t), this.$on.addClass(this.options.baseClass + "-" + e), this.options.onColor = e, this.$element) }, e.prototype.offColor = function (e) { var t; return t = this.options.offColor, void 0 === e ? t : (null != t && this.$off.removeClass(this.options.baseClass + "-" + t), this.$off.addClass(this.options.baseClass + "-" + e), this.options.offColor = e, this.$element) }, e.prototype.onText = function (e) { return void 0 === e ? this.options.onText : (this.$on.html(e), this._width(), this._containerPosition(), this.options.onText = e, this.$element) }, e.prototype.offText = function (e) { return void 0 === e ? this.options.offText : (this.$off.html(e), this._width(), this._containerPosition(), this.options.offText = e, this.$element) }, e.prototype.labelText = function (e) { return void 0 === e ? this.options.labelText : (this.$label.html(e), this._width(), this.options.labelText = e, this.$element) }, e.prototype.handleWidth = function (e) { return void 0 === e ? this.options.handleWidth : (this.options.handleWidth = e, this._width(), this._containerPosition(), this.$element) }, e.prototype.labelWidth = function (e) { return void 0 === e ? this.options.labelWidth : (this.options.labelWidth = e, this._width(), this._containerPosition(), this.$element) }, e.prototype.baseClass = function (e) { return this.options.baseClass }, e.prototype.wrapperClass = function (e) { return void 0 === e ? this.options.wrapperClass : (e || (e = t.fn.bootstrapSwitch.defaults.wrapperClass), this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" ")), this.$wrapper.addClass(this._getClasses(e).join(" ")), this.options.wrapperClass = e, this.$element) }, e.prototype.radioAllOff = function (e) { return void 0 === e ? this.options.radioAllOff : (e = !!e) === this.options.radioAllOff ? this.$element : (this.options.radioAllOff = e, this.$element) }, e.prototype.onInit = function (e) { return void 0 === e ? this.options.onInit : (e || (e = t.fn.bootstrapSwitch.defaults.onInit), this.options.onInit = e, this.$element) }, e.prototype.onSwitchChange = function (e) { return void 0 === e ? this.options.onSwitchChange : (e || (e = t.fn.bootstrapSwitch.defaults.onSwitchChange), this.options.onSwitchChange = e, this.$element) }, e.prototype.destroy = function () { var e; return (e = this.$element.closest("form")).length && e.off("reset.bootstrapSwitch").removeData("bootstrap-switch"), this.$container.children().not(this.$element).remove(), this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch"), this.$element }, e.prototype._width = function () { var e, t, i; return (e = this.$on.add(this.$off)).add(this.$label).css("width", ""), t = "auto" === this.options.handleWidth ? Math.max(this.$on.width(), this.$off.width()) : this.options.handleWidth, e.width(t), this.$label.width((i = this, function (e, n) { return "auto" !== i.options.labelWidth ? i.options.labelWidth : n < t ? t : n })), this._handleWidth = this.$on.outerWidth(), this._labelWidth = this.$label.outerWidth(), this.$container.width(2 * this._handleWidth + this._labelWidth), this.$wrapper.width(this._handleWidth + this._labelWidth) }, e.prototype._containerPosition = function (e, t) { var i; if (null == e && (e = this.options.state), this.$container.css("margin-left", (i = this, function () { var t; return t = [0, "-" + i._handleWidth + "px"], i.options.indeterminate ? "-" + i._handleWidth / 2 + "px" : e ? i.options.inverse ? t[1] : t[0] : i.options.inverse ? t[0] : t[1] })), t) return setTimeout(function () { return t() }, 50) }, e.prototype._init = function () { var e, t, n; return n = this, e = function () { return n.setPrevOptions(), n._width(), n._containerPosition(null, function () { if (n.options.animate) return n.$wrapper.addClass(n.options.baseClass + "-animate") }) }, this.$wrapper.is(":visible") ? e() : t = i.setInterval(function (n) { return function () { if (n.$wrapper.is(":visible")) return e(), i.clearInterval(t) } }(this), 50) }, e.prototype._elementHandlers = function () { return this.$element.on({ "setPreviousOptions.bootstrapSwitch": (e = this, function (t) { return e.setPrevOptions() }), "previousState.bootstrapSwitch": function (e) { return function (t) { return e.options = e.prevOptions, e.options.indeterminate && e.$wrapper.addClass(e.options.baseClass + "-indeterminate"), e.$element.prop("checked", e.options.state).trigger("change.bootstrapSwitch", !0) } }(this), "change.bootstrapSwitch": function (e) { return function (i, n) { var s; if (i.preventDefault(), i.stopImmediatePropagation(), s = e.$element.is(":checked"), e._containerPosition(s), s !== e.options.state) return e.options.state = s, e.$wrapper.toggleClass(e.options.baseClass + "-off").toggleClass(e.options.baseClass + "-on"), n ? void 0 : (e.$element.is(":radio") && t("[name='" + e.$element.attr("name") + "']").not(e.$element).prop("checked", !1).trigger("change.bootstrapSwitch", !0), e.$element.trigger("switchChange.bootstrapSwitch", [s])) } }(this), "focus.bootstrapSwitch": function (e) { return function (t) { return t.preventDefault(), e.$wrapper.addClass(e.options.baseClass + "-focused") } }(this), "blur.bootstrapSwitch": function (e) { return function (t) { return t.preventDefault(), e.$wrapper.removeClass(e.options.baseClass + "-focused") } }(this), "keydown.bootstrapSwitch": function (e) { return function (t) { if (t.which && !e.options.disabled && !e.options.readonly) switch (t.which) { case 37: return t.preventDefault(), t.stopImmediatePropagation(), e.state(!1); case 39: return t.preventDefault(), t.stopImmediatePropagation(), e.state(!0) } } }(this) }); var e }, e.prototype._handleHandlers = function () { var e; return this.$on.on("click.bootstrapSwitch", (e = this, function (t) { return t.preventDefault(), t.stopPropagation(), e.state(!1), e.$element.trigger("focus.bootstrapSwitch") })), this.$off.on("click.bootstrapSwitch", function (e) { return function (t) { return t.preventDefault(), t.stopPropagation(), e.state(!0), e.$element.trigger("focus.bootstrapSwitch") } }(this)) }, e.prototype._labelHandlers = function () { return this.$label.on({ click: function (e) { return e.stopPropagation() }, "mousedown.bootstrapSwitch touchstart.bootstrapSwitch": (e = this, function (t) { if (!(e._dragStart || e.options.disabled || e.options.readonly)) return t.preventDefault(), t.stopPropagation(), e._dragStart = (t.pageX || t.originalEvent.touches[0].pageX) - parseInt(e.$container.css("margin-left"), 10), e.options.animate && e.$wrapper.removeClass(e.options.baseClass + "-animate"), e.$element.trigger("focus.bootstrapSwitch") }), "mousemove.bootstrapSwitch touchmove.bootstrapSwitch": function (e) { return function (t) { var i; if (null != e._dragStart && (t.preventDefault(), !((i = (t.pageX || t.originalEvent.touches[0].pageX) - e._dragStart) < -e._handleWidth || i > 0))) return e._dragEnd = i, e.$container.css("margin-left", e._dragEnd + "px") } }(this), "mouseup.bootstrapSwitch touchend.bootstrapSwitch": function (e) { return function (t) { var i; if (e._dragStart) return t.preventDefault(), e.options.animate && e.$wrapper.addClass(e.options.baseClass + "-animate"), e._dragEnd ? (i = e._dragEnd > -e._handleWidth / 2, e._dragEnd = !1, e.state(e.options.inverse ? !i : i)) : e.state(!e.options.state), e._dragStart = !1 } }(this), "mouseleave.bootstrapSwitch": function (e) { return function (t) { return e.$label.trigger("mouseup.bootstrapSwitch") } }(this) }); var e }, e.prototype._externalLabelHandler = function () { var e, t; return (e = this.$element.closest("label")).on("click", (t = this, function (i) { if (i.preventDefault(), i.stopImmediatePropagation(), i.target === e[0]) return t.toggleState() })) }, e.prototype._formHandler = function () { var e; if (!(e = this.$element.closest("form")).data("bootstrap-switch")) return e.on("reset.bootstrapSwitch", function () { return i.setTimeout(function () { return e.find("input").filter(function () { return t(this).data("bootstrap-switch") }).each(function () { return t(this).bootstrapSwitch("state", this.checked) }) }, 1) }).data("bootstrap-switch", !0) }, e.prototype._getClasses = function (e) { var i, n, s, o; if (!t.isArray(e)) return [this.options.baseClass + "-" + e]; for (n = [], s = 0, o = e.length; s < o; s++)i = e[s], n.push(this.options.baseClass + "-" + i); return n }, e }(), t.fn.bootstrapSwitch = function () { var i, s, o; return s = arguments[0], i = 2 <= arguments.length ? e.call(arguments, 1) : [], o = this, this.each(function () { var e, a; if ((a = (e = t(this)).data("bootstrap-switch")) || e.data("bootstrap-switch", a = new n(this, s)), "string" == typeof s) return o = a[s].apply(a, i) }), o }, t.fn.bootstrapSwitch.Constructor = n, t.fn.bootstrapSwitch.defaults = { state: !0, size: null, animate: !0, disabled: !1, readonly: !1, indeterminate: !1, inverse: !1, radioAllOff: !1, onColor: "primary", offColor: "default", onText: "ON", offText: "OFF", labelText: "&nbsp;", handleWidth: "auto", labelWidth: "auto", baseClass: "bootstrap-switch", wrapperClass: "wrapper", onInit: function () { }, onSwitchChange: function () { } } }(window.jQuery, window) }.call(this), function () { var e = function (e) { "use strict"; e = e || {}; var t, i, n, s, o, a, r, l, c, d, h, u, p, f, m, g, v = { bgColor: "#d00", textColor: "#fff", fontFamily: "sans-serif", fontStyle: "bold", type: "circle", position: "down", animation: "slide", elementId: !1, element: null, dataUrl: !1, win: window }; (p = {}).ff = "undefined" != typeof InstallTrigger, p.chrome = !!window.chrome, p.opera = !!window.opera || navigator.userAgent.indexOf("Opera") >= 0, p.ie = !1, p.safari = Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor") > 0, p.supported = p.chrome || p.ff || p.opera; var b = []; h = function () { }, l = u = !1; var y = { ready: function () { l = !0, y.reset(), h() }, reset: function () { l && (b = [], c = !1, d = !1, a.clearRect(0, 0, s, n), a.drawImage(r, 0, 0, s, n), k.setIcon(o), window.clearTimeout(f), window.clearTimeout(m)) } }; y.start = function () { if (l && !d) { if (b.length > 0) { d = !0; var e = function () { ["type", "animation", "bgColor", "textColor", "fontFamily", "fontStyle"].forEach(function (e) { e in b[0].options && (t[e] = b[0].options[e]) }), $.run(b[0].options, function () { c = b[0], d = !1, b.length > 0 && (b.shift(), y.start()) }, !1) }; c ? $.run(c.options, function () { e() }, !0) : e() } } }; var w = {}, _ = function (e) { return e.n = "number" == typeof e.n ? Math.abs(0 | e.n) : e.n, e.x = s * e.x, e.y = n * e.y, e.w = s * e.w, e.h = n * e.h, e.len = ("" + e.n).length, e }; w.circle = function (e) { var i = !1; 2 === (e = _(e)).len ? (e.x = e.x - .4 * e.w, e.w = 1.4 * e.w, i = !0) : e.len >= 3 && (e.x = e.x - .65 * e.w, e.w = 1.65 * e.w, i = !0), a.clearRect(0, 0, s, n), a.drawImage(r, 0, 0, s, n), a.beginPath(), a.font = t.fontStyle + " " + Math.floor(e.h * (e.n > 99 ? .85 : 1)) + "px " + t.fontFamily, a.textAlign = "center", i ? (a.moveTo(e.x + e.w / 2, e.y), a.lineTo(e.x + e.w - e.h / 2, e.y), a.quadraticCurveTo(e.x + e.w, e.y, e.x + e.w, e.y + e.h / 2), a.lineTo(e.x + e.w, e.y + e.h - e.h / 2), a.quadraticCurveTo(e.x + e.w, e.y + e.h, e.x + e.w - e.h / 2, e.y + e.h), a.lineTo(e.x + e.h / 2, e.y + e.h), a.quadraticCurveTo(e.x, e.y + e.h, e.x, e.y + e.h - e.h / 2), a.lineTo(e.x, e.y + e.h / 2), a.quadraticCurveTo(e.x, e.y, e.x + e.h / 2, e.y)) : a.arc(e.x + e.w / 2, e.y + e.h / 2, e.h / 2, 0, 2 * Math.PI), a.fillStyle = "rgba(" + t.bgColor.r + "," + t.bgColor.g + "," + t.bgColor.b + "," + e.o + ")", a.fill(), a.closePath(), a.beginPath(), a.stroke(), a.fillStyle = "rgba(" + t.textColor.r + "," + t.textColor.g + "," + t.textColor.b + "," + e.o + ")", "number" == typeof e.n && e.n > 999 ? a.fillText((e.n > 9999 ? 9 : Math.floor(e.n / 1e3)) + "k+", Math.floor(e.x + e.w / 2), Math.floor(e.y + e.h - .2 * e.h)) : a.fillText(e.n, Math.floor(e.x + e.w / 2), Math.floor(e.y + e.h - .15 * e.h)), a.closePath() }, w.rectangle = function (e) { 2 === (e = _(e)).len ? (e.x = e.x - .4 * e.w, e.w = 1.4 * e.w) : e.len >= 3 && (e.x = e.x - .65 * e.w, e.w = 1.65 * e.w), a.clearRect(0, 0, s, n), a.drawImage(r, 0, 0, s, n), a.beginPath(), a.font = t.fontStyle + " " + Math.floor(e.h * (e.n > 99 ? .9 : 1)) + "px " + t.fontFamily, a.textAlign = "center", a.fillStyle = "rgba(" + t.bgColor.r + "," + t.bgColor.g + "," + t.bgColor.b + "," + e.o + ")", a.fillRect(e.x, e.y, e.w, e.h), a.fillStyle = "rgba(" + t.textColor.r + "," + t.textColor.g + "," + t.textColor.b + "," + e.o + ")", "number" == typeof e.n && e.n > 999 ? a.fillText((e.n > 9999 ? 9 : Math.floor(e.n / 1e3)) + "k+", Math.floor(e.x + e.w / 2), Math.floor(e.y + e.h - .2 * e.h)) : a.fillText(e.n, Math.floor(e.x + e.w / 2), Math.floor(e.y + e.h - .15 * e.h)), a.closePath() }; function C(e) { if (e.paused || e.ended || u) return !1; try { a.clearRect(0, 0, s, n), a.drawImage(e, 0, 0, s, n) } catch (e) { } m = setTimeout(function () { C(e) }, $.duration), k.setIcon(o) } var k = {}; function x(e) { e = e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i, function (e, t, i, n) { return t + t + i + i + n + n }); var t = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e); return !!t && { r: parseInt(t[1], 16), g: parseInt(t[2], 16), b: parseInt(t[3], 16) } } function T(e, t) { var i, n = {}; for (i in e) n[i] = e[i]; for (i in t) n[i] = t[i]; return n } k.getIcon = function () { var e = !1; return t.element ? e = t.element : t.elementId ? (e = g.getElementById(t.elementId)).setAttribute("href", e.getAttribute("src")) : !1 === (e = function () { for (var e = g.getElementsByTagName("head")[0].getElementsByTagName("link"), t = e.length - 1; t >= 0; t--)if (/(^|\s)icon(\s|$)/i.test(e[t].getAttribute("rel"))) return e[t]; return !1 }()) && ((e = g.createElement("link")).setAttribute("rel", "icon"), g.getElementsByTagName("head")[0].appendChild(e)), e.setAttribute("type", "image/png"), e }, k.setIcon = function (e) { var n = e.toDataURL("image/png"); if (t.dataUrl && t.dataUrl(n), t.element) t.element.setAttribute("href", n), t.element.setAttribute("src", n); else if (t.elementId) { var s = g.getElementById(t.elementId); s.setAttribute("href", n), s.setAttribute("src", n) } else if (p.ff || p.opera) { var o = i; i = g.createElement("link"), p.opera && i.setAttribute("rel", "icon"), i.setAttribute("rel", "icon"), i.setAttribute("type", "image/png"), g.getElementsByTagName("head")[0].appendChild(i), i.setAttribute("href", n), o.parentNode && o.parentNode.removeChild(o) } else i.setAttribute("href", n) }; var $ = { duration: 40, types: {} }; return $.types.fade = [{ x: .4, y: .4, w: .6, h: .6, o: 0 }, { x: .4, y: .4, w: .6, h: .6, o: .1 }, { x: .4, y: .4, w: .6, h: .6, o: .2 }, { x: .4, y: .4, w: .6, h: .6, o: .3 }, { x: .4, y: .4, w: .6, h: .6, o: .4 }, { x: .4, y: .4, w: .6, h: .6, o: .5 }, { x: .4, y: .4, w: .6, h: .6, o: .6 }, { x: .4, y: .4, w: .6, h: .6, o: .7 }, { x: .4, y: .4, w: .6, h: .6, o: .8 }, { x: .4, y: .4, w: .6, h: .6, o: .9 }, { x: .4, y: .4, w: .6, h: .6, o: 1 }], $.types.none = [{ x: .4, y: .4, w: .6, h: .6, o: 1 }], $.types.pop = [{ x: 1, y: 1, w: 0, h: 0, o: 1 }, { x: .9, y: .9, w: .1, h: .1, o: 1 }, { x: .8, y: .8, w: .2, h: .2, o: 1 }, { x: .7, y: .7, w: .3, h: .3, o: 1 }, { x: .6, y: .6, w: .4, h: .4, o: 1 }, { x: .5, y: .5, w: .5, h: .5, o: 1 }, { x: .4, y: .4, w: .6, h: .6, o: 1 }], $.types.popFade = [{ x: .75, y: .75, w: 0, h: 0, o: 0 }, { x: .65, y: .65, w: .1, h: .1, o: .2 }, { x: .6, y: .6, w: .2, h: .2, o: .4 }, { x: .55, y: .55, w: .3, h: .3, o: .6 }, { x: .5, y: .5, w: .4, h: .4, o: .8 }, { x: .45, y: .45, w: .5, h: .5, o: .9 }, { x: .4, y: .4, w: .6, h: .6, o: 1 }], $.types.slide = [{ x: .4, y: 1, w: .6, h: .6, o: 1 }, { x: .4, y: .9, w: .6, h: .6, o: 1 }, { x: .4, y: .9, w: .6, h: .6, o: 1 }, { x: .4, y: .8, w: .6, h: .6, o: 1 }, { x: .4, y: .7, w: .6, h: .6, o: 1 }, { x: .4, y: .6, w: .6, h: .6, o: 1 }, { x: .4, y: .5, w: .6, h: .6, o: 1 }, { x: .4, y: .4, w: .6, h: .6, o: 1 }], $.run = function (e, i, n, s) { var a = $.types[g.hidden || g.msHidden || g.webkitHidden || g.mozHidden ? "none" : t.animation]; s = !0 === n ? void 0 !== s ? s : a.length - 1 : void 0 !== s ? s : 0, i = i || function () { }, s < a.length && s >= 0 ? (w[t.type](T(e, a[s])), f = setTimeout(function () { n ? s -= 1 : s += 1, $.run(e, i, n, s) }, $.duration), k.setIcon(o)) : i() }, function () { (t = T(v, e)).bgColor = x(t.bgColor), t.textColor = x(t.textColor), t.position = t.position.toLowerCase(), t.animation = $.types["" + t.animation] ? t.animation : v.animation, g = t.win.document; var l = t.position.indexOf("up") > -1, c = t.position.indexOf("left") > -1; if (l || c) for (var d in $.types) for (var h = 0; h < $.types[d].length; h++) { var u = $.types[d][h]; l && (u.y < .6 ? u.y = u.y - .4 : u.y = u.y - 2 * u.y + (1 - u.w)), c && (u.x < .6 ? u.x = u.x - .4 : u.x = u.x - 2 * u.x + (1 - u.h)), $.types[d][h] = u } t.type = w["" + t.type] ? t.type : v.type, i = k.getIcon(), o = document.createElement("canvas"), r = document.createElement("img"), i.hasAttribute("href") ? (r.setAttribute("crossOrigin", "anonymous"), r.onload = function () { n = r.height > 0 ? r.height : 32, s = r.width > 0 ? r.width : 32, o.height = n, o.width = s, a = o.getContext("2d"), y.ready() }, r.setAttribute("src", i.getAttribute("href"))) : (n = 32, s = 32, r.height = n, r.width = s, o.height = n, o.width = s, a = o.getContext("2d"), y.ready()) }(), { badge: function (e, t) { t = ("string" == typeof t ? { animation: t } : t) || {}, h = function () { try { if ("number" == typeof e ? e > 0 : "" !== e) { var i = { type: "badge", options: { n: e } }; if ("animation" in t && $.types["" + t.animation] && (i.options.animation = "" + t.animation), "type" in t && w["" + t.type] && (i.options.type = "" + t.type), ["bgColor", "textColor"].forEach(function (e) { e in t && (i.options[e] = x(t[e])) }), ["fontStyle", "fontFamily"].forEach(function (e) { e in t && (i.options[e] = t[e]) }), b.push(i), b.length > 100) throw new Error("Too many badges requests in queue."); y.start() } else y.reset() } catch (e) { throw new Error("Error setting badge. Message: " + e.message) } }, l && h() }, video: function (e) { h = function () { try { if ("stop" === e) return u = !0, y.reset(), void (u = !1); e.addEventListener("play", function () { C(this) }, !1) } catch (e) { throw new Error("Error setting video. Message: " + e.message) } }, l && h() }, image: function (e) { h = function () { try { var t = e.width, i = e.height, r = document.createElement("img"), l = t / s < i / n ? t / s : i / n; r.setAttribute("crossOrigin", "anonymous"), r.onload = function () { a.clearRect(0, 0, s, n), a.drawImage(r, 0, 0, s, n), k.setIcon(o) }, r.setAttribute("src", e.getAttribute("src")), r.height = i / l, r.width = t / l } catch (e) { throw new Error("Error setting image. Message: " + e.message) } }, l && h() }, webcam: function (e) { if (window.URL && window.URL.createObjectURL || (window.URL = window.URL || {}, window.URL.createObjectURL = function (e) { return e }), p.supported) { var t = !1; navigator.getUserMedia = navigator.getUserMedia || navigator.oGetUserMedia || navigator.msGetUserMedia || navigator.mozGetUserMedia || navigator.webkitGetUserMedia, h = function () { try { if ("stop" === e) return u = !0, y.reset(), void (u = !1); (t = document.createElement("video")).width = s, t.height = n, navigator.getUserMedia({ video: !0, audio: !1 }, function (e) { t.src = URL.createObjectURL(e), t.play(), C(t) }, function () { }) } catch (e) { throw new Error("Error setting webcam. Message: " + e.message) } }, l && h() } }, reset: y.reset, browser: { supported: p.supported } } }; "undefined" != typeof define && define.amd ? define([], function () { return e }) : "undefined" != typeof module && module.exports ? module.exports = e : this.Favico = e }(), function (e) { var t = !1; if ("function" == typeof define && define.amd && (define(e), t = !0), "object" == typeof exports && (module.exports = e(), t = !0), !t) { var i = window.Cookies, n = window.Cookies = e(); n.noConflict = function () { return window.Cookies = i, n } } }(function () { function e() { for (var e = 0, t = {}; e < arguments.length; e++) { var i = arguments[e]; for (var n in i) t[n] = i[n] } return t } return function t(i) { function n(t, s, o) { var a; if ("undefined" != typeof document) { if (arguments.length > 1) { if ("number" == typeof (o = e({ path: "/" }, n.defaults, o)).expires) { var r = new Date; r.setMilliseconds(r.getMilliseconds() + 864e5 * o.expires), o.expires = r } try { a = JSON.stringify(s), /^[\{\[]/.test(a) && (s = a) } catch (e) { } return s = i.write ? i.write(s, t) : encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent), t = (t = (t = encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)).replace(/[\(\)]/g, escape), document.cookie = [t, "=", s, o.expires ? "; expires=" + o.expires.toUTCString() : "", o.path ? "; path=" + o.path : "", o.domain ? "; domain=" + o.domain : "", o.secure ? "; secure" : ""].join("") } t || (a = {}); for (var l = document.cookie ? document.cookie.split("; ") : [], c = /(%[0-9A-Z]{2})+/g, d = 0; d < l.length; d++) { var h = l[d].split("="), u = h.slice(1).join("="); '"' === u.charAt(0) && (u = u.slice(1, -1)); try { var p = h[0].replace(c, decodeURIComponent); if (u = i.read ? i.read(u, p) : i(u, p) || u.replace(c, decodeURIComponent), this.json) try { u = JSON.parse(u) } catch (e) { } if (t === p) { a = u; break } t || (a[p] = u) } catch (e) { } } return a } } return n.set = n, n.get = function (e) { return n.call(n, e) }, n.getJSON = function () { return n.apply({ json: !0 }, [].slice.call(arguments)) }, n.defaults = {}, n.remove = function (t, i) { n(t, "", e(i, { expires: -1 })) }, n.withConverter = t, n }(function () { }) }), function (e) { "function" == typeof define && define.amd ? define(["jquery"], e) : e(jQuery) }(function (e) { var t, i, n, s; function o(t, i) { var n, s, o, r = t.nodeName.toLowerCase(); return "area" === r ? (s = (n = t.parentNode).name, !(!t.href || !s || "map" !== n.nodeName.toLowerCase()) && (!!(o = e("img[usemap='#" + s + "']")[0]) && a(o))) : (/^(input|select|textarea|button|object)$/.test(r) ? !t.disabled : "a" === r && t.href || i) && a(t) } function a(t) { return e.expr.filters.visible(t) && !e(t).parents().addBack().filter(function () { return "hidden" === e.css(this, "visibility") }).length } e.ui = e.ui || {}, e.extend(e.ui, { version: "1.11.4", keyCode: { BACKSPACE: 8, COMMA: 188, DELETE: 46, DOWN: 40, END: 35, ENTER: 13, ESCAPE: 27, HOME: 36, LEFT: 37, PAGE_DOWN: 34, PAGE_UP: 33, PERIOD: 190, RIGHT: 39, SPACE: 32, TAB: 9, UP: 38 } }), e.fn.extend({ scrollParent: function (t) { var i = this.css("position"), n = "absolute" === i, s = t ? /(auto|scroll|hidden)/ : /(auto|scroll)/, o = this.parents().filter(function () { var t = e(this); return (!n || "static" !== t.css("position")) && s.test(t.css("overflow") + t.css("overflow-y") + t.css("overflow-x")) }).eq(0); return "fixed" !== i && o.length ? o : e(this[0].ownerDocument || document) }, uniqueId: (t = 0, function () { return this.each(function () { this.id || (this.id = "ui-id-" + ++t) }) }), removeUniqueId: function () { return this.each(function () { /^ui-id-\d+$/.test(this.id) && e(this).removeAttr("id") }) } }), e.extend(e.expr[":"], { data: e.expr.createPseudo ? e.expr.createPseudo(function (t) { return function (i) { return !!e.data(i, t) } }) : function (t, i, n) { return !!e.data(t, n[3]) }, focusable: function (t) { return o(t, !isNaN(e.attr(t, "tabindex"))) }, tabbable: function (t) { var i = e.attr(t, "tabindex"), n = isNaN(i); return (n || i >= 0) && o(t, !n) } }), e("<a>").outerWidth(1).jquery || e.each(["Width", "Height"], function (t, i) { var n = "Width" === i ? ["Left", "Right"] : ["Top", "Bottom"], s = i.toLowerCase(), o = { innerWidth: e.fn.innerWidth, innerHeight: e.fn.innerHeight, outerWidth: e.fn.outerWidth, outerHeight: e.fn.outerHeight }; function a(t, i, s, o) { return e.each(n, function () { i -= parseFloat(e.css(t, "padding" + this)) || 0, s && (i -= parseFloat(e.css(t, "border" + this + "Width")) || 0), o && (i -= parseFloat(e.css(t, "margin" + this)) || 0) }), i } e.fn["inner" + i] = function (t) { return void 0 === t ? o["inner" + i].call(this) : this.each(function () { e(this).css(s, a(this, t) + "px") }) }, e.fn["outer" + i] = function (t, n) { return "number" != typeof t ? o["outer" + i].call(this, t) : this.each(function () { e(this).css(s, a(this, t, !0, n) + "px") }) } }), e.fn.addBack || (e.fn.addBack = function (e) { return this.add(null == e ? this.prevObject : this.prevObject.filter(e)) }), e("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (e.fn.removeData = (i = e.fn.removeData, function (t) { return arguments.length ? i.call(this, e.camelCase(t)) : i.call(this) })), e.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()), e.fn.extend({ focus: (s = e.fn.focus, function (t, i) { return "number" == typeof t ? this.each(function () { var n = this; setTimeout(function () { e(n).focus(), i && i.call(n) }, t) }) : s.apply(this, arguments) }), disableSelection: (n = "onselectstart" in document.createElement("div") ? "selectstart" : "mousedown", function () { return this.bind(n + ".ui-disableSelection", function (e) { e.preventDefault() }) }), enableSelection: function () { return this.unbind(".ui-disableSelection") }, zIndex: function (t) { if (void 0 !== t) return this.css("zIndex", t); if (this.length) for (var i, n, s = e(this[0]); s.length && s[0] !== document;) { if (("absolute" === (i = s.css("position")) || "relative" === i || "fixed" === i) && (n = parseInt(s.css("zIndex"), 10), !isNaN(n) && 0 !== n)) return n; s = s.parent() } return 0 } }), e.ui.plugin = { add: function (t, i, n) { var s, o = e.ui[t].prototype; for (s in n) o.plugins[s] = o.plugins[s] || [], o.plugins[s].push([i, n[s]]) }, call: function (e, t, i, n) { var s, o = e.plugins[t]; if (o && (n || e.element[0].parentNode && 11 !== e.element[0].parentNode.nodeType)) for (s = 0; s < o.length; s++)e.options[o[s][0]] && o[s][1].apply(e.element, i) } }; var r = 0, l = Array.prototype.slice; e.cleanData = function (t) { return function (i) { var n, s, o; for (o = 0; null != (s = i[o]); o++)try { (n = e._data(s, "events")) && n.remove && e(s).triggerHandler("remove") } catch (e) { } t(i) } }(e.cleanData), e.widget = function (t, i, n) { var s, o, a, r, l = {}, c = t.split(".")[0]; return t = t.split(".")[1], s = c + "-" + t, n || (n = i, i = e.Widget), e.expr[":"][s.toLowerCase()] = function (t) { return !!e.data(t, s) }, e[c] = e[c] || {}, o = e[c][t], a = e[c][t] = function (e, t) { if (!this._createWidget) return new a(e, t); arguments.length && this._createWidget(e, t) }, e.extend(a, o, { version: n.version, _proto: e.extend({}, n), _childConstructors: [] }), (r = new i).options = e.widget.extend({}, r.options), e.each(n, function (t, n) { var s, o; e.isFunction(n) ? l[t] = (s = function () { return i.prototype[t].apply(this, arguments) }, o = function (e) { return i.prototype[t].apply(this, e) }, function () { var e, t = this._super, i = this._superApply; return this._super = s, this._superApply = o, e = n.apply(this, arguments), this._super = t, this._superApply = i, e }) : l[t] = n }), a.prototype = e.widget.extend(r, { widgetEventPrefix: o && r.widgetEventPrefix || t }, l, { constructor: a, namespace: c, widgetName: t, widgetFullName: s }), o ? (e.each(o._childConstructors, function (t, i) { var n = i.prototype; e.widget(n.namespace + "." + n.widgetName, a, i._proto) }), delete o._childConstructors) : i._childConstructors.push(a), e.widget.bridge(t, a), a }, e.widget.extend = function (t) { for (var i, n, s = l.call(arguments, 1), o = 0, a = s.length; o < a; o++)for (i in s[o]) n = s[o][i], s[o].hasOwnProperty(i) && void 0 !== n && (e.isPlainObject(n) ? t[i] = e.isPlainObject(t[i]) ? e.widget.extend({}, t[i], n) : e.widget.extend({}, n) : t[i] = n); return t }, e.widget.bridge = function (t, i) { var n = i.prototype.widgetFullName || t; e.fn[t] = function (s) { var o = "string" == typeof s, a = l.call(arguments, 1), r = this; return o ? this.each(function () { var i, o = e.data(this, n); return "instance" === s ? (r = o, !1) : o ? e.isFunction(o[s]) && "_" !== s.charAt(0) ? (i = o[s].apply(o, a)) !== o && void 0 !== i ? (r = i && i.jquery ? r.pushStack(i.get()) : i, !1) : void 0 : e.error("no such method '" + s + "' for " + t + " widget instance") : e.error("cannot call methods on " + t + " prior to initialization; attempted to call method '" + s + "'") }) : (a.length && (s = e.widget.extend.apply(null, [s].concat(a))), this.each(function () { var t = e.data(this, n); t ? (t.option(s || {}), t._init && t._init()) : e.data(this, n, new i(s, this)) })), r } }, e.Widget = function () { }, e.Widget._childConstructors = [], e.Widget.prototype = { widgetName: "widget", widgetEventPrefix: "", defaultElement: "<div>", options: { disabled: !1, create: null }, _createWidget: function (t, i) { i = e(i || this.defaultElement || this)[0], this.element = e(i), this.uuid = r++, this.eventNamespace = "." + this.widgetName + this.uuid, this.bindings = e(), this.hoverable = e(), this.focusable = e(), i !== this && (e.data(i, this.widgetFullName, this), this._on(!0, this.element, { remove: function (e) { e.target === i && this.destroy() } }), this.document = e(i.style ? i.ownerDocument : i.document || i), this.window = e(this.document[0].defaultView || this.document[0].parentWindow)), this.options = e.widget.extend({}, this.options, this._getCreateOptions(), t), this._create(), this._trigger("create", null, this._getCreateEventData()), this._init() }, _getCreateOptions: e.noop, _getCreateEventData: e.noop, _create: e.noop, _init: e.noop, destroy: function () { this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)), this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"), this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus") }, _destroy: e.noop, widget: function () { return this.element }, option: function (t, i) { var n, s, o, a = t; if (0 === arguments.length) return e.widget.extend({}, this.options); if ("string" == typeof t) if (a = {}, n = t.split("."), t = n.shift(), n.length) { for (s = a[t] = e.widget.extend({}, this.options[t]), o = 0; o < n.length - 1; o++)s[n[o]] = s[n[o]] || {}, s = s[n[o]]; if (t = n.pop(), 1 === arguments.length) return void 0 === s[t] ? null : s[t]; s[t] = i } else { if (1 === arguments.length) return void 0 === this.options[t] ? null : this.options[t]; a[t] = i } return this._setOptions(a), this }, _setOptions: function (e) { var t; for (t in e) this._setOption(t, e[t]); return this }, _setOption: function (e, t) { return this.options[e] = t, "disabled" === e && (this.widget().toggleClass(this.widgetFullName + "-disabled", !!t), t && (this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus"))), this }, enable: function () { return this._setOptions({ disabled: !1 }) }, disable: function () { return this._setOptions({ disabled: !0 }) }, _on: function (t, i, n) { var s, o = this; "boolean" != typeof t && (n = i, i = t, t = !1), n ? (i = s = e(i), this.bindings = this.bindings.add(i)) : (n = i, i = this.element, s = this.widget()), e.each(n, function (n, a) { function r() { if (t || !0 !== o.options.disabled && !e(this).hasClass("ui-state-disabled")) return ("string" == typeof a ? o[a] : a).apply(o, arguments) } "string" != typeof a && (r.guid = a.guid = a.guid || r.guid || e.guid++); var l = n.match(/^([\w:-]*)\s*(.*)$/), c = l[1] + o.eventNamespace, d = l[2]; d ? s.delegate(d, c, r) : i.bind(c, r) }) }, _off: function (t, i) { i = (i || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, t.unbind(i).undelegate(i), this.bindings = e(this.bindings.not(t).get()), this.focusable = e(this.focusable.not(t).get()), this.hoverable = e(this.hoverable.not(t).get()) }, _delay: function (e, t) { var i = this; return setTimeout(function () { return ("string" == typeof e ? i[e] : e).apply(i, arguments) }, t || 0) }, _hoverable: function (t) { this.hoverable = this.hoverable.add(t), this._on(t, { mouseenter: function (t) { e(t.currentTarget).addClass("ui-state-hover") }, mouseleave: function (t) { e(t.currentTarget).removeClass("ui-state-hover") } }) }, _focusable: function (t) { this.focusable = this.focusable.add(t), this._on(t, { focusin: function (t) { e(t.currentTarget).addClass("ui-state-focus") }, focusout: function (t) { e(t.currentTarget).removeClass("ui-state-focus") } }) }, _trigger: function (t, i, n) { var s, o, a = this.options[t]; if (n = n || {}, (i = e.Event(i)).type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), i.target = this.element[0], o = i.originalEvent) for (s in o) s in i || (i[s] = o[s]); return this.element.trigger(i, n), !(e.isFunction(a) && !1 === a.apply(this.element[0], [i].concat(n)) || i.isDefaultPrevented()) } }, e.each({ show: "fadeIn", hide: "fadeOut" }, function (t, i) { e.Widget.prototype["_" + t] = function (n, s, o) { "string" == typeof s && (s = { effect: s }); var a, r = s ? !0 === s || "number" == typeof s ? i : s.effect || i : t; "number" == typeof (s = s || {}) && (s = { duration: s }), a = !e.isEmptyObject(s), s.complete = o, s.delay && n.delay(s.delay), a && e.effects && e.effects.effect[r] ? n[t](s) : r !== t && n[r] ? n[r](s.duration, s.easing, o) : n.queue(function (i) { e(this)[t](), o && o.call(n[0]), i() }) } }); e.widget, e.widget("ui.accordion", { version: "1.11.4", options: { active: 0, animate: {}, collapsible: !1, event: "click", header: "> li > :first-child,> :not(li):even", heightStyle: "auto", icons: { activeHeader: "ui-icon-triangle-1-s", header: "ui-icon-triangle-1-e" }, activate: null, beforeActivate: null }, hideProps: { borderTopWidth: "hide", borderBottomWidth: "hide", paddingTop: "hide", paddingBottom: "hide", height: "hide" }, showProps: { borderTopWidth: "show", borderBottomWidth: "show", paddingTop: "show", paddingBottom: "show", height: "show" }, _create: function () { var t = this.options; this.prevShow = this.prevHide = e(), this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role", "tablist"), t.collapsible || !1 !== t.active && null != t.active || (t.active = 0), this._processPanels(), t.active < 0 && (t.active += this.headers.length), this._refresh() }, _getCreateEventData: function () { return { header: this.active, panel: this.active.length ? this.active.next() : e() } }, _createIcons: function () { var t = this.options.icons; t && (e("<span>").addClass("ui-accordion-header-icon ui-icon " + t.header).prependTo(this.headers), this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader), this.headers.addClass("ui-accordion-icons")) }, _destroyIcons: function () { this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove() }, _destroy: function () { var e; this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"), this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(), this._destroyIcons(), e = this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display", "").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(), "content" !== this.options.heightStyle && e.css("height", "") }, _setOption: function (e, t) { "active" !== e ? ("event" === e && (this.options.event && this._off(this.headers, this.options.event), this._setupEvents(t)), this._super(e, t), "collapsible" !== e || t || !1 !== this.options.active || this._activate(0), "icons" === e && (this._destroyIcons(), t && this._createIcons()), "disabled" === e && (this.element.toggleClass("ui-state-disabled", !!t).attr("aria-disabled", t), this.headers.add(this.headers.next()).toggleClass("ui-state-disabled", !!t))) : this._activate(t) }, _keydown: function (t) { if (!t.altKey && !t.ctrlKey) { var i = e.ui.keyCode, n = this.headers.length, s = this.headers.index(t.target), o = !1; switch (t.keyCode) { case i.RIGHT: case i.DOWN: o = this.headers[(s + 1) % n]; break; case i.LEFT: case i.UP: o = this.headers[(s - 1 + n) % n]; break; case i.SPACE: case i.ENTER: this._eventHandler(t); break; case i.HOME: o = this.headers[0]; break; case i.END: o = this.headers[n - 1] }o && (e(t.target).attr("tabIndex", -1), e(o).attr("tabIndex", 0), o.focus(), t.preventDefault()) } }, _panelKeyDown: function (t) { t.keyCode === e.ui.keyCode.UP && t.ctrlKey && e(t.currentTarget).prev().focus() }, refresh: function () { var t = this.options; this._processPanels(), !1 === t.active && !0 === t.collapsible || !this.headers.length ? (t.active = !1, this.active = e()) : !1 === t.active ? this._activate(0) : this.active.length && !e.contains(this.element[0], this.active[0]) ? this.headers.length === this.headers.find(".ui-state-disabled").length ? (t.active = !1, this.active = e()) : this._activate(Math.max(0, t.active - 1)) : t.active = this.headers.index(this.active), this._destroyIcons(), this._refresh() }, _processPanels: function () { var e = this.headers, t = this.panels; this.headers = this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"), this.panels = this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(), t && (this._off(e.not(this.headers)), this._off(t.not(this.panels))) }, _refresh: function () { var t, i = this.options, n = i.heightStyle, s = this.element.parent(); this.active = this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"), this.active.next().addClass("ui-accordion-content-active").show(), this.headers.attr("role", "tab").each(function () { var t = e(this), i = t.uniqueId().attr("id"), n = t.next(), s = n.uniqueId().attr("id"); t.attr("aria-controls", s), n.attr("aria-labelledby", i) }).next().attr("role", "tabpanel"), this.headers.not(this.active).attr({ "aria-selected": "false", "aria-expanded": "false", tabIndex: -1 }).next().attr({ "aria-hidden": "true" }).hide(), this.active.length ? this.active.attr({ "aria-selected": "true", "aria-expanded": "true", tabIndex: 0 }).next().attr({ "aria-hidden": "false" }) : this.headers.eq(0).attr("tabIndex", 0), this._createIcons(), this._setupEvents(i.event), "fill" === n ? (t = s.height(), this.element.siblings(":visible").each(function () { var i = e(this), n = i.css("position"); "absolute" !== n && "fixed" !== n && (t -= i.outerHeight(!0)) }), this.headers.each(function () { t -= e(this).outerHeight(!0) }), this.headers.next().each(function () { e(this).height(Math.max(0, t - e(this).innerHeight() + e(this).height())) }).css("overflow", "auto")) : "auto" === n && (t = 0, this.headers.next().each(function () { t = Math.max(t, e(this).css("height", "").height()) }).height(t)) }, _activate: function (t) { var i = this._findActive(t)[0]; i !== this.active[0] && (i = i || this.active[0], this._eventHandler({ target: i, currentTarget: i, preventDefault: e.noop })) }, _findActive: function (t) { return "number" == typeof t ? this.headers.eq(t) : e() }, _setupEvents: function (t) { var i = { keydown: "_keydown" }; t && e.each(t.split(" "), function (e, t) { i[t] = "_eventHandler" }), this._off(this.headers.add(this.headers.next())), this._on(this.headers, i), this._on(this.headers.next(), { keydown: "_panelKeyDown" }), this._hoverable(this.headers), this._focusable(this.headers) }, _eventHandler: function (t) { var i = this.options, n = this.active, s = e(t.currentTarget), o = s[0] === n[0], a = o && i.collapsible, r = a ? e() : s.next(), l = n.next(), c = { oldHeader: n, oldPanel: l, newHeader: a ? e() : s, newPanel: r }; t.preventDefault(), o && !i.collapsible || !1 === this._trigger("beforeActivate", t, c) || (i.active = !a && this.headers.index(s), this.active = o ? e() : s, this._toggle(c), n.removeClass("ui-accordion-header-active ui-state-active"), i.icons && n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header), o || (s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"), i.icons && s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader), s.next().addClass("ui-accordion-content-active"))) }, _toggle: function (t) { var i = t.newPanel, n = this.prevShow.length ? this.prevShow : t.oldPanel; this.prevShow.add(this.prevHide).stop(!0, !0), this.prevShow = i, this.prevHide = n, this.options.animate ? this._animate(i, n, t) : (n.hide(), i.show(), this._toggleComplete(t)), n.attr({ "aria-hidden": "true" }), n.prev().attr({ "aria-selected": "false", "aria-expanded": "false" }), i.length && n.length ? n.prev().attr({ tabIndex: -1, "aria-expanded": "false" }) : i.length && this.headers.filter(function () { return 0 === parseInt(e(this).attr("tabIndex"), 10) }).attr("tabIndex", -1), i.attr("aria-hidden", "false").prev().attr({ "aria-selected": "true", "aria-expanded": "true", tabIndex: 0 }) }, _animate: function (e, t, i) { var n, s, o, a = this, r = 0, l = e.css("box-sizing"), c = e.length && (!t.length || e.index() < t.index()), d = this.options.animate || {}, h = c && d.down || d, u = function () { a._toggleComplete(i) }; return "number" == typeof h && (o = h), "string" == typeof h && (s = h), s = s || h.easing || d.easing, o = o || h.duration || d.duration, t.length ? e.length ? (n = e.show().outerHeight(), t.animate(this.hideProps, { duration: o, easing: s, step: function (e, t) { t.now = Math.round(e) } }), void e.hide().animate(this.showProps, { duration: o, easing: s, complete: u, step: function (e, i) { i.now = Math.round(e), "height" !== i.prop ? "content-box" === l && (r += i.now) : "content" !== a.options.heightStyle && (i.now = Math.round(n - t.outerHeight() - r), r = 0) } })) : t.animate(this.hideProps, o, s, u) : e.animate(this.showProps, o, s, u) }, _toggleComplete: function (e) { var t = e.oldPanel; t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"), t.length && (t.parent()[0].className = t.parent()[0].className), this._trigger("activate", null, e) } }); !function () { e.ui = e.ui || {}; var t, i, n = Math.max, s = Math.abs, o = Math.round, a = /left|center|right/, r = /top|center|bottom/, l = /[\+\-]\d+(\.[\d]+)?%?/, c = /^\w+/, d = /%$/, h = e.fn.position; function u(e, t, i) { return [parseFloat(e[0]) * (d.test(e[0]) ? t / 100 : 1), parseFloat(e[1]) * (d.test(e[1]) ? i / 100 : 1)] } function p(t, i) { return parseInt(e.css(t, i), 10) || 0 } e.position = { scrollbarWidth: function () { if (void 0 !== t) return t; var i, n, s = e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"), o = s.children()[0]; return e("body").append(s), i = o.offsetWidth, s.css("overflow", "scroll"), i === (n = o.offsetWidth) && (n = s[0].clientWidth), s.remove(), t = i - n }, getScrollInfo: function (t) { var i = t.isWindow || t.isDocument ? "" : t.element.css("overflow-x"), n = t.isWindow || t.isDocument ? "" : t.element.css("overflow-y"), s = "scroll" === i || "auto" === i && t.width < t.element[0].scrollWidth; return { width: "scroll" === n || "auto" === n && t.height < t.element[0].scrollHeight ? e.position.scrollbarWidth() : 0, height: s ? e.position.scrollbarWidth() : 0 } }, getWithinInfo: function (t) { var i = e(t || window), n = e.isWindow(i[0]), s = !!i[0] && 9 === i[0].nodeType; return { element: i, isWindow: n, isDocument: s, offset: i.offset() || { left: 0, top: 0 }, scrollLeft: i.scrollLeft(), scrollTop: i.scrollTop(), width: n || s ? i.width() : i.outerWidth(), height: n || s ? i.height() : i.outerHeight() } } }, e.fn.position = function (t) { if (!t || !t.of) return h.apply(this, arguments); t = e.extend({}, t); var d, f, m, g, v, b, y, w, _ = e(t.of), C = e.position.getWithinInfo(t.within), k = e.position.getScrollInfo(C), x = (t.collision || "flip").split(" "), T = {}; return b = 9 === (w = (y = _)[0]).nodeType ? { width: y.width(), height: y.height(), offset: { top: 0, left: 0 } } : e.isWindow(w) ? { width: y.width(), height: y.height(), offset: { top: y.scrollTop(), left: y.scrollLeft() } } : w.preventDefault ? { width: 0, height: 0, offset: { top: w.pageY, left: w.pageX } } : { width: y.outerWidth(), height: y.outerHeight(), offset: y.offset() }, _[0].preventDefault && (t.at = "left top"), f = b.width, m = b.height, g = b.offset, v = e.extend({}, g), e.each(["my", "at"], function () { var e, i, n = (t[this] || "").split(" "); 1 === n.length && (n = a.test(n[0]) ? n.concat(["center"]) : r.test(n[0]) ? ["center"].concat(n) : ["center", "center"]), n[0] = a.test(n[0]) ? n[0] : "center", n[1] = r.test(n[1]) ? n[1] : "center", e = l.exec(n[0]), i = l.exec(n[1]), T[this] = [e ? e[0] : 0, i ? i[0] : 0], t[this] = [c.exec(n[0])[0], c.exec(n[1])[0]] }), 1 === x.length && (x[1] = x[0]), "right" === t.at[0] ? v.left += f : "center" === t.at[0] && (v.left += f / 2), "bottom" === t.at[1] ? v.top += m : "center" === t.at[1] && (v.top += m / 2), d = u(T.at, f, m), v.left += d[0], v.top += d[1], this.each(function () { var a, r, l = e(this), c = l.outerWidth(), h = l.outerHeight(), b = p(this, "marginLeft"), y = p(this, "marginTop"), w = c + b + p(this, "marginRight") + k.width, $ = h + y + p(this, "marginBottom") + k.height, S = e.extend({}, v), M = u(T.my, l.outerWidth(), l.outerHeight()); "right" === t.my[0] ? S.left -= c : "center" === t.my[0] && (S.left -= c / 2), "bottom" === t.my[1] ? S.top -= h : "center" === t.my[1] && (S.top -= h / 2), S.left += M[0], S.top += M[1], i || (S.left = o(S.left), S.top = o(S.top)), a = { marginLeft: b, marginTop: y }, e.each(["left", "top"], function (i, n) { e.ui.position[x[i]] && e.ui.position[x[i]][n](S, { targetWidth: f, targetHeight: m, elemWidth: c, elemHeight: h, collisionPosition: a, collisionWidth: w, collisionHeight: $, offset: [d[0] + M[0], d[1] + M[1]], my: t.my, at: t.at, within: C, elem: l }) }), t.using && (r = function (e) { var i = g.left - S.left, o = i + f - c, a = g.top - S.top, r = a + m - h, d = { target: { element: _, left: g.left, top: g.top, width: f, height: m }, element: { element: l, left: S.left, top: S.top, width: c, height: h }, horizontal: o < 0 ? "left" : i > 0 ? "right" : "center", vertical: r < 0 ? "top" : a > 0 ? "bottom" : "middle" }; f < c && s(i + o) < f && (d.horizontal = "center"), m < h && s(a + r) < m && (d.vertical = "middle"), n(s(i), s(o)) > n(s(a), s(r)) ? d.important = "horizontal" : d.important = "vertical", t.using.call(this, e, d) }), l.offset(e.extend(S, { using: r })) }) }, e.ui.position = { fit: { left: function (e, t) { var i, s = t.within, o = s.isWindow ? s.scrollLeft : s.offset.left, a = s.width, r = e.left - t.collisionPosition.marginLeft, l = o - r, c = r + t.collisionWidth - a - o; t.collisionWidth > a ? l > 0 && c <= 0 ? (i = e.left + l + t.collisionWidth - a - o, e.left += l - i) : e.left = c > 0 && l <= 0 ? o : l > c ? o + a - t.collisionWidth : o : l > 0 ? e.left += l : c > 0 ? e.left -= c : e.left = n(e.left - r, e.left) }, top: function (e, t) { var i, s = t.within, o = s.isWindow ? s.scrollTop : s.offset.top, a = t.within.height, r = e.top - t.collisionPosition.marginTop, l = o - r, c = r + t.collisionHeight - a - o; t.collisionHeight > a ? l > 0 && c <= 0 ? (i = e.top + l + t.collisionHeight - a - o, e.top += l - i) : e.top = c > 0 && l <= 0 ? o : l > c ? o + a - t.collisionHeight : o : l > 0 ? e.top += l : c > 0 ? e.top -= c : e.top = n(e.top - r, e.top) } }, flip: { left: function (e, t) { var i, n, o = t.within, a = o.offset.left + o.scrollLeft, r = o.width, l = o.isWindow ? o.scrollLeft : o.offset.left, c = e.left - t.collisionPosition.marginLeft, d = c - l, h = c + t.collisionWidth - r - l, u = "left" === t.my[0] ? -t.elemWidth : "right" === t.my[0] ? t.elemWidth : 0, p = "left" === t.at[0] ? t.targetWidth : "right" === t.at[0] ? -t.targetWidth : 0, f = -2 * t.offset[0]; d < 0 ? ((i = e.left + u + p + f + t.collisionWidth - r - a) < 0 || i < s(d)) && (e.left += u + p + f) : h > 0 && ((n = e.left - t.collisionPosition.marginLeft + u + p + f - l) > 0 || s(n) < h) && (e.left += u + p + f) }, top: function (e, t) { var i, n, o = t.within, a = o.offset.top + o.scrollTop, r = o.height, l = o.isWindow ? o.scrollTop : o.offset.top, c = e.top - t.collisionPosition.marginTop, d = c - l, h = c + t.collisionHeight - r - l, u = "top" === t.my[1] ? -t.elemHeight : "bottom" === t.my[1] ? t.elemHeight : 0, p = "top" === t.at[1] ? t.targetHeight : "bottom" === t.at[1] ? -t.targetHeight : 0, f = -2 * t.offset[1]; d < 0 ? ((n = e.top + u + p + f + t.collisionHeight - r - a) < 0 || n < s(d)) && (e.top += u + p + f) : h > 0 && ((i = e.top - t.collisionPosition.marginTop + u + p + f - l) > 0 || s(i) < h) && (e.top += u + p + f) } }, flipfit: { left: function () { e.ui.position.flip.left.apply(this, arguments), e.ui.position.fit.left.apply(this, arguments) }, top: function () { e.ui.position.flip.top.apply(this, arguments), e.ui.position.fit.top.apply(this, arguments) } } }, function () { var t, n, s, o, a, r = document.getElementsByTagName("body")[0], l = document.createElement("div"); for (a in t = document.createElement(r ? "div" : "body"), s = { visibility: "hidden", width: 0, height: 0, border: 0, margin: 0, background: "none" }, r && e.extend(s, { position: "absolute", left: "-1000px", top: "-1000px" }), s) t.style[a] = s[a]; t.appendChild(l), (n = r || document.documentElement).insertBefore(t, n.firstChild), l.style.cssText = "position: absolute; left: 10.7432222px;", o = e(l).offset().left, i = o > 10 && o < 11, t.innerHTML = "", n.removeChild(t) }() }(); e.ui.position, e.widget("ui.menu", { version: "1.11.4", defaultElement: "<ul>", delay: 300, options: { icons: { submenu: "ui-icon-carat-1-e" }, items: "> *", menus: "ul", position: { my: "left-1 top", at: "right top" }, role: "menu", blur: null, focus: null, select: null }, _create: function () { this.activeMenu = this.element, this.mouseHandled = !1, this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length).attr({ role: this.options.role, tabIndex: 0 }), this.options.disabled && this.element.addClass("ui-state-disabled").attr("aria-disabled", "true"), this._on({ "mousedown .ui-menu-item": function (e) { e.preventDefault() }, "click .ui-menu-item": function (t) { var i = e(t.target); !this.mouseHandled && i.not(".ui-state-disabled").length && (this.select(t), t.isPropagationStopped() || (this.mouseHandled = !0), i.has(".ui-menu").length ? this.expand(t) : !this.element.is(":focus") && e(this.document[0].activeElement).closest(".ui-menu").length && (this.element.trigger("focus", [!0]), this.active && 1 === this.active.parents(".ui-menu").length && clearTimeout(this.timer))) }, "mouseenter .ui-menu-item": function (t) { if (!this.previousFilter) { var i = e(t.currentTarget); i.siblings(".ui-state-active").removeClass("ui-state-active"), this.focus(t, i) } }, mouseleave: "collapseAll", "mouseleave .ui-menu": "collapseAll", focus: function (e, t) { var i = this.active || this.element.find(this.options.items).eq(0); t || this.focus(e, i) }, blur: function (t) { this._delay(function () { e.contains(this.element[0], this.document[0].activeElement) || this.collapseAll(t) }) }, keydown: "_keydown" }), this.refresh(), this._on(this.document, { click: function (e) { this._closeOnDocumentClick(e) && this.collapseAll(e), this.mouseHandled = !1 } }) }, _destroy: function () { this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(), this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function () { var t = e(this); t.data("ui-menu-submenu-carat") && t.remove() }), this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content") }, _keydown: function (t) { var i, n, s, o, a = !0; switch (t.keyCode) { case e.ui.keyCode.PAGE_UP: this.previousPage(t); break; case e.ui.keyCode.PAGE_DOWN: this.nextPage(t); break; case e.ui.keyCode.HOME: this._move("first", "first", t); break; case e.ui.keyCode.END: this._move("last", "last", t); break; case e.ui.keyCode.UP: this.previous(t); break; case e.ui.keyCode.DOWN: this.next(t); break; case e.ui.keyCode.LEFT: this.collapse(t); break; case e.ui.keyCode.RIGHT: this.active && !this.active.is(".ui-state-disabled") && this.expand(t); break; case e.ui.keyCode.ENTER: case e.ui.keyCode.SPACE: this._activate(t); break; case e.ui.keyCode.ESCAPE: this.collapse(t); break; default: a = !1, n = this.previousFilter || "", s = String.fromCharCode(t.keyCode), o = !1, clearTimeout(this.filterTimer), s === n ? o = !0 : s = n + s, i = this._filterMenuItems(s), (i = o && -1 !== i.index(this.active.next()) ? this.active.nextAll(".ui-menu-item") : i).length || (s = String.fromCharCode(t.keyCode), i = this._filterMenuItems(s)), i.length ? (this.focus(t, i), this.previousFilter = s, this.filterTimer = this._delay(function () { delete this.previousFilter }, 1e3)) : delete this.previousFilter }a && t.preventDefault() }, _activate: function (e) { this.active.is(".ui-state-disabled") || (this.active.is("[aria-haspopup='true']") ? this.expand(e) : this.select(e)) }, refresh: function () { var t, i = this, n = this.options.icons.submenu, s = this.element.find(this.options.menus); this.element.toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length), s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({ role: this.options.role, "aria-hidden": "true", "aria-expanded": "false" }).each(function () { var t = e(this), i = t.parent(), s = e("<span>").addClass("ui-menu-icon ui-icon " + n).data("ui-menu-submenu-carat", !0); i.attr("aria-haspopup", "true").prepend(s), t.attr("aria-labelledby", i.attr("id")) }), (t = s.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function () { var t = e(this); i._isDivider(t) && t.addClass("ui-widget-content ui-menu-divider") }), t.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({ tabIndex: -1, role: this._itemRole() }), t.filter(".ui-state-disabled").attr("aria-disabled", "true"), this.active && !e.contains(this.element[0], this.active[0]) && this.blur() }, _itemRole: function () { return { menu: "menuitem", listbox: "option" }[this.options.role] }, _setOption: function (e, t) { "icons" === e && this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu), "disabled" === e && this.element.toggleClass("ui-state-disabled", !!t).attr("aria-disabled", t), this._super(e, t) }, focus: function (e, t) { var i, n; this.blur(e, e && "focus" === e.type), this._scrollIntoView(t), this.active = t.first(), n = this.active.addClass("ui-state-focus").removeClass("ui-state-active"), this.options.role && this.element.attr("aria-activedescendant", n.attr("id")), this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"), e && "keydown" === e.type ? this._close() : this.timer = this._delay(function () { this._close() }, this.delay), (i = t.children(".ui-menu")).length && e && /^mouse/.test(e.type) && this._startOpening(i), this.activeMenu = t.parent(), this._trigger("focus", e, { item: t }) }, _scrollIntoView: function (t) { var i, n, s, o, a, r; this._hasScroll() && (i = parseFloat(e.css(this.activeMenu[0], "borderTopWidth")) || 0, n = parseFloat(e.css(this.activeMenu[0], "paddingTop")) || 0, s = t.offset().top - this.activeMenu.offset().top - i - n, o = this.activeMenu.scrollTop(), a = this.activeMenu.height(), r = t.outerHeight(), s < 0 ? this.activeMenu.scrollTop(o + s) : s + r > a && this.activeMenu.scrollTop(o + s - a + r)) }, blur: function (e, t) { t || clearTimeout(this.timer), this.active && (this.active.removeClass("ui-state-focus"), this.active = null, this._trigger("blur", e, { item: this.active })) }, _startOpening: function (e) { clearTimeout(this.timer), "true" === e.attr("aria-hidden") && (this.timer = this._delay(function () { this._close(), this._open(e) }, this.delay)) }, _open: function (t) { var i = e.extend({ of: this.active }, this.options.position); clearTimeout(this.timer), this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden", "true"), t.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(i) }, collapseAll: function (t, i) { clearTimeout(this.timer), this.timer = this._delay(function () { var n = i ? this.element : e(t && t.target).closest(this.element.find(".ui-menu")); n.length || (n = this.element), this._close(n), this.blur(t), this.activeMenu = n }, this.delay) }, _close: function (e) { e || (e = this.active ? this.active.parent() : this.element), e.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active") }, _closeOnDocumentClick: function (t) { return !e(t.target).closest(".ui-menu").length }, _isDivider: function (e) { return !/[^\-\u2014\u2013\s]/.test(e.text()) }, collapse: function (e) { var t = this.active && this.active.parent().closest(".ui-menu-item", this.element); t && t.length && (this._close(), this.focus(e, t)) }, expand: function (e) { var t = this.active && this.active.children(".ui-menu ").find(this.options.items).first(); t && t.length && (this._open(t.parent()), this._delay(function () { this.focus(e, t) })) }, next: function (e) { this._move("next", "first", e) }, previous: function (e) { this._move("prev", "last", e) }, isFirstItem: function () { return this.active && !this.active.prevAll(".ui-menu-item").length }, isLastItem: function () { return this.active && !this.active.nextAll(".ui-menu-item").length }, _move: function (e, t, i) { var n; this.active && (n = "first" === e || "last" === e ? this.active["first" === e ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1) : this.active[e + "All"](".ui-menu-item").eq(0)), n && n.length && this.active || (n = this.activeMenu.find(this.options.items)[t]()), this.focus(i, n) }, nextPage: function (t) { var i, n, s; this.active ? this.isLastItem() || (this._hasScroll() ? (n = this.active.offset().top, s = this.element.height(), this.active.nextAll(".ui-menu-item").each(function () { return (i = e(this)).offset().top - n - s < 0 }), this.focus(t, i)) : this.focus(t, this.activeMenu.find(this.options.items)[this.active ? "last" : "first"]())) : this.next(t) }, previousPage: function (t) { var i, n, s; this.active ? this.isFirstItem() || (this._hasScroll() ? (n = this.active.offset().top, s = this.element.height(), this.active.prevAll(".ui-menu-item").each(function () { return (i = e(this)).offset().top - n + s > 0 }), this.focus(t, i)) : this.focus(t, this.activeMenu.find(this.options.items).first())) : this.next(t) }, _hasScroll: function () { return this.element.outerHeight() < this.element.prop("scrollHeight") }, select: function (t) { this.active = this.active || e(t.target).closest(".ui-menu-item"); var i = { item: this.active }; this.active.has(".ui-menu").length || this.collapseAll(t, !0), this._trigger("select", t, i) }, _filterMenuItems: function (t) { var i = t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&"), n = new RegExp("^" + i, "i"); return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function () { return n.test(e.trim(e(this).text())) }) } }); e.widget("ui.autocomplete", { version: "1.11.4", defaultElement: "<input>", options: { appendTo: null, autoFocus: !1, delay: 300, minLength: 1, position: { my: "left top", at: "left bottom", collision: "none" }, source: null, change: null, close: null, focus: null, open: null, response: null, search: null, select: null }, requestIndex: 0, pending: 0, _create: function () { var t, i, n, s = this.element[0].nodeName.toLowerCase(), o = "textarea" === s, a = "input" === s; this.isMultiLine = !!o || !a && this.element.prop("isContentEditable"), this.valueMethod = this.element[o || a ? "val" : "text"], this.isNewMenu = !0, this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off"), this._on(this.element, { keydown: function (s) { if (this.element.prop("readOnly")) return t = !0, n = !0, void (i = !0); t = !1, n = !1, i = !1; var o = e.ui.keyCode; switch (s.keyCode) { case o.PAGE_UP: t = !0, this._move("previousPage", s); break; case o.PAGE_DOWN: t = !0, this._move("nextPage", s); break; case o.UP: t = !0, this._keyEvent("previous", s); break; case o.DOWN: t = !0, this._keyEvent("next", s); break; case o.ENTER: this.menu.active && (t = !0, s.preventDefault(), this.menu.select(s)); break; case o.TAB: this.menu.active && this.menu.select(s); break; case o.ESCAPE: this.menu.element.is(":visible") && (this.isMultiLine || this._value(this.term), this.close(s), s.preventDefault()); break; default: i = !0, this._searchTimeout(s) } }, keypress: function (n) { if (t) return t = !1, void (this.isMultiLine && !this.menu.element.is(":visible") || n.preventDefault()); if (!i) { var s = e.ui.keyCode; switch (n.keyCode) { case s.PAGE_UP: this._move("previousPage", n); break; case s.PAGE_DOWN: this._move("nextPage", n); break; case s.UP: this._keyEvent("previous", n); break; case s.DOWN: this._keyEvent("next", n) } } }, input: function (e) { if (n) return n = !1, void e.preventDefault(); this._searchTimeout(e) }, focus: function () { this.selectedItem = null, this.previous = this._value() }, blur: function (e) { this.cancelBlur ? delete this.cancelBlur : (clearTimeout(this.searching), this.close(e), this._change(e)) } }), this._initSource(), this.menu = e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({ role: null }).hide().menu("instance"), this._on(this.menu.element, { mousedown: function (t) { t.preventDefault(), this.cancelBlur = !0, this._delay(function () { delete this.cancelBlur }); var i = this.menu.element[0]; e(t.target).closest(".ui-menu-item").length || this._delay(function () { var t = this; this.document.one("mousedown", function (n) { n.target === t.element[0] || n.target === i || e.contains(i, n.target) || t.close() }) }) }, menufocus: function (t, i) { var n, s; if (this.isNewMenu && (this.isNewMenu = !1, t.originalEvent && /^mouse/.test(t.originalEvent.type))) return this.menu.blur(), void this.document.one("mousemove", function () { e(t.target).trigger(t.originalEvent) }); s = i.item.data("ui-autocomplete-item"), !1 !== this._trigger("focus", t, { item: s }) && t.originalEvent && /^key/.test(t.originalEvent.type) && this._value(s.value), (n = i.item.attr("aria-label") || s.value) && e.trim(n).length && (this.liveRegion.children().hide(), e("<div>").text(n).appendTo(this.liveRegion)) }, menuselect: function (e, t) { var i = t.item.data("ui-autocomplete-item"), n = this.previous; this.element[0] !== this.document[0].activeElement && (this.element.focus(), this.previous = n, this._delay(function () { this.previous = n, this.selectedItem = i })), !1 !== this._trigger("select", e, { item: i }) && this._value(i.value), this.term = this._value(), this.close(e), this.selectedItem = i } }), this.liveRegion = e("<span>", { role: "status", "aria-live": "assertive", "aria-relevant": "additions" }).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body), this._on(this.window, { beforeunload: function () { this.element.removeAttr("autocomplete") } }) }, _destroy: function () { clearTimeout(this.searching), this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"), this.menu.element.remove(), this.liveRegion.remove() }, _setOption: function (e, t) { this._super(e, t), "source" === e && this._initSource(), "appendTo" === e && this.menu.element.appendTo(this._appendTo()), "disabled" === e && t && this.xhr && this.xhr.abort() }, _appendTo: function () { var t = this.options.appendTo; return t && (t = t.jquery || t.nodeType ? e(t) : this.document.find(t).eq(0)), t && t[0] || (t = this.element.closest(".ui-front")), t.length || (t = this.document[0].body), t }, _initSource: function () { var t, i, n = this; e.isArray(this.options.source) ? (t = this.options.source, this.source = function (i, n) { n(e.ui.autocomplete.filter(t, i.term)) }) : "string" == typeof this.options.source ? (i = this.options.source, this.source = function (t, s) { n.xhr && n.xhr.abort(), n.xhr = e.ajax({ url: i, data: t, dataType: "json", success: function (e) { s(e) }, error: function () { s([]) } }) }) : this.source = this.options.source }, _searchTimeout: function (e) { clearTimeout(this.searching), this.searching = this._delay(function () { var t = this.term === this._value(), i = this.menu.element.is(":visible"), n = e.altKey || e.ctrlKey || e.metaKey || e.shiftKey; t && (!t || i || n) || (this.selectedItem = null, this.search(null, e)) }, this.options.delay) }, search: function (e, t) { return e = null != e ? e : this._value(), this.term = this._value(), e.length < this.options.minLength ? this.close(t) : !1 !== this._trigger("search", t) ? this._search(e) : void 0 }, _search: function (e) { this.pending++, this.element.addClass("ui-autocomplete-loading"), this.cancelSearch = !1, this.source({ term: e }, this._response()) }, _response: function () { var t = ++this.requestIndex; return e.proxy(function (e) { t === this.requestIndex && this.__response(e), this.pending--, this.pending || this.element.removeClass("ui-autocomplete-loading") }, this) }, __response: function (e) { e && (e = this._normalize(e)), this._trigger("response", null, { content: e }), !this.options.disabled && e && e.length && !this.cancelSearch ? (this._suggest(e), this._trigger("open")) : this._close() }, close: function (e) { this.cancelSearch = !0, this._close(e) }, _close: function (e) { this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.blur(), this.isNewMenu = !0, this._trigger("close", e)) }, _change: function (e) { this.previous !== this._value() && this._trigger("change", e, { item: this.selectedItem }) }, _normalize: function (t) { return t.length && t[0].label && t[0].value ? t : e.map(t, function (t) { return "string" == typeof t ? { label: t, value: t } : e.extend({}, t, { label: t.label || t.value, value: t.value || t.label }) }) }, _suggest: function (t) { var i = this.menu.element.empty(); this._renderMenu(i, t), this.isNewMenu = !0, this.menu.refresh(), i.show(), this._resizeMenu(), i.position(e.extend({ of: this.element }, this.options.position)), this.options.autoFocus && this.menu.next() }, _resizeMenu: function () { var e = this.menu.element; e.outerWidth(Math.max(e.width("").outerWidth() + 1, this.element.outerWidth())) }, _renderMenu: function (t, i) { var n = this; e.each(i, function (e, i) { n._renderItemData(t, i) }) }, _renderItemData: function (e, t) { return this._renderItem(e, t).data("ui-autocomplete-item", t) }, _renderItem: function (t, i) { return e("<li>").text(i.label).appendTo(t) }, _move: function (e, t) { if (this.menu.element.is(":visible")) return this.menu.isFirstItem() && /^previous/.test(e) || this.menu.isLastItem() && /^next/.test(e) ? (this.isMultiLine || this._value(this.term), void this.menu.blur()) : void this.menu[e](t); this.search(null, t) }, widget: function () { return this.menu.element }, _value: function () { return this.valueMethod.apply(this.element, arguments) }, _keyEvent: function (e, t) { this.isMultiLine && !this.menu.element.is(":visible") || (this._move(e, t), t.preventDefault()) } }), e.extend(e.ui.autocomplete, { escapeRegex: function (e) { return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&") }, filter: function (t, i) { var n = new RegExp(e.ui.autocomplete.escapeRegex(i), "i"); return e.grep(t, function (e) { return n.test(e.label || e.value || e) }) } }), e.widget("ui.autocomplete", e.ui.autocomplete, { options: { messages: { noResults: "No search results.", results: function (e) { return e + (e > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate." } } }, __response: function (t) { var i; this._superApply(arguments), this.options.disabled || this.cancelSearch || (i = t && t.length ? this.options.messages.results(t.length) : this.options.messages.noResults, this.liveRegion.children().hide(), e("<div>").text(i).appendTo(this.liveRegion)) } }); e.ui.autocomplete; var c, d = "ui-button ui-widget ui-state-default ui-corner-all", h = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only", u = function () { var t = e(this); setTimeout(function () { t.find(":ui-button").button("refresh") }, 1) }, p = function (t) { var i = t.name, n = t.form, s = e([]); return i && (i = i.replace(/'/g, "\\'"), s = n ? e(n).find("[name='" + i + "'][type=radio]") : e("[name='" + i + "'][type=radio]", t.ownerDocument).filter(function () { return !this.form })), s }; e.widget("ui.button", { version: "1.11.4", defaultElement: "<button>", options: { disabled: null, text: !0, label: null, icons: { primary: null, secondary: null } }, _create: function () { this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, u), "boolean" != typeof this.options.disabled ? this.options.disabled = !!this.element.prop("disabled") : this.element.prop("disabled", this.options.disabled), this._determineButtonType(), this.hasTitle = !!this.buttonElement.attr("title"); var t = this, i = this.options, n = "checkbox" === this.type || "radio" === this.type, s = n ? "" : "ui-state-active"; null === i.label && (i.label = "input" === this.type ? this.buttonElement.val() : this.buttonElement.html()), this._hoverable(this.buttonElement), this.buttonElement.addClass(d).attr("role", "button").bind("mouseenter" + this.eventNamespace, function () { i.disabled || this === c && e(this).addClass("ui-state-active") }).bind("mouseleave" + this.eventNamespace, function () { i.disabled || e(this).removeClass(s) }).bind("click" + this.eventNamespace, function (e) { i.disabled && (e.preventDefault(), e.stopImmediatePropagation()) }), this._on({ focus: function () { this.buttonElement.addClass("ui-state-focus") }, blur: function () { this.buttonElement.removeClass("ui-state-focus") } }), n && this.element.bind("change" + this.eventNamespace, function () { t.refresh() }), "checkbox" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function () { if (i.disabled) return !1 }) : "radio" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function () { if (i.disabled) return !1; e(this).addClass("ui-state-active"), t.buttonElement.attr("aria-pressed", "true"); var n = t.element[0]; p(n).not(n).map(function () { return e(this).button("widget")[0] }).removeClass("ui-state-active").attr("aria-pressed", "false") }) : (this.buttonElement.bind("mousedown" + this.eventNamespace, function () { if (i.disabled) return !1; e(this).addClass("ui-state-active"), c = this, t.document.one("mouseup", function () { c = null }) }).bind("mouseup" + this.eventNamespace, function () { if (i.disabled) return !1; e(this).removeClass("ui-state-active") }).bind("keydown" + this.eventNamespace, function (t) { if (i.disabled) return !1; t.keyCode !== e.ui.keyCode.SPACE && t.keyCode !== e.ui.keyCode.ENTER || e(this).addClass("ui-state-active") }).bind("keyup" + this.eventNamespace + " blur" + this.eventNamespace, function () { e(this).removeClass("ui-state-active") }), this.buttonElement.is("a") && this.buttonElement.keyup(function (t) { t.keyCode === e.ui.keyCode.SPACE && e(this).click() })), this._setOption("disabled", i.disabled), this._resetButton() }, _determineButtonType: function () { var e, t, i; this.element.is("[type=checkbox]") ? this.type = "checkbox" : this.element.is("[type=radio]") ? this.type = "radio" : this.element.is("input") ? this.type = "input" : this.type = "button", "checkbox" === this.type || "radio" === this.type ? (e = this.element.parents().last(), t = "label[for='" + this.element.attr("id") + "']", this.buttonElement = e.find(t), this.buttonElement.length || (e = e.length ? e.siblings() : this.element.siblings(), this.buttonElement = e.filter(t), this.buttonElement.length || (this.buttonElement = e.find(t))), this.element.addClass("ui-helper-hidden-accessible"), (i = this.element.is(":checked")) && this.buttonElement.addClass("ui-state-active"), this.buttonElement.prop("aria-pressed", i)) : this.buttonElement = this.element }, widget: function () { return this.buttonElement }, _destroy: function () { this.element.removeClass("ui-helper-hidden-accessible"), this.buttonElement.removeClass(d + " ui-state-active " + h).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()), this.hasTitle || this.buttonElement.removeAttr("title") }, _setOption: function (e, t) { if (this._super(e, t), "disabled" === e) return this.widget().toggleClass("ui-state-disabled", !!t), this.element.prop("disabled", !!t), void (t && ("checkbox" === this.type || "radio" === this.type ? this.buttonElement.removeClass("ui-state-focus") : this.buttonElement.removeClass("ui-state-focus ui-state-active"))); this._resetButton() }, refresh: function () { var t = this.element.is("input, button") ? this.element.is(":disabled") : this.element.hasClass("ui-button-disabled"); t !== this.options.disabled && this._setOption("disabled", t), "radio" === this.type ? p(this.element[0]).each(function () { e(this).is(":checked") ? e(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true") : e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false") }) : "checkbox" === this.type && (this.element.is(":checked") ? this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true") : this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false")) }, _resetButton: function () { if ("input" !== this.type) { var t = this.buttonElement.removeClass(h), i = e("<span></span>", this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(), n = this.options.icons, s = n.primary && n.secondary, o = []; n.primary || n.secondary ? (this.options.text && o.push("ui-button-text-icon" + (s ? "s" : n.primary ? "-primary" : "-secondary")), n.primary && t.prepend("<span class='ui-button-icon-primary ui-icon " + n.primary + "'></span>"), n.secondary && t.append("<span class='ui-button-icon-secondary ui-icon " + n.secondary + "'></span>"), this.options.text || (o.push(s ? "ui-button-icons-only" : "ui-button-icon-only"), this.hasTitle || t.attr("title", e.trim(i)))) : o.push("ui-button-text-only"), t.addClass(o.join(" ")) } else this.options.label && this.element.val(this.options.label) } }), e.widget("ui.buttonset", { version: "1.11.4", options: { items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)" }, _create: function () { this.element.addClass("ui-buttonset") }, _init: function () { this.refresh() }, _setOption: function (e, t) { "disabled" === e && this.buttons.button("option", e, t), this._super(e, t) }, refresh: function () { var t = "rtl" === this.element.css("direction"), i = this.element.find(this.options.items), n = i.filter(":ui-button"); i.not(":ui-button").button(), n.button("refresh"), this.buttons = i.map(function () { return e(this).button("widget")[0] }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t ? "ui-corner-right" : "ui-corner-left").end().filter(":last").addClass(t ? "ui-corner-left" : "ui-corner-right").end().end() }, _destroy: function () { this.element.removeClass("ui-buttonset"), this.buttons.map(function () { return e(this).button("widget")[0] }).removeClass("ui-corner-left ui-corner-right").end().button("destroy") } }); e.ui.button; var f = !1; e(document).mouseup(function () { f = !1 }); e.widget("ui.mouse", { version: "1.11.4", options: { cancel: "input,textarea,button,select,option", distance: 1, delay: 0 }, _mouseInit: function () { var t = this; this.element.bind("mousedown." + this.widgetName, function (e) { return t._mouseDown(e) }).bind("click." + this.widgetName, function (i) { if (!0 === e.data(i.target, t.widgetName + ".preventClickEvent")) return e.removeData(i.target, t.widgetName + ".preventClickEvent"), i.stopImmediatePropagation(), !1 }), this.started = !1 }, _mouseDestroy: function () { this.element.unbind("." + this.widgetName), this._mouseMoveDelegate && this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate) }, _mouseDown: function (t) { if (!f) { this._mouseMoved = !1, this._mouseStarted && this._mouseUp(t), this._mouseDownEvent = t; var i = this, n = 1 === t.which, s = !("string" != typeof this.options.cancel || !t.target.nodeName) && e(t.target).closest(this.options.cancel).length; return !(n && !s && this._mouseCapture(t)) || (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function () { i.mouseDelayMet = !0 }, this.options.delay)), this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = !1 !== this._mouseStart(t), !this._mouseStarted) ? (t.preventDefault(), !0) : (!0 === e.data(t.target, this.widgetName + ".preventClickEvent") && e.removeData(t.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function (e) { return i._mouseMove(e) }, this._mouseUpDelegate = function (e) { return i._mouseUp(e) }, this.document.bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), t.preventDefault(), f = !0, !0)) } }, _mouseMove: function (t) { if (this._mouseMoved) { if (e.ui.ie && (!document.documentMode || document.documentMode < 9) && !t.button) return this._mouseUp(t); if (!t.which) return this._mouseUp(t) } return (t.which || t.button) && (this._mouseMoved = !0), this._mouseStarted ? (this._mouseDrag(t), t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = !1 !== this._mouseStart(this._mouseDownEvent, t), this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted) }, _mouseUp: function (t) { return this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, t.target === this._mouseDownEvent.target && e.data(t.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(t)), f = !1, !1 }, _mouseDistanceMet: function (e) { return Math.max(Math.abs(this._mouseDownEvent.pageX - e.pageX), Math.abs(this._mouseDownEvent.pageY - e.pageY)) >= this.options.distance }, _mouseDelayMet: function () { return this.mouseDelayMet }, _mouseStart: function () { }, _mouseDrag: function () { }, _mouseStop: function () { }, _mouseCapture: function () { return !0 } }); e.widget("ui.draggable", e.ui.mouse, { version: "1.11.4", widgetEventPrefix: "drag", options: { addClasses: !0, appendTo: "parent", axis: !1, connectToSortable: !1, containment: !1, cursor: "auto", cursorAt: !1, grid: !1, handle: !1, helper: "original", iframeFix: !1, opacity: !1, refreshPositions: !1, revert: !1, revertDuration: 500, scope: "default", scroll: !0, scrollSensitivity: 20, scrollSpeed: 20, snap: !1, snapMode: "both", snapTolerance: 20, stack: !1, zIndex: !1, drag: null, start: null, stop: null }, _create: function () { "original" === this.options.helper && this._setPositionRelative(), this.options.addClasses && this.element.addClass("ui-draggable"), this.options.disabled && this.element.addClass("ui-draggable-disabled"), this._setHandleClassName(), this._mouseInit() }, _setOption: function (e, t) { this._super(e, t), "handle" === e && (this._removeHandleClassName(), this._setHandleClassName()) }, _destroy: function () { (this.helper || this.element).is(".ui-draggable-dragging") ? this.destroyOnClear = !0 : (this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"), this._removeHandleClassName(), this._mouseDestroy()) }, _mouseCapture: function (t) { var i = this.options; return this._blurActiveElement(t), !(this.helper || i.disabled || e(t.target).closest(".ui-resizable-handle").length > 0) && (this.handle = this._getHandle(t), !!this.handle && (this._blockFrames(!0 === i.iframeFix ? "iframe" : i.iframeFix), !0)) }, _blockFrames: function (t) { this.iframeBlocks = this.document.find(t).map(function () { var t = e(this); return e("<div>").css("position", "absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0] }) }, _unblockFrames: function () { this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks) }, _blurActiveElement: function (t) { var i = this.document[0]; if (this.handleElement.is(t.target)) try { i.activeElement && "body" !== i.activeElement.nodeName.toLowerCase() && e(i.activeElement).blur() } catch (e) { } }, _mouseStart: function (t) { var i = this.options; return this.helper = this._createHelper(t), this.helper.addClass("ui-draggable-dragging"), this._cacheHelperProportions(), e.ui.ddmanager && (e.ui.ddmanager.current = this), this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(!0), this.offsetParent = this.helper.offsetParent(), this.hasFixedAncestor = this.helper.parents().filter(function () { return "fixed" === e(this).css("position") }).length > 0, this.positionAbs = this.element.offset(), this._refreshOffsets(t), this.originalPosition = this.position = this._generatePosition(t, !1), this.originalPageX = t.pageX, this.originalPageY = t.pageY, i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt), this._setContainment(), !1 === this._trigger("start", t) ? (this._clear(), !1) : (this._cacheHelperProportions(), e.ui.ddmanager && !i.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this._normalizeRightBottom(), this._mouseDrag(t, !0), e.ui.ddmanager && e.ui.ddmanager.dragStart(this, t), !0) }, _refreshOffsets: function (e) { this.offset = { top: this.positionAbs.top - this.margins.top, left: this.positionAbs.left - this.margins.left, scroll: !1, parent: this._getParentOffset(), relative: this._getRelativeOffset() }, this.offset.click = { left: e.pageX - this.offset.left, top: e.pageY - this.offset.top } }, _mouseDrag: function (t, i) { if (this.hasFixedAncestor && (this.offset.parent = this._getParentOffset()), this.position = this._generatePosition(t, !0), this.positionAbs = this._convertPositionTo("absolute"), !i) { var n = this._uiHash(); if (!1 === this._trigger("drag", t, n)) return this._mouseUp({}), !1; this.position = n.position } return this.helper[0].style.left = this.position.left + "px", this.helper[0].style.top = this.position.top + "px", e.ui.ddmanager && e.ui.ddmanager.drag(this, t), !1 }, _mouseStop: function (t) { var i = this, n = !1; return e.ui.ddmanager && !this.options.dropBehaviour && (n = e.ui.ddmanager.drop(this, t)), this.dropped && (n = this.dropped, this.dropped = !1), "invalid" === this.options.revert && !n || "valid" === this.options.revert && n || !0 === this.options.revert || e.isFunction(this.options.revert) && this.options.revert.call(this.element, n) ? e(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function () { !1 !== i._trigger("stop", t) && i._clear() }) : !1 !== this._trigger("stop", t) && this._clear(), !1 }, _mouseUp: function (t) { return this._unblockFrames(), e.ui.ddmanager && e.ui.ddmanager.dragStop(this, t), this.handleElement.is(t.target) && this.element.focus(), e.ui.mouse.prototype._mouseUp.call(this, t) }, cancel: function () { return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear(), this }, _getHandle: function (t) { return !this.options.handle || !!e(t.target).closest(this.element.find(this.options.handle)).length }, _setHandleClassName: function () { this.handleElement = this.options.handle ? this.element.find(this.options.handle) : this.element, this.handleElement.addClass("ui-draggable-handle") }, _removeHandleClassName: function () { this.handleElement.removeClass("ui-draggable-handle") }, _createHelper: function (t) { var i = this.options, n = e.isFunction(i.helper), s = n ? e(i.helper.apply(this.element[0], [t])) : "clone" === i.helper ? this.element.clone().removeAttr("id") : this.element; return s.parents("body").length || s.appendTo("parent" === i.appendTo ? this.element[0].parentNode : i.appendTo), n && s[0] === this.element[0] && this._setPositionRelative(), s[0] === this.element[0] || /(fixed|absolute)/.test(s.css("position")) || s.css("position", "absolute"), s }, _setPositionRelative: function () { /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative") }, _adjustOffsetFromHelper: function (t) { "string" == typeof t && (t = t.split(" ")), e.isArray(t) && (t = { left: +t[0], top: +t[1] || 0 }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top) }, _isRootNode: function (e) { return /(html|body)/i.test(e.tagName) || e === this.document[0] }, _getParentOffset: function () { var t = this.offsetParent.offset(), i = this.document[0]; return "absolute" === this.cssPosition && this.scrollParent[0] !== i && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop()), this._isRootNode(this.offsetParent[0]) && (t = { top: 0, left: 0 }), { top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0), left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0) } }, _getRelativeOffset: function () { if ("relative" !== this.cssPosition) return { top: 0, left: 0 }; var e = this.element.position(), t = this._isRootNode(this.scrollParent[0]); return { top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + (t ? 0 : this.scrollParent.scrollTop()), left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + (t ? 0 : this.scrollParent.scrollLeft()) } }, _cacheMargins: function () { this.margins = { left: parseInt(this.element.css("marginLeft"), 10) || 0, top: parseInt(this.element.css("marginTop"), 10) || 0, right: parseInt(this.element.css("marginRight"), 10) || 0, bottom: parseInt(this.element.css("marginBottom"), 10) || 0 } }, _cacheHelperProportions: function () { this.helperProportions = { width: this.helper.outerWidth(), height: this.helper.outerHeight() } }, _setContainment: function () { var t, i, n, s = this.options, o = this.document[0]; this.relativeContainer = null, s.containment ? "window" !== s.containment ? "document" !== s.containment ? s.containment.constructor !== Array ? ("parent" === s.containment && (s.containment = this.helper[0].parentNode), (n = (i = e(s.containment))[0]) && (t = /(scroll|auto)/.test(i.css("overflow")), this.containment = [(parseInt(i.css("borderLeftWidth"), 10) || 0) + (parseInt(i.css("paddingLeft"), 10) || 0), (parseInt(i.css("borderTopWidth"), 10) || 0) + (parseInt(i.css("paddingTop"), 10) || 0), (t ? Math.max(n.scrollWidth, n.offsetWidth) : n.offsetWidth) - (parseInt(i.css("borderRightWidth"), 10) || 0) - (parseInt(i.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (t ? Math.max(n.scrollHeight, n.offsetHeight) : n.offsetHeight) - (parseInt(i.css("borderBottomWidth"), 10) || 0) - (parseInt(i.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom], this.relativeContainer = i)) : this.containment = s.containment : this.containment = [0, 0, e(o).width() - this.helperProportions.width - this.margins.left, (e(o).height() || o.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top] : this.containment = [e(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, e(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, e(window).scrollLeft() + e(window).width() - this.helperProportions.width - this.margins.left, e(window).scrollTop() + (e(window).height() || o.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top] : this.containment = null }, _convertPositionTo: function (e, t) { t || (t = this.position); var i = "absolute" === e ? 1 : -1, n = this._isRootNode(this.scrollParent[0]); return { top: t.top + this.offset.relative.top * i + this.offset.parent.top * i - ("fixed" === this.cssPosition ? -this.offset.scroll.top : n ? 0 : this.offset.scroll.top) * i, left: t.left + this.offset.relative.left * i + this.offset.parent.left * i - ("fixed" === this.cssPosition ? -this.offset.scroll.left : n ? 0 : this.offset.scroll.left) * i } }, _generatePosition: function (e, t) { var i, n, s, o, a = this.options, r = this._isRootNode(this.scrollParent[0]), l = e.pageX, c = e.pageY; return r && this.offset.scroll || (this.offset.scroll = { top: this.scrollParent.scrollTop(), left: this.scrollParent.scrollLeft() }), t && (this.containment && (this.relativeContainer ? (n = this.relativeContainer.offset(), i = [this.containment[0] + n.left, this.containment[1] + n.top, this.containment[2] + n.left, this.containment[3] + n.top]) : i = this.containment, e.pageX - this.offset.click.left < i[0] && (l = i[0] + this.offset.click.left), e.pageY - this.offset.click.top < i[1] && (c = i[1] + this.offset.click.top), e.pageX - this.offset.click.left > i[2] && (l = i[2] + this.offset.click.left), e.pageY - this.offset.click.top > i[3] && (c = i[3] + this.offset.click.top)), a.grid && (s = a.grid[1] ? this.originalPageY + Math.round((c - this.originalPageY) / a.grid[1]) * a.grid[1] : this.originalPageY, c = i ? s - this.offset.click.top >= i[1] || s - this.offset.click.top > i[3] ? s : s - this.offset.click.top >= i[1] ? s - a.grid[1] : s + a.grid[1] : s, o = a.grid[0] ? this.originalPageX + Math.round((l - this.originalPageX) / a.grid[0]) * a.grid[0] : this.originalPageX, l = i ? o - this.offset.click.left >= i[0] || o - this.offset.click.left > i[2] ? o : o - this.offset.click.left >= i[0] ? o - a.grid[0] : o + a.grid[0] : o), "y" === a.axis && (l = this.originalPageX), "x" === a.axis && (c = this.originalPageY)), { top: c - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.offset.scroll.top : r ? 0 : this.offset.scroll.top), left: l - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.offset.scroll.left : r ? 0 : this.offset.scroll.left) } }, _clear: function () { this.helper.removeClass("ui-draggable-dragging"), this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(), this.helper = null, this.cancelHelperRemoval = !1, this.destroyOnClear && this.destroy() }, _normalizeRightBottom: function () { "y" !== this.options.axis && "auto" !== this.helper.css("right") && (this.helper.width(this.helper.width()), this.helper.css("right", "auto")), "x" !== this.options.axis && "auto" !== this.helper.css("bottom") && (this.helper.height(this.helper.height()), this.helper.css("bottom", "auto")) }, _trigger: function (t, i, n) { return n = n || this._uiHash(), e.ui.plugin.call(this, t, [i, n, this], !0), /^(drag|start|stop)/.test(t) && (this.positionAbs = this._convertPositionTo("absolute"), n.offset = this.positionAbs), e.Widget.prototype._trigger.call(this, t, i, n) }, plugins: {}, _uiHash: function () { return { helper: this.helper, position: this.position, originalPosition: this.originalPosition, offset: this.positionAbs } } }), e.ui.plugin.add("draggable", "connectToSortable", { start: function (t, i, n) { var s = e.extend({}, i, { item: n.element }); n.sortables = [], e(n.options.connectToSortable).each(function () { var i = e(this).sortable("instance"); i && !i.options.disabled && (n.sortables.push(i), i.refreshPositions(), i._trigger("activate", t, s)) }) }, stop: function (t, i, n) { var s = e.extend({}, i, { item: n.element }); n.cancelHelperRemoval = !1, e.each(n.sortables, function () { this.isOver ? (this.isOver = 0, n.cancelHelperRemoval = !0, this.cancelHelperRemoval = !1, this._storedCSS = { position: this.placeholder.css("position"), top: this.placeholder.css("top"), left: this.placeholder.css("left") }, this._mouseStop(t), this.options.helper = this.options._helper) : (this.cancelHelperRemoval = !0, this._trigger("deactivate", t, s)) }) }, drag: function (t, i, n) { e.each(n.sortables, function () { var s = !1, o = this; o.positionAbs = n.positionAbs, o.helperProportions = n.helperProportions, o.offset.click = n.offset.click, o._intersectsWith(o.containerCache) && (s = !0, e.each(n.sortables, function () { return this.positionAbs = n.positionAbs, this.helperProportions = n.helperProportions, this.offset.click = n.offset.click, this !== o && this._intersectsWith(this.containerCache) && e.contains(o.element[0], this.element[0]) && (s = !1), s })), s ? (o.isOver || (o.isOver = 1, n._parent = i.helper.parent(), o.currentItem = i.helper.appendTo(o.element).data("ui-sortable-item", !0), o.options._helper = o.options.helper, o.options.helper = function () { return i.helper[0] }, t.target = o.currentItem[0], o._mouseCapture(t, !0), o._mouseStart(t, !0, !0), o.offset.click.top = n.offset.click.top, o.offset.click.left = n.offset.click.left, o.offset.parent.left -= n.offset.parent.left - o.offset.parent.left, o.offset.parent.top -= n.offset.parent.top - o.offset.parent.top, n._trigger("toSortable", t), n.dropped = o.element, e.each(n.sortables, function () { this.refreshPositions() }), n.currentItem = n.element, o.fromOutside = n), o.currentItem && (o._mouseDrag(t), i.position = o.position)) : o.isOver && (o.isOver = 0, o.cancelHelperRemoval = !0, o.options._revert = o.options.revert, o.options.revert = !1, o._trigger("out", t, o._uiHash(o)), o._mouseStop(t, !0), o.options.revert = o.options._revert, o.options.helper = o.options._helper, o.placeholder && o.placeholder.remove(), i.helper.appendTo(n._parent), n._refreshOffsets(t), i.position = n._generatePosition(t, !0), n._trigger("fromSortable", t), n.dropped = !1, e.each(n.sortables, function () { this.refreshPositions() })) }) } }), e.ui.plugin.add("draggable", "cursor", { start: function (t, i, n) { var s = e("body"), o = n.options; s.css("cursor") && (o._cursor = s.css("cursor")), s.css("cursor", o.cursor) }, stop: function (t, i, n) { var s = n.options; s._cursor && e("body").css("cursor", s._cursor) } }), e.ui.plugin.add("draggable", "opacity", { start: function (t, i, n) { var s = e(i.helper), o = n.options; s.css("opacity") && (o._opacity = s.css("opacity")), s.css("opacity", o.opacity) }, stop: function (t, i, n) { var s = n.options; s._opacity && e(i.helper).css("opacity", s._opacity) } }), e.ui.plugin.add("draggable", "scroll", { start: function (e, t, i) { i.scrollParentNotHidden || (i.scrollParentNotHidden = i.helper.scrollParent(!1)), i.scrollParentNotHidden[0] !== i.document[0] && "HTML" !== i.scrollParentNotHidden[0].tagName && (i.overflowOffset = i.scrollParentNotHidden.offset()) }, drag: function (t, i, n) { var s = n.options, o = !1, a = n.scrollParentNotHidden[0], r = n.document[0]; a !== r && "HTML" !== a.tagName ? (s.axis && "x" === s.axis || (n.overflowOffset.top + a.offsetHeight - t.pageY < s.scrollSensitivity ? a.scrollTop = o = a.scrollTop + s.scrollSpeed : t.pageY - n.overflowOffset.top < s.scrollSensitivity && (a.scrollTop = o = a.scrollTop - s.scrollSpeed)), s.axis && "y" === s.axis || (n.overflowOffset.left + a.offsetWidth - t.pageX < s.scrollSensitivity ? a.scrollLeft = o = a.scrollLeft + s.scrollSpeed : t.pageX - n.overflowOffset.left < s.scrollSensitivity && (a.scrollLeft = o = a.scrollLeft - s.scrollSpeed))) : (s.axis && "x" === s.axis || (t.pageY - e(r).scrollTop() < s.scrollSensitivity ? o = e(r).scrollTop(e(r).scrollTop() - s.scrollSpeed) : e(window).height() - (t.pageY - e(r).scrollTop()) < s.scrollSensitivity && (o = e(r).scrollTop(e(r).scrollTop() + s.scrollSpeed))), s.axis && "y" === s.axis || (t.pageX - e(r).scrollLeft() < s.scrollSensitivity ? o = e(r).scrollLeft(e(r).scrollLeft() - s.scrollSpeed) : e(window).width() - (t.pageX - e(r).scrollLeft()) < s.scrollSensitivity && (o = e(r).scrollLeft(e(r).scrollLeft() + s.scrollSpeed)))), !1 !== o && e.ui.ddmanager && !s.dropBehaviour && e.ui.ddmanager.prepareOffsets(n, t) } }), e.ui.plugin.add("draggable", "snap", { start: function (t, i, n) { var s = n.options; n.snapElements = [], e(s.snap.constructor !== String ? s.snap.items || ":data(ui-draggable)" : s.snap).each(function () { var t = e(this), i = t.offset(); this !== n.element[0] && n.snapElements.push({ item: this, width: t.outerWidth(), height: t.outerHeight(), top: i.top, left: i.left }) }) }, drag: function (t, i, n) { var s, o, a, r, l, c, d, h, u, p, f = n.options, m = f.snapTolerance, g = i.offset.left, v = g + n.helperProportions.width, b = i.offset.top, y = b + n.helperProportions.height; for (u = n.snapElements.length - 1; u >= 0; u--)c = (l = n.snapElements[u].left - n.margins.left) + n.snapElements[u].width, h = (d = n.snapElements[u].top - n.margins.top) + n.snapElements[u].height, v < l - m || g > c + m || y < d - m || b > h + m || !e.contains(n.snapElements[u].item.ownerDocument, n.snapElements[u].item) ? (n.snapElements[u].snapping && n.options.snap.release && n.options.snap.release.call(n.element, t, e.extend(n._uiHash(), { snapItem: n.snapElements[u].item })), n.snapElements[u].snapping = !1) : ("inner" !== f.snapMode && (s = Math.abs(d - y) <= m, o = Math.abs(h - b) <= m, a = Math.abs(l - v) <= m, r = Math.abs(c - g) <= m, s && (i.position.top = n._convertPositionTo("relative", { top: d - n.helperProportions.height, left: 0 }).top), o && (i.position.top = n._convertPositionTo("relative", { top: h, left: 0 }).top), a && (i.position.left = n._convertPositionTo("relative", { top: 0, left: l - n.helperProportions.width }).left), r && (i.position.left = n._convertPositionTo("relative", { top: 0, left: c }).left)), p = s || o || a || r, "outer" !== f.snapMode && (s = Math.abs(d - b) <= m, o = Math.abs(h - y) <= m, a = Math.abs(l - g) <= m, r = Math.abs(c - v) <= m, s && (i.position.top = n._convertPositionTo("relative", { top: d, left: 0 }).top), o && (i.position.top = n._convertPositionTo("relative", { top: h - n.helperProportions.height, left: 0 }).top), a && (i.position.left = n._convertPositionTo("relative", { top: 0, left: l }).left), r && (i.position.left = n._convertPositionTo("relative", { top: 0, left: c - n.helperProportions.width }).left)), !n.snapElements[u].snapping && (s || o || a || r || p) && n.options.snap.snap && n.options.snap.snap.call(n.element, t, e.extend(n._uiHash(), { snapItem: n.snapElements[u].item })), n.snapElements[u].snapping = s || o || a || r || p) } }), e.ui.plugin.add("draggable", "stack", { start: function (t, i, n) { var s, o = n.options, a = e.makeArray(e(o.stack)).sort(function (t, i) { return (parseInt(e(t).css("zIndex"), 10) || 0) - (parseInt(e(i).css("zIndex"), 10) || 0) }); a.length && (s = parseInt(e(a[0]).css("zIndex"), 10) || 0, e(a).each(function (t) { e(this).css("zIndex", s + t) }), this.css("zIndex", s + a.length)) } }), e.ui.plugin.add("draggable", "zIndex", { start: function (t, i, n) { var s = e(i.helper), o = n.options; s.css("zIndex") && (o._zIndex = s.css("zIndex")), s.css("zIndex", o.zIndex) }, stop: function (t, i, n) { var s = n.options; s._zIndex && e(i.helper).css("zIndex", s._zIndex) } }); e.ui.draggable; e.widget("ui.resizable", e.ui.mouse, { version: "1.11.4", widgetEventPrefix: "resize", options: { alsoResize: !1, animate: !1, animateDuration: "slow", animateEasing: "swing", aspectRatio: !1, autoHide: !1, containment: !1, ghost: !1, grid: !1, handles: "e,s,se", helper: !1, maxHeight: null, maxWidth: null, minHeight: 10, minWidth: 10, zIndex: 90, resize: null, start: null, stop: null }, _num: function (e) { return parseInt(e, 10) || 0 }, _isNumber: function (e) { return !isNaN(parseInt(e, 10)) }, _hasScroll: function (t, i) { if ("hidden" === e(t).css("overflow")) return !1; var n, s = i && "left" === i ? "scrollLeft" : "scrollTop"; return t[s] > 0 || (t[s] = 1, n = t[s] > 0, t[s] = 0, n) }, _create: function () { var t, i, n, s, o = this, a = this.options; if (this.element.addClass("ui-resizable"), e.extend(this, { _aspectRatio: !!a.aspectRatio, aspectRatio: a.aspectRatio, originalElement: this.element, _proportionallyResizeElements: [], _helper: a.helper || a.ghost || a.animate ? a.helper || "ui-resizable-helper" : null }), this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i) && (this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({ position: this.element.css("position"), width: this.element.outerWidth(), height: this.element.outerHeight(), top: this.element.css("top"), left: this.element.css("left") })), this.element = this.element.parent().data("ui-resizable", this.element.resizable("instance")), this.elementIsWrapper = !0, this.element.css({ marginLeft: this.originalElement.css("marginLeft"), marginTop: this.originalElement.css("marginTop"), marginRight: this.originalElement.css("marginRight"), marginBottom: this.originalElement.css("marginBottom") }), this.originalElement.css({ marginLeft: 0, marginTop: 0, marginRight: 0, marginBottom: 0 }), this.originalResizeStyle = this.originalElement.css("resize"), this.originalElement.css("resize", "none"), this._proportionallyResizeElements.push(this.originalElement.css({ position: "static", zoom: 1, display: "block" })), this.originalElement.css({ margin: this.originalElement.css("margin") }), this._proportionallyResize()), this.handles = a.handles || (e(".ui-resizable-handle", this.element).length ? { n: ".ui-resizable-n", e: ".ui-resizable-e", s: ".ui-resizable-s", w: ".ui-resizable-w", se: ".ui-resizable-se", sw: ".ui-resizable-sw", ne: ".ui-resizable-ne", nw: ".ui-resizable-nw" } : "e,s,se"), this._handles = e(), this.handles.constructor === String) for ("all" === this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw"), t = this.handles.split(","), this.handles = {}, i = 0; i < t.length; i++)n = e.trim(t[i]), (s = e("<div class='ui-resizable-handle " + ("ui-resizable-" + n) + "'></div>")).css({ zIndex: a.zIndex }), "se" === n && s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"), this.handles[n] = ".ui-resizable-" + n, this.element.append(s); this._renderAxis = function (t) { var i, n, s, a; for (i in t = t || this.element, this.handles) this.handles[i].constructor === String ? this.handles[i] = this.element.children(this.handles[i]).first().show() : (this.handles[i].jquery || this.handles[i].nodeType) && (this.handles[i] = e(this.handles[i]), this._on(this.handles[i], { mousedown: o._mouseDown })), this.elementIsWrapper && this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i) && (n = e(this.handles[i], this.element), a = /sw|ne|nw|se|n|s/.test(i) ? n.outerHeight() : n.outerWidth(), s = ["padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left"].join(""), t.css(s, a), this._proportionallyResize()), this._handles = this._handles.add(this.handles[i]) }, this._renderAxis(this.element), this._handles = this._handles.add(this.element.find(".ui-resizable-handle")), this._handles.disableSelection(), this._handles.mouseover(function () { o.resizing || (this.className && (s = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)), o.axis = s && s[1] ? s[1] : "se") }), a.autoHide && (this._handles.hide(), e(this.element).addClass("ui-resizable-autohide").mouseenter(function () { a.disabled || (e(this).removeClass("ui-resizable-autohide"), o._handles.show()) }).mouseleave(function () { a.disabled || o.resizing || (e(this).addClass("ui-resizable-autohide"), o._handles.hide()) })), this._mouseInit() }, _destroy: function () { this._mouseDestroy(); var t, i = function (t) { e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove() }; return this.elementIsWrapper && (i(this.element), t = this.element, this.originalElement.css({ position: t.css("position"), width: t.outerWidth(), height: t.outerHeight(), top: t.css("top"), left: t.css("left") }).insertAfter(t), t.remove()), this.originalElement.css("resize", this.originalResizeStyle), i(this.originalElement), this }, _mouseCapture: function (t) { var i, n, s = !1; for (i in this.handles) ((n = e(this.handles[i])[0]) === t.target || e.contains(n, t.target)) && (s = !0); return !this.options.disabled && s }, _mouseStart: function (t) { var i, n, s, o = this.options, a = this.element; return this.resizing = !0, this._renderProxy(), i = this._num(this.helper.css("left")), n = this._num(this.helper.css("top")), o.containment && (i += e(o.containment).scrollLeft() || 0, n += e(o.containment).scrollTop() || 0), this.offset = this.helper.offset(), this.position = { left: i, top: n }, this.size = this._helper ? { width: this.helper.width(), height: this.helper.height() } : { width: a.width(), height: a.height() }, this.originalSize = this._helper ? { width: a.outerWidth(), height: a.outerHeight() } : { width: a.width(), height: a.height() }, this.sizeDiff = { width: a.outerWidth() - a.width(), height: a.outerHeight() - a.height() }, this.originalPosition = { left: i, top: n }, this.originalMousePosition = { left: t.pageX, top: t.pageY }, this.aspectRatio = "number" == typeof o.aspectRatio ? o.aspectRatio : this.originalSize.width / this.originalSize.height || 1, s = e(".ui-resizable-" + this.axis).css("cursor"), e("body").css("cursor", "auto" === s ? this.axis + "-resize" : s), a.addClass("ui-resizable-resizing"), this._propagate("start", t), !0 }, _mouseDrag: function (t) { var i, n, s = this.originalMousePosition, o = this.axis, a = t.pageX - s.left || 0, r = t.pageY - s.top || 0, l = this._change[o]; return this._updatePrevProperties(), !!l && (i = l.apply(this, [t, a, r]), this._updateVirtualBoundaries(t.shiftKey), (this._aspectRatio || t.shiftKey) && (i = this._updateRatio(i, t)), i = this._respectSize(i, t), this._updateCache(i), this._propagate("resize", t), n = this._applyChanges(), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), e.isEmptyObject(n) || (this._updatePrevProperties(), this._trigger("resize", t, this.ui()), this._applyChanges()), !1) }, _mouseStop: function (t) { this.resizing = !1; var i, n, s, o, a, r, l, c = this.options; return this._helper && (s = (n = (i = this._proportionallyResizeElements).length && /textarea/i.test(i[0].nodeName)) && this._hasScroll(i[0], "left") ? 0 : this.sizeDiff.height, o = n ? 0 : this.sizeDiff.width, a = { width: this.helper.width() - o, height: this.helper.height() - s }, r = parseInt(this.element.css("left"), 10) + (this.position.left - this.originalPosition.left) || null, l = parseInt(this.element.css("top"), 10) + (this.position.top - this.originalPosition.top) || null, c.animate || this.element.css(e.extend(a, { top: l, left: r })), this.helper.height(this.size.height), this.helper.width(this.size.width), this._helper && !c.animate && this._proportionallyResize()), e("body").css("cursor", "auto"), this.element.removeClass("ui-resizable-resizing"), this._propagate("stop", t), this._helper && this.helper.remove(), !1 }, _updatePrevProperties: function () { this.prevPosition = { top: this.position.top, left: this.position.left }, this.prevSize = { width: this.size.width, height: this.size.height } }, _applyChanges: function () { var e = {}; return this.position.top !== this.prevPosition.top && (e.top = this.position.top + "px"), this.position.left !== this.prevPosition.left && (e.left = this.position.left + "px"), this.size.width !== this.prevSize.width && (e.width = this.size.width + "px"), this.size.height !== this.prevSize.height && (e.height = this.size.height + "px"), this.helper.css(e), e }, _updateVirtualBoundaries: function (e) { var t, i, n, s, o, a = this.options; o = { minWidth: this._isNumber(a.minWidth) ? a.minWidth : 0, maxWidth: this._isNumber(a.maxWidth) ? a.maxWidth : 1 / 0, minHeight: this._isNumber(a.minHeight) ? a.minHeight : 0, maxHeight: this._isNumber(a.maxHeight) ? a.maxHeight : 1 / 0 }, (this._aspectRatio || e) && (t = o.minHeight * this.aspectRatio, n = o.minWidth / this.aspectRatio, i = o.maxHeight * this.aspectRatio, s = o.maxWidth / this.aspectRatio, t > o.minWidth && (o.minWidth = t), n > o.minHeight && (o.minHeight = n), i < o.maxWidth && (o.maxWidth = i), s < o.maxHeight && (o.maxHeight = s)), this._vBoundaries = o }, _updateCache: function (e) { this.offset = this.helper.offset(), this._isNumber(e.left) && (this.position.left = e.left), this._isNumber(e.top) && (this.position.top = e.top), this._isNumber(e.height) && (this.size.height = e.height), this._isNumber(e.width) && (this.size.width = e.width) }, _updateRatio: function (e) { var t = this.position, i = this.size, n = this.axis; return this._isNumber(e.height) ? e.width = e.height * this.aspectRatio : this._isNumber(e.width) && (e.height = e.width / this.aspectRatio), "sw" === n && (e.left = t.left + (i.width - e.width), e.top = null), "nw" === n && (e.top = t.top + (i.height - e.height), e.left = t.left + (i.width - e.width)), e }, _respectSize: function (e) { var t = this._vBoundaries, i = this.axis, n = this._isNumber(e.width) && t.maxWidth && t.maxWidth < e.width, s = this._isNumber(e.height) && t.maxHeight && t.maxHeight < e.height, o = this._isNumber(e.width) && t.minWidth && t.minWidth > e.width, a = this._isNumber(e.height) && t.minHeight && t.minHeight > e.height, r = this.originalPosition.left + this.originalSize.width, l = this.position.top + this.size.height, c = /sw|nw|w/.test(i), d = /nw|ne|n/.test(i); return o && (e.width = t.minWidth), a && (e.height = t.minHeight), n && (e.width = t.maxWidth), s && (e.height = t.maxHeight), o && c && (e.left = r - t.minWidth), n && c && (e.left = r - t.maxWidth), a && d && (e.top = l - t.minHeight), s && d && (e.top = l - t.maxHeight), e.width || e.height || e.left || !e.top ? e.width || e.height || e.top || !e.left || (e.left = null) : e.top = null, e }, _getPaddingPlusBorderDimensions: function (e) { for (var t = 0, i = [], n = [e.css("borderTopWidth"), e.css("borderRightWidth"), e.css("borderBottomWidth"), e.css("borderLeftWidth")], s = [e.css("paddingTop"), e.css("paddingRight"), e.css("paddingBottom"), e.css("paddingLeft")]; t < 4; t++)i[t] = parseInt(n[t], 10) || 0, i[t] += parseInt(s[t], 10) || 0; return { height: i[0] + i[2], width: i[1] + i[3] } }, _proportionallyResize: function () { if (this._proportionallyResizeElements.length) for (var e, t = 0, i = this.helper || this.element; t < this._proportionallyResizeElements.length; t++)e = this._proportionallyResizeElements[t], this.outerDimensions || (this.outerDimensions = this._getPaddingPlusBorderDimensions(e)), e.css({ height: i.height() - this.outerDimensions.height || 0, width: i.width() - this.outerDimensions.width || 0 }) }, _renderProxy: function () { var t = this.element, i = this.options; this.elementOffset = t.offset(), this._helper ? (this.helper = this.helper || e("<div style='overflow:hidden;'></div>"), this.helper.addClass(this._helper).css({ width: this.element.outerWidth() - 1, height: this.element.outerHeight() - 1, position: "absolute", left: this.elementOffset.left + "px", top: this.elementOffset.top + "px", zIndex: ++i.zIndex }), this.helper.appendTo("body").disableSelection()) : this.helper = this.element }, _change: { e: function (e, t) { return { width: this.originalSize.width + t } }, w: function (e, t) { var i = this.originalSize; return { left: this.originalPosition.left + t, width: i.width - t } }, n: function (e, t, i) { var n = this.originalSize; return { top: this.originalPosition.top + i, height: n.height - i } }, s: function (e, t, i) { return { height: this.originalSize.height + i } }, se: function (t, i, n) { return e.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [t, i, n])) }, sw: function (t, i, n) { return e.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [t, i, n])) }, ne: function (t, i, n) { return e.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [t, i, n])) }, nw: function (t, i, n) { return e.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [t, i, n])) } }, _propagate: function (t, i) { e.ui.plugin.call(this, t, [i, this.ui()]), "resize" !== t && this._trigger(t, i, this.ui()) }, plugins: {}, ui: function () { return { originalElement: this.originalElement, element: this.element, helper: this.helper, position: this.position, size: this.size, originalSize: this.originalSize, originalPosition: this.originalPosition } } }), e.ui.plugin.add("resizable", "animate", { stop: function (t) { var i = e(this).resizable("instance"), n = i.options, s = i._proportionallyResizeElements, o = s.length && /textarea/i.test(s[0].nodeName), a = o && i._hasScroll(s[0], "left") ? 0 : i.sizeDiff.height, r = o ? 0 : i.sizeDiff.width, l = { width: i.size.width - r, height: i.size.height - a }, c = parseInt(i.element.css("left"), 10) + (i.position.left - i.originalPosition.left) || null, d = parseInt(i.element.css("top"), 10) + (i.position.top - i.originalPosition.top) || null; i.element.animate(e.extend(l, d && c ? { top: d, left: c } : {}), { duration: n.animateDuration, easing: n.animateEasing, step: function () { var n = { width: parseInt(i.element.css("width"), 10), height: parseInt(i.element.css("height"), 10), top: parseInt(i.element.css("top"), 10), left: parseInt(i.element.css("left"), 10) }; s && s.length && e(s[0]).css({ width: n.width, height: n.height }), i._updateCache(n), i._propagate("resize", t) } }) } }), e.ui.plugin.add("resizable", "containment", { start: function () { var t, i, n, s, o, a, r, l = e(this).resizable("instance"), c = l.options, d = l.element, h = c.containment, u = h instanceof e ? h.get(0) : /parent/.test(h) ? d.parent().get(0) : h; u && (l.containerElement = e(u), /document/.test(h) || h === document ? (l.containerOffset = { left: 0, top: 0 }, l.containerPosition = { left: 0, top: 0 }, l.parentData = { element: e(document), left: 0, top: 0, width: e(document).width(), height: e(document).height() || document.body.parentNode.scrollHeight }) : (t = e(u), i = [], e(["Top", "Right", "Left", "Bottom"]).each(function (e, n) { i[e] = l._num(t.css("padding" + n)) }), l.containerOffset = t.offset(), l.containerPosition = t.position(), l.containerSize = { height: t.innerHeight() - i[3], width: t.innerWidth() - i[1] }, n = l.containerOffset, s = l.containerSize.height, o = l.containerSize.width, a = l._hasScroll(u, "left") ? u.scrollWidth : o, r = l._hasScroll(u) ? u.scrollHeight : s, l.parentData = { element: u, left: n.left, top: n.top, width: a, height: r })) }, resize: function (t) { var i, n, s, o, a = e(this).resizable("instance"), r = a.options, l = a.containerOffset, c = a.position, d = a._aspectRatio || t.shiftKey, h = { top: 0, left: 0 }, u = a.containerElement, p = !0; u[0] !== document && /static/.test(u.css("position")) && (h = l), c.left < (a._helper ? l.left : 0) && (a.size.width = a.size.width + (a._helper ? a.position.left - l.left : a.position.left - h.left), d && (a.size.height = a.size.width / a.aspectRatio, p = !1), a.position.left = r.helper ? l.left : 0), c.top < (a._helper ? l.top : 0) && (a.size.height = a.size.height + (a._helper ? a.position.top - l.top : a.position.top), d && (a.size.width = a.size.height * a.aspectRatio, p = !1), a.position.top = a._helper ? l.top : 0), s = a.containerElement.get(0) === a.element.parent().get(0), o = /relative|absolute/.test(a.containerElement.css("position")), s && o ? (a.offset.left = a.parentData.left + a.position.left, a.offset.top = a.parentData.top + a.position.top) : (a.offset.left = a.element.offset().left, a.offset.top = a.element.offset().top), i = Math.abs(a.sizeDiff.width + (a._helper ? a.offset.left - h.left : a.offset.left - l.left)), n = Math.abs(a.sizeDiff.height + (a._helper ? a.offset.top - h.top : a.offset.top - l.top)), i + a.size.width >= a.parentData.width && (a.size.width = a.parentData.width - i, d && (a.size.height = a.size.width / a.aspectRatio, p = !1)), n + a.size.height >= a.parentData.height && (a.size.height = a.parentData.height - n, d && (a.size.width = a.size.height * a.aspectRatio, p = !1)), p || (a.position.left = a.prevPosition.left, a.position.top = a.prevPosition.top, a.size.width = a.prevSize.width, a.size.height = a.prevSize.height) }, stop: function () { var t = e(this).resizable("instance"), i = t.options, n = t.containerOffset, s = t.containerPosition, o = t.containerElement, a = e(t.helper), r = a.offset(), l = a.outerWidth() - t.sizeDiff.width, c = a.outerHeight() - t.sizeDiff.height; t._helper && !i.animate && /relative/.test(o.css("position")) && e(this).css({ left: r.left - s.left - n.left, width: l, height: c }), t._helper && !i.animate && /static/.test(o.css("position")) && e(this).css({ left: r.left - s.left - n.left, width: l, height: c }) } }), e.ui.plugin.add("resizable", "alsoResize", { start: function () { var t = e(this).resizable("instance").options; e(t.alsoResize).each(function () { var t = e(this); t.data("ui-resizable-alsoresize", { width: parseInt(t.width(), 10), height: parseInt(t.height(), 10), left: parseInt(t.css("left"), 10), top: parseInt(t.css("top"), 10) }) }) }, resize: function (t, i) { var n = e(this).resizable("instance"), s = n.options, o = n.originalSize, a = n.originalPosition, r = { height: n.size.height - o.height || 0, width: n.size.width - o.width || 0, top: n.position.top - a.top || 0, left: n.position.left - a.left || 0 }; e(s.alsoResize).each(function () { var t = e(this), n = e(this).data("ui-resizable-alsoresize"), s = {}, o = t.parents(i.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"]; e.each(o, function (e, t) { var i = (n[t] || 0) + (r[t] || 0); i && i >= 0 && (s[t] = i || null) }), t.css(s) }) }, stop: function () { e(this).removeData("resizable-alsoresize") } }), e.ui.plugin.add("resizable", "ghost", { start: function () { var t = e(this).resizable("instance"), i = t.options, n = t.size; t.ghost = t.originalElement.clone(), t.ghost.css({ opacity: .25, display: "block", position: "relative", height: n.height, width: n.width, margin: 0, left: 0, top: 0 }).addClass("ui-resizable-ghost").addClass("string" == typeof i.ghost ? i.ghost : ""), t.ghost.appendTo(t.helper) }, resize: function () { var t = e(this).resizable("instance"); t.ghost && t.ghost.css({ position: "relative", height: t.size.height, width: t.size.width }) }, stop: function () { var t = e(this).resizable("instance"); t.ghost && t.helper && t.helper.get(0).removeChild(t.ghost.get(0)) } }), e.ui.plugin.add("resizable", "grid", { resize: function () { var t, i = e(this).resizable("instance"), n = i.options, s = i.size, o = i.originalSize, a = i.originalPosition, r = i.axis, l = "number" == typeof n.grid ? [n.grid, n.grid] : n.grid, c = l[0] || 1, d = l[1] || 1, h = Math.round((s.width - o.width) / c) * c, u = Math.round((s.height - o.height) / d) * d, p = o.width + h, f = o.height + u, m = n.maxWidth && n.maxWidth < p, g = n.maxHeight && n.maxHeight < f, v = n.minWidth && n.minWidth > p, b = n.minHeight && n.minHeight > f; n.grid = l, v && (p += c), b && (f += d), m && (p -= c), g && (f -= d), /^(se|s|e)$/.test(r) ? (i.size.width = p, i.size.height = f) : /^(ne)$/.test(r) ? (i.size.width = p, i.size.height = f, i.position.top = a.top - u) : /^(sw)$/.test(r) ? (i.size.width = p, i.size.height = f, i.position.left = a.left - h) : ((f - d <= 0 || p - c <= 0) && (t = i._getPaddingPlusBorderDimensions(this)), f - d > 0 ? (i.size.height = f, i.position.top = a.top - u) : (f = d - t.height, i.size.height = f, i.position.top = a.top + o.height - f), p - c > 0 ? (i.size.width = p, i.position.left = a.left - h) : (p = c - t.width, i.size.width = p, i.position.left = a.left + o.width - p)) } }); e.ui.resizable, e.widget("ui.dialog", { version: "1.11.4", options: { appendTo: "body", autoOpen: !0, buttons: [], closeOnEscape: !0, closeText: "Close", dialogClass: "", draggable: !0, hide: null, height: "auto", maxHeight: null, maxWidth: null, minHeight: 150, minWidth: 150, modal: !1, position: { my: "center", at: "center", of: window, collision: "fit", using: function (t) { var i = e(this).css(t).offset().top; i < 0 && e(this).css("top", t.top - i) } }, resizable: !0, show: null, title: null, width: 300, beforeClose: null, close: null, drag: null, dragStart: null, dragStop: null, focus: null, open: null, resize: null, resizeStart: null, resizeStop: null }, sizeRelatedOptions: { buttons: !0, height: !0, maxHeight: !0, maxWidth: !0, minHeight: !0, minWidth: !0, width: !0 }, resizableRelatedOptions: { maxHeight: !0, maxWidth: !0, minHeight: !0, minWidth: !0 }, _create: function () { this.originalCss = { display: this.element[0].style.display, width: this.element[0].style.width, minHeight: this.element[0].style.minHeight, maxHeight: this.element[0].style.maxHeight, height: this.element[0].style.height }, this.originalPosition = { parent: this.element.parent(), index: this.element.parent().children().index(this.element) }, this.originalTitle = this.element.attr("title"), this.options.title = this.options.title || this.originalTitle, this._createWrapper(), this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog), this._createTitlebar(), this._createButtonPane(), this.options.draggable && e.fn.draggable && this._makeDraggable(), this.options.resizable && e.fn.resizable && this._makeResizable(), this._isOpen = !1, this._trackFocus() }, _init: function () { this.options.autoOpen && this.open() }, _appendTo: function () { var t = this.options.appendTo; return t && (t.jquery || t.nodeType) ? e(t) : this.document.find(t || "body").eq(0) }, _destroy: function () { var e, t = this.originalPosition; this._untrackInstance(), this._destroyOverlay(), this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(), this.uiDialog.stop(!0, !0).remove(), this.originalTitle && this.element.attr("title", this.originalTitle), (e = t.parent.children().eq(t.index)).length && e[0] !== this.element[0] ? e.before(this.element) : t.parent.append(this.element) }, widget: function () { return this.uiDialog }, disable: e.noop, enable: e.noop, close: function (t) { var i, n = this; if (this._isOpen && !1 !== this._trigger("beforeClose", t)) { if (this._isOpen = !1, this._focusedElement = null, this._destroyOverlay(), this._untrackInstance(), !this.opener.filter(":focusable").focus().length) try { (i = this.document[0].activeElement) && "body" !== i.nodeName.toLowerCase() && e(i).blur() } catch (e) { } this._hide(this.uiDialog, this.options.hide, function () { n._trigger("close", t) }) } }, isOpen: function () { return this._isOpen }, moveToTop: function () { this._moveToTop() }, _moveToTop: function (t, i) { var n = !1, s = this.uiDialog.siblings(".ui-front:visible").map(function () { return +e(this).css("z-index") }).get(), o = Math.max.apply(null, s); return o >= +this.uiDialog.css("z-index") && (this.uiDialog.css("z-index", o + 1), n = !0), n && !i && this._trigger("focus", t), n }, open: function () { var t = this; this._isOpen ? this._moveToTop() && this._focusTabbable() : (this._isOpen = !0, this.opener = e(this.document[0].activeElement), this._size(), this._position(), this._createOverlay(), this._moveToTop(null, !0), this.overlay && this.overlay.css("z-index", this.uiDialog.css("z-index") - 1), this._show(this.uiDialog, this.options.show, function () { t._focusTabbable(), t._trigger("focus") }), this._makeFocusTarget(), this._trigger("open")) }, _focusTabbable: function () { var e = this._focusedElement; e || (e = this.element.find("[autofocus]")), e.length || (e = this.element.find(":tabbable")), e.length || (e = this.uiDialogButtonPane.find(":tabbable")), e.length || (e = this.uiDialogTitlebarClose.filter(":tabbable")), e.length || (e = this.uiDialog), e.eq(0).focus() }, _keepFocus: function (t) { function i() { var t = this.document[0].activeElement; this.uiDialog[0] === t || e.contains(this.uiDialog[0], t) || this._focusTabbable() } t.preventDefault(), i.call(this), this._delay(i) }, _createWrapper: function () { this.uiDialog = e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " + this.options.dialogClass).hide().attr({ tabIndex: -1, role: "dialog" }).appendTo(this._appendTo()), this._on(this.uiDialog, { keydown: function (t) { if (this.options.closeOnEscape && !t.isDefaultPrevented() && t.keyCode && t.keyCode === e.ui.keyCode.ESCAPE) return t.preventDefault(), void this.close(t); if (t.keyCode === e.ui.keyCode.TAB && !t.isDefaultPrevented()) { var i = this.uiDialog.find(":tabbable"), n = i.filter(":first"), s = i.filter(":last"); t.target !== s[0] && t.target !== this.uiDialog[0] || t.shiftKey ? t.target !== n[0] && t.target !== this.uiDialog[0] || !t.shiftKey || (this._delay(function () { s.focus() }), t.preventDefault()) : (this._delay(function () { n.focus() }), t.preventDefault()) } }, mousedown: function (e) { this._moveToTop(e) && this._focusTabbable() } }), this.element.find("[aria-describedby]").length || this.uiDialog.attr({ "aria-describedby": this.element.uniqueId().attr("id") }) }, _createTitlebar: function () { var t; this.uiDialogTitlebar = e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog), this._on(this.uiDialogTitlebar, { mousedown: function (t) { e(t.target).closest(".ui-dialog-titlebar-close") || this.uiDialog.focus() } }), this.uiDialogTitlebarClose = e("<button type='button'></button>").button({ label: this.options.closeText, icons: { primary: "ui-icon-closethick" }, text: !1 }).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar), this._on(this.uiDialogTitlebarClose, { click: function (e) { e.preventDefault(), this.close(e) } }), t = e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar), this._title(t), this.uiDialog.attr({ "aria-labelledby": t.attr("id") }) }, _title: function (e) { this.options.title || e.html("&#160;"), e.text(this.options.title) }, _createButtonPane: function () { this.uiDialogButtonPane = e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"), this.uiButtonSet = e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane), this._createButtons() }, _createButtons: function () { var t = this, i = this.options.buttons; this.uiDialogButtonPane.remove(), this.uiButtonSet.empty(), e.isEmptyObject(i) || e.isArray(i) && !i.length ? this.uiDialog.removeClass("ui-dialog-buttons") : (e.each(i, function (i, n) { var s, o; n = e.isFunction(n) ? { click: n, text: i } : n, n = e.extend({ type: "button" }, n), s = n.click, n.click = function () { s.apply(t.element[0], arguments) }, o = { icons: n.icons, text: n.showText }, delete n.icons, delete n.showText, e("<button></button>", n).button(o).appendTo(t.uiButtonSet) }), this.uiDialog.addClass("ui-dialog-buttons"), this.uiDialogButtonPane.appendTo(this.uiDialog)) }, _makeDraggable: function () { var t = this, i = this.options; function n(e) { return { position: e.position, offset: e.offset } } this.uiDialog.draggable({ cancel: ".ui-dialog-content, .ui-dialog-titlebar-close", handle: ".ui-dialog-titlebar", containment: "document", start: function (i, s) { e(this).addClass("ui-dialog-dragging"), t._blockFrames(), t._trigger("dragStart", i, n(s)) }, drag: function (e, i) { t._trigger("drag", e, n(i)) }, stop: function (s, o) { var a = o.offset.left - t.document.scrollLeft(), r = o.offset.top - t.document.scrollTop(); i.position = { my: "left top", at: "left" + (a >= 0 ? "+" : "") + a + " top" + (r >= 0 ? "+" : "") + r, of: t.window }, e(this).removeClass("ui-dialog-dragging"), t._unblockFrames(), t._trigger("dragStop", s, n(o)) } }) }, _makeResizable: function () { var t = this, i = this.options, n = i.resizable, s = this.uiDialog.css("position"), o = "string" == typeof n ? n : "n,e,s,w,se,sw,ne,nw"; function a(e) { return { originalPosition: e.originalPosition, originalSize: e.originalSize, position: e.position, size: e.size } } this.uiDialog.resizable({ cancel: ".ui-dialog-content", containment: "document", alsoResize: this.element, maxWidth: i.maxWidth, maxHeight: i.maxHeight, minWidth: i.minWidth, minHeight: this._minHeight(), handles: o, start: function (i, n) { e(this).addClass("ui-dialog-resizing"), t._blockFrames(), t._trigger("resizeStart", i, a(n)) }, resize: function (e, i) { t._trigger("resize", e, a(i)) }, stop: function (n, s) { var o = t.uiDialog.offset(), r = o.left - t.document.scrollLeft(), l = o.top - t.document.scrollTop(); i.height = t.uiDialog.height(), i.width = t.uiDialog.width(), i.position = { my: "left top", at: "left" + (r >= 0 ? "+" : "") + r + " top" + (l >= 0 ? "+" : "") + l, of: t.window }, e(this).removeClass("ui-dialog-resizing"), t._unblockFrames(), t._trigger("resizeStop", n, a(s)) } }).css("position", s) }, _trackFocus: function () { this._on(this.widget(), { focusin: function (t) { this._makeFocusTarget(), this._focusedElement = e(t.target) } }) }, _makeFocusTarget: function () { this._untrackInstance(), this._trackingInstances().unshift(this) }, _untrackInstance: function () { var t = this._trackingInstances(), i = e.inArray(this, t); -1 !== i && t.splice(i, 1) }, _trackingInstances: function () { var e = this.document.data("ui-dialog-instances"); return e || (e = [], this.document.data("ui-dialog-instances", e)), e }, _minHeight: function () { var e = this.options; return "auto" === e.height ? e.minHeight : Math.min(e.minHeight, e.height) }, _position: function () { var e = this.uiDialog.is(":visible"); e || this.uiDialog.show(), this.uiDialog.position(this.options.position), e || this.uiDialog.hide() }, _setOptions: function (t) { var i = this, n = !1, s = {}; e.each(t, function (e, t) { i._setOption(e, t), e in i.sizeRelatedOptions && (n = !0), e in i.resizableRelatedOptions && (s[e] = t) }), n && (this._size(), this._position()), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", s) }, _setOption: function (e, t) { var i, n, s = this.uiDialog; "dialogClass" === e && s.removeClass(this.options.dialogClass).addClass(t), "disabled" !== e && (this._super(e, t), "appendTo" === e && this.uiDialog.appendTo(this._appendTo()), "buttons" === e && this._createButtons(), "closeText" === e && this.uiDialogTitlebarClose.button({ label: "" + t }), "draggable" === e && ((i = s.is(":data(ui-draggable)")) && !t && s.draggable("destroy"), !i && t && this._makeDraggable()), "position" === e && this._position(), "resizable" === e && ((n = s.is(":data(ui-resizable)")) && !t && s.resizable("destroy"), n && "string" == typeof t && s.resizable("option", "handles", t), n || !1 === t || this._makeResizable()), "title" === e && this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))) }, _size: function () { var e, t, i, n = this.options; this.element.show().css({ width: "auto", minHeight: 0, maxHeight: "none", height: 0 }), n.minWidth > n.width && (n.width = n.minWidth), e = this.uiDialog.css({ height: "auto", width: n.width }).outerHeight(), t = Math.max(0, n.minHeight - e), i = "number" == typeof n.maxHeight ? Math.max(0, n.maxHeight - e) : "none", "auto" === n.height ? this.element.css({ minHeight: t, maxHeight: i, height: "auto" }) : this.element.height(Math.max(0, n.height - e)), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight()) }, _blockFrames: function () { this.iframeBlocks = this.document.find("iframe").map(function () { var t = e(this); return e("<div>").css({ position: "absolute", width: t.outerWidth(), height: t.outerHeight() }).appendTo(t.parent()).offset(t.offset())[0] }) }, _unblockFrames: function () { this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks) }, _allowInteraction: function (t) { return !!e(t.target).closest(".ui-dialog").length || !!e(t.target).closest(".ui-datepicker").length }, _createOverlay: function () { if (this.options.modal) { var t = !0; this._delay(function () { t = !1 }), this.document.data("ui-dialog-overlays") || this._on(this.document, { focusin: function (e) { t || this._allowInteraction(e) || (e.preventDefault(), this._trackingInstances()[0]._focusTabbable()) } }), this.overlay = e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()), this._on(this.overlay, { mousedown: "_keepFocus" }), this.document.data("ui-dialog-overlays", (this.document.data("ui-dialog-overlays") || 0) + 1) } }, _destroyOverlay: function () { if (this.options.modal && this.overlay) { var e = this.document.data("ui-dialog-overlays") - 1; e ? this.document.data("ui-dialog-overlays", e) : this.document.unbind("focusin").removeData("ui-dialog-overlays"), this.overlay.remove(), this.overlay = null } } }); e.widget("ui.droppable", { version: "1.11.4", widgetEventPrefix: "drop", options: { accept: "*", activeClass: !1, addClasses: !0, greedy: !1, hoverClass: !1, scope: "default", tolerance: "intersect", activate: null, deactivate: null, drop: null, out: null, over: null }, _create: function () { var t, i = this.options, n = i.accept; this.isover = !1, this.isout = !0, this.accept = e.isFunction(n) ? n : function (e) { return e.is(n) }, this.proportions = function () { if (!arguments.length) return t || (t = { width: this.element[0].offsetWidth, height: this.element[0].offsetHeight }); t = arguments[0] }, this._addToManager(i.scope), i.addClasses && this.element.addClass("ui-droppable") }, _addToManager: function (t) { e.ui.ddmanager.droppables[t] = e.ui.ddmanager.droppables[t] || [], e.ui.ddmanager.droppables[t].push(this) }, _splice: function (e) { for (var t = 0; t < e.length; t++)e[t] === this && e.splice(t, 1) }, _destroy: function () { var t = e.ui.ddmanager.droppables[this.options.scope]; this._splice(t), this.element.removeClass("ui-droppable ui-droppable-disabled") }, _setOption: function (t, i) { if ("accept" === t) this.accept = e.isFunction(i) ? i : function (e) { return e.is(i) }; else if ("scope" === t) { var n = e.ui.ddmanager.droppables[this.options.scope]; this._splice(n), this._addToManager(i) } this._super(t, i) }, _activate: function (t) { var i = e.ui.ddmanager.current; this.options.activeClass && this.element.addClass(this.options.activeClass), i && this._trigger("activate", t, this.ui(i)) }, _deactivate: function (t) { var i = e.ui.ddmanager.current; this.options.activeClass && this.element.removeClass(this.options.activeClass), i && this._trigger("deactivate", t, this.ui(i)) }, _over: function (t) { var i = e.ui.ddmanager.current; i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass), this._trigger("over", t, this.ui(i))) }, _out: function (t) { var i = e.ui.ddmanager.current; i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("out", t, this.ui(i))) }, _drop: function (t, i) { var n = i || e.ui.ddmanager.current, s = !1; return !(!n || (n.currentItem || n.element)[0] === this.element[0]) && (this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function () { var i = e(this).droppable("instance"); if (i.options.greedy && !i.options.disabled && i.options.scope === n.options.scope && i.accept.call(i.element[0], n.currentItem || n.element) && e.ui.intersect(n, e.extend(i, { offset: i.element.offset() }), i.options.tolerance, t)) return s = !0, !1 }), !s && (!!this.accept.call(this.element[0], n.currentItem || n.element) && (this.options.activeClass && this.element.removeClass(this.options.activeClass), this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("drop", t, this.ui(n)), this.element))) }, ui: function (e) { return { draggable: e.currentItem || e.element, helper: e.helper, position: e.position, offset: e.positionAbs } } }), e.ui.intersect = function () { function e(e, t, i) { return e >= t && e < t + i } return function (t, i, n, s) { if (!i.offset) return !1; var o = (t.positionAbs || t.position.absolute).left + t.margins.left, a = (t.positionAbs || t.position.absolute).top + t.margins.top, r = o + t.helperProportions.width, l = a + t.helperProportions.height, c = i.offset.left, d = i.offset.top, h = c + i.proportions().width, u = d + i.proportions().height; switch (n) { case "fit": return c <= o && r <= h && d <= a && l <= u; case "intersect": return c < o + t.helperProportions.width / 2 && r - t.helperProportions.width / 2 < h && d < a + t.helperProportions.height / 2 && l - t.helperProportions.height / 2 < u; case "pointer": return e(s.pageY, d, i.proportions().height) && e(s.pageX, c, i.proportions().width); case "touch": return (a >= d && a <= u || l >= d && l <= u || a < d && l > u) && (o >= c && o <= h || r >= c && r <= h || o < c && r > h); default: return !1 } } }(), e.ui.ddmanager = { current: null, droppables: { default: [] }, prepareOffsets: function (t, i) { var n, s, o = e.ui.ddmanager.droppables[t.options.scope] || [], a = i ? i.type : null, r = (t.currentItem || t.element).find(":data(ui-droppable)").addBack(); e: for (n = 0; n < o.length; n++)if (!(o[n].options.disabled || t && !o[n].accept.call(o[n].element[0], t.currentItem || t.element))) { for (s = 0; s < r.length; s++)if (r[s] === o[n].element[0]) { o[n].proportions().height = 0; continue e } o[n].visible = "none" !== o[n].element.css("display"), o[n].visible && ("mousedown" === a && o[n]._activate.call(o[n], i), o[n].offset = o[n].element.offset(), o[n].proportions({ width: o[n].element[0].offsetWidth, height: o[n].element[0].offsetHeight })) } }, drop: function (t, i) { var n = !1; return e.each((e.ui.ddmanager.droppables[t.options.scope] || []).slice(), function () { this.options && (!this.options.disabled && this.visible && e.ui.intersect(t, this, this.options.tolerance, i) && (n = this._drop.call(this, i) || n), !this.options.disabled && this.visible && this.accept.call(this.element[0], t.currentItem || t.element) && (this.isout = !0, this.isover = !1, this._deactivate.call(this, i))) }), n }, dragStart: function (t, i) { t.element.parentsUntil("body").bind("scroll.droppable", function () { t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, i) }) }, drag: function (t, i) { t.options.refreshPositions && e.ui.ddmanager.prepareOffsets(t, i), e.each(e.ui.ddmanager.droppables[t.options.scope] || [], function () { if (!this.options.disabled && !this.greedyChild && this.visible) { var n, s, o, a = e.ui.intersect(t, this, this.options.tolerance, i), r = !a && this.isover ? "isout" : a && !this.isover ? "isover" : null; r && (this.options.greedy && (s = this.options.scope, (o = this.element.parents(":data(ui-droppable)").filter(function () { return e(this).droppable("instance").options.scope === s })).length && ((n = e(o[0]).droppable("instance")).greedyChild = "isover" === r)), n && "isover" === r && (n.isover = !1, n.isout = !0, n._out.call(n, i)), this[r] = !0, this["isout" === r ? "isover" : "isout"] = !1, this["isover" === r ? "_over" : "_out"].call(this, i), n && "isout" === r && (n.isout = !1, n.isover = !0, n._over.call(n, i))) } }) }, dragStop: function (t, i) { t.element.parentsUntil("body").unbind("scroll.droppable"), t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, i) } }; e.ui.droppable; var m, g = e; e.effects = { effect: {} }, function (e, t) { var i, n = /^([\-+])=\s*(\d+\.?\d*)/, s = [{ re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/, parse: function (e) { return [e[1], e[2], e[3], e[4]] } }, { re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/, parse: function (e) { return [2.55 * e[1], 2.55 * e[2], 2.55 * e[3], e[4]] } }, { re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/, parse: function (e) { return [parseInt(e[1], 16), parseInt(e[2], 16), parseInt(e[3], 16)] } }, { re: /#([a-f0-9])([a-f0-9])([a-f0-9])/, parse: function (e) { return [parseInt(e[1] + e[1], 16), parseInt(e[2] + e[2], 16), parseInt(e[3] + e[3], 16)] } }, { re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/, space: "hsla", parse: function (e) { return [e[1], e[2] / 100, e[3] / 100, e[4]] } }], o = e.Color = function (t, i, n, s) { return new e.Color.fn.parse(t, i, n, s) }, a = { rgba: { props: { red: { idx: 0, type: "byte" }, green: { idx: 1, type: "byte" }, blue: { idx: 2, type: "byte" } } }, hsla: { props: { hue: { idx: 0, type: "degrees" }, saturation: { idx: 1, type: "percent" }, lightness: { idx: 2, type: "percent" } } } }, r = { byte: { floor: !0, max: 255 }, percent: { max: 1 }, degrees: { mod: 360, floor: !0 } }, l = o.support = {}, c = e("<p>")[0], d = e.each; function h(e, t, i) { var n = r[t.type] || {}; return null == e ? i || !t.def ? null : t.def : (e = n.floor ? ~~e : parseFloat(e), isNaN(e) ? t.def : n.mod ? (e + n.mod) % n.mod : 0 > e ? 0 : n.max < e ? n.max : e) } function u(t) { var n = o(), r = n._rgba = []; return t = t.toLowerCase(), d(s, function (e, i) { var s, o = i.re.exec(t), l = o && i.parse(o), c = i.space || "rgba"; if (l) return s = n[c](l), n[a[c].cache] = s[a[c].cache], r = n._rgba = s._rgba, !1 }), r.length ? ("0,0,0,0" === r.join() && e.extend(r, i.transparent), n) : i[t] } function p(e, t, i) { return 6 * (i = (i + 1) % 1) < 1 ? e + (t - e) * i * 6 : 2 * i < 1 ? t : 3 * i < 2 ? e + (t - e) * (2 / 3 - i) * 6 : e } c.style.cssText = "background-color:rgba(1,1,1,.5)", l.rgba = c.style.backgroundColor.indexOf("rgba") > -1, d(a, function (e, t) { t.cache = "_" + e, t.props.alpha = { idx: 3, type: "percent", def: 1 } }), o.fn = e.extend(o.prototype, { parse: function (t, n, s, r) { if (void 0 === t) return this._rgba = [null, null, null, null], this; (t.jquery || t.nodeType) && (t = e(t).css(n), n = void 0); var l = this, c = e.type(t), p = this._rgba = []; return void 0 !== n && (t = [t, n, s, r], c = "array"), "string" === c ? this.parse(u(t) || i._default) : "array" === c ? (d(a.rgba.props, function (e, i) { p[i.idx] = h(t[i.idx], i) }), this) : "object" === c ? (d(a, t instanceof o ? function (e, i) { t[i.cache] && (l[i.cache] = t[i.cache].slice()) } : function (i, n) { var s = n.cache; d(n.props, function (e, i) { if (!l[s] && n.to) { if ("alpha" === e || null == t[e]) return; l[s] = n.to(l._rgba) } l[s][i.idx] = h(t[e], i, !0) }), l[s] && e.inArray(null, l[s].slice(0, 3)) < 0 && (l[s][3] = 1, n.from && (l._rgba = n.from(l[s]))) }), this) : void 0 }, is: function (e) { var t = o(e), i = !0, n = this; return d(a, function (e, s) { var o, a = t[s.cache]; return a && (o = n[s.cache] || s.to && s.to(n._rgba) || [], d(s.props, function (e, t) { if (null != a[t.idx]) return i = a[t.idx] === o[t.idx] })), i }), i }, _space: function () { var e = [], t = this; return d(a, function (i, n) { t[n.cache] && e.push(i) }), e.pop() }, transition: function (e, t) { var i = o(e), n = i._space(), s = a[n], l = 0 === this.alpha() ? o("transparent") : this, c = l[s.cache] || s.to(l._rgba), u = c.slice(); return i = i[s.cache], d(s.props, function (e, n) { var s = n.idx, o = c[s], a = i[s], l = r[n.type] || {}; null !== a && (null === o ? u[s] = a : (l.mod && (a - o > l.mod / 2 ? o += l.mod : o - a > l.mod / 2 && (o -= l.mod)), u[s] = h((a - o) * t + o, n))) }), this[n](u) }, blend: function (t) { if (1 === this._rgba[3]) return this; var i = this._rgba.slice(), n = i.pop(), s = o(t)._rgba; return o(e.map(i, function (e, t) { return (1 - n) * s[t] + n * e })) }, toRgbaString: function () { var t = "rgba(", i = e.map(this._rgba, function (e, t) { return null == e ? t > 2 ? 1 : 0 : e }); return 1 === i[3] && (i.pop(), t = "rgb("), t + i.join() + ")" }, toHslaString: function () { var t = "hsla(", i = e.map(this.hsla(), function (e, t) { return null == e && (e = t > 2 ? 1 : 0), t && t < 3 && (e = Math.round(100 * e) + "%"), e }); return 1 === i[3] && (i.pop(), t = "hsl("), t + i.join() + ")" }, toHexString: function (t) { var i = this._rgba.slice(), n = i.pop(); return t && i.push(~~(255 * n)), "#" + e.map(i, function (e) { return 1 === (e = (e || 0).toString(16)).length ? "0" + e : e }).join("") }, toString: function () { return 0 === this._rgba[3] ? "transparent" : this.toRgbaString() } }), o.fn.parse.prototype = o.fn, a.hsla.to = function (e) { if (null == e[0] || null == e[1] || null == e[2]) return [null, null, null, e[3]]; var t, i, n = e[0] / 255, s = e[1] / 255, o = e[2] / 255, a = e[3], r = Math.max(n, s, o), l = Math.min(n, s, o), c = r - l, d = r + l, h = .5 * d; return t = l === r ? 0 : n === r ? 60 * (s - o) / c + 360 : s === r ? 60 * (o - n) / c + 120 : 60 * (n - s) / c + 240, i = 0 === c ? 0 : h <= .5 ? c / d : c / (2 - d), [Math.round(t) % 360, i, h, null == a ? 1 : a] }, a.hsla.from = function (e) { if (null == e[0] || null == e[1] || null == e[2]) return [null, null, null, e[3]]; var t = e[0] / 360, i = e[1], n = e[2], s = e[3], o = n <= .5 ? n * (1 + i) : n + i - n * i, a = 2 * n - o; return [Math.round(255 * p(a, o, t + 1 / 3)), Math.round(255 * p(a, o, t)), Math.round(255 * p(a, o, t - 1 / 3)), s] }, d(a, function (t, i) { var s = i.props, a = i.cache, r = i.to, l = i.from; o.fn[t] = function (t) { if (r && !this[a] && (this[a] = r(this._rgba)), void 0 === t) return this[a].slice(); var i, n = e.type(t), c = "array" === n || "object" === n ? t : arguments, u = this[a].slice(); return d(s, function (e, t) { var i = c["object" === n ? e : t.idx]; null == i && (i = u[t.idx]), u[t.idx] = h(i, t) }), l ? ((i = o(l(u)))[a] = u, i) : o(u) }, d(s, function (i, s) { o.fn[i] || (o.fn[i] = function (o) { var a, r = e.type(o), l = "alpha" === i ? this._hsla ? "hsla" : "rgba" : t, c = this[l](), d = c[s.idx]; return "undefined" === r ? d : ("function" === r && (o = o.call(this, d), r = e.type(o)), null == o && s.empty ? this : ("string" === r && (a = n.exec(o)) && (o = d + parseFloat(a[2]) * ("+" === a[1] ? 1 : -1)), c[s.idx] = o, this[l](c))) }) }) }), o.hook = function (t) { var i = t.split(" "); d(i, function (t, i) { e.cssHooks[i] = { set: function (t, n) { var s, a, r = ""; if ("transparent" !== n && ("string" !== e.type(n) || (s = u(n)))) { if (n = o(s || n), !l.rgba && 1 !== n._rgba[3]) { for (a = "backgroundColor" === i ? t.parentNode : t; ("" === r || "transparent" === r) && a && a.style;)try { r = e.css(a, "backgroundColor"), a = a.parentNode } catch (e) { } n = n.blend(r && "transparent" !== r ? r : "_default") } n = n.toRgbaString() } try { t.style[i] = n } catch (e) { } } }, e.fx.step[i] = function (t) { t.colorInit || (t.start = o(t.elem, i), t.end = o(t.end), t.colorInit = !0), e.cssHooks[i].set(t.elem, t.start.transition(t.end, t.pos)) } }) }, o.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"), e.cssHooks.borderColor = { expand: function (e) { var t = {}; return d(["Top", "Right", "Bottom", "Left"], function (i, n) { t["border" + n + "Color"] = e }), t } }, i = e.Color.names = { aqua: "#00ffff", black: "#000000", blue: "#0000ff", fuchsia: "#ff00ff", gray: "#808080", green: "#008000", lime: "#00ff00", maroon: "#800000", navy: "#000080", olive: "#808000", purple: "#800080", red: "#ff0000", silver: "#c0c0c0", teal: "#008080", white: "#ffffff", yellow: "#ffff00", transparent: [null, null, null, 0], _default: "#ffffff" } }(g), function () { var t, i = ["add", "remove", "toggle"], n = { border: 1, borderBottom: 1, borderColor: 1, borderLeft: 1, borderRight: 1, borderTop: 1, borderWidth: 1, margin: 1, padding: 1 }; function s(t) { var i, n, s = t.ownerDocument.defaultView ? t.ownerDocument.defaultView.getComputedStyle(t, null) : t.currentStyle, o = {}; if (s && s.length && s[0] && s[s[0]]) for (n = s.length; n--;)"string" == typeof s[i = s[n]] && (o[e.camelCase(i)] = s[i]); else for (i in s) "string" == typeof s[i] && (o[i] = s[i]); return o } e.each(["borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle"], function (t, i) { e.fx.step[i] = function (e) { ("none" !== e.end && !e.setAttr || 1 === e.pos && !e.setAttr) && (g.style(e.elem, i, e.end), e.setAttr = !0) } }), e.fn.addBack || (e.fn.addBack = function (e) { return this.add(null == e ? this.prevObject : this.prevObject.filter(e)) }), e.effects.animateClass = function (t, o, a, r) { var l = e.speed(o, a, r); return this.queue(function () { var o, a = e(this), r = a.attr("class") || "", c = l.children ? a.find("*").addBack() : a; c = c.map(function () { return { el: e(this), start: s(this) } }), (o = function () { e.each(i, function (e, i) { t[i] && a[i + "Class"](t[i]) }) })(), c = c.map(function () { return this.end = s(this.el[0]), this.diff = function (t, i) { var s, o, a = {}; for (s in i) o = i[s], t[s] !== o && (n[s] || !e.fx.step[s] && isNaN(parseFloat(o)) || (a[s] = o)); return a }(this.start, this.end), this }), a.attr("class", r), c = c.map(function () { var t = this, i = e.Deferred(), n = e.extend({}, l, { queue: !1, complete: function () { i.resolve(t) } }); return this.el.animate(this.diff, n), i.promise() }), e.when.apply(e, c.get()).done(function () { o(), e.each(arguments, function () { var t = this.el; e.each(this.diff, function (e) { t.css(e, "") }) }), l.complete.call(a[0]) }) }) }, e.fn.extend({ addClass: (t = e.fn.addClass, function (i, n, s, o) { return n ? e.effects.animateClass.call(this, { add: i }, n, s, o) : t.apply(this, arguments) }), removeClass: function (t) { return function (i, n, s, o) { return arguments.length > 1 ? e.effects.animateClass.call(this, { remove: i }, n, s, o) : t.apply(this, arguments) } }(e.fn.removeClass), toggleClass: function (t) { return function (i, n, s, o, a) { return "boolean" == typeof n || void 0 === n ? s ? e.effects.animateClass.call(this, n ? { add: i } : { remove: i }, s, o, a) : t.apply(this, arguments) : e.effects.animateClass.call(this, { toggle: i }, n, s, o) } }(e.fn.toggleClass), switchClass: function (t, i, n, s, o) { return e.effects.animateClass.call(this, { add: i, remove: t }, n, s, o) } }) }(), function () { function t(t, i, n, s) { return e.isPlainObject(t) && (i = t, t = t.effect), t = { effect: t }, null == i && (i = {}), e.isFunction(i) && (s = i, n = null, i = {}), ("number" == typeof i || e.fx.speeds[i]) && (s = n, n = i, i = {}), e.isFunction(n) && (s = n, n = null), i && e.extend(t, i), n = n || i.duration, t.duration = e.fx.off ? 0 : "number" == typeof n ? n : n in e.fx.speeds ? e.fx.speeds[n] : e.fx.speeds._default, t.complete = s || i.complete, t } function i(t) { return !(t && "number" != typeof t && !e.fx.speeds[t]) || ("string" == typeof t && !e.effects.effect[t] || (!!e.isFunction(t) || "object" == typeof t && !t.effect)) } var n; e.extend(e.effects, { version: "1.11.4", save: function (e, t) { for (var i = 0; i < t.length; i++)null !== t[i] && e.data("ui-effects-" + t[i], e[0].style[t[i]]) }, restore: function (e, t) { var i, n; for (n = 0; n < t.length; n++)null !== t[n] && (void 0 === (i = e.data("ui-effects-" + t[n])) && (i = ""), e.css(t[n], i)) }, setMode: function (e, t) { return "toggle" === t && (t = e.is(":hidden") ? "show" : "hide"), t }, getBaseline: function (e, t) { var i, n; switch (e[0]) { case "top": i = 0; break; case "middle": i = .5; break; case "bottom": i = 1; break; default: i = e[0] / t.height }switch (e[1]) { case "left": n = 0; break; case "center": n = .5; break; case "right": n = 1; break; default: n = e[1] / t.width }return { x: n, y: i } }, createWrapper: function (t) { if (t.parent().is(".ui-effects-wrapper")) return t.parent(); var i = { width: t.outerWidth(!0), height: t.outerHeight(!0), float: t.css("float") }, n = e("<div></div>").addClass("ui-effects-wrapper").css({ fontSize: "100%", background: "transparent", border: "none", margin: 0, padding: 0 }), s = { width: t.width(), height: t.height() }, o = document.activeElement; try { o.id } catch (e) { o = document.body } return t.wrap(n), (t[0] === o || e.contains(t[0], o)) && e(o).focus(), n = t.parent(), "static" === t.css("position") ? (n.css({ position: "relative" }), t.css({ position: "relative" })) : (e.extend(i, { position: t.css("position"), zIndex: t.css("z-index") }), e.each(["top", "left", "bottom", "right"], function (e, n) { i[n] = t.css(n), isNaN(parseInt(i[n], 10)) && (i[n] = "auto") }), t.css({ position: "relative", top: 0, left: 0, right: "auto", bottom: "auto" })), t.css(s), n.css(i).show() }, removeWrapper: function (t) { var i = document.activeElement; return t.parent().is(".ui-effects-wrapper") && (t.parent().replaceWith(t), (t[0] === i || e.contains(t[0], i)) && e(i).focus()), t }, setTransition: function (t, i, n, s) { return s = s || {}, e.each(i, function (e, i) { var o = t.cssUnit(i); o[0] > 0 && (s[i] = o[0] * n + o[1]) }), s } }), e.fn.extend({ effect: function () { var i = t.apply(this, arguments), n = i.mode, s = i.queue, o = e.effects.effect[i.effect]; if (e.fx.off || !o) return n ? this[n](i.duration, i.complete) : this.each(function () { i.complete && i.complete.call(this) }); function a(t) { var n = e(this), s = i.complete, a = i.mode; function r() { e.isFunction(s) && s.call(n[0]), e.isFunction(t) && t() } (n.is(":hidden") ? "hide" === a : "show" === a) ? (n[a](), r()) : o.call(n[0], i, r) } return !1 === s ? this.each(a) : this.queue(s || "fx", a) }, show: (n = e.fn.show, function (e) { if (i(e)) return n.apply(this, arguments); var s = t.apply(this, arguments); return s.mode = "show", this.effect.call(this, s) }), hide: function (e) { return function (n) { if (i(n)) return e.apply(this, arguments); var s = t.apply(this, arguments); return s.mode = "hide", this.effect.call(this, s) } }(e.fn.hide), toggle: function (e) { return function (n) { if (i(n) || "boolean" == typeof n) return e.apply(this, arguments); var s = t.apply(this, arguments); return s.mode = "toggle", this.effect.call(this, s) } }(e.fn.toggle), cssUnit: function (t) { var i = this.css(t), n = []; return e.each(["em", "px", "%", "pt"], function (e, t) { i.indexOf(t) > 0 && (n = [parseFloat(i), t]) }), n } }) }(), m = {}, e.each(["Quad", "Cubic", "Quart", "Quint", "Expo"], function (e, t) { m[t] = function (t) { return Math.pow(t, e + 2) } }), e.extend(m, { Sine: function (e) { return 1 - Math.cos(e * Math.PI / 2) }, Circ: function (e) { return 1 - Math.sqrt(1 - e * e) }, Elastic: function (e) { return 0 === e || 1 === e ? e : -Math.pow(2, 8 * (e - 1)) * Math.sin((80 * (e - 1) - 7.5) * Math.PI / 15) }, Back: function (e) { return e * e * (3 * e - 2) }, Bounce: function (e) { for (var t, i = 4; e < ((t = Math.pow(2, --i)) - 1) / 11;); return 1 / Math.pow(4, 3 - i) - 7.5625 * Math.pow((3 * t - 2) / 22 - e, 2) } }), e.each(m, function (t, i) { e.easing["easeIn" + t] = i, e.easing["easeOut" + t] = function (e) { return 1 - i(1 - e) }, e.easing["easeInOut" + t] = function (e) { return e < .5 ? i(2 * e) / 2 : 1 - i(-2 * e + 2) / 2 } }); e.effects, e.effects.effect.blind = function (t, i) { var n, s, o, a = e(this), r = ["position", "top", "bottom", "left", "right", "height", "width"], l = e.effects.setMode(a, t.mode || "hide"), c = t.direction || "up", d = /up|down|vertical/.test(c), h = d ? "height" : "width", u = d ? "top" : "left", p = /up|left|vertical|horizontal/.test(c), f = {}, m = "show" === l; a.parent().is(".ui-effects-wrapper") ? e.effects.save(a.parent(), r) : e.effects.save(a, r), a.show(), s = (n = e.effects.createWrapper(a).css({ overflow: "hidden" }))[h](), o = parseFloat(n.css(u)) || 0, f[h] = m ? s : 0, p || (a.css(d ? "bottom" : "right", 0).css(d ? "top" : "left", "auto").css({ position: "absolute" }), f[u] = m ? o : s + o), m && (n.css(h, 0), p || n.css(u, o + s)), n.animate(f, { duration: t.duration, easing: t.easing, queue: !1, complete: function () { "hide" === l && a.hide(), e.effects.restore(a, r), e.effects.removeWrapper(a), i() } }) }, e.effects.effect.bounce = function (t, i) { var n, s, o, a = e(this), r = ["position", "top", "bottom", "left", "right", "height", "width"], l = e.effects.setMode(a, t.mode || "effect"), c = "hide" === l, d = "show" === l, h = t.direction || "up", u = t.distance, p = t.times || 5, f = 2 * p + (d || c ? 1 : 0), m = t.duration / f, g = t.easing, v = "up" === h || "down" === h ? "top" : "left", b = "up" === h || "left" === h, y = a.queue(), w = y.length; for ((d || c) && r.push("opacity"), e.effects.save(a, r), a.show(), e.effects.createWrapper(a), u || (u = a["top" === v ? "outerHeight" : "outerWidth"]() / 3), d && ((o = { opacity: 1 })[v] = 0, a.css("opacity", 0).css(v, b ? 2 * -u : 2 * u).animate(o, m, g)), c && (u /= Math.pow(2, p - 1)), (o = {})[v] = 0, n = 0; n < p; n++)(s = {})[v] = (b ? "-=" : "+=") + u, a.animate(s, m, g).animate(o, m, g), u = c ? 2 * u : u / 2; c && ((s = { opacity: 0 })[v] = (b ? "-=" : "+=") + u, a.animate(s, m, g)), a.queue(function () { c && a.hide(), e.effects.restore(a, r), e.effects.removeWrapper(a), i() }), w > 1 && y.splice.apply(y, [1, 0].concat(y.splice(w, f + 1))), a.dequeue() }, e.effects.effect.clip = function (t, i) { var n, s, o, a = e(this), r = ["position", "top", "bottom", "left", "right", "height", "width"], l = "show" === e.effects.setMode(a, t.mode || "hide"), c = "vertical" === (t.direction || "vertical"), d = c ? "height" : "width", h = c ? "top" : "left", u = {}; e.effects.save(a, r), a.show(), n = e.effects.createWrapper(a).css({ overflow: "hidden" }), o = (s = "IMG" === a[0].tagName ? n : a)[d](), l && (s.css(d, 0), s.css(h, o / 2)), u[d] = l ? o : 0, u[h] = l ? 0 : o / 2, s.animate(u, { queue: !1, duration: t.duration, easing: t.easing, complete: function () { l || a.hide(), e.effects.restore(a, r), e.effects.removeWrapper(a), i() } }) }, e.effects.effect.drop = function (t, i) { var n, s = e(this), o = ["position", "top", "bottom", "left", "right", "opacity", "height", "width"], a = e.effects.setMode(s, t.mode || "hide"), r = "show" === a, l = t.direction || "left", c = "up" === l || "down" === l ? "top" : "left", d = "up" === l || "left" === l ? "pos" : "neg", h = { opacity: r ? 1 : 0 }; e.effects.save(s, o), s.show(), e.effects.createWrapper(s), n = t.distance || s["top" === c ? "outerHeight" : "outerWidth"](!0) / 2, r && s.css("opacity", 0).css(c, "pos" === d ? -n : n), h[c] = (r ? "pos" === d ? "+=" : "-=" : "pos" === d ? "-=" : "+=") + n, s.animate(h, { queue: !1, duration: t.duration, easing: t.easing, complete: function () { "hide" === a && s.hide(), e.effects.restore(s, o), e.effects.removeWrapper(s), i() } }) }, e.effects.effect.explode = function (t, i) { var n, s, o, a, r, l, c = t.pieces ? Math.round(Math.sqrt(t.pieces)) : 3, d = c, h = e(this), u = "show" === e.effects.setMode(h, t.mode || "hide"), p = h.show().css("visibility", "hidden").offset(), f = Math.ceil(h.outerWidth() / d), m = Math.ceil(h.outerHeight() / c), g = []; function v() { g.push(this), g.length === c * d && function () { h.css({ visibility: "visible" }), e(g).remove(), u || h.hide(); i() }() } for (n = 0; n < c; n++)for (a = p.top + n * m, l = n - (c - 1) / 2, s = 0; s < d; s++)o = p.left + s * f, r = s - (d - 1) / 2, h.clone().appendTo("body").wrap("<div></div>").css({ position: "absolute", visibility: "visible", left: -s * f, top: -n * m }).parent().addClass("ui-effects-explode").css({ position: "absolute", overflow: "hidden", width: f, height: m, left: o + (u ? r * f : 0), top: a + (u ? l * m : 0), opacity: u ? 0 : 1 }).animate({ left: o + (u ? 0 : r * f), top: a + (u ? 0 : l * m), opacity: u ? 1 : 0 }, t.duration || 500, t.easing, v) }, e.effects.effect.fade = function (t, i) { var n = e(this), s = e.effects.setMode(n, t.mode || "toggle"); n.animate({ opacity: s }, { queue: !1, duration: t.duration, easing: t.easing, complete: i }) }, e.effects.effect.fold = function (t, i) { var n, s, o = e(this), a = ["position", "top", "bottom", "left", "right", "height", "width"], r = e.effects.setMode(o, t.mode || "hide"), l = "show" === r, c = "hide" === r, d = t.size || 15, h = /([0-9]+)%/.exec(d), u = !!t.horizFirst, p = l !== u, f = p ? ["width", "height"] : ["height", "width"], m = t.duration / 2, g = {}, v = {}; e.effects.save(o, a), o.show(), n = e.effects.createWrapper(o).css({ overflow: "hidden" }), s = p ? [n.width(), n.height()] : [n.height(), n.width()], h && (d = parseInt(h[1], 10) / 100 * s[c ? 0 : 1]), l && n.css(u ? { height: 0, width: d } : { height: d, width: 0 }), g[f[0]] = l ? s[0] : d, v[f[1]] = l ? s[1] : 0, n.animate(g, m, t.easing).animate(v, m, t.easing, function () { c && o.hide(), e.effects.restore(o, a), e.effects.removeWrapper(o), i() }) }, e.effects.effect.highlight = function (t, i) { var n = e(this), s = ["backgroundImage", "backgroundColor", "opacity"], o = e.effects.setMode(n, t.mode || "show"), a = { backgroundColor: n.css("backgroundColor") }; "hide" === o && (a.opacity = 0), e.effects.save(n, s), n.show().css({ backgroundImage: "none", backgroundColor: t.color || "#ffff99" }).animate(a, { queue: !1, duration: t.duration, easing: t.easing, complete: function () { "hide" === o && n.hide(), e.effects.restore(n, s), i() } }) }, e.effects.effect.size = function (t, i) { var n, s, o, a = e(this), r = ["position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity"], l = ["width", "height", "overflow"], c = ["fontSize"], d = ["borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom"], h = ["borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight"], u = e.effects.setMode(a, t.mode || "effect"), p = t.restore || "effect" !== u, f = t.scale || "both", m = t.origin || ["middle", "center"], g = a.css("position"), v = p ? r : ["position", "top", "bottom", "left", "right", "overflow", "opacity"], b = { height: 0, width: 0, outerHeight: 0, outerWidth: 0 }; "show" === u && a.show(), n = { height: a.height(), width: a.width(), outerHeight: a.outerHeight(), outerWidth: a.outerWidth() }, "toggle" === t.mode && "show" === u ? (a.from = t.to || b, a.to = t.from || n) : (a.from = t.from || ("show" === u ? b : n), a.to = t.to || ("hide" === u ? b : n)), o = { from: { y: a.from.height / n.height, x: a.from.width / n.width }, to: { y: a.to.height / n.height, x: a.to.width / n.width } }, "box" !== f && "both" !== f || (o.from.y !== o.to.y && (v = v.concat(d), a.from = e.effects.setTransition(a, d, o.from.y, a.from), a.to = e.effects.setTransition(a, d, o.to.y, a.to)), o.from.x !== o.to.x && (v = v.concat(h), a.from = e.effects.setTransition(a, h, o.from.x, a.from), a.to = e.effects.setTransition(a, h, o.to.x, a.to))), "content" !== f && "both" !== f || o.from.y !== o.to.y && (v = v.concat(c).concat(l), a.from = e.effects.setTransition(a, c, o.from.y, a.from), a.to = e.effects.setTransition(a, c, o.to.y, a.to)), e.effects.save(a, v), a.show(), e.effects.createWrapper(a), a.css("overflow", "hidden").css(a.from), m && (s = e.effects.getBaseline(m, n), a.from.top = (n.outerHeight - a.outerHeight()) * s.y, a.from.left = (n.outerWidth - a.outerWidth()) * s.x, a.to.top = (n.outerHeight - a.to.outerHeight) * s.y, a.to.left = (n.outerWidth - a.to.outerWidth) * s.x), a.css(a.from), "content" !== f && "both" !== f || (d = d.concat(["marginTop", "marginBottom"]).concat(c), h = h.concat(["marginLeft", "marginRight"]), l = r.concat(d).concat(h), a.find("*[width]").each(function () { var i = e(this), n = i.height(), s = i.width(), a = i.outerHeight(), r = i.outerWidth(); p && e.effects.save(i, l), i.from = { height: n * o.from.y, width: s * o.from.x, outerHeight: a * o.from.y, outerWidth: r * o.from.x }, i.to = { height: n * o.to.y, width: s * o.to.x, outerHeight: n * o.to.y, outerWidth: s * o.to.x }, o.from.y !== o.to.y && (i.from = e.effects.setTransition(i, d, o.from.y, i.from), i.to = e.effects.setTransition(i, d, o.to.y, i.to)), o.from.x !== o.to.x && (i.from = e.effects.setTransition(i, h, o.from.x, i.from), i.to = e.effects.setTransition(i, h, o.to.x, i.to)), i.css(i.from), i.animate(i.to, t.duration, t.easing, function () { p && e.effects.restore(i, l) }) })), a.animate(a.to, { queue: !1, duration: t.duration, easing: t.easing, complete: function () { 0 === a.to.opacity && a.css("opacity", a.from.opacity), "hide" === u && a.hide(), e.effects.restore(a, v), p || ("static" === g ? a.css({ position: "relative", top: a.to.top, left: a.to.left }) : e.each(["top", "left"], function (e, t) { a.css(t, function (t, i) { var n = parseInt(i, 10), s = e ? a.to.left : a.to.top; return "auto" === i ? s + "px" : n + s + "px" }) })), e.effects.removeWrapper(a), i() } }) }, e.effects.effect.scale = function (t, i) { var n = e(this), s = e.extend(!0, {}, t), o = e.effects.setMode(n, t.mode || "effect"), a = parseInt(t.percent, 10) || (0 === parseInt(t.percent, 10) ? 0 : "hide" === o ? 0 : 100), r = t.direction || "both", l = t.origin, c = { height: n.height(), width: n.width(), outerHeight: n.outerHeight(), outerWidth: n.outerWidth() }, d = "horizontal" !== r ? a / 100 : 1, h = "vertical" !== r ? a / 100 : 1; s.effect = "size", s.queue = !1, s.complete = i, "effect" !== o && (s.origin = l || ["middle", "center"], s.restore = !0), s.from = t.from || ("show" === o ? { height: 0, width: 0, outerHeight: 0, outerWidth: 0 } : c), s.to = { height: c.height * d, width: c.width * h, outerHeight: c.outerHeight * d, outerWidth: c.outerWidth * h }, s.fade && ("show" === o && (s.from.opacity = 0, s.to.opacity = 1), "hide" === o && (s.from.opacity = 1, s.to.opacity = 0)), n.effect(s) }, e.effects.effect.puff = function (t, i) { var n = e(this), s = e.effects.setMode(n, t.mode || "hide"), o = "hide" === s, a = parseInt(t.percent, 10) || 150, r = a / 100, l = { height: n.height(), width: n.width(), outerHeight: n.outerHeight(), outerWidth: n.outerWidth() }; e.extend(t, { effect: "scale", queue: !1, fade: !0, mode: s, complete: i, percent: o ? a : 100, from: o ? l : { height: l.height * r, width: l.width * r, outerHeight: l.outerHeight * r, outerWidth: l.outerWidth * r } }), n.effect(t) }, e.effects.effect.pulsate = function (t, i) { var n, s = e(this), o = e.effects.setMode(s, t.mode || "show"), a = "show" === o, r = "hide" === o, l = a || "hide" === o, c = 2 * (t.times || 5) + (l ? 1 : 0), d = t.duration / c, h = 0, u = s.queue(), p = u.length; for (!a && s.is(":visible") || (s.css("opacity", 0).show(), h = 1), n = 1; n < c; n++)s.animate({ opacity: h }, d, t.easing), h = 1 - h; s.animate({ opacity: h }, d, t.easing), s.queue(function () { r && s.hide(), i() }), p > 1 && u.splice.apply(u, [1, 0].concat(u.splice(p, c + 1))), s.dequeue() }, e.effects.effect.shake = function (t, i) { var n, s = e(this), o = ["position", "top", "bottom", "left", "right", "height", "width"], a = e.effects.setMode(s, t.mode || "effect"), r = t.direction || "left", l = t.distance || 20, c = t.times || 3, d = 2 * c + 1, h = Math.round(t.duration / d), u = "up" === r || "down" === r ? "top" : "left", p = "up" === r || "left" === r, f = {}, m = {}, g = {}, v = s.queue(), b = v.length; for (e.effects.save(s, o), s.show(), e.effects.createWrapper(s), f[u] = (p ? "-=" : "+=") + l, m[u] = (p ? "+=" : "-=") + 2 * l, g[u] = (p ? "-=" : "+=") + 2 * l, s.animate(f, h, t.easing), n = 1; n < c; n++)s.animate(m, h, t.easing).animate(g, h, t.easing); s.animate(m, h, t.easing).animate(f, h / 2, t.easing).queue(function () { "hide" === a && s.hide(), e.effects.restore(s, o), e.effects.removeWrapper(s), i() }), b > 1 && v.splice.apply(v, [1, 0].concat(v.splice(b, d + 1))), s.dequeue() }, e.effects.effect.slide = function (t, i) { var n, s = e(this), o = ["position", "top", "bottom", "left", "right", "width", "height"], a = e.effects.setMode(s, t.mode || "show"), r = "show" === a, l = t.direction || "left", c = "up" === l || "down" === l ? "top" : "left", d = "up" === l || "left" === l, h = {}; e.effects.save(s, o), s.show(), n = t.distance || s["top" === c ? "outerHeight" : "outerWidth"](!0), e.effects.createWrapper(s).css({ overflow: "hidden" }), r && s.css(c, d ? isNaN(n) ? "-" + n : -n : n), h[c] = (r ? d ? "+=" : "-=" : d ? "-=" : "+=") + n, s.animate(h, { queue: !1, duration: t.duration, easing: t.easing, complete: function () { "hide" === a && s.hide(), e.effects.restore(s, o), e.effects.removeWrapper(s), i() } }) }, e.effects.effect.transfer = function (t, i) { var n = e(this), s = e(t.to), o = "fixed" === s.css("position"), a = e("body"), r = o ? a.scrollTop() : 0, l = o ? a.scrollLeft() : 0, c = s.offset(), d = { top: c.top - r, left: c.left - l, height: s.innerHeight(), width: s.innerWidth() }, h = n.offset(), u = e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({ top: h.top - r, left: h.left - l, height: n.innerHeight(), width: n.innerWidth(), position: o ? "fixed" : "absolute" }).animate(d, t.duration, t.easing, function () { u.remove(), i() }) }, e.widget("ui.progressbar", { version: "1.11.4", options: { max: 100, value: 0, change: null, complete: null }, min: 0, _create: function () { this.oldValue = this.options.value = this._constrainedValue(), this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({ role: "progressbar", "aria-valuemin": this.min }), this.valueDiv = e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element), this._refreshValue() }, _destroy: function () { this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"), this.valueDiv.remove() }, value: function (e) { if (void 0 === e) return this.options.value; this.options.value = this._constrainedValue(e), this._refreshValue() }, _constrainedValue: function (e) { return void 0 === e && (e = this.options.value), this.indeterminate = !1 === e, "number" != typeof e && (e = 0), !this.indeterminate && Math.min(this.options.max, Math.max(this.min, e)) }, _setOptions: function (e) { var t = e.value; delete e.value, this._super(e), this.options.value = this._constrainedValue(t), this._refreshValue() }, _setOption: function (e, t) { "max" === e && (t = Math.max(this.min, t)), "disabled" === e && this.element.toggleClass("ui-state-disabled", !!t).attr("aria-disabled", t), this._super(e, t) }, _percentage: function () { return this.indeterminate ? 100 : 100 * (this.options.value - this.min) / (this.options.max - this.min) }, _refreshValue: function () { var t = this.options.value, i = this._percentage(); this.valueDiv.toggle(this.indeterminate || t > this.min).toggleClass("ui-corner-right", t === this.options.max).width(i.toFixed(0) + "%"), this.element.toggleClass("ui-progressbar-indeterminate", this.indeterminate), this.indeterminate ? (this.element.removeAttr("aria-valuenow"), this.overlayDiv || (this.overlayDiv = e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))) : (this.element.attr({ "aria-valuemax": this.options.max, "aria-valuenow": t }), this.overlayDiv && (this.overlayDiv.remove(), this.overlayDiv = null)), this.oldValue !== t && (this.oldValue = t, this._trigger("change")), t === this.options.max && this._trigger("complete") } }), e.widget("ui.selectable", e.ui.mouse, { version: "1.11.4", options: { appendTo: "body", autoRefresh: !0, distance: 0, filter: "*", tolerance: "touch", selected: null, selecting: null, start: null, stop: null, unselected: null, unselecting: null }, _create: function () { var t, i = this; this.element.addClass("ui-selectable"), this.dragged = !1, this.refresh = function () { (t = e(i.options.filter, i.element[0])).addClass("ui-selectee"), t.each(function () { var t = e(this), i = t.offset(); e.data(this, "selectable-item", { element: this, $element: t, left: i.left, top: i.top, right: i.left + t.outerWidth(), bottom: i.top + t.outerHeight(), startselected: !1, selected: t.hasClass("ui-selected"), selecting: t.hasClass("ui-selecting"), unselecting: t.hasClass("ui-unselecting") }) }) }, this.refresh(), this.selectees = t.addClass("ui-selectee"), this._mouseInit(), this.helper = e("<div class='ui-selectable-helper'></div>") }, _destroy: function () { this.selectees.removeClass("ui-selectee").removeData("selectable-item"), this.element.removeClass("ui-selectable ui-selectable-disabled"), this._mouseDestroy() }, _mouseStart: function (t) { var i = this, n = this.options; this.opos = [t.pageX, t.pageY], this.options.disabled || (this.selectees = e(n.filter, this.element[0]), this._trigger("start", t), e(n.appendTo).append(this.helper), this.helper.css({ left: t.pageX, top: t.pageY, width: 0, height: 0 }), n.autoRefresh && this.refresh(), this.selectees.filter(".ui-selected").each(function () { var n = e.data(this, "selectable-item"); n.startselected = !0, t.metaKey || t.ctrlKey || (n.$element.removeClass("ui-selected"), n.selected = !1, n.$element.addClass("ui-unselecting"), n.unselecting = !0, i._trigger("unselecting", t, { unselecting: n.element })) }), e(t.target).parents().addBack().each(function () { var n, s = e.data(this, "selectable-item"); if (s) return n = !t.metaKey && !t.ctrlKey || !s.$element.hasClass("ui-selected"), s.$element.removeClass(n ? "ui-unselecting" : "ui-selected").addClass(n ? "ui-selecting" : "ui-unselecting"), s.unselecting = !n, s.selecting = n, s.selected = n, n ? i._trigger("selecting", t, { selecting: s.element }) : i._trigger("unselecting", t, { unselecting: s.element }), !1 })) }, _mouseDrag: function (t) { if (this.dragged = !0, !this.options.disabled) { var i, n = this, s = this.options, o = this.opos[0], a = this.opos[1], r = t.pageX, l = t.pageY; return o > r && (i = r, r = o, o = i), a > l && (i = l, l = a, a = i), this.helper.css({ left: o, top: a, width: r - o, height: l - a }), this.selectees.each(function () { var i = e.data(this, "selectable-item"), c = !1; i && i.element !== n.element[0] && ("touch" === s.tolerance ? c = !(i.left > r || i.right < o || i.top > l || i.bottom < a) : "fit" === s.tolerance && (c = i.left > o && i.right < r && i.top > a && i.bottom < l), c ? (i.selected && (i.$element.removeClass("ui-selected"), i.selected = !1), i.unselecting && (i.$element.removeClass("ui-unselecting"), i.unselecting = !1), i.selecting || (i.$element.addClass("ui-selecting"), i.selecting = !0, n._trigger("selecting", t, { selecting: i.element }))) : (i.selecting && ((t.metaKey || t.ctrlKey) && i.startselected ? (i.$element.removeClass("ui-selecting"), i.selecting = !1, i.$element.addClass("ui-selected"), i.selected = !0) : (i.$element.removeClass("ui-selecting"), i.selecting = !1, i.startselected && (i.$element.addClass("ui-unselecting"), i.unselecting = !0), n._trigger("unselecting", t, { unselecting: i.element }))), i.selected && (t.metaKey || t.ctrlKey || i.startselected || (i.$element.removeClass("ui-selected"), i.selected = !1, i.$element.addClass("ui-unselecting"), i.unselecting = !0, n._trigger("unselecting", t, { unselecting: i.element }))))) }), !1 } }, _mouseStop: function (t) { var i = this; return this.dragged = !1, e(".ui-unselecting", this.element[0]).each(function () { var n = e.data(this, "selectable-item"); n.$element.removeClass("ui-unselecting"), n.unselecting = !1, n.startselected = !1, i._trigger("unselected", t, { unselected: n.element }) }), e(".ui-selecting", this.element[0]).each(function () { var n = e.data(this, "selectable-item"); n.$element.removeClass("ui-selecting").addClass("ui-selected"), n.selecting = !1, n.selected = !0, n.startselected = !0, i._trigger("selected", t, { selected: n.element }) }), this._trigger("stop", t), this.helper.remove(), !1 } }), e.widget("ui.selectmenu", { version: "1.11.4", defaultElement: "<select>", options: { appendTo: null, disabled: null, icons: { button: "ui-icon-triangle-1-s" }, position: { my: "left top", at: "left bottom", collision: "none" }, width: null, change: null, close: null, focus: null, open: null, select: null }, _create: function () { var e = this.element.uniqueId().attr("id"); this.ids = { element: e, button: e + "-button", menu: e + "-menu" }, this._drawButton(), this._drawMenu(), this.options.disabled && this.disable() }, _drawButton: function () { var t = this; this.label = e("label[for='" + this.ids.element + "']").attr("for", this.ids.button), this._on(this.label, { click: function (e) { this.button.focus(), e.preventDefault() } }), this.element.hide(), this.button = e("<span>", { class: "ui-selectmenu-button ui-widget ui-state-default ui-corner-all", tabindex: this.options.disabled ? -1 : 0, id: this.ids.button, role: "combobox", "aria-expanded": "false", "aria-autocomplete": "list", "aria-owns": this.ids.menu, "aria-haspopup": "true" }).insertAfter(this.element), e("<span>", { class: "ui-icon " + this.options.icons.button }).prependTo(this.button), this.buttonText = e("<span>", { class: "ui-selectmenu-text" }).appendTo(this.button), this._setText(this.buttonText, this.element.find("option:selected").text()), this._resizeButton(), this._on(this.button, this._buttonEvents), this.button.one("focusin", function () { t.menuItems || t._refreshMenu() }), this._hoverable(this.button), this._focusable(this.button) }, _drawMenu: function () { var t = this; this.menu = e("<ul>", { "aria-hidden": "true", "aria-labelledby": this.ids.button, id: this.ids.menu }), this.menuWrap = e("<div>", { class: "ui-selectmenu-menu ui-front" }).append(this.menu).appendTo(this._appendTo()), this.menuInstance = this.menu.menu({ role: "listbox", select: function (e, i) { e.preventDefault(), t._setSelection(), t._select(i.item.data("ui-selectmenu-item"), e) }, focus: function (e, i) { var n = i.item.data("ui-selectmenu-item"); null != t.focusIndex && n.index !== t.focusIndex && (t._trigger("focus", e, { item: n }), t.isOpen || t._select(n, e)), t.focusIndex = n.index, t.button.attr("aria-activedescendant", t.menuItems.eq(n.index).attr("id")) } }).menu("instance"), this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"), this.menuInstance._off(this.menu, "mouseleave"), this.menuInstance._closeOnDocumentClick = function () { return !1 }, this.menuInstance._isDivider = function () { return !1 } }, refresh: function () { this._refreshMenu(), this._setText(this.buttonText, this._getSelectedItem().text()), this.options.width || this._resizeButton() }, _refreshMenu: function () { this.menu.empty(); var e, t = this.element.find("option"); t.length && (this._parseOptions(t), this._renderMenu(this.menu, this.items), this.menuInstance.refresh(), this.menuItems = this.menu.find("li").not(".ui-selectmenu-optgroup"), e = this._getSelectedItem(), this.menuInstance.focus(null, e), this._setAria(e.data("ui-selectmenu-item")), this._setOption("disabled", this.element.prop("disabled"))) }, open: function (e) { this.options.disabled || (this.menuItems ? (this.menu.find(".ui-state-focus").removeClass("ui-state-focus"), this.menuInstance.focus(null, this._getSelectedItem())) : this._refreshMenu(), this.isOpen = !0, this._toggleAttr(), this._resizeMenu(), this._position(), this._on(this.document, this._documentClick), this._trigger("open", e)) }, _position: function () { this.menuWrap.position(e.extend({ of: this.button }, this.options.position)) }, close: function (e) { this.isOpen && (this.isOpen = !1, this._toggleAttr(), this.range = null, this._off(this.document), this._trigger("close", e)) }, widget: function () { return this.button }, menuWidget: function () { return this.menu }, _renderMenu: function (t, i) { var n = this, s = ""; e.each(i, function (i, o) { o.optgroup !== s && (e("<li>", { class: "ui-selectmenu-optgroup ui-menu-divider" + (o.element.parent("optgroup").prop("disabled") ? " ui-state-disabled" : ""), text: o.optgroup }).appendTo(t), s = o.optgroup), n._renderItemData(t, o) }) }, _renderItemData: function (e, t) { return this._renderItem(e, t).data("ui-selectmenu-item", t) }, _renderItem: function (t, i) { var n = e("<li>"); return i.disabled && n.addClass("ui-state-disabled"), this._setText(n, i.label), n.appendTo(t) }, _setText: function (e, t) { t ? e.text(t) : e.html("&#160;") }, _move: function (e, t) { var i, n, s = ".ui-menu-item"; this.isOpen ? i = this.menuItems.eq(this.focusIndex) : (i = this.menuItems.eq(this.element[0].selectedIndex), s += ":not(.ui-state-disabled)"), (n = "first" === e || "last" === e ? i["first" === e ? "prevAll" : "nextAll"](s).eq(-1) : i[e + "All"](s).eq(0)).length && this.menuInstance.focus(t, n) }, _getSelectedItem: function () { return this.menuItems.eq(this.element[0].selectedIndex) }, _toggle: function (e) { this[this.isOpen ? "close" : "open"](e) }, _setSelection: function () { var e; this.range && (window.getSelection ? ((e = window.getSelection()).removeAllRanges(), e.addRange(this.range)) : this.range.select(), this.button.focus()) }, _documentClick: { mousedown: function (t) { this.isOpen && (e(t.target).closest(".ui-selectmenu-menu, #" + this.ids.button).length || this.close(t)) } }, _buttonEvents: { mousedown: function () { var e; window.getSelection ? (e = window.getSelection()).rangeCount && (this.range = e.getRangeAt(0)) : this.range = document.selection.createRange() }, click: function (e) { this._setSelection(), this._toggle(e) }, keydown: function (t) { var i = !0; switch (t.keyCode) { case e.ui.keyCode.TAB: case e.ui.keyCode.ESCAPE: this.close(t), i = !1; break; case e.ui.keyCode.ENTER: this.isOpen && this._selectFocusedItem(t); break; case e.ui.keyCode.UP: t.altKey ? this._toggle(t) : this._move("prev", t); break; case e.ui.keyCode.DOWN: t.altKey ? this._toggle(t) : this._move("next", t); break; case e.ui.keyCode.SPACE: this.isOpen ? this._selectFocusedItem(t) : this._toggle(t); break; case e.ui.keyCode.LEFT: this._move("prev", t); break; case e.ui.keyCode.RIGHT: this._move("next", t); break; case e.ui.keyCode.HOME: case e.ui.keyCode.PAGE_UP: this._move("first", t); break; case e.ui.keyCode.END: case e.ui.keyCode.PAGE_DOWN: this._move("last", t); break; default: this.menu.trigger(t), i = !1 }i && t.preventDefault() } }, _selectFocusedItem: function (e) { var t = this.menuItems.eq(this.focusIndex); t.hasClass("ui-state-disabled") || this._select(t.data("ui-selectmenu-item"), e) }, _select: function (e, t) { var i = this.element[0].selectedIndex; this.element[0].selectedIndex = e.index, this._setText(this.buttonText, e.label), this._setAria(e), this._trigger("select", t, { item: e }), e.index !== i && this._trigger("change", t, { item: e }), this.close(t) }, _setAria: function (e) { var t = this.menuItems.eq(e.index).attr("id"); this.button.attr({ "aria-labelledby": t, "aria-activedescendant": t }), this.menu.attr("aria-activedescendant", t) }, _setOption: function (e, t) { "icons" === e && this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button), this._super(e, t), "appendTo" === e && this.menuWrap.appendTo(this._appendTo()), "disabled" === e && (this.menuInstance.option("disabled", t), this.button.toggleClass("ui-state-disabled", t).attr("aria-disabled", t), this.element.prop("disabled", t), t ? (this.button.attr("tabindex", -1), this.close()) : this.button.attr("tabindex", 0)), "width" === e && this._resizeButton() }, _appendTo: function () { var t = this.options.appendTo; return t && (t = t.jquery || t.nodeType ? e(t) : this.document.find(t).eq(0)), t && t[0] || (t = this.element.closest(".ui-front")), t.length || (t = this.document[0].body), t }, _toggleAttr: function () { this.button.toggleClass("ui-corner-top", this.isOpen).toggleClass("ui-corner-all", !this.isOpen).attr("aria-expanded", this.isOpen), this.menuWrap.toggleClass("ui-selectmenu-open", this.isOpen), this.menu.attr("aria-hidden", !this.isOpen) }, _resizeButton: function () { var e = this.options.width; e || (e = this.element.show().outerWidth(), this.element.hide()), this.button.outerWidth(e) }, _resizeMenu: function () { this.menu.outerWidth(Math.max(this.button.outerWidth(), this.menu.width("").outerWidth() + 1)) }, _getCreateOptions: function () { return { disabled: this.element.prop("disabled") } }, _parseOptions: function (t) { var i = []; t.each(function (t, n) { var s = e(n), o = s.parent("optgroup"); i.push({ element: s, index: t, value: s.val(), label: s.text(), optgroup: o.attr("label") || "", disabled: o.prop("disabled") || s.prop("disabled") }) }), this.items = i }, _destroy: function () { this.menuWrap.remove(), this.button.remove(), this.element.show(), this.element.removeUniqueId(), this.label.attr("for", this.ids.element) } }), e.widget("ui.slider", e.ui.mouse, { version: "1.11.4", widgetEventPrefix: "slide", options: { animate: !1, distance: 0, max: 100, min: 0, orientation: "horizontal", range: !1, step: 1, value: 0, values: null, change: null, slide: null, start: null, stop: null }, numPages: 5, _create: function () { this._keySliding = !1, this._mouseSliding = !1, this._animateOff = !0, this._handleIndex = null, this._detectOrientation(), this._mouseInit(), this._calculateNewMax(), this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget ui-widget-content ui-corner-all"), this._refresh(), this._setOption("disabled", this.options.disabled), this._animateOff = !1 }, _refresh: function () { this._createRange(), this._createHandles(), this._setupEvents(), this._refreshValue() }, _createHandles: function () { var t, i, n = this.options, s = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"), o = []; for (i = n.values && n.values.length || 1, s.length > i && (s.slice(i).remove(), s = s.slice(0, i)), t = s.length; t < i; t++)o.push("<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>"); this.handles = s.add(e(o.join("")).appendTo(this.element)), this.handle = this.handles.eq(0), this.handles.each(function (t) { e(this).data("ui-slider-handle-index", t) }) }, _createRange: function () { var t = this.options, i = ""; t.range ? (!0 === t.range && (t.values ? t.values.length && 2 !== t.values.length ? t.values = [t.values[0], t.values[0]] : e.isArray(t.values) && (t.values = t.values.slice(0)) : t.values = [this._valueMin(), this._valueMin()]), this.range && this.range.length ? this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({ left: "", bottom: "" }) : (this.range = e("<div></div>").appendTo(this.element), i = "ui-slider-range ui-widget-header ui-corner-all"), this.range.addClass(i + ("min" === t.range || "max" === t.range ? " ui-slider-range-" + t.range : ""))) : (this.range && this.range.remove(), this.range = null) }, _setupEvents: function () { this._off(this.handles), this._on(this.handles, this._handleEvents), this._hoverable(this.handles), this._focusable(this.handles) }, _destroy: function () { this.handles.remove(), this.range && this.range.remove(), this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"), this._mouseDestroy() }, _mouseCapture: function (t) { var i, n, s, o, a, r, l, c = this, d = this.options; return !d.disabled && (this.elementSize = { width: this.element.outerWidth(), height: this.element.outerHeight() }, this.elementOffset = this.element.offset(), i = { x: t.pageX, y: t.pageY }, n = this._normValueFromMouse(i), s = this._valueMax() - this._valueMin() + 1, this.handles.each(function (t) { var i = Math.abs(n - c.values(t)); (s > i || s === i && (t === c._lastChangedValue || c.values(t) === d.min)) && (s = i, o = e(this), a = t) }), !1 !== this._start(t, a) && (this._mouseSliding = !0, this._handleIndex = a, o.addClass("ui-state-active").focus(), r = o.offset(), l = !e(t.target).parents().addBack().is(".ui-slider-handle"), this._clickOffset = l ? { left: 0, top: 0 } : { left: t.pageX - r.left - o.width() / 2, top: t.pageY - r.top - o.height() / 2 - (parseInt(o.css("borderTopWidth"), 10) || 0) - (parseInt(o.css("borderBottomWidth"), 10) || 0) + (parseInt(o.css("marginTop"), 10) || 0) }, this.handles.hasClass("ui-state-hover") || this._slide(t, a, n), this._animateOff = !0, !0)) }, _mouseStart: function () { return !0 }, _mouseDrag: function (e) { var t = { x: e.pageX, y: e.pageY }, i = this._normValueFromMouse(t); return this._slide(e, this._handleIndex, i), !1 }, _mouseStop: function (e) { return this.handles.removeClass("ui-state-active"), this._mouseSliding = !1, this._stop(e, this._handleIndex), this._change(e, this._handleIndex), this._handleIndex = null, this._clickOffset = null, this._animateOff = !1, !1 }, _detectOrientation: function () { this.orientation = "vertical" === this.options.orientation ? "vertical" : "horizontal" }, _normValueFromMouse: function (e) { var t, i, n, s, o; return "horizontal" === this.orientation ? (t = this.elementSize.width, i = e.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (t = this.elementSize.height, i = e.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)), (n = i / t) > 1 && (n = 1), n < 0 && (n = 0), "vertical" === this.orientation && (n = 1 - n), s = this._valueMax() - this._valueMin(), o = this._valueMin() + n * s, this._trimAlignValue(o) }, _start: function (e, t) { var i = { handle: this.handles[t], value: this.value() }; return this.options.values && this.options.values.length && (i.value = this.values(t), i.values = this.values()), this._trigger("start", e, i) }, _slide: function (e, t, i) { var n, s, o; this.options.values && this.options.values.length ? (n = this.values(t ? 0 : 1), 2 === this.options.values.length && !0 === this.options.range && (0 === t && i > n || 1 === t && i < n) && (i = n), i !== this.values(t) && ((s = this.values())[t] = i, o = this._trigger("slide", e, { handle: this.handles[t], value: i, values: s }), n = this.values(t ? 0 : 1), !1 !== o && this.values(t, i))) : i !== this.value() && !1 !== (o = this._trigger("slide", e, { handle: this.handles[t], value: i })) && this.value(i) }, _stop: function (e, t) { var i = { handle: this.handles[t], value: this.value() }; this.options.values && this.options.values.length && (i.value = this.values(t), i.values = this.values()), this._trigger("stop", e, i) }, _change: function (e, t) { if (!this._keySliding && !this._mouseSliding) { var i = { handle: this.handles[t], value: this.value() }; this.options.values && this.options.values.length && (i.value = this.values(t), i.values = this.values()), this._lastChangedValue = t, this._trigger("change", e, i) } }, value: function (e) { return arguments.length ? (this.options.value = this._trimAlignValue(e), this._refreshValue(), void this._change(null, 0)) : this._value() }, values: function (t, i) { var n, s, o; if (arguments.length > 1) return this.options.values[t] = this._trimAlignValue(i), this._refreshValue(), void this._change(null, t); if (!arguments.length) return this._values(); if (!e.isArray(arguments[0])) return this.options.values && this.options.values.length ? this._values(t) : this.value(); for (n = this.options.values, s = arguments[0], o = 0; o < n.length; o += 1)n[o] = this._trimAlignValue(s[o]), this._change(null, o); this._refreshValue() }, _setOption: function (t, i) { var n, s = 0; switch ("range" === t && !0 === this.options.range && ("min" === i ? (this.options.value = this._values(0), this.options.values = null) : "max" === i && (this.options.value = this._values(this.options.values.length - 1), this.options.values = null)), e.isArray(this.options.values) && (s = this.options.values.length), "disabled" === t && this.element.toggleClass("ui-state-disabled", !!i), this._super(t, i), t) { case "orientation": this._detectOrientation(), this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation), this._refreshValue(), this.handles.css("horizontal" === i ? "bottom" : "left", ""); break; case "value": this._animateOff = !0, this._refreshValue(), this._change(null, 0), this._animateOff = !1; break; case "values": for (this._animateOff = !0, this._refreshValue(), n = 0; n < s; n += 1)this._change(null, n); this._animateOff = !1; break; case "step": case "min": case "max": this._animateOff = !0, this._calculateNewMax(), this._refreshValue(), this._animateOff = !1; break; case "range": this._animateOff = !0, this._refresh(), this._animateOff = !1 } }, _value: function () { var e = this.options.value; return e = this._trimAlignValue(e) }, _values: function (e) { var t, i, n; if (arguments.length) return t = this.options.values[e], t = this._trimAlignValue(t); if (this.options.values && this.options.values.length) { for (i = this.options.values.slice(), n = 0; n < i.length; n += 1)i[n] = this._trimAlignValue(i[n]); return i } return [] }, _trimAlignValue: function (e) { if (e <= this._valueMin()) return this._valueMin(); if (e >= this._valueMax()) return this._valueMax(); var t = this.options.step > 0 ? this.options.step : 1, i = (e - this._valueMin()) % t, n = e - i; return 2 * Math.abs(i) >= t && (n += i > 0 ? t : -t), parseFloat(n.toFixed(5)) }, _calculateNewMax: function () { var e = this.options.max, t = this._valueMin(), i = this.options.step; e = Math.floor(+(e - t).toFixed(this._precision()) / i) * i + t, this.max = parseFloat(e.toFixed(this._precision())) }, _precision: function () { var e = this._precisionOf(this.options.step); return null !== this.options.min && (e = Math.max(e, this._precisionOf(this.options.min))), e }, _precisionOf: function (e) { var t = e.toString(), i = t.indexOf("."); return -1 === i ? 0 : t.length - i - 1 }, _valueMin: function () { return this.options.min }, _valueMax: function () { return this.max }, _refreshValue: function () { var t, i, n, s, o, a = this.options.range, r = this.options, l = this, c = !this._animateOff && r.animate, d = {}; this.options.values && this.options.values.length ? this.handles.each(function (n) { i = (l.values(n) - l._valueMin()) / (l._valueMax() - l._valueMin()) * 100, d["horizontal" === l.orientation ? "left" : "bottom"] = i + "%", e(this).stop(1, 1)[c ? "animate" : "css"](d, r.animate), !0 === l.options.range && ("horizontal" === l.orientation ? (0 === n && l.range.stop(1, 1)[c ? "animate" : "css"]({ left: i + "%" }, r.animate), 1 === n && l.range[c ? "animate" : "css"]({ width: i - t + "%" }, { queue: !1, duration: r.animate })) : (0 === n && l.range.stop(1, 1)[c ? "animate" : "css"]({ bottom: i + "%" }, r.animate), 1 === n && l.range[c ? "animate" : "css"]({ height: i - t + "%" }, { queue: !1, duration: r.animate }))), t = i }) : (n = this.value(), s = this._valueMin(), o = this._valueMax(), i = o !== s ? (n - s) / (o - s) * 100 : 0, d["horizontal" === this.orientation ? "left" : "bottom"] = i + "%", this.handle.stop(1, 1)[c ? "animate" : "css"](d, r.animate), "min" === a && "horizontal" === this.orientation && this.range.stop(1, 1)[c ? "animate" : "css"]({ width: i + "%" }, r.animate), "max" === a && "horizontal" === this.orientation && this.range[c ? "animate" : "css"]({ width: 100 - i + "%" }, { queue: !1, duration: r.animate }), "min" === a && "vertical" === this.orientation && this.range.stop(1, 1)[c ? "animate" : "css"]({ height: i + "%" }, r.animate), "max" === a && "vertical" === this.orientation && this.range[c ? "animate" : "css"]({ height: 100 - i + "%" }, { queue: !1, duration: r.animate })) }, _handleEvents: { keydown: function (t) { var i, n, s, o = e(t.target).data("ui-slider-handle-index"); switch (t.keyCode) { case e.ui.keyCode.HOME: case e.ui.keyCode.END: case e.ui.keyCode.PAGE_UP: case e.ui.keyCode.PAGE_DOWN: case e.ui.keyCode.UP: case e.ui.keyCode.RIGHT: case e.ui.keyCode.DOWN: case e.ui.keyCode.LEFT: if (t.preventDefault(), !this._keySliding && (this._keySliding = !0, e(t.target).addClass("ui-state-active"), !1 === this._start(t, o))) return }switch (s = this.options.step, i = n = this.options.values && this.options.values.length ? this.values(o) : this.value(), t.keyCode) { case e.ui.keyCode.HOME: n = this._valueMin(); break; case e.ui.keyCode.END: n = this._valueMax(); break; case e.ui.keyCode.PAGE_UP: n = this._trimAlignValue(i + (this._valueMax() - this._valueMin()) / this.numPages); break; case e.ui.keyCode.PAGE_DOWN: n = this._trimAlignValue(i - (this._valueMax() - this._valueMin()) / this.numPages); break; case e.ui.keyCode.UP: case e.ui.keyCode.RIGHT: if (i === this._valueMax()) return; n = this._trimAlignValue(i + s); break; case e.ui.keyCode.DOWN: case e.ui.keyCode.LEFT: if (i === this._valueMin()) return; n = this._trimAlignValue(i - s) }this._slide(t, o, n) }, keyup: function (t) { var i = e(t.target).data("ui-slider-handle-index"); this._keySliding && (this._keySliding = !1, this._stop(t, i), this._change(t, i), e(t.target).removeClass("ui-state-active")) } } }), e.widget("ui.sortable", e.ui.mouse, { version: "1.11.4", widgetEventPrefix: "sort", ready: !1, options: { appendTo: "parent", axis: !1, connectWith: !1, containment: !1, cursor: "auto", cursorAt: !1, dropOnEmpty: !0, forcePlaceholderSize: !1, forceHelperSize: !1, grid: !1, handle: !1, helper: "original", items: "> *", opacity: !1, placeholder: !1, revert: !1, scroll: !0, scrollSensitivity: 20, scrollSpeed: 20, scope: "default", tolerance: "intersect", zIndex: 1e3, activate: null, beforeStop: null, change: null, deactivate: null, out: null, over: null, receive: null, remove: null, sort: null, start: null, stop: null, update: null }, _isOverAxis: function (e, t, i) { return e >= t && e < t + i }, _isFloating: function (e) { return /left|right/.test(e.css("float")) || /inline|table-cell/.test(e.css("display")) }, _create: function () { this.containerCache = {}, this.element.addClass("ui-sortable"), this.refresh(), this.offset = this.element.offset(), this._mouseInit(), this._setHandleClassName(), this.ready = !0 }, _setOption: function (e, t) { this._super(e, t), "handle" === e && this._setHandleClassName() }, _setHandleClassName: function () { this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"), e.each(this.items, function () { (this.instance.options.handle ? this.item.find(this.instance.options.handle) : this.item).addClass("ui-sortable-handle") }) }, _destroy: function () { this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"), this._mouseDestroy(); for (var e = this.items.length - 1; e >= 0; e--)this.items[e].item.removeData(this.widgetName + "-item"); return this }, _mouseCapture: function (t, i) { var n = null, s = !1, o = this; return !this.reverting && (!this.options.disabled && "static" !== this.options.type && (this._refreshItems(t), e(t.target).parents().each(function () { if (e.data(this, o.widgetName + "-item") === o) return n = e(this), !1 }), e.data(t.target, o.widgetName + "-item") === o && (n = e(t.target)), !!n && (!(this.options.handle && !i && (e(this.options.handle, n).find("*").addBack().each(function () { this === t.target && (s = !0) }), !s)) && (this.currentItem = n, this._removeCurrentsFromItems(), !0)))) }, _mouseStart: function (t, i, n) { var s, o, a = this.options; if (this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(t), this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), this.offset = this.currentItem.offset(), this.offset = { top: this.offset.top - this.margins.top, left: this.offset.left - this.margins.left }, e.extend(this.offset, { click: { left: t.pageX - this.offset.left, top: t.pageY - this.offset.top }, parent: this._getParentOffset(), relative: this._getRelativeOffset() }), this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), this.originalPosition = this._generatePosition(t), this.originalPageX = t.pageX, this.originalPageY = t.pageY, a.cursorAt && this._adjustOffsetFromHelper(a.cursorAt), this.domPosition = { prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0] }, this.helper[0] !== this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), a.containment && this._setContainment(), a.cursor && "auto" !== a.cursor && (o = this.document.find("body"), this.storedCursor = o.css("cursor"), o.css("cursor", a.cursor), this.storedStylesheet = e("<style>*{ cursor: " + a.cursor + " !important; }</style>").appendTo(o)), a.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), this.helper.css("opacity", a.opacity)), a.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), this.helper.css("zIndex", a.zIndex)), this.scrollParent[0] !== this.document[0] && "HTML" !== this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()), this._trigger("start", t, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions(), !n) for (s = this.containers.length - 1; s >= 0; s--)this.containers[s]._trigger("activate", t, this._uiHash(this)); return e.ui.ddmanager && (e.ui.ddmanager.current = this), e.ui.ddmanager && !a.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this.dragging = !0, this.helper.addClass("ui-sortable-helper"), this._mouseDrag(t), !0 }, _mouseDrag: function (t) { var i, n, s, o, a = this.options, r = !1; for (this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute"), this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs), this.options.scroll && (this.scrollParent[0] !== this.document[0] && "HTML" !== this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - t.pageY < a.scrollSensitivity ? this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop + a.scrollSpeed : t.pageY - this.overflowOffset.top < a.scrollSensitivity && (this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop - a.scrollSpeed), this.overflowOffset.left + this.scrollParent[0].offsetWidth - t.pageX < a.scrollSensitivity ? this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft + a.scrollSpeed : t.pageX - this.overflowOffset.left < a.scrollSensitivity && (this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft - a.scrollSpeed)) : (t.pageY - this.document.scrollTop() < a.scrollSensitivity ? r = this.document.scrollTop(this.document.scrollTop() - a.scrollSpeed) : this.window.height() - (t.pageY - this.document.scrollTop()) < a.scrollSensitivity && (r = this.document.scrollTop(this.document.scrollTop() + a.scrollSpeed)), t.pageX - this.document.scrollLeft() < a.scrollSensitivity ? r = this.document.scrollLeft(this.document.scrollLeft() - a.scrollSpeed) : this.window.width() - (t.pageX - this.document.scrollLeft()) < a.scrollSensitivity && (r = this.document.scrollLeft(this.document.scrollLeft() + a.scrollSpeed))), !1 !== r && e.ui.ddmanager && !a.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t)), this.positionAbs = this._convertPositionTo("absolute"), this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), i = this.items.length - 1; i >= 0; i--)if (s = (n = this.items[i]).item[0], (o = this._intersectsWithPointer(n)) && n.instance === this.currentContainer && !(s === this.currentItem[0] || this.placeholder[1 === o ? "next" : "prev"]()[0] === s || e.contains(this.placeholder[0], s) || "semi-dynamic" === this.options.type && e.contains(this.element[0], s))) { if (this.direction = 1 === o ? "down" : "up", "pointer" !== this.options.tolerance && !this._intersectsWithSides(n)) break; this._rearrange(t, n), this._trigger("change", t, this._uiHash()); break } return this._contactContainers(t), e.ui.ddmanager && e.ui.ddmanager.drag(this, t), this._trigger("sort", t, this._uiHash()), this.lastPositionAbs = this.positionAbs, !1 }, _mouseStop: function (t, i) { if (t) { if (e.ui.ddmanager && !this.options.dropBehaviour && e.ui.ddmanager.drop(this, t), this.options.revert) { var n = this, s = this.placeholder.offset(), o = this.options.axis, a = {}; o && "x" !== o || (a.left = s.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollLeft)), o && "y" !== o || (a.top = s.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollTop)), this.reverting = !0, e(this.helper).animate(a, parseInt(this.options.revert, 10) || 500, function () { n._clear(t) }) } else this._clear(t, i); return !1 } }, cancel: function () { if (this.dragging) { this._mouseUp({ target: null }), "original" === this.options.helper ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show(); for (var t = this.containers.length - 1; t >= 0; t--)this.containers[t]._trigger("deactivate", null, this._uiHash(this)), this.containers[t].containerCache.over && (this.containers[t]._trigger("out", null, this._uiHash(this)), this.containers[t].containerCache.over = 0) } return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), "original" !== this.options.helper && this.helper && this.helper[0].parentNode && this.helper.remove(), e.extend(this, { helper: null, dragging: !1, reverting: !1, _noFinalSort: null }), this.domPosition.prev ? e(this.domPosition.prev).after(this.currentItem) : e(this.domPosition.parent).prepend(this.currentItem)), this }, serialize: function (t) { var i = this._getItemsAsjQuery(t && t.connected), n = []; return t = t || {}, e(i).each(function () { var i = (e(t.item || this).attr(t.attribute || "id") || "").match(t.expression || /(.+)[\-=_](.+)/); i && n.push((t.key || i[1] + "[]") + "=" + (t.key && t.expression ? i[1] : i[2])) }), !n.length && t.key && n.push(t.key + "="), n.join("&") }, toArray: function (t) { var i = this._getItemsAsjQuery(t && t.connected), n = []; return t = t || {}, i.each(function () { n.push(e(t.item || this).attr(t.attribute || "id") || "") }), n }, _intersectsWith: function (e) { var t = this.positionAbs.left, i = t + this.helperProportions.width, n = this.positionAbs.top, s = n + this.helperProportions.height, o = e.left, a = o + e.width, r = e.top, l = r + e.height, c = this.offset.click.top, d = this.offset.click.left, h = "x" === this.options.axis || n + c > r && n + c < l, u = "y" === this.options.axis || t + d > o && t + d < a, p = h && u; return "pointer" === this.options.tolerance || this.options.forcePointerForContainers || "pointer" !== this.options.tolerance && this.helperProportions[this.floating ? "width" : "height"] > e[this.floating ? "width" : "height"] ? p : o < t + this.helperProportions.width / 2 && i - this.helperProportions.width / 2 < a && r < n + this.helperProportions.height / 2 && s - this.helperProportions.height / 2 < l }, _intersectsWithPointer: function (e) { var t = "x" === this.options.axis || this._isOverAxis(this.positionAbs.top + this.offset.click.top, e.top, e.height), i = "y" === this.options.axis || this._isOverAxis(this.positionAbs.left + this.offset.click.left, e.left, e.width), n = t && i, s = this._getDragVerticalDirection(), o = this._getDragHorizontalDirection(); return !!n && (this.floating ? o && "right" === o || "down" === s ? 2 : 1 : s && ("down" === s ? 2 : 1)) }, _intersectsWithSides: function (e) { var t = this._isOverAxis(this.positionAbs.top + this.offset.click.top, e.top + e.height / 2, e.height), i = this._isOverAxis(this.positionAbs.left + this.offset.click.left, e.left + e.width / 2, e.width), n = this._getDragVerticalDirection(), s = this._getDragHorizontalDirection(); return this.floating && s ? "right" === s && i || "left" === s && !i : n && ("down" === n && t || "up" === n && !t) }, _getDragVerticalDirection: function () { var e = this.positionAbs.top - this.lastPositionAbs.top; return 0 !== e && (e > 0 ? "down" : "up") }, _getDragHorizontalDirection: function () { var e = this.positionAbs.left - this.lastPositionAbs.left; return 0 !== e && (e > 0 ? "right" : "left") }, refresh: function (e) { return this._refreshItems(e), this._setHandleClassName(), this.refreshPositions(), this }, _connectWith: function () { var e = this.options; return e.connectWith.constructor === String ? [e.connectWith] : e.connectWith }, _getItemsAsjQuery: function (t) { var i, n, s, o, a = [], r = [], l = this._connectWith(); if (l && t) for (i = l.length - 1; i >= 0; i--)for (n = (s = e(l[i], this.document[0])).length - 1; n >= 0; n--)(o = e.data(s[n], this.widgetFullName)) && o !== this && !o.options.disabled && r.push([e.isFunction(o.options.items) ? o.options.items.call(o.element) : e(o.options.items, o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), o]); function c() { a.push(this) } for (r.push([e.isFunction(this.options.items) ? this.options.items.call(this.element, null, { options: this.options, item: this.currentItem }) : e(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]), i = r.length - 1; i >= 0; i--)r[i][0].each(c); return e(a) }, _removeCurrentsFromItems: function () { var t = this.currentItem.find(":data(" + this.widgetName + "-item)"); this.items = e.grep(this.items, function (e) { for (var i = 0; i < t.length; i++)if (t[i] === e.item[0]) return !1; return !0 }) }, _refreshItems: function (t) { this.items = [], this.containers = [this]; var i, n, s, o, a, r, l, c, d = this.items, h = [[e.isFunction(this.options.items) ? this.options.items.call(this.element[0], t, { item: this.currentItem }) : e(this.options.items, this.element), this]], u = this._connectWith(); if (u && this.ready) for (i = u.length - 1; i >= 0; i--)for (n = (s = e(u[i], this.document[0])).length - 1; n >= 0; n--)(o = e.data(s[n], this.widgetFullName)) && o !== this && !o.options.disabled && (h.push([e.isFunction(o.options.items) ? o.options.items.call(o.element[0], t, { item: this.currentItem }) : e(o.options.items, o.element), o]), this.containers.push(o)); for (i = h.length - 1; i >= 0; i--)for (a = h[i][1], n = 0, c = (r = h[i][0]).length; n < c; n++)(l = e(r[n])).data(this.widgetName + "-item", a), d.push({ item: l, instance: a, width: 0, height: 0, left: 0, top: 0 }) }, refreshPositions: function (t) { var i, n, s, o; for (this.floating = !!this.items.length && ("x" === this.options.axis || this._isFloating(this.items[0].item)), this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset()), i = this.items.length - 1; i >= 0; i--)(n = this.items[i]).instance !== this.currentContainer && this.currentContainer && n.item[0] !== this.currentItem[0] || (s = this.options.toleranceElement ? e(this.options.toleranceElement, n.item) : n.item, t || (n.width = s.outerWidth(), n.height = s.outerHeight()), o = s.offset(), n.left = o.left, n.top = o.top); if (this.options.custom && this.options.custom.refreshContainers) this.options.custom.refreshContainers.call(this); else for (i = this.containers.length - 1; i >= 0; i--)o = this.containers[i].element.offset(), this.containers[i].containerCache.left = o.left, this.containers[i].containerCache.top = o.top, this.containers[i].containerCache.width = this.containers[i].element.outerWidth(), this.containers[i].containerCache.height = this.containers[i].element.outerHeight(); return this }, _createPlaceholder: function (t) { var i, n = (t = t || this).options; n.placeholder && n.placeholder.constructor !== String || (i = n.placeholder, n.placeholder = { element: function () { var n = t.currentItem[0].nodeName.toLowerCase(), s = e("<" + n + ">", t.document[0]).addClass(i || t.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper"); return "tbody" === n ? t._createTrPlaceholder(t.currentItem.find("tr").eq(0), e("<tr>", t.document[0]).appendTo(s)) : "tr" === n ? t._createTrPlaceholder(t.currentItem, s) : "img" === n && s.attr("src", t.currentItem.attr("src")), i || s.css("visibility", "hidden"), s }, update: function (e, s) { i && !n.forcePlaceholderSize || (s.height() || s.height(t.currentItem.innerHeight() - parseInt(t.currentItem.css("paddingTop") || 0, 10) - parseInt(t.currentItem.css("paddingBottom") || 0, 10)), s.width() || s.width(t.currentItem.innerWidth() - parseInt(t.currentItem.css("paddingLeft") || 0, 10) - parseInt(t.currentItem.css("paddingRight") || 0, 10))) } }), t.placeholder = e(n.placeholder.element.call(t.element, t.currentItem)), t.currentItem.after(t.placeholder), n.placeholder.update(t, t.placeholder) }, _createTrPlaceholder: function (t, i) { var n = this; t.children().each(function () { e("<td>&#160;</td>", n.document[0]).attr("colspan", e(this).attr("colspan") || 1).appendTo(i) }) }, _contactContainers: function (t) { var i, n, s, o, a, r, l, c, d, h, u = null, p = null; for (i = this.containers.length - 1; i >= 0; i--)if (!e.contains(this.currentItem[0], this.containers[i].element[0])) if (this._intersectsWith(this.containers[i].containerCache)) { if (u && e.contains(this.containers[i].element[0], u.element[0])) continue; u = this.containers[i], p = i } else this.containers[i].containerCache.over && (this.containers[i]._trigger("out", t, this._uiHash(this)), this.containers[i].containerCache.over = 0); if (u) if (1 === this.containers.length) this.containers[p].containerCache.over || (this.containers[p]._trigger("over", t, this._uiHash(this)), this.containers[p].containerCache.over = 1); else { for (s = 1e4, o = null, a = (d = u.floating || this._isFloating(this.currentItem)) ? "left" : "top", r = d ? "width" : "height", h = d ? "clientX" : "clientY", n = this.items.length - 1; n >= 0; n--)e.contains(this.containers[p].element[0], this.items[n].item[0]) && this.items[n].item[0] !== this.currentItem[0] && (l = this.items[n].item.offset()[a], c = !1, t[h] - l > this.items[n][r] / 2 && (c = !0), Math.abs(t[h] - l) < s && (s = Math.abs(t[h] - l), o = this.items[n], this.direction = c ? "up" : "down")); if (!o && !this.options.dropOnEmpty) return; if (this.currentContainer === this.containers[p]) return void (this.currentContainer.containerCache.over || (this.containers[p]._trigger("over", t, this._uiHash()), this.currentContainer.containerCache.over = 1)); o ? this._rearrange(t, o, null, !0) : this._rearrange(t, null, this.containers[p].element, !0), this._trigger("change", t, this._uiHash()), this.containers[p]._trigger("change", t, this._uiHash(this)), this.currentContainer = this.containers[p], this.options.placeholder.update(this.currentContainer, this.placeholder), this.containers[p]._trigger("over", t, this._uiHash(this)), this.containers[p].containerCache.over = 1 } }, _createHelper: function (t) { var i = this.options, n = e.isFunction(i.helper) ? e(i.helper.apply(this.element[0], [t, this.currentItem])) : "clone" === i.helper ? this.currentItem.clone() : this.currentItem; return n.parents("body").length || e("parent" !== i.appendTo ? i.appendTo : this.currentItem[0].parentNode)[0].appendChild(n[0]), n[0] === this.currentItem[0] && (this._storedCSS = { width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css("position"), top: this.currentItem.css("top"), left: this.currentItem.css("left") }), n[0].style.width && !i.forceHelperSize || n.width(this.currentItem.width()), n[0].style.height && !i.forceHelperSize || n.height(this.currentItem.height()), n }, _adjustOffsetFromHelper: function (t) { "string" == typeof t && (t = t.split(" ")), e.isArray(t) && (t = { left: +t[0], top: +t[1] || 0 }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top) }, _getParentOffset: function () { this.offsetParent = this.helper.offsetParent(); var t = this.offsetParent.offset(); return "absolute" === this.cssPosition && this.scrollParent[0] !== this.document[0] && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === this.document[0].body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && e.ui.ie) && (t = { top: 0, left: 0 }), { top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0), left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0) } }, _getRelativeOffset: function () { if ("relative" === this.cssPosition) { var e = this.currentItem.position(); return { top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(), left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft() } } return { top: 0, left: 0 } }, _cacheMargins: function () { this.margins = { left: parseInt(this.currentItem.css("marginLeft"), 10) || 0, top: parseInt(this.currentItem.css("marginTop"), 10) || 0 } }, _cacheHelperProportions: function () { this.helperProportions = { width: this.helper.outerWidth(), height: this.helper.outerHeight() } }, _setContainment: function () { var t, i, n, s = this.options; "parent" === s.containment && (s.containment = this.helper[0].parentNode), "document" !== s.containment && "window" !== s.containment || (this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, "document" === s.containment ? this.document.width() : this.window.width() - this.helperProportions.width - this.margins.left, ("document" === s.containment ? this.document.width() : this.window.height() || this.document[0].body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]), /^(document|window|parent)$/.test(s.containment) || (t = e(s.containment)[0], i = e(s.containment).offset(), n = "hidden" !== e(t).css("overflow"), this.containment = [i.left + (parseInt(e(t).css("borderLeftWidth"), 10) || 0) + (parseInt(e(t).css("paddingLeft"), 10) || 0) - this.margins.left, i.top + (parseInt(e(t).css("borderTopWidth"), 10) || 0) + (parseInt(e(t).css("paddingTop"), 10) || 0) - this.margins.top, i.left + (n ? Math.max(t.scrollWidth, t.offsetWidth) : t.offsetWidth) - (parseInt(e(t).css("borderLeftWidth"), 10) || 0) - (parseInt(e(t).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, i.top + (n ? Math.max(t.scrollHeight, t.offsetHeight) : t.offsetHeight) - (parseInt(e(t).css("borderTopWidth"), 10) || 0) - (parseInt(e(t).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top]) }, _convertPositionTo: function (t, i) { i || (i = this.position); var n = "absolute" === t ? 1 : -1, s = "absolute" !== this.cssPosition || this.scrollParent[0] !== this.document[0] && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, o = /(html|body)/i.test(s[0].tagName); return { top: i.top + this.offset.relative.top * n + this.offset.parent.top * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : o ? 0 : s.scrollTop()) * n, left: i.left + this.offset.relative.left * n + this.offset.parent.left * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : o ? 0 : s.scrollLeft()) * n } }, _generatePosition: function (t) { var i, n, s = this.options, o = t.pageX, a = t.pageY, r = "absolute" !== this.cssPosition || this.scrollParent[0] !== this.document[0] && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, l = /(html|body)/i.test(r[0].tagName); return "relative" !== this.cssPosition || this.scrollParent[0] !== this.document[0] && this.scrollParent[0] !== this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset()), this.originalPosition && (this.containment && (t.pageX - this.offset.click.left < this.containment[0] && (o = this.containment[0] + this.offset.click.left), t.pageY - this.offset.click.top < this.containment[1] && (a = this.containment[1] + this.offset.click.top), t.pageX - this.offset.click.left > this.containment[2] && (o = this.containment[2] + this.offset.click.left), t.pageY - this.offset.click.top > this.containment[3] && (a = this.containment[3] + this.offset.click.top)), s.grid && (i = this.originalPageY + Math.round((a - this.originalPageY) / s.grid[1]) * s.grid[1], a = this.containment ? i - this.offset.click.top >= this.containment[1] && i - this.offset.click.top <= this.containment[3] ? i : i - this.offset.click.top >= this.containment[1] ? i - s.grid[1] : i + s.grid[1] : i, n = this.originalPageX + Math.round((o - this.originalPageX) / s.grid[0]) * s.grid[0], o = this.containment ? n - this.offset.click.left >= this.containment[0] && n - this.offset.click.left <= this.containment[2] ? n : n - this.offset.click.left >= this.containment[0] ? n - s.grid[0] : n + s.grid[0] : n)), { top: a - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : l ? 0 : r.scrollTop()), left: o - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : l ? 0 : r.scrollLeft()) } }, _rearrange: function (e, t, i, n) { i ? i[0].appendChild(this.placeholder[0]) : t.item[0].parentNode.insertBefore(this.placeholder[0], "down" === this.direction ? t.item[0] : t.item[0].nextSibling), this.counter = this.counter ? ++this.counter : 1; var s = this.counter; this._delay(function () { s === this.counter && this.refreshPositions(!n) }) }, _clear: function (e, t) { this.reverting = !1; var i, n = []; if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), this._noFinalSort = null, this.helper[0] === this.currentItem[0]) { for (i in this._storedCSS) "auto" !== this._storedCSS[i] && "static" !== this._storedCSS[i] || (this._storedCSS[i] = ""); this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") } else this.currentItem.show(); function s(e, t, i) { return function (n) { i._trigger(e, n, t._uiHash(t)) } } for (this.fromOutside && !t && n.push(function (e) { this._trigger("receive", e, this._uiHash(this.fromOutside)) }), !this.fromOutside && this.domPosition.prev === this.currentItem.prev().not(".ui-sortable-helper")[0] && this.domPosition.parent === this.currentItem.parent()[0] || t || n.push(function (e) { this._trigger("update", e, this._uiHash()) }), this !== this.currentContainer && (t || (n.push(function (e) { this._trigger("remove", e, this._uiHash()) }), n.push(function (e) { return function (t) { e._trigger("receive", t, this._uiHash(this)) } }.call(this, this.currentContainer)), n.push(function (e) { return function (t) { e._trigger("update", t, this._uiHash(this)) } }.call(this, this.currentContainer)))), i = this.containers.length - 1; i >= 0; i--)t || n.push(s("deactivate", this, this.containers[i])), this.containers[i].containerCache.over && (n.push(s("out", this, this.containers[i])), this.containers[i].containerCache.over = 0); if (this.storedCursor && (this.document.find("body").css("cursor", this.storedCursor), this.storedStylesheet.remove()), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), this._storedZIndex && this.helper.css("zIndex", "auto" === this._storedZIndex ? "" : this._storedZIndex), this.dragging = !1, t || this._trigger("beforeStop", e, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.cancelHelperRemoval || (this.helper[0] !== this.currentItem[0] && this.helper.remove(), this.helper = null), !t) { for (i = 0; i < n.length; i++)n[i].call(this, e); this._trigger("stop", e, this._uiHash()) } return this.fromOutside = !1, !this.cancelHelperRemoval }, _trigger: function () { !1 === e.Widget.prototype._trigger.apply(this, arguments) && this.cancel() }, _uiHash: function (t) { var i = t || this; return { helper: i.helper, placeholder: i.placeholder || e([]), position: i.position, originalPosition: i.originalPosition, offset: i.positionAbs, item: i.currentItem, sender: t ? t.element : null } } }); function v(e) { return function () { var t = this.element.val(); e.apply(this, arguments), this._refresh(), t !== this.element.val() && this._trigger("change") } } var b; e.widget("ui.spinner", { version: "1.11.4", defaultElement: "<input>", widgetEventPrefix: "spin", options: { culture: null, icons: { down: "ui-icon-triangle-1-s", up: "ui-icon-triangle-1-n" }, incremental: !0, max: null, min: null, numberFormat: null, page: 10, step: 1, change: null, spin: null, start: null, stop: null }, _create: function () { this._setOption("max", this.options.max), this._setOption("min", this.options.min), this._setOption("step", this.options.step), "" !== this.value() && this._value(this.element.val(), !0), this._draw(), this._on(this._events), this._refresh(), this._on(this.window, { beforeunload: function () { this.element.removeAttr("autocomplete") } }) }, _getCreateOptions: function () { var t = {}, i = this.element; return e.each(["min", "max", "step"], function (e, n) { var s = i.attr(n); void 0 !== s && s.length && (t[n] = s) }), t }, _events: { keydown: function (e) { this._start(e) && this._keydown(e) && e.preventDefault() }, keyup: "_stop", focus: function () { this.previous = this.element.val() }, blur: function (e) { this.cancelBlur ? delete this.cancelBlur : (this._stop(), this._refresh(), this.previous !== this.element.val() && this._trigger("change", e)) }, mousewheel: function (e, t) { if (t) { if (!this.spinning && !this._start(e)) return !1; this._spin((t > 0 ? 1 : -1) * this.options.step, e), clearTimeout(this.mousewheelTimer), this.mousewheelTimer = this._delay(function () { this.spinning && this._stop(e) }, 100), e.preventDefault() } }, "mousedown .ui-spinner-button": function (t) { var i; function n() { this.element[0] === this.document[0].activeElement || (this.element.focus(), this.previous = i, this._delay(function () { this.previous = i })) } i = this.element[0] === this.document[0].activeElement ? this.previous : this.element.val(), t.preventDefault(), n.call(this), this.cancelBlur = !0, this._delay(function () { delete this.cancelBlur, n.call(this) }), !1 !== this._start(t) && this._repeat(null, e(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, t) }, "mouseup .ui-spinner-button": "_stop", "mouseenter .ui-spinner-button": function (t) { if (e(t.currentTarget).hasClass("ui-state-active")) return !1 !== this._start(t) && void this._repeat(null, e(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, t) }, "mouseleave .ui-spinner-button": "_stop" }, _draw: function () { var e = this.uiSpinner = this.element.addClass("ui-spinner-input").attr("autocomplete", "off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml()); this.element.attr("role", "spinbutton"), this.buttons = e.find(".ui-spinner-button").attr("tabIndex", -1).button().removeClass("ui-corner-all"), this.buttons.height() > Math.ceil(.5 * e.height()) && e.height() > 0 && e.height(e.height()), this.options.disabled && this.disable() }, _keydown: function (t) { var i = this.options, n = e.ui.keyCode; switch (t.keyCode) { case n.UP: return this._repeat(null, 1, t), !0; case n.DOWN: return this._repeat(null, -1, t), !0; case n.PAGE_UP: return this._repeat(null, i.page, t), !0; case n.PAGE_DOWN: return this._repeat(null, -i.page, t), !0 }return !1 }, _uiSpinnerHtml: function () { return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>" }, _buttonHtml: function () { return "<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon " + this.options.icons.up + "'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon " + this.options.icons.down + "'>&#9660;</span></a>" }, _start: function (e) { return !(!this.spinning && !1 === this._trigger("start", e)) && (this.counter || (this.counter = 1), this.spinning = !0, !0) }, _repeat: function (e, t, i) { e = e || 500, clearTimeout(this.timer), this.timer = this._delay(function () { this._repeat(40, t, i) }, e), this._spin(t * this.options.step, i) }, _spin: function (e, t) { var i = this.value() || 0; this.counter || (this.counter = 1), i = this._adjustValue(i + e * this._increment(this.counter)), this.spinning && !1 === this._trigger("spin", t, { value: i }) || (this._value(i), this.counter++) }, _increment: function (t) { var i = this.options.incremental; return i ? e.isFunction(i) ? i(t) : Math.floor(t * t * t / 5e4 - t * t / 500 + 17 * t / 200 + 1) : 1 }, _precision: function () { var e = this._precisionOf(this.options.step); return null !== this.options.min && (e = Math.max(e, this._precisionOf(this.options.min))), e }, _precisionOf: function (e) { var t = e.toString(), i = t.indexOf("."); return -1 === i ? 0 : t.length - i - 1 }, _adjustValue: function (e) { var t, i, n = this.options; return i = e - (t = null !== n.min ? n.min : 0), e = t + (i = Math.round(i / n.step) * n.step), e = parseFloat(e.toFixed(this._precision())), null !== n.max && e > n.max ? n.max : null !== n.min && e < n.min ? n.min : e }, _stop: function (e) { this.spinning && (clearTimeout(this.timer), clearTimeout(this.mousewheelTimer), this.counter = 0, this.spinning = !1, this._trigger("stop", e)) }, _setOption: function (e, t) { if ("culture" === e || "numberFormat" === e) { var i = this._parse(this.element.val()); return this.options[e] = t, void this.element.val(this._format(i)) } "max" !== e && "min" !== e && "step" !== e || "string" == typeof t && (t = this._parse(t)), "icons" === e && (this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up), this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)), this._super(e, t), "disabled" === e && (this.widget().toggleClass("ui-state-disabled", !!t), this.element.prop("disabled", !!t), this.buttons.button(t ? "disable" : "enable")) }, _setOptions: v(function (e) { this._super(e) }), _parse: function (e) { return "string" == typeof e && "" !== e && (e = window.Globalize && this.options.numberFormat ? Globalize.parseFloat(e, 10, this.options.culture) : +e), "" === e || isNaN(e) ? null : e }, _format: function (e) { return "" === e ? "" : window.Globalize && this.options.numberFormat ? Globalize.format(e, this.options.numberFormat, this.options.culture) : e }, _refresh: function () { this.element.attr({ "aria-valuemin": this.options.min, "aria-valuemax": this.options.max, "aria-valuenow": this._parse(this.element.val()) }) }, isValid: function () { var e = this.value(); return null !== e && e === this._adjustValue(e) }, _value: function (e, t) { var i; "" !== e && null !== (i = this._parse(e)) && (t || (i = this._adjustValue(i)), e = this._format(i)), this.element.val(e), this._refresh() }, _destroy: function () { this.element.removeClass("ui-spinner-input").prop("disabled", !1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"), this.uiSpinner.replaceWith(this.element) }, stepUp: v(function (e) { this._stepUp(e) }), _stepUp: function (e) { this._start() && (this._spin((e || 1) * this.options.step), this._stop()) }, stepDown: v(function (e) { this._stepDown(e) }), _stepDown: function (e) { this._start() && (this._spin((e || 1) * -this.options.step), this._stop()) }, pageUp: v(function (e) { this._stepUp((e || 1) * this.options.page) }), pageDown: v(function (e) { this._stepDown((e || 1) * this.options.page) }), value: function (e) { if (!arguments.length) return this._parse(this.element.val()); v(this._value).call(this, e) }, widget: function () { return this.uiSpinner } }), e.widget("ui.tabs", { version: "1.11.4", delay: 300, options: { active: null, collapsible: !1, event: "click", heightStyle: "content", hide: null, show: null, activate: null, beforeActivate: null, beforeLoad: null, load: null }, _isLocal: (b = /#.*$/, function (e) { var t, i; t = (e = e.cloneNode(!1)).href.replace(b, ""), i = location.href.replace(b, ""); try { t = decodeURIComponent(t) } catch (e) { } try { i = decodeURIComponent(i) } catch (e) { } return e.hash.length > 1 && t === i }), _create: function () { var t = this, i = this.options; this.running = !1, this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible", i.collapsible), this._processTabs(), i.active = this._initialActive(), e.isArray(i.disabled) && (i.disabled = e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"), function (e) { return t.tabs.index(e) }))).sort()), !1 !== this.options.active && this.anchors.length ? this.active = this._findActive(i.active) : this.active = e(), this._refresh(), this.active.length && this.load(i.active) }, _initialActive: function () { var t = this.options.active, i = this.options.collapsible, n = location.hash.substring(1); return null === t && (n && this.tabs.each(function (i, s) { if (e(s).attr("aria-controls") === n) return t = i, !1 }), null === t && (t = this.tabs.index(this.tabs.filter(".ui-tabs-active"))), null !== t && -1 !== t || (t = !!this.tabs.length && 0)), !1 !== t && -1 === (t = this.tabs.index(this.tabs.eq(t))) && (t = !i && 0), !i && !1 === t && this.anchors.length && (t = 0), t }, _getCreateEventData: function () { return { tab: this.active, panel: this.active.length ? this._getPanelForTab(this.active) : e() } }, _tabKeydown: function (t) { var i = e(this.document[0].activeElement).closest("li"), n = this.tabs.index(i), s = !0; if (!this._handlePageNav(t)) { switch (t.keyCode) { case e.ui.keyCode.RIGHT: case e.ui.keyCode.DOWN: n++; break; case e.ui.keyCode.UP: case e.ui.keyCode.LEFT: s = !1, n--; break; case e.ui.keyCode.END: n = this.anchors.length - 1; break; case e.ui.keyCode.HOME: n = 0; break; case e.ui.keyCode.SPACE: return t.preventDefault(), clearTimeout(this.activating), void this._activate(n); case e.ui.keyCode.ENTER: return t.preventDefault(), clearTimeout(this.activating), void this._activate(n !== this.options.active && n); default: return }t.preventDefault(), clearTimeout(this.activating), n = this._focusNextTab(n, s), t.ctrlKey || t.metaKey || (i.attr("aria-selected", "false"), this.tabs.eq(n).attr("aria-selected", "true"), this.activating = this._delay(function () { this.option("active", n) }, this.delay)) } }, _panelKeydown: function (t) { this._handlePageNav(t) || t.ctrlKey && t.keyCode === e.ui.keyCode.UP && (t.preventDefault(), this.active.focus()) }, _handlePageNav: function (t) { return t.altKey && t.keyCode === e.ui.keyCode.PAGE_UP ? (this._activate(this._focusNextTab(this.options.active - 1, !1)), !0) : t.altKey && t.keyCode === e.ui.keyCode.PAGE_DOWN ? (this._activate(this._focusNextTab(this.options.active + 1, !0)), !0) : void 0 }, _findNextTab: function (t, i) { var n = this.tabs.length - 1; for (; -1 !== e.inArray((t > n && (t = 0), t < 0 && (t = n), t), this.options.disabled);)t = i ? t + 1 : t - 1; return t }, _focusNextTab: function (e, t) { return e = this._findNextTab(e, t), this.tabs.eq(e).focus(), e }, _setOption: function (e, t) { "active" !== e ? "disabled" !== e ? (this._super(e, t), "collapsible" === e && (this.element.toggleClass("ui-tabs-collapsible", t), t || !1 !== this.options.active || this._activate(0)), "event" === e && this._setupEvents(t), "heightStyle" === e && this._setupHeightStyle(t)) : this._setupDisabled(t) : this._activate(t) }, _sanitizeSelector: function (e) { return e ? e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&") : "" }, refresh: function () { var t = this.options, i = this.tablist.children(":has(a[href])"); t.disabled = e.map(i.filter(".ui-state-disabled"), function (e) { return i.index(e) }), this._processTabs(), !1 !== t.active && this.anchors.length ? this.active.length && !e.contains(this.tablist[0], this.active[0]) ? this.tabs.length === t.disabled.length ? (t.active = !1, this.active = e()) : this._activate(this._findNextTab(Math.max(0, t.active - 1), !1)) : t.active = this.tabs.index(this.active) : (t.active = !1, this.active = e()), this._refresh() }, _refresh: function () { this._setupDisabled(this.options.disabled), this._setupEvents(this.options.event), this._setupHeightStyle(this.options.heightStyle), this.tabs.not(this.active).attr({ "aria-selected": "false", "aria-expanded": "false", tabIndex: -1 }), this.panels.not(this._getPanelForTab(this.active)).hide().attr({ "aria-hidden": "true" }), this.active.length ? (this.active.addClass("ui-tabs-active ui-state-active").attr({ "aria-selected": "true", "aria-expanded": "true", tabIndex: 0 }), this._getPanelForTab(this.active).show().attr({ "aria-hidden": "false" })) : this.tabs.eq(0).attr("tabIndex", 0) }, _processTabs: function () { var t = this, i = this.tabs, n = this.anchors, s = this.panels; this.tablist = this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role", "tablist").delegate("> li", "mousedown" + this.eventNamespace, function (t) { e(this).is(".ui-state-disabled") && t.preventDefault() }).delegate(".ui-tabs-anchor", "focus" + this.eventNamespace, function () { e(this).closest("li").is(".ui-state-disabled") && this.blur() }), this.tabs = this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({ role: "tab", tabIndex: -1 }), this.anchors = this.tabs.map(function () { return e("a", this)[0] }).addClass("ui-tabs-anchor").attr({ role: "presentation", tabIndex: -1 }), this.panels = e(), this.anchors.each(function (i, n) { var s, o, a, r = e(n).uniqueId().attr("id"), l = e(n).closest("li"), c = l.attr("aria-controls"); t._isLocal(n) ? (a = (s = n.hash).substring(1), o = t.element.find(t._sanitizeSelector(s))) : (s = "#" + (a = l.attr("aria-controls") || e({}).uniqueId()[0].id), (o = t.element.find(s)).length || (o = t._createPanel(a)).insertAfter(t.panels[i - 1] || t.tablist), o.attr("aria-live", "polite")), o.length && (t.panels = t.panels.add(o)), c && l.data("ui-tabs-aria-controls", c), l.attr({ "aria-controls": a, "aria-labelledby": r }), o.attr("aria-labelledby", r) }), this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role", "tabpanel"), i && (this._off(i.not(this.tabs)), this._off(n.not(this.anchors)), this._off(s.not(this.panels))) }, _getList: function () { return this.tablist || this.element.find("ol,ul").eq(0) }, _createPanel: function (t) { return e("<div>").attr("id", t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy", !0) }, _setupDisabled: function (t) { e.isArray(t) && (t.length ? t.length === this.anchors.length && (t = !0) : t = !1); for (var i, n = 0; i = this.tabs[n]; n++)!0 === t || -1 !== e.inArray(n, t) ? e(i).addClass("ui-state-disabled").attr("aria-disabled", "true") : e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled"); this.options.disabled = t }, _setupEvents: function (t) { var i = {}; t && e.each(t.split(" "), function (e, t) { i[t] = "_eventHandler" }), this._off(this.anchors.add(this.tabs).add(this.panels)), this._on(!0, this.anchors, { click: function (e) { e.preventDefault() } }), this._on(this.anchors, i), this._on(this.tabs, { keydown: "_tabKeydown" }), this._on(this.panels, { keydown: "_panelKeydown" }), this._focusable(this.tabs), this._hoverable(this.tabs) }, _setupHeightStyle: function (t) { var i, n = this.element.parent(); "fill" === t ? (i = n.height(), i -= this.element.outerHeight() - this.element.height(), this.element.siblings(":visible").each(function () { var t = e(this), n = t.css("position"); "absolute" !== n && "fixed" !== n && (i -= t.outerHeight(!0)) }), this.element.children().not(this.panels).each(function () { i -= e(this).outerHeight(!0) }), this.panels.each(function () { e(this).height(Math.max(0, i - e(this).innerHeight() + e(this).height())) }).css("overflow", "auto")) : "auto" === t && (i = 0, this.panels.each(function () { i = Math.max(i, e(this).height("").height()) }).height(i)) }, _eventHandler: function (t) { var i = this.options, n = this.active, s = e(t.currentTarget).closest("li"), o = s[0] === n[0], a = o && i.collapsible, r = a ? e() : this._getPanelForTab(s), l = n.length ? this._getPanelForTab(n) : e(), c = { oldTab: n, oldPanel: l, newTab: a ? e() : s, newPanel: r }; t.preventDefault(), s.hasClass("ui-state-disabled") || s.hasClass("ui-tabs-loading") || this.running || o && !i.collapsible || !1 === this._trigger("beforeActivate", t, c) || (i.active = !a && this.tabs.index(s), this.active = o ? e() : s, this.xhr && this.xhr.abort(), l.length || r.length || e.error("jQuery UI Tabs: Mismatching fragment identifier."), r.length && this.load(this.tabs.index(s), t), this._toggle(t, c)) }, _toggle: function (t, i) { var n = this, s = i.newPanel, o = i.oldPanel; function a() { n.running = !1, n._trigger("activate", t, i) } function r() { i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"), s.length && n.options.show ? n._show(s, n.options.show, a) : (s.show(), a()) } this.running = !0, o.length && this.options.hide ? this._hide(o, this.options.hide, function () { i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), r() }) : (i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), o.hide(), r()), o.attr("aria-hidden", "true"), i.oldTab.attr({ "aria-selected": "false", "aria-expanded": "false" }), s.length && o.length ? i.oldTab.attr("tabIndex", -1) : s.length && this.tabs.filter(function () { return 0 === e(this).attr("tabIndex") }).attr("tabIndex", -1), s.attr("aria-hidden", "false"), i.newTab.attr({ "aria-selected": "true", "aria-expanded": "true", tabIndex: 0 }) }, _activate: function (t) { var i, n = this._findActive(t); n[0] !== this.active[0] && (n.length || (n = this.active), i = n.find(".ui-tabs-anchor")[0], this._eventHandler({ target: i, currentTarget: i, preventDefault: e.noop })) }, _findActive: function (t) { return !1 === t ? e() : this.tabs.eq(t) }, _getIndex: function (e) { return "string" == typeof e && (e = this.anchors.index(this.anchors.filter("[href$='" + e + "']"))), e }, _destroy: function () { this.xhr && this.xhr.abort(), this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"), this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"), this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(), this.tablist.unbind(this.eventNamespace), this.tabs.add(this.panels).each(function () { e.data(this, "ui-tabs-destroy") ? e(this).remove() : e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role") }), this.tabs.each(function () { var t = e(this), i = t.data("ui-tabs-aria-controls"); i ? t.attr("aria-controls", i).removeData("ui-tabs-aria-controls") : t.removeAttr("aria-controls") }), this.panels.show(), "content" !== this.options.heightStyle && this.panels.css("height", "") }, enable: function (t) { var i = this.options.disabled; !1 !== i && (void 0 === t ? i = !1 : (t = this._getIndex(t), i = e.isArray(i) ? e.map(i, function (e) { return e !== t ? e : null }) : e.map(this.tabs, function (e, i) { return i !== t ? i : null })), this._setupDisabled(i)) }, disable: function (t) { var i = this.options.disabled; if (!0 !== i) { if (void 0 === t) i = !0; else { if (t = this._getIndex(t), -1 !== e.inArray(t, i)) return; i = e.isArray(i) ? e.merge([t], i).sort() : [t] } this._setupDisabled(i) } }, load: function (t, i) { t = this._getIndex(t); var n = this, s = this.tabs.eq(t), o = s.find(".ui-tabs-anchor"), a = this._getPanelForTab(s), r = { tab: s, panel: a }, l = function (e, t) { "abort" === t && n.panels.stop(!1, !0), s.removeClass("ui-tabs-loading"), a.removeAttr("aria-busy"), e === n.xhr && delete n.xhr }; this._isLocal(o[0]) || (this.xhr = e.ajax(this._ajaxSettings(o, i, r)), this.xhr && "canceled" !== this.xhr.statusText && (s.addClass("ui-tabs-loading"), a.attr("aria-busy", "true"), this.xhr.done(function (e, t, s) { setTimeout(function () { a.html(e), n._trigger("load", i, r), l(s, t) }, 1) }).fail(function (e, t) { setTimeout(function () { l(e, t) }, 1) }))) }, _ajaxSettings: function (t, i, n) { var s = this; return { url: t.attr("href"), beforeSend: function (t, o) { return s._trigger("beforeLoad", i, e.extend({ jqXHR: t, ajaxSettings: o }, n)) } } }, _getPanelForTab: function (t) { var i = e(t).attr("aria-controls"); return this.element.find(this._sanitizeSelector("#" + i)) } }) }), RecordRTC.version = "5.4.9", "undefined" != typeof module && (module.exports = RecordRTC), "function" == typeof define && define.amd && define("RecordRTC", [], function () { return RecordRTC }), RecordRTC.getFromDisk = function (e, t) { if (!t) throw "callback is mandatory."; console.log("Getting recorded " + ("all" === e ? "blobs" : e + " blob ") + " from disk!"), DiskStorage.Fetch(function (i, n) { "all" !== e && n === e + "Blob" && t && t(i), "all" === e && t && t(i, n.replace("Blob", "")) }) }, RecordRTC.writeToDisk = function (e) { console.log("Writing recorded blob(s) to disk!"), (e = e || {}).audio && e.video && e.gif ? e.audio.getDataURL(function (t) { e.video.getDataURL(function (i) { e.gif.getDataURL(function (e) { DiskStorage.Store({ audioBlob: t, videoBlob: i, gifBlob: e }) }) }) }) : e.audio && e.video ? e.audio.getDataURL(function (t) { e.video.getDataURL(function (e) { DiskStorage.Store({ audioBlob: t, videoBlob: e }) }) }) : e.audio && e.gif ? e.audio.getDataURL(function (t) { e.gif.getDataURL(function (e) { DiskStorage.Store({ audioBlob: t, gifBlob: e }) }) }) : e.video && e.gif ? e.video.getDataURL(function (t) { e.gif.getDataURL(function (e) { DiskStorage.Store({ videoBlob: t, gifBlob: e }) }) }) : e.audio ? e.audio.getDataURL(function (e) { DiskStorage.Store({ audioBlob: e }) }) : e.video ? e.video.getDataURL(function (e) { DiskStorage.Store({ videoBlob: e }) }) : e.gif && e.gif.getDataURL(function (e) { DiskStorage.Store({ gifBlob: e }) }) }, MRecordRTC.getFromDisk = RecordRTC.getFromDisk, MRecordRTC.writeToDisk = RecordRTC.writeToDisk, void 0 !== RecordRTC && (RecordRTC.MRecordRTC = MRecordRTC); var browserFakeUserAgent = "Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45"; !function (e) { e && "undefined" == typeof window && "undefined" != typeof global && (global.navigator = { userAgent: browserFakeUserAgent, getUserMedia: function () { } }, global.console || (global.console = {}), void 0 !== global.console.log && void 0 !== global.console.error || (global.console.error = global.console.log = global.console.log || function () { console.log(arguments) }), "undefined" == typeof document && (e.document = {}, document.createElement = document.captureStream = document.mozCaptureStream = function () { var e = { getContext: function () { return e }, play: function () { }, pause: function () { }, drawImage: function () { }, toDataURL: function () { return "" } }; return e }, e.HTMLVideoElement = function () { }), "undefined" == typeof location && (e.location = { protocol: "file:", href: "", hash: "" }), "undefined" == typeof screen && (e.screen = { width: 0, height: 0 }), void 0 === URL && (e.URL = { createObjectURL: function () { return "" }, revokeObjectURL: function () { return "" } }), e.window = global) }("undefined" != typeof global ? global : null); var requestAnimationFrame = window.requestAnimationFrame; if (void 0 === requestAnimationFrame) if ("undefined" != typeof webkitRequestAnimationFrame) requestAnimationFrame = webkitRequestAnimationFrame; else if ("undefined" != typeof mozRequestAnimationFrame) requestAnimationFrame = mozRequestAnimationFrame; else if ("undefined" != typeof msRequestAnimationFrame) requestAnimationFrame = msRequestAnimationFrame; else if (void 0 === requestAnimationFrame) { var lastTime = 0; requestAnimationFrame = function (e, t) { var i = (new Date).getTime(), n = Math.max(0, 16 - (i - lastTime)), s = setTimeout(function () { e(i + n) }, n); return lastTime = i + n, s } } var cancelAnimationFrame = window.cancelAnimationFrame; void 0 === cancelAnimationFrame && ("undefined" != typeof webkitCancelAnimationFrame ? cancelAnimationFrame = webkitCancelAnimationFrame : "undefined" != typeof mozCancelAnimationFrame ? cancelAnimationFrame = mozCancelAnimationFrame : "undefined" != typeof msCancelAnimationFrame ? cancelAnimationFrame = msCancelAnimationFrame : void 0 === cancelAnimationFrame && (cancelAnimationFrame = function (e) { clearTimeout(e) })); var AudioContext = window.AudioContext; void 0 === AudioContext && ("undefined" != typeof webkitAudioContext && (AudioContext = webkitAudioContext), "undefined" != typeof mozAudioContext && (AudioContext = mozAudioContext)); var URL = window.URL; void 0 === URL && "undefined" != typeof webkitURL && (URL = webkitURL), "undefined" != typeof navigator && void 0 === navigator.getUserMedia && (void 0 !== navigator.webkitGetUserMedia && (navigator.getUserMedia = navigator.webkitGetUserMedia), void 0 !== navigator.mozGetUserMedia && (navigator.getUserMedia = navigator.mozGetUserMedia)); var isEdge = !(-1 === navigator.userAgent.indexOf("Edge") || !navigator.msSaveBlob && !navigator.msSaveOrOpenBlob), isOpera = !!window.opera || -1 !== navigator.userAgent.indexOf("OPR/"), isSafari = -1 !== navigator.userAgent.toLowerCase().indexOf("safari/") && -1 === navigator.userAgent.toLowerCase().indexOf("chrome/"), isChrome = !isOpera && !isEdge && !!navigator.webkitGetUserMedia || isElectron() || -1 !== navigator.userAgent.toLowerCase().indexOf("chrome/"), MediaStream = window.MediaStream; function bytesToSize(e) { if (0 === e) return "0 Bytes"; var t = parseInt(Math.floor(Math.log(e) / Math.log(1e3)), 10); return (e / Math.pow(1e3, t)).toPrecision(3) + " " + ["Bytes", "KB", "MB", "GB", "TB"][t] } function invokeSaveAsDialog(e, t) { if (!e) throw "Blob object is required."; if (!e.type) try { e.type = "video/webm" } catch (e) { } var i = (e.type || "video/webm").split("/")[1]; if (t && -1 !== t.indexOf(".")) { var n = t.split("."); t = n[0], i = n[1] } var s = (t || Math.round(9999999999 * Math.random()) + 888888888) + "." + i; if (void 0 !== navigator.msSaveOrOpenBlob) return navigator.msSaveOrOpenBlob(e, s); if (void 0 !== navigator.msSaveBlob) return navigator.msSaveBlob(e, s); var o = document.createElement("a"); o.href = URL.createObjectURL(e), o.download = s, o.style = "display:none;opacity:0;color:transparent;", (document.body || document.documentElement).appendChild(o), "function" == typeof o.click ? o.click() : (o.target = "_blank", o.dispatchEvent(new MouseEvent("click", { view: window, bubbles: !0, cancelable: !0 }))), URL.revokeObjectURL(o.href) } function isElectron() { return "undefined" != typeof window && "object" == typeof window.process && "renderer" === window.process.type || (!("undefined" == typeof process || "object" != typeof process.versions || !process.versions.electron) || "object" == typeof navigator && "string" == typeof navigator.userAgent && navigator.userAgent.indexOf("Electron") >= 0) } function setSrcObject(e, t, i) { if ("srcObject" in t) t.srcObject = e; else if ("mozSrcObject" in t) t.mozSrcObject = e; else if ("createObjectURL" in URL && !i) try { t.src = URL.createObjectURL(e) } catch (i) { return void setSrcObject(e, t, !0) } else alert("createObjectURL/srcObject both are not supported.") } void 0 === MediaStream && "undefined" != typeof webkitMediaStream && (MediaStream = webkitMediaStream), void 0 !== MediaStream && ("getVideoTracks" in MediaStream.prototype || (MediaStream.prototype.getVideoTracks = function () { if (!this.getTracks) return []; var e = []; return this.getTracks().forEach(function (t) { -1 !== t.kind.toString().indexOf("video") && e.push(t) }), e }, MediaStream.prototype.getAudioTracks = function () { if (!this.getTracks) return []; var e = []; return this.getTracks().forEach(function (t) { -1 !== t.kind.toString().indexOf("audio") && e.push(t) }), e }), void 0 === MediaStream.prototype.stop && (MediaStream.prototype.stop = function () { this.getTracks().forEach(function (e) { e.stop() }) })); var Storage = {}; function isMediaRecorderCompatible() { var e = !!window.opera || navigator.userAgent.indexOf(" OPR/") >= 0, t = !!window.chrome && !e || isElectron(); if (void 0 !== window.InstallTrigger) return !0; navigator.appVersion; var i, n, s = navigator.userAgent, o = "" + parseFloat(navigator.appVersion), a = parseInt(navigator.appVersion, 10); return (t || e) && (i = s.indexOf("Chrome"), o = s.substring(i + 7)), -1 !== (n = o.indexOf(";")) && (o = o.substring(0, n)), -1 !== (n = o.indexOf(" ")) && (o = o.substring(0, n)), a = parseInt("" + o, 10), isNaN(a) && (o = "" + parseFloat(navigator.appVersion), a = parseInt(navigator.appVersion, 10)), a >= 49 } function MediaStreamRecorder(e, t) { var i = this; if (void 0 === e) throw 'First argument "MediaStream" is required.'; if ("undefined" == typeof MediaRecorder) throw "Your browser does not supports Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder."; if ("audio" === (t = t || { mimeType: "video/webm" }).type) { var n; if (e.getVideoTracks().length && e.getAudioTracks().length) navigator.mozGetUserMedia ? (n = new MediaStream).addTrack(e.getAudioTracks()[0]) : n = new MediaStream(e.getAudioTracks()), e = n; t.mimeType && -1 !== t.mimeType.toString().toLowerCase().indexOf("audio") || (t.mimeType = isChrome ? "audio/webm" : "audio/ogg"), t.mimeType && "audio/ogg" !== t.mimeType.toString().toLowerCase() && navigator.mozGetUserMedia && (t.mimeType = "audio/ogg") } var s, o = []; function a() { i.timestamps.push((new Date).getTime()), "function" == typeof t.onTimeStamp && t.onTimeStamp(i.timestamps[i.timestamps.length - 1], i.timestamps) } function r(e) { return s && s.mimeType ? s.mimeType : e.mimeType || "video/webm" } function l() { o = [], s = null, i.timestamps = [] } this.getArrayOfBlobs = function () { return o }, this.record = function () { i.blob = null, i.clearRecordedData(), i.timestamps = [], c = [], o = []; var n = t; t.disableLogs || console.log("Passing following config over MediaRecorder API.", n), s && (s = null), isChrome && !isMediaRecorderCompatible() && (n = "video/vp8"), "function" == typeof MediaRecorder.isTypeSupported && n.mimeType && (MediaRecorder.isTypeSupported(n.mimeType) || (t.disableLogs || console.warn("MediaRecorder API seems unable to record mimeType:", n.mimeType), n.mimeType = "audio" === t.type ? "audio/webm" : "video/webm")); try { s = new MediaRecorder(e, n), t.mimeType = n.mimeType } catch (t) { s = new MediaRecorder(e) } n.mimeType && !MediaRecorder.isTypeSupported && "canRecordMimeType" in s && !1 === s.canRecordMimeType(n.mimeType) && (t.disableLogs || console.warn("MediaRecorder API seems unable to record mimeType:", n.mimeType)), s.ondataavailable = function (e) { if (e.data && c.push("ondataavailable: " + bytesToSize(e.data.size)), "number" != typeof t.timeSlice) !e.data || !e.data.size || e.data.size < 100 || i.blob ? i.recordingCallback && (i.recordingCallback(new Blob([], { type: r(n) })), i.recordingCallback = null) : (i.blob = t.getNativeBlob ? e.data : new Blob([e.data], { type: r(n) }), i.recordingCallback && (i.recordingCallback(i.blob), i.recordingCallback = null)); else if (e.data && e.data.size && e.data.size > 100 && (o.push(e.data), a(), "function" == typeof t.ondataavailable)) { var s = t.getNativeBlob ? e.data : new Blob([e.data], { type: r(n) }); t.ondataavailable(s) } }, s.onstart = function () { c.push("started") }, s.onpause = function () { c.push("paused") }, s.onresume = function () { c.push("resumed") }, s.onstop = function () { c.push("stopped") }, s.onerror = function (e) { e && (e.name || (e.name = "UnknownError"), c.push("error: " + e), t.disableLogs || (-1 !== e.name.toString().toLowerCase().indexOf("invalidstate") ? console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.", e) : -1 !== e.name.toString().toLowerCase().indexOf("notsupported") ? console.error("MIME type (", n.mimeType, ") is not supported.", e) : -1 !== e.name.toString().toLowerCase().indexOf("security") ? console.error("MediaRecorder security error", e) : "OutOfMemory" === e.name ? console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.", e) : "IllegalStreamModification" === e.name ? console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.", e) : "OtherRecordingError" === e.name ? console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.", e) : "GenericError" === e.name ? console.error("The UA cannot provide the codec or recording option that has been requested.", e) : console.error("MediaRecorder Error", e)), function (e) { if (!i.manuallyStopped && s && "inactive" === s.state) return delete t.timeslice, void s.start(6e5); setTimeout(void 0, 1e3) }(), "inactive" !== s.state && "stopped" !== s.state && s.stop()) }, "number" == typeof t.timeSlice ? (a(), s.start(t.timeSlice)) : s.start(36e5), t.initCallback && t.initCallback() }, this.timestamps = [], this.stop = function (e) { e = e || function () { }, i.manuallyStopped = !0, s && (this.recordingCallback = e, "recording" === s.state && s.stop(), "number" == typeof t.timeSlice && setTimeout(function () { i.blob = new Blob(o, { type: r(t) }), i.recordingCallback(i.blob) }, 100)) }, this.pause = function () { s && "recording" === s.state && s.pause() }, this.resume = function () { s && "paused" === s.state && s.resume() }, this.clearRecordedData = function () { s && "recording" === s.state && i.stop(l), l() }, this.getInternalRecorder = function () { return s }, this.blob = null, this.getState = function () { return s && s.state || "inactive" }; var c = []; this.getAllStates = function () { return c }, void 0 === t.checkForInactiveTracks && (t.checkForInactiveTracks = !1); i = this; !function n() { if (s && !1 !== t.checkForInactiveTracks) return !1 === function () { if ("active" in e) { if (!e.active) return !1 } else if ("ended" in e && e.ended) return !1; return !0 }() ? (t.disableLogs || console.log("MediaStream seems stopped."), void i.stop()) : void setTimeout(n, 1e3) }(), this.name = "MediaStreamRecorder", this.toString = function () { return this.name } } function StereoAudioRecorder(e, t) { if (!e.getAudioTracks().length) throw "Your stream has no audio tracks."; var i, n = this, s = [], o = [], a = !1, r = 0, l = 2, c = (t = t || {}).desiredSampRate; function d() { if (!1 === t.checkForInactiveTracks) return !0; if ("active" in e) { if (!e.active) return !1 } else if ("ended" in e && e.ended) return !1; return !0 } function h(e, t) { function i(e, t) { var i, n = e.numberOfAudioChannels, s = e.leftBuffers.slice(0), o = e.rightBuffers.slice(0), a = e.sampleRate, r = e.internalInterleavedLength, l = e.desiredSampRate; function c(e, t, i) { var n = Math.round(e.length * (t / i)), s = [], o = Number((e.length - 1) / (n - 1)); s[0] = e[0]; for (var a = 1; a < n - 1; a++) { var r = a * o, l = Number(Math.floor(r)).toFixed(), c = Number(Math.ceil(r)).toFixed(), h = r - l; s[a] = d(e[l], e[c], h) } return s[n - 1] = e[e.length - 1], s } function d(e, t, i) { return e + (t - e) * i } function h(e, t) { for (var i = new Float64Array(t), n = 0, s = e.length, o = 0; o < s; o++) { var a = e[o]; i.set(a, n), n += a.length } return i } function u(e, t, i) { for (var n = i.length, s = 0; s < n; s++)e.setUint8(t + s, i.charCodeAt(s)) } 2 === n && (s = h(s, r), o = h(o, r), l && (s = c(s, l, a), o = c(o, l, a))), 1 === n && (s = h(s, r), l && (s = c(s, l, a))), l && (a = l), 2 === n && (i = function (e, t) { for (var i = e.length + t.length, n = new Float64Array(i), s = 0, o = 0; o < i;)n[o++] = e[s], n[o++] = t[s], s++; return n }(s, o)), 1 === n && (i = s); var p = i.length, f = new ArrayBuffer(44 + 2 * p), m = new DataView(f); u(m, 0, "RIFF"), m.setUint32(4, 44 + 2 * p, !0), u(m, 8, "WAVE"), u(m, 12, "fmt "), m.setUint32(16, 16, !0), m.setUint16(20, 1, !0), m.setUint16(22, n, !0), m.setUint32(24, a, !0), m.setUint32(28, 2 * a, !0), m.setUint16(32, 2 * n, !0), m.setUint16(34, 16, !0), u(m, 36, "data"), m.setUint32(40, 2 * p, !0); for (var g = p, v = 44, b = 0; b < g; b++)m.setInt16(v, 32767 * i[b], !0), v += 2; if (t) return t({ buffer: f, view: m }); postMessage({ buffer: f, view: m }) } if (e.noWorker) i(e, function (e) { t(e.buffer, e.view) }); else { var n, s, o, a = (n = i, s = URL.createObjectURL(new Blob([n.toString(), ";this.onmessage =  function (eee) {" + n.name + "(eee.data);}"], { type: "application/javascript" })), (o = new Worker(s)).workerURL = s, o); a.onmessage = function (e) { t(e.data.buffer, e.data.view), URL.revokeObjectURL(a.workerURL), a.terminate() }, a.postMessage(e) } } if (!0 === t.leftChannel && (l = 1), 1 === t.numberOfAudioChannels && (l = 1), (!l || l < 1) && (l = 2), t.disableLogs || console.log("StereoAudioRecorder is set to record number of channels: " + l), void 0 === t.checkForInactiveTracks && (t.checkForInactiveTracks = !0), this.record = function () { if (!1 === d()) throw "Please make sure MediaStream is active."; y(), _ = b = !1, a = !0, void 0 !== t.timeSlice && k() }, this.stop = function (e) { e = e || function () { }, a = !1, h({ desiredSampRate: c, sampleRate: v, numberOfAudioChannels: l, internalInterleavedLength: r, leftBuffers: s, rightBuffers: 1 === l ? [] : o, noWorker: t.noWorker }, function (t, i) { n.blob = new Blob([i], { type: "audio/wav" }), n.buffer = new ArrayBuffer(i.buffer.byteLength), n.view = i, n.sampleRate = c || v, n.bufferSize = g, n.length = r, _ = !1, e && e(n.blob) }) }, void 0 === u) var u = { AudioContextConstructor: null, AudioContext: window.AudioContext || window.webkitAudioContext }; u.AudioContextConstructor || (u.AudioContextConstructor = new u.AudioContext); var p = u.AudioContextConstructor, f = p.createMediaStreamSource(e), m = [0, 256, 512, 1024, 2048, 4096, 8192, 16384], g = void 0 === t.bufferSize ? 4096 : t.bufferSize; if (-1 === m.indexOf(g) && (t.disableLogs || console.log("Legal values for buffer-size are " + JSON.stringify(m, null, "\t"))), p.createJavaScriptNode) i = p.createJavaScriptNode(g, l, l); else { if (!p.createScriptProcessor) throw "WebAudio API has no support on this browser."; i = p.createScriptProcessor(g, l, l) } f.connect(i), t.bufferSize || (g = i.bufferSize); var v = void 0 !== t.sampleRate ? t.sampleRate : p.sampleRate || 44100; (v < 22050 || v > 96e3) && (t.disableLogs || console.log("sample-rate must be under range 22050 and 96000.")), t.disableLogs || t.desiredSampRate && console.log("Desired sample-rate: " + t.desiredSampRate); var b = !1; function y() { s = [], o = [], r = 0, _ = !1, a = !1, b = !1, p = null, n.leftchannel = s, n.rightchannel = o, n.numberOfAudioChannels = l, n.desiredSampRate = c, n.sampleRate = v, n.recordingLength = r, C = { left: [], right: [], recordingLength: 0 } } function w() { i && (i.onaudioprocess = null, i.disconnect(), i = null), f && (f.disconnect(), f = null), y() } this.pause = function () { b = !0 }, this.resume = function () { if (!1 === d()) throw "Please make sure MediaStream is active."; if (!a) return t.disableLogs || console.log("Seems recording has been restarted."), void this.record(); b = !1 }, this.clearRecordedData = function () { t.checkForInactiveTracks = !1, a && this.stop(w), w() }, this.name = "StereoAudioRecorder", this.toString = function () { return this.name }; var _ = !1; i.onaudioprocess = function (e) { if (!b) if (!1 === d() && (t.disableLogs || console.log("MediaStream seems stopped."), i.disconnect(), a = !1), a) { _ || (_ = !0, t.onAudioProcessStarted && t.onAudioProcessStarted(), t.initCallback && t.initCallback()); var c = e.inputBuffer.getChannelData(0), h = new Float32Array(c); if (s.push(h), 2 === l) { var u = e.inputBuffer.getChannelData(1), p = new Float32Array(u); o.push(p) } r += g, n.recordingLength = r, void 0 !== t.timeSlice && (C.recordingLength += g, C.left.push(h), 2 === l && C.right.push(p)) } else f && (f.disconnect(), f = null) }, p.createMediaStreamDestination ? i.connect(p.createMediaStreamDestination()) : i.connect(p.destination), this.leftchannel = s, this.rightchannel = o, this.numberOfAudioChannels = l, this.desiredSampRate = c, this.sampleRate = v, n.recordingLength = r; var C = { left: [], right: [], recordingLength: 0 }; function k() { a && "function" == typeof t.ondataavailable && void 0 !== t.timeSlice && (C.left.length ? (h({ desiredSampRate: c, sampleRate: v, numberOfAudioChannels: l, internalInterleavedLength: C.recordingLength, leftBuffers: C.left, rightBuffers: 1 === l ? [] : C.right }, function (e, i) { var n = new Blob([i], { type: "audio/wav" }); t.ondataavailable(n), setTimeout(k, t.timeSlice) }), C = { left: [], right: [], recordingLength: 0 }) : setTimeout(k, t.timeSlice)) } } function CanvasRecorder(e, t) { if ("undefined" == typeof html2canvas) throw "Please link: https://cdn.webrtc-experiment.com/screenshot.js"; (t = t || {}).frameInterval || (t.frameInterval = 10); var i = !1;["captureStream", "mozCaptureStream", "webkitCaptureStream"].forEach(function (e) { e in document.createElement("canvas") && (i = !0) }); var n, s, o, a = !(!window.webkitRTCPeerConnection && !window.webkitGetUserMedia || !window.chrome), r = 50, l = navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./); if (a && l && l[2] && (r = parseInt(l[2], 10)), a && r < 52 && (i = !1), t.useWhammyRecorder && (i = !1), i) if (t.disableLogs || console.log("Your browser supports both MediRecorder API and canvas.captureStream!"), e instanceof HTMLCanvasElement) n = e; else { if (!(e instanceof CanvasRenderingContext2D)) throw "Please pass either HTMLCanvasElement or CanvasRenderingContext2D."; n = e.canvas } else navigator.mozGetUserMedia && (t.disableLogs || console.error("Canvas recording is NOT supported in Firefox.")); this.record = function () { if (o = !0, i && !t.useWhammyRecorder) { var e; "captureStream" in n ? e = n.captureStream(25) : "mozCaptureStream" in n ? e = n.mozCaptureStream(25) : "webkitCaptureStream" in n && (e = n.webkitCaptureStream(25)); try { var a = new MediaStream; a.addTrack(e.getVideoTracks()[0]), e = a } catch (e) { } if (!e) throw "captureStream API are NOT available."; (s = new MediaStreamRecorder(e, { mimeType: "video/webm" })).record() } else p.frames = [], u = (new Date).getTime(), h(); t.initCallback && t.initCallback() }, this.getWebPImages = function (i) { if ("canvas" === e.nodeName.toLowerCase()) { var n = p.frames.length; p.frames.forEach(function (e, i) { var s = n - i; t.disableLogs || console.log(s + "/" + n + " frames remaining"), t.onEncodingCallback && t.onEncodingCallback(s, n); var o = e.image.toDataURL("image/webp", 1); p.frames[i].image = o }), t.disableLogs || console.log("Generating WebM"), i() } else i() }, this.stop = function (e) { o = !1; var n = this; i && s ? s.stop(e) : this.getWebPImages(function () { p.compile(function (i) { t.disableLogs || console.log("Recording finished!"), n.blob = i, n.blob.forEach && (n.blob = new Blob([], { type: "video/webm" })), e && e(n.blob), p.frames = [] }) }) }; var c = !1; function d() { p.frames = [], o = !1, c = !1 } function h() { if (c) return u = (new Date).getTime(), setTimeout(h, 500); if ("canvas" === e.nodeName.toLowerCase()) { var i = (new Date).getTime() - u; return u = (new Date).getTime(), p.frames.push({ image: (n = document.createElement("canvas"), s = n.getContext("2d"), n.width = e.width, n.height = e.height, s.drawImage(e, 0, 0), n), duration: i }), void (o && setTimeout(h, t.frameInterval)) } var n, s; html2canvas(e, { grabMouse: void 0 === t.showMousePointer || t.showMousePointer, onrendered: function (e) { var i = (new Date).getTime() - u; if (!i) return setTimeout(h, t.frameInterval); u = (new Date).getTime(), p.frames.push({ image: e.toDataURL("image/webp", 1), duration: i }), o && setTimeout(h, t.frameInterval) } }) } this.pause = function () { c = !0, s instanceof MediaStreamRecorder && s.pause() }, this.resume = function () { c = !1, s instanceof MediaStreamRecorder ? s.resume() : o || this.record() }, this.clearRecordedData = function () { o && this.stop(d), d() }, this.name = "CanvasRecorder", this.toString = function () { return this.name }; var u = (new Date).getTime(), p = new Whammy.Video(100) } function WhammyRecorder(e, t) { function i(e) { e = void 0 !== e ? e : 10; var t = (new Date).getTime() - l; return t ? o ? (l = (new Date).getTime(), setTimeout(i, 100)) : (l = (new Date).getTime(), r.paused && r.play(), h.drawImage(r, 0, 0, d.width, d.height), c.frames.push({ duration: t, image: d.toDataURL("image/webp") }), void (s || setTimeout(i, e, e))) : setTimeout(i, e, e) } function n(e, t, i, n, s) { var o = document.createElement("canvas"); o.width = d.width, o.height = d.height; var a, r, l, c = o.getContext("2d"), h = [], u = -1 === t, p = t && t > 0 && t <= e.length ? t : e.length, f = 0, m = 0, g = 0, v = Math.sqrt(Math.pow(255, 2) + Math.pow(255, 2) + Math.pow(255, 2)), b = i && i >= 0 && i <= 1 ? i : 0, y = n && n >= 0 && n <= 1 ? n : 0, w = !1; r = -1, l = (a = { length: p, functionToLoop: function (t, i) { var n, s, o, a = function () { !w && o - n <= o * y || (u && (w = !0), h.push(e[i])), t() }; if (w) a(); else { var r = new Image; r.onload = function () { c.drawImage(r, 0, 0, d.width, d.height); var e = c.getImageData(0, 0, d.width, d.height); n = 0, s = e.data.length, o = e.data.length / 4; for (var t = 0; t < s; t += 4) { var i = { r: e.data[t], g: e.data[t + 1], b: e.data[t + 2] }; Math.sqrt(Math.pow(i.r - f, 2) + Math.pow(i.g - m, 2) + Math.pow(i.b - g, 2)) <= v * b && n++ } a() }, r.src = e[i].image } }, callback: function () { (h = h.concat(e.slice(p))).length <= 0 && h.push(e[e.length - 1]), s(h) } }).length, function e() { ++r !== l ? setTimeout(function () { a.functionToLoop(e, r) }, 1) : a.callback() }() } (t = t || {}).frameInterval || (t.frameInterval = 10), t.disableLogs || console.log("Using frames-interval:", t.frameInterval), this.record = function () { t.width || (t.width = 320), t.height || (t.height = 240), t.video || (t.video = { width: t.width, height: t.height }), t.canvas || (t.canvas = { width: t.width, height: t.height }), d.width = t.canvas.width || 320, d.height = t.canvas.height || 240, h = d.getContext("2d"), t.video && t.video instanceof HTMLVideoElement ? (r = t.video.cloneNode(), t.initCallback && t.initCallback()) : (r = document.createElement("video"), setSrcObject(e, r), r.onloadedmetadata = function () { t.initCallback && t.initCallback() }, r.width = t.video.width, r.height = t.video.height), r.muted = !0, r.play(), l = (new Date).getTime(), c = new Whammy.Video, t.disableLogs || (console.log("canvas resolutions", d.width, "*", d.height), console.log("video width/height", r.width || d.width, "*", r.height || d.height)), i(t.frameInterval) }; var s = !1; this.stop = function (e) { e = e || function () { }, s = !0; var i = this; setTimeout(function () { n(c.frames, -1, null, null, function (n) { c.frames = n, t.advertisement && t.advertisement.length && (c.frames = t.advertisement.concat(c.frames)), c.compile(function (t) { i.blob = t, i.blob.forEach && (i.blob = new Blob([], { type: "video/webm" })), e && e(i.blob) }) }) }, 10) }; var o = !1; function a() { c.frames = [], s = !0, o = !1 } this.pause = function () { o = !0 }, this.resume = function () { o = !1, s && this.record() }, this.clearRecordedData = function () { s || this.stop(a), a() }, this.name = "WhammyRecorder", this.toString = function () { return this.name }; var r, l, c, d = document.createElement("canvas"), h = d.getContext("2d") } void 0 !== AudioContext ? Storage.AudioContext = AudioContext : "undefined" != typeof webkitAudioContext && (Storage.AudioContext = webkitAudioContext), void 0 !== RecordRTC && (RecordRTC.Storage = Storage), void 0 !== RecordRTC && (RecordRTC.MediaStreamRecorder = MediaStreamRecorder), void 0 !== RecordRTC && (RecordRTC.StereoAudioRecorder = StereoAudioRecorder), void 0 !== RecordRTC && (RecordRTC.CanvasRecorder = CanvasRecorder), void 0 !== RecordRTC && (RecordRTC.WhammyRecorder = WhammyRecorder); var Whammy = function () { function e(e) { this.frames = [], this.duration = e || 1, this.quality = .8 } function t(e) { function t(e, t, i) { return [{ data: e, id: 231 }].concat(i.map(function (e) { var i = function (e) { var t = 0; e.keyframe && (t |= 128); e.invisible && (t |= 8); e.lacing && (t |= e.lacing << 1); e.discardable && (t |= 1); if (e.trackNum > 127) throw "TrackNumber > 127 not supported"; return [128 | e.trackNum, e.timecode >> 8, 255 & e.timecode, t].map(function (e) { return String.fromCharCode(e) }).join("") + e.frame }({ discardable: 0, frame: e.data.slice(4), invisible: 0, keyframe: 1, lacing: 0, trackNum: 1, timecode: Math.round(t) }); return t += e.duration, { data: i, id: 163 } })) } function i(e) { for (var t = []; e > 0;)t.push(255 & e), e >>= 8; return new Uint8Array(t.reverse()) } function n(e) { var t = []; e = (e.length % 8 ? new Array(9 - e.length % 8).join("0") : "") + e; for (var i = 0; i < e.length; i += 8)t.push(parseInt(e.substr(i, 8), 2)); return new Uint8Array(t) } function s(e, t) { return parseInt(e.substr(t + 4, 4).split("").map(function (e) { var t = e.charCodeAt(0).toString(2); return new Array(8 - t.length + 1).join("0") + t }).join(""), 2) } var o = new function (e) { var s = function (e) { if (e[0]) { for (var t = e[0].width, i = e[0].height, n = e[0].duration, s = 1; s < e.length; s++)n += e[s].duration; return { duration: n, width: t, height: i } } postMessage({ error: "Something went wrong. Maybe WebP format is not supported in the current browser." }) }(e); if (!s) return []; for (var o, a = [{ id: 440786851, data: [{ data: 1, id: 17030 }, { data: 1, id: 17143 }, { data: 4, id: 17138 }, { data: 8, id: 17139 }, { data: "webm", id: 17026 }, { data: 2, id: 17031 }, { data: 2, id: 17029 }] }, { id: 408125543, data: [{ id: 357149030, data: [{ data: 1e6, id: 2807729 }, { data: "whammy", id: 19840 }, { data: "whammy", id: 22337 }, { data: (o = s.duration, [].slice.call(new Uint8Array(new Float64Array([o]).buffer), 0).map(function (e) { return String.fromCharCode(e) }).reverse().join("")), id: 17545 }] }, { id: 374648427, data: [{ id: 174, data: [{ data: 1, id: 215 }, { data: 1, id: 29637 }, { data: 0, id: 156 }, { data: "und", id: 2274716 }, { data: "V_VP8", id: 134 }, { data: "VP8", id: 2459272 }, { data: 1, id: 131 }, { id: 224, data: [{ data: s.width, id: 176 }, { data: s.height, id: 186 }] }] }] }] }], r = 0, l = 0; r < e.length;) { var c = [], d = 0; do { c.push(e[r]), d += e[r].duration, r++ } while (r < e.length && d < 3e4); var h = { id: 524531317, data: t(l, 0, c) }; a[1].data.push(h), l += d } return function e(t) { for (var s = [], o = 0; o < t.length; o++) { var a = t[o].data; "object" == typeof a && (a = e(a)), "number" == typeof a && (a = n(a.toString(2))), "string" == typeof a && (a = new Uint8Array(a.split("").map(function (e) { return e.charCodeAt(0) }))); var r = a.size || a.byteLength || a.length, l = Math.ceil(Math.ceil(Math.log(r) / Math.log(2)) / 8), c = r.toString(2), d = new Array(7 * l + 7 + 1 - c.length).join("0") + c, h = new Array(l).join("0") + "1" + d; s.push(i(t[o].id)), s.push(n(h)), s.push(a) } return new Blob(s, { type: "video/webm" }) }(a) }(e.map(function (e) { var t = function (e) { for (var t = e.RIFF[0].WEBP[0], i = t.indexOf("*"), n = 0, s = []; n < 4; n++)s[n] = t.charCodeAt(i + 3 + n); return { width: 16383 & (s[1] << 8 | s[0]), height: 16383 & (s[3] << 8 | s[2]), data: t, riff: e } }(function e(t) { for (var i = 0, n = {}; i < t.length;) { var o = t.substr(i, 4), a = s(t, i), r = t.substr(i + 4 + 4, a); i += 8 + a, n[o] = n[o] || [], "RIFF" === o || "LIST" === o ? n[o].push(e(r)) : n[o].push(r) } return n }(atob(e.image.slice(23)))); return t.duration = e.duration, t })); postMessage(o) } return e.prototype.add = function (e, t) { if ("canvas" in e && (e = e.canvas), "toDataURL" in e && (e = e.toDataURL("image/webp", this.quality)), !/^data:image\/webp;base64,/gi.test(e)) throw "Input must be formatted properly as a base64 encoded DataURI of type image/webp"; this.frames.push({ image: e, duration: t || this.duration }) }, e.prototype.compile = function (e) { var i, n, s, o = (i = t, n = URL.createObjectURL(new Blob([i.toString(), "this.onmessage =  function (eee) {" + i.name + "(eee.data);}"], { type: "application/javascript" })), s = new Worker(n), URL.revokeObjectURL(n), s); o.onmessage = function (t) { t.data.error ? console.error(t.data.error) : e(t.data) }, o.postMessage(this.frames) }, { Video: e } }(); void 0 !== RecordRTC && (RecordRTC.Whammy = Whammy); var DiskStorage = { init: function () { var e = this; if ("undefined" != typeof indexedDB && void 0 !== indexedDB.open) { var t, i = this.dbName || location.href.replace(/\/|:|#|%|\.|\[|\]/g, ""), n = indexedDB.open(i, 1); n.onerror = e.onError, n.onsuccess = function () { ((t = n.result).onerror = e.onError, t.setVersion) ? 1 !== t.version ? t.setVersion(1).onsuccess = function () { s(t), o() } : o() : o() }, n.onupgradeneeded = function (e) { s(e.target.result) } } else console.error("IndexedDB API are not available in this browser."); function s(t) { t.createObjectStore(e.dataStoreName) } function o() { var i = t.transaction([e.dataStoreName], "readwrite"); function n(t) { i.objectStore(e.dataStoreName).get(t).onsuccess = function (i) { e.callback && e.callback(i.target.result, t) } } e.videoBlob && i.objectStore(e.dataStoreName).put(e.videoBlob, "videoBlob"), e.gifBlob && i.objectStore(e.dataStoreName).put(e.gifBlob, "gifBlob"), e.audioBlob && i.objectStore(e.dataStoreName).put(e.audioBlob, "audioBlob"), n("audioBlob"), n("videoBlob"), n("gifBlob") } }, Fetch: function (e) { return this.callback = e, this.init(), this }, Store: function (e) { return this.audioBlob = e.audioBlob, this.videoBlob = e.videoBlob, this.gifBlob = e.gifBlob, this.init(), this }, onError: function (e) { console.error(JSON.stringify(e, null, "\t")) }, dataStoreName: "recordRTC", dbName: null }; function GifRecorder(e, t) { if ("undefined" == typeof GIFEncoder) { var i = document.createElement("script"); i.src = "https://cdn.webrtc-experiment.com/gif-recorder.js", (document.body || document.documentElement).appendChild(i) } t = t || {}; var n = e instanceof CanvasRenderingContext2D || e instanceof HTMLCanvasElement; this.record = function () { "undefined" != typeof GIFEncoder && r ? (n || (t.width || (t.width = l.offsetWidth || 320), t.height || (t.height = l.offsetHeight || 240), t.video || (t.video = { width: t.width, height: t.height }), t.canvas || (t.canvas = { width: t.width, height: t.height }), o.width = t.canvas.width || 320, o.height = t.canvas.height || 240, l.width = t.video.width || 320, l.height = t.video.height || 240), (d = new GIFEncoder).setRepeat(0), d.setDelay(t.frameRate || 200), d.setQuality(t.quality || 10), d.start(), "function" == typeof t.onGifRecordingStarted && t.onGifRecordingStarted(), Date.now(), h = requestAnimationFrame(function e(i) { if (!0 !== u.clearedRecordedData) { if (s) return setTimeout(function () { e(i) }, 100); h = requestAnimationFrame(e), void 0 === typeof c && (c = i), i - c < 90 || (!n && l.paused && l.play(), n || a.drawImage(l, 0, 0, o.width, o.height), t.onGifPreview && t.onGifPreview(o.toDataURL("image/png")), d.addFrame(a), c = i) } }), t.initCallback && t.initCallback()) : setTimeout(u.record, 1e3) }, this.stop = function (e) { e = e || function () { }, h && cancelAnimationFrame(h), Date.now(), this.blob = new Blob([new Uint8Array(d.stream().bin)], { type: "image/gif" }), e(this.blob), d.stream().bin = [] }; var s = !1; this.pause = function () { s = !0 }, this.resume = function () { s = !1 }, this.clearRecordedData = function () { u.clearedRecordedData = !0, d && (d.stream().bin = []) }, this.name = "GifRecorder", this.toString = function () { return this.name }; var o = document.createElement("canvas"), a = o.getContext("2d"); n && (e instanceof CanvasRenderingContext2D ? o = (a = e).canvas : e instanceof HTMLCanvasElement && (a = e.getContext("2d"), o = e)); var r = !0; if (!n) { var l = document.createElement("video"); l.muted = !0, l.autoplay = !0, r = !1, l.onloadedmetadata = function () { r = !0 }, setSrcObject(e, l), l.play() } var c, d, h = null, u = this } function MultiStreamsMixer(e) { var t = [], i = !1, n = document.createElement("canvas"), s = n.getContext("2d"); n.style = "opacity:0;position:absolute;z-index:-1;top: -100000000;left:-1000000000; margin-top:-1000000000;margin-left:-1000000000;", (document.body || document.documentElement).appendChild(n), this.disableLogs = !1, this.frameInterval = 10, this.width = 360, this.height = 240, this.useGainNode = !0; var o = this, a = window.AudioContext; void 0 === a && ("undefined" != typeof webkitAudioContext && (a = webkitAudioContext), "undefined" != typeof mozAudioContext && (a = mozAudioContext)); var r = window.URL; void 0 === r && "undefined" != typeof webkitURL && (r = webkitURL), "undefined" != typeof navigator && void 0 === navigator.getUserMedia && (void 0 !== navigator.webkitGetUserMedia && (navigator.getUserMedia = navigator.webkitGetUserMedia), void 0 !== navigator.mozGetUserMedia && (navigator.getUserMedia = navigator.mozGetUserMedia)); var l = window.MediaStream; void 0 === l && "undefined" != typeof webkitMediaStream && (l = webkitMediaStream), void 0 !== l && ("getVideoTracks" in l.prototype || (l.prototype.getVideoTracks = function () { if (!this.getTracks) return []; var e = []; return this.getTracks.forEach(function (t) { -1 !== t.kind.toString().indexOf("video") && e.push(t) }), e }, l.prototype.getAudioTracks = function () { if (!this.getTracks) return []; var e = []; return this.getTracks.forEach(function (t) { -1 !== t.kind.toString().indexOf("audio") && e.push(t) }), e }), void 0 === l.prototype.stop && (l.prototype.stop = function () { this.getTracks().forEach(function (e) { e.stop() }) })); var c = {}; function d() { if (!i) { var e = t.length, s = !1, a = []; if (t.forEach(function (e) { e.stream || (e.stream = {}), e.stream.fullcanvas ? s = e : a.push(e) }), s) n.width = s.stream.width, n.height = s.stream.height; else if (a.length) { n.width = e > 1 ? 2 * a[0].width : a[0].width; var r = 1; 3 !== e && 4 !== e || (r = 2), 5 !== e && 6 !== e || (r = 3), 7 !== e && 8 !== e || (r = 4), 9 !== e && 10 !== e || (r = 5), n.height = a[0].height * r } else n.width = o.width || 360, n.height = o.height || 240; s && s instanceof HTMLVideoElement && h(s), a.forEach(function (e, t) { h(e, t) }), setTimeout(d, o.frameInterval) } } function h(e, t) { if (!i) { var n = 0, o = 0, a = e.width, r = e.height; 1 === t && (n = e.width), 2 === t && (o = e.height), 3 === t && (n = e.width, o = e.height), 4 === t && (o = 2 * e.height), 5 === t && (n = e.width, o = 2 * e.height), 6 === t && (o = 3 * e.height), 7 === t && (n = e.width, o = 3 * e.height), void 0 !== e.stream.left && (n = e.stream.left), void 0 !== e.stream.top && (o = e.stream.top), void 0 !== e.stream.width && (a = e.stream.width), void 0 !== e.stream.height && (r = e.stream.height), s.drawImage(e, n, o, a, r), "function" == typeof e.stream.onRender && e.stream.onRender(s, n, o, a, r, t) } } function u(e) { var t = document.createElement("video"); return function e(t, i, n) { if ("createObjectURL" in r && !n) try { i.src = r.createObjectURL(t) } catch (n) { return void e(t, i, !0) } else "srcObject" in i ? i.srcObject = t : "mozSrcObject" in i ? i.mozSrcObject = t : alert("createObjectURL/srcObject both are not supported.") }(e, t), t.muted = !0, t.volume = 0, t.width = e.width || o.width || 360, t.height = e.height || o.height || 240, t.play(), t } function p(i) { t = [], (i = i || e).forEach(function (e) { if (e.getVideoTracks().length) { var i = u(e); i.stream = e, t.push(i) } }) } void 0 !== a ? c.AudioContext = a : "undefined" != typeof webkitAudioContext && (c.AudioContext = webkitAudioContext), this.startDrawingFrames = function () { d() }, this.appendStreams = function (i) { if (!i) throw "First parameter is required."; i instanceof Array || (i = [i]), e.concat(i), i.forEach(function (e) { if (e.getVideoTracks().length) { var i = u(e); i.stream = e, t.push(i) } if (e.getAudioTracks().length && o.audioContext) { var n = o.audioContext.createMediaStreamSource(e); n.connect(o.audioDestination), o.audioSources.push(n) } }) }, this.releaseStreams = function () { t = [], i = !0, o.gainNode && (o.gainNode.disconnect(), o.gainNode = null), o.audioSources.length && (o.audioSources.forEach(function (e) { e.disconnect() }), o.audioSources = []), o.audioDestination && (o.audioDestination.disconnect(), o.audioDestination = null), o.audioContext && o.audioContext.close(), o.audioContext = null, s.clearRect(0, 0, n.width, n.height), n.stream && (n.stream.stop(), n.stream = null) }, this.resetVideoStreams = function (e) { !e || e instanceof Array || (e = [e]), p(e) }, this.name = "MultiStreamsMixer", this.toString = function () { return this.name }, this.getMixedStream = function () { i = !1; var t = function () { var e; p(), "captureStream" in n ? e = n.captureStream() : "mozCaptureStream" in n ? e = n.mozCaptureStream() : o.disableLogs || console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features"); var t = new l; return e.getVideoTracks().forEach(function (e) { t.addTrack(e) }), n.stream = t, t }(), s = function () { c.AudioContextConstructor || (c.AudioContextConstructor = new c.AudioContext), o.audioContext = c.AudioContextConstructor, o.audioSources = [], !0 === o.useGainNode && (o.gainNode = o.audioContext.createGain(), o.gainNode.connect(o.audioContext.destination), o.gainNode.gain.value = 0); var t = 0; if (e.forEach(function (e) { if (e.getAudioTracks().length) { t++; var i = o.audioContext.createMediaStreamSource(e); !0 === o.useGainNode && i.connect(o.gainNode), o.audioSources.push(i) } }), t) return o.audioDestination = o.audioContext.createMediaStreamDestination(), o.audioSources.forEach(function (e) { e.connect(o.audioDestination) }), o.audioDestination.stream }(); return s && s.getAudioTracks().forEach(function (e) { t.addTrack(e) }), e.forEach(function (e) { e.fullcanvas }), t } } function MultiStreamRecorder(e, t) { e = e || []; var i, n, s = this; (t = t || { mimeType: "video/webm", video: { width: 360, height: 240 } }).frameInterval || (t.frameInterval = 10), t.video || (t.video = {}), t.video.width || (t.video.width = 360), t.video.height || (t.video.height = 240), this.record = function () { var s; i = new MultiStreamsMixer(e), (s = [], e.forEach(function (e) { e.getVideoTracks().forEach(function (e) { s.push(e) }) }), s).length && (i.frameInterval = t.frameInterval || 10, i.width = t.video.width || 360, i.height = t.video.height || 240, i.startDrawingFrames()), t.previewStream && "function" == typeof t.previewStream && t.previewStream(i.getMixedStream()), (n = new MediaStreamRecorder(i.getMixedStream(), t)).record() }, this.stop = function (e) { n && n.stop(function (t) { s.blob = t, e(t), s.clearRecordedData() }) }, this.pause = function () { n && n.pause() }, this.resume = function () { n && n.resume() }, this.clearRecordedData = function () { n && (n.clearRecordedData(), n = null), i && (i.releaseStreams(), i = null) }, this.addStreams = function (t) { if (!t) throw "First parameter is required."; t instanceof Array || (t = [t]), e.concat(t), n && i && i.appendStreams(t) }, this.resetVideoStreams = function (e) { i && (!e || e instanceof Array || (e = [e]), i.resetVideoStreams(e)) }, this.name = "MultiStreamRecorder", this.toString = function () { return this.name } } function RecordRTCPromisesHandler(e, t) { if (!this) throw 'Use "new RecordRTCPromisesHandler()"'; if (void 0 === e) throw 'First argument "MediaStream" is required.'; var i = this; i.recordRTC = new RecordRTC(e, t), this.startRecording = function () { return new Promise(function (e, t) { try { i.recordRTC.startRecording(), e() } catch (e) { t(e) } }) }, this.stopRecording = function () { return new Promise(function (e, t) { try { i.recordRTC.stopRecording(function (t) { i.blob = i.recordRTC.getBlob(), e(t) }) } catch (e) { t(e) } }) }, this.getDataURL = function (e) { return new Promise(function (e, t) { try { i.recordRTC.getDataURL(function (t) { e(t) }) } catch (e) { t(e) } }) }, this.getBlob = function () { return i.recordRTC.getBlob() }, this.blob = null } function addDynamicListRow() { $('[data-action="addNewRow"]').on("click", function (e) { e.preventDefault(); var t = $($(this).data("container")); if (countDynamicListRows(t) >= $(this).data("max")) t.parents(".dynamic__list-container").find(".invalid-rows-count").show(); else { t.parents(".dynamic__list-container").find(".invalid-rows-count").hide(); var i = $(this).data("template-id"), n = (new Date).getTime(), s = $(i).html(); s = s.replace(/\$\$\$\$/g, n), t.append(s) } }), $(document).on("click", '[data-action="removeRow"]', function (e) { e.preventDefault(), $(".invalid-rows-count").hide(), $(this).parents(".dynamic__list-item").remove() }) } function countDynamicListRows(e) { return e.find(".dynamic-row").length } void 0 !== RecordRTC && (RecordRTC.DiskStorage = DiskStorage), void 0 !== RecordRTC && (RecordRTC.GifRecorder = GifRecorder), void 0 !== RecordRTC && (RecordRTC.MultiStreamRecorder = MultiStreamRecorder), void 0 !== RecordRTC && (RecordRTC.RecordRTCPromisesHandler = RecordRTCPromisesHandler), "object" == typeof navigator && function (e, t) { "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define("Plyr", t) : (e = "undefined" != typeof globalThis ? globalThis : e || self).Plyr = t() }(this, function () { "use strict"; function e(e, t, i) { return t in e ? Object.defineProperty(e, t, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = i, e } function t(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } function i(e, t, i) { return t in e ? Object.defineProperty(e, t, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = i, e } function n(e, t) { var i = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), i.push.apply(i, n) } return i } function s(e) { for (var t = 1; t < arguments.length; t++) { var s = null != arguments[t] ? arguments[t] : {}; t % 2 ? n(Object(s), !0).forEach(function (t) { i(e, t, s[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(s)) : n(Object(s)).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(s, t)) }) } return e } var o = { addCSS: !0, thumbWidth: 15, watch: !0 }; var a = function (e) { return null != e ? e.constructor : null }, r = function (e, t) { return !!(e && t && e instanceof t) }, l = function (e) { return null == e }, c = function (e) { return a(e) === Object }, d = function (e) { return a(e) === String }, h = function (e) { return Array.isArray(e) }, u = function (e) { return r(e, NodeList) }, p = { nullOrUndefined: l, object: c, number: function (e) { return a(e) === Number && !Number.isNaN(e) }, string: d, boolean: function (e) { return a(e) === Boolean }, function: function (e) { return a(e) === Function }, array: h, nodeList: u, element: function (e) { return r(e, Element) }, event: function (e) { return r(e, Event) }, empty: function (e) { return l(e) || (d(e) || h(e) || u(e)) && !e.length || c(e) && !Object.keys(e).length } }; function f(e, t) { if (1 > t) { var i = function (e) { var t = "".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/); return t ? Math.max(0, (t[1] ? t[1].length : 0) - (t[2] ? +t[2] : 0)) : 0 }(t); return parseFloat(e.toFixed(i)) } return Math.round(e / t) * t } var m = function () { function e(t, i) { (function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") })(this, e), p.element(t) ? this.element = t : p.string(t) && (this.element = document.querySelector(t)), p.element(this.element) && p.empty(this.element.rangeTouch) && (this.config = s({}, o, {}, i), this.init()) } return function (e, i, n) { i && t(e.prototype, i), n && t(e, n) }(e, [{ key: "init", value: function () { e.enabled && (this.config.addCSS && (this.element.style.userSelect = "none", this.element.style.webKitUserSelect = "none", this.element.style.touchAction = "manipulation"), this.listeners(!0), this.element.rangeTouch = this) } }, { key: "destroy", value: function () { e.enabled && (this.config.addCSS && (this.element.style.userSelect = "", this.element.style.webKitUserSelect = "", this.element.style.touchAction = ""), this.listeners(!1), this.element.rangeTouch = null) } }, { key: "listeners", value: function (e) { var t = this, i = e ? "addEventListener" : "removeEventListener";["touchstart", "touchmove", "touchend"].forEach(function (e) { t.element[i](e, function (e) { return t.set(e) }, !1) }) } }, { key: "get", value: function (t) { if (!e.enabled || !p.event(t)) return null; var i, n = t.target, s = t.changedTouches[0], o = parseFloat(n.getAttribute("min")) || 0, a = parseFloat(n.getAttribute("max")) || 100, r = parseFloat(n.getAttribute("step")) || 1, l = n.getBoundingClientRect(), c = 100 / l.width * (this.config.thumbWidth / 2) / 100; return 0 > (i = 100 / l.width * (s.clientX - l.left)) ? i = 0 : 100 < i && (i = 100), 50 > i ? i -= (100 - 2 * i) * c : 50 < i && (i += 2 * (i - 50) * c), o + f(i / 100 * (a - o), r) } }, { key: "set", value: function (t) { e.enabled && p.event(t) && !t.target.disabled && (t.preventDefault(), t.target.value = this.get(t), function (e, t) { if (e && t) { var i = new Event(t, { bubbles: !0 }); e.dispatchEvent(i) } }(t.target, "touchend" === t.type ? "change" : "input")) } }], [{ key: "setup", value: function (t) { var i = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}, n = null; if (p.empty(t) || p.string(t) ? n = Array.from(document.querySelectorAll(p.string(t) ? t : 'input[type="range"]')) : p.element(t) ? n = [t] : p.nodeList(t) ? n = Array.from(t) : p.array(t) && (n = t.filter(p.element)), p.empty(n)) return null; var a = s({}, o, {}, i); p.string(t) && a.watch && new MutationObserver(function (i) { Array.from(i).forEach(function (i) { Array.from(i.addedNodes).forEach(function (i) { p.element(i) && function (e, t) { return function () { return Array.from(document.querySelectorAll(t)).includes(this) }.call(e, t) }(i, t) && new e(i, a) }) }) }).observe(document.body, { childList: !0, subtree: !0 }); return n.map(function (t) { return new e(t, i) }) } }, { key: "enabled", get: function () { return "ontouchstart" in document.documentElement } }]), e }(); const g = e => null != e ? e.constructor : null, v = (e, t) => Boolean(e && t && e instanceof t), b = e => null == e, y = e => g(e) === Object, w = e => g(e) === String, _ = e => g(e) === Function, C = e => Array.isArray(e), k = e => v(e, NodeList), x = e => b(e) || (w(e) || C(e) || k(e)) && !e.length || y(e) && !Object.keys(e).length; var T = { nullOrUndefined: b, object: y, number: e => g(e) === Number && !Number.isNaN(e), string: w, boolean: e => g(e) === Boolean, function: _, array: C, weakMap: e => v(e, WeakMap), nodeList: k, element: e => null !== e && "object" == typeof e && 1 === e.nodeType && "object" == typeof e.style && "object" == typeof e.ownerDocument, textNode: e => g(e) === Text, event: e => v(e, Event), keyboardEvent: e => v(e, KeyboardEvent), cue: e => v(e, window.TextTrackCue) || v(e, window.VTTCue), track: e => v(e, TextTrack) || !b(e) && w(e.kind), promise: e => v(e, Promise) && _(e.then), url: e => { if (v(e, window.URL)) return !0; if (!w(e)) return !1; let t = e; e.startsWith("http://") && e.startsWith("https://") || (t = `http://${e}`); try { return !x(new URL(t).hostname) } catch (e) { return !1 } }, empty: x }; const $ = (() => { const e = document.createElement("span"), t = { WebkitTransition: "webkitTransitionEnd", MozTransition: "transitionend", OTransition: "oTransitionEnd otransitionend", transition: "transitionend" }, i = Object.keys(t).find(t => void 0 !== e.style[t]); return !!T.string(i) && t[i] })(); function S(e, t) { setTimeout(() => { try { e.hidden = !0, e.offsetHeight, e.hidden = !1 } catch (e) { } }, t) } const M = { isIE: Boolean(window.document.documentMode), isEdge: window.navigator.userAgent.includes("Edge"), isWebkit: "WebkitAppearance" in document.documentElement.style && !/Edge/.test(navigator.userAgent), isIPhone: /(iPhone|iPod)/gi.test(navigator.platform), isIos: "MacIntel" === navigator.platform && navigator.maxTouchPoints > 1 || /(iPad|iPhone|iPod)/gi.test(navigator.platform) }; function D(e, t) { return t.split(".").reduce((e, t) => e && e[t], e) } function E(e = {}, ...t) { if (!t.length) return e; const i = t.shift(); return T.object(i) ? (Object.keys(i).forEach(t => { T.object(i[t]) ? (Object.keys(e).includes(t) || Object.assign(e, { [t]: {} }), E(e[t], i[t])) : Object.assign(e, { [t]: i[t] }) }), E(e, ...t)) : e } function A(e, t) { const i = e.length ? e : [e]; Array.from(i).reverse().forEach((e, i) => { const n = i > 0 ? t.cloneNode(!0) : t, s = e.parentNode, o = e.nextSibling; n.appendChild(e), o ? s.insertBefore(n, o) : s.appendChild(n) }) } function F(e, t) { T.element(e) && !T.empty(t) && Object.entries(t).filter(([, e]) => !T.nullOrUndefined(e)).forEach(([t, i]) => e.setAttribute(t, i)) } function I(e, t, i) { const n = document.createElement(e); return T.object(t) && F(n, t), T.string(i) && (n.innerText = i), n } function P(e, t, i, n) { T.element(t) && t.appendChild(I(e, i, n)) } function R(e) { T.nodeList(e) || T.array(e) ? Array.from(e).forEach(R) : T.element(e) && T.element(e.parentNode) && e.parentNode.removeChild(e) } function O(e) { if (!T.element(e)) return; let { length: t } = e.childNodes; for (; t > 0;)e.removeChild(e.lastChild), t -= 1 } function L(e, t) { return T.element(t) && T.element(t.parentNode) && T.element(e) ? (t.parentNode.replaceChild(e, t), e) : null } function j(e, t) { if (!T.string(e) || T.empty(e)) return {}; const i = {}, n = E({}, t); return e.split(",").forEach(e => { const t = e.trim(), s = t.replace(".", ""), o = t.replace(/[[\]]/g, "").split("="), [a] = o, r = o.length > 1 ? o[1].replace(/["']/g, "") : ""; switch (t.charAt(0)) { case ".": T.string(n.class) ? i.class = `${n.class} ${s}` : i.class = s; break; case "#": i.id = t.replace("#", ""); break; case "[": i[a] = r } }), E(n, i) } function N(e, t) { if (!T.element(e)) return; let i = t; T.boolean(i) || (i = !e.hidden), e.hidden = i } function z(e, t, i) { if (T.nodeList(e)) return Array.from(e).map(e => z(e, t, i)); if (T.element(e)) { let n = "toggle"; return void 0 !== i && (n = i ? "add" : "remove"), e.classList[n](t), e.classList.contains(t) } return !1 } function H(e, t) { return T.element(e) && e.classList.contains(t) } function q(e, t) { const { prototype: i } = Element; return (i.matches || i.webkitMatchesSelector || i.mozMatchesSelector || i.msMatchesSelector || function () { return Array.from(document.querySelectorAll(t)).includes(this) }).call(e, t) } function U(e) { return this.elements.container.querySelectorAll(e) } function W(e) { return this.elements.container.querySelector(e) } function B(e = null, t = !1) { T.element(e) && (e.focus({ preventScroll: !0 }), t && z(e, this.config.classNames.tabFocus)) } const V = { "audio/ogg": "vorbis", "audio/wav": "1", "video/webm": "vp8, vorbis", "video/mp4": "avc1.42E01E, mp4a.40.2", "video/ogg": "theora" }, G = { audio: "canPlayType" in document.createElement("audio"), video: "canPlayType" in document.createElement("video"), check(e, t, i) { const n = M.isIPhone && i && G.playsinline, s = G[e] || "html5" !== t; return { api: s, ui: s && G.rangeInput && ("video" !== e || !M.isIPhone || n) } }, pip: (() => !M.isIPhone && (!!T.function(I("video").webkitSetPresentationMode) || !(!document.pictureInPictureEnabled || I("video").disablePictureInPicture)))(), airplay: T.function(window.WebKitPlaybackTargetAvailabilityEvent), playsinline: "playsInline" in document.createElement("video"), mime(e) { if (T.empty(e)) return !1; const [t] = e.split("/"); let i = e; if (!this.isHTML5 || t !== this.type) return !1; Object.keys(V).includes(i) && (i += `; codecs="${V[e]}"`); try { return Boolean(i && this.media.canPlayType(i).replace(/no/, "")) } catch (e) { return !1 } }, textTracks: "textTracks" in document.createElement("video"), rangeInput: (() => { const e = document.createElement("input"); return e.type = "range", "range" === e.type })(), touch: "ontouchstart" in document.documentElement, transitions: !1 !== $, reducedMotion: "matchMedia" in window && window.matchMedia("(prefers-reduced-motion)").matches }, Y = (() => { let e = !1; try { const t = Object.defineProperty({}, "passive", { get: () => (e = !0, null) }); window.addEventListener("test", null, t), window.removeEventListener("test", null, t) } catch (e) { } return e })(); function Q(e, t, i, n = !1, s = !0, o = !1) { if (!e || !("addEventListener" in e) || T.empty(t) || !T.function(i)) return; const a = t.split(" "); let r = o; Y && (r = { passive: s, capture: o }), a.forEach(t => { this && this.eventListeners && n && this.eventListeners.push({ element: e, type: t, callback: i, options: r }), e[n ? "addEventListener" : "removeEventListener"](t, i, r) }) } function K(e, t = "", i, n = !0, s = !1) { Q.call(this, e, t, i, !0, n, s) } function X(e, t = "", i, n = !0, s = !1) { Q.call(this, e, t, i, !1, n, s) } function Z(e, t = "", i, n = !0, s = !1) { const o = (...a) => { X(e, t, o, n, s), i.apply(this, a) }; Q.call(this, e, t, o, !0, n, s) } function J(e, t = "", i = !1, n = {}) { if (!T.element(e) || T.empty(t)) return; const s = new CustomEvent(t, { bubbles: i, detail: { ...n, plyr: this } }); e.dispatchEvent(s) } function ee(e) { T.promise(e) && e.then(null, () => { }) } function te(e) { return T.array(e) ? e.filter((t, i) => e.indexOf(t) === i) : e } function ie(e, t) { return T.array(e) && e.length ? e.reduce((e, i) => Math.abs(i - t) < Math.abs(e - t) ? i : e) : null } function ne(e) { return !(!window || !window.CSS) && window.CSS.supports(e) } const se = [[1, 1], [4, 3], [3, 4], [5, 4], [4, 5], [3, 2], [2, 3], [16, 10], [10, 16], [16, 9], [9, 16], [21, 9], [9, 21], [32, 9], [9, 32]].reduce((e, [t, i]) => ({ ...e, [t / i]: [t, i] }), {}); function oe(e) { if (!(T.array(e) || T.string(e) && e.includes(":"))) return !1; return (T.array(e) ? e : e.split(":")).map(Number).every(T.number) } function ae(e) { if (!T.array(e) || !e.every(T.number)) return null; const [t, i] = e, n = (e, t) => 0 === t ? e : n(t, e % t), s = n(t, i); return [t / s, i / s] } function re(e) { const t = e => oe(e) ? e.split(":").map(Number) : null; let i = t(e); if (null === i && (i = t(this.config.ratio)), null === i && !T.empty(this.embed) && T.array(this.embed.ratio) && ({ ratio: i } = this.embed), null === i && this.isHTML5) { const { videoWidth: e, videoHeight: t } = this.media; i = [e, t] } return ae(i) } function le(e) { if (!this.isVideo) return {}; const { wrapper: t } = this.elements, i = re.call(this, e); if (!T.array(i)) return {}; const [n, s] = ae(i), o = 100 / n * s; if (ne(`aspect-ratio: ${n}/${s}`) ? t.style.aspectRatio = `${n}/${s}` : t.style.paddingBottom = `${o}%`, this.isVimeo && !this.config.vimeo.premium && this.supported.ui) { const e = 100 / this.media.offsetWidth * parseInt(window.getComputedStyle(this.media).paddingBottom, 10), i = (e - o) / (e / 50); this.fullscreen.active ? t.style.paddingBottom = null : this.media.style.transform = `translateY(-${i}%)` } else this.isHTML5 && t.classList.add(this.config.classNames.videoFixedRatio); return { padding: o, ratio: i } } function ce(e, t, i = .05) { const n = e / t, s = ie(Object.keys(se), n); return Math.abs(s - n) <= i ? se[s] : [e, t] } const de = { getSources() { if (!this.isHTML5) return []; return Array.from(this.media.querySelectorAll("source")).filter(e => { const t = e.getAttribute("type"); return !!T.empty(t) || G.mime.call(this, t) }) }, getQualityOptions() { return this.config.quality.forced ? this.config.quality.options : de.getSources.call(this).map(e => Number(e.getAttribute("size"))).filter(Boolean) }, setup() { if (!this.isHTML5) return; const e = this; e.options.speed = e.config.speed.options, T.empty(this.config.ratio) || le.call(e), Object.defineProperty(e.media, "quality", { get() { const t = de.getSources.call(e).find(t => t.getAttribute("src") === e.source); return t && Number(t.getAttribute("size")) }, set(t) { if (e.quality !== t) { if (e.config.quality.forced && T.function(e.config.quality.onChange)) e.config.quality.onChange(t); else { const i = de.getSources.call(e).find(e => Number(e.getAttribute("size")) === t); if (!i) return; const { currentTime: n, paused: s, preload: o, readyState: a, playbackRate: r } = e.media; e.media.src = i.getAttribute("src"), ("none" !== o || a) && (e.once("loadedmetadata", () => { e.speed = r, e.currentTime = n, s || ee(e.play()) }), e.media.load()) } J.call(e, e.media, "qualitychange", !1, { quality: t }) } } }) }, cancelRequests() { this.isHTML5 && (R(de.getSources.call(this)), this.media.setAttribute("src", this.config.blankVideo), this.media.load(), this.debug.log("Cancelled network requests")) } }; function he(e, ...t) { return T.empty(e) ? e : e.toString().replace(/{(\d+)}/g, (e, i) => t[i].toString()) } const ue = (e = "", t = "", i = "") => e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g, "\\$1"), "g"), i.toString()), pe = (e = "") => e.toString().replace(/\w\S*/g, e => e.charAt(0).toUpperCase() + e.substr(1).toLowerCase()); function fe(e = "") { let t = e.toString(); return (t = function (e = "") { let t = e.toString(); return t = ue(t, "-", " "), t = ue(t, "_", " "), t = pe(t), ue(t, " ", "") }(t)).charAt(0).toLowerCase() + t.slice(1) } function me(e) { const t = document.createElement("div"); return t.appendChild(e), t.innerHTML } const ge = { pip: "PIP", airplay: "AirPlay", html5: "HTML5", vimeo: "Vimeo", youtube: "YouTube" }, ve = { get(e = "", t = {}) { if (T.empty(e) || T.empty(t)) return ""; let i = D(t.i18n, e); if (T.empty(i)) return Object.keys(ge).includes(e) ? ge[e] : ""; const n = { "{seektime}": t.seekTime, "{title}": t.title }; return Object.entries(n).forEach(([e, t]) => { i = ue(i, e, t) }), i } }; class be { constructor(t) { e(this, "get", e => { if (!be.supported || !this.enabled) return null; const t = window.localStorage.getItem(this.key); if (T.empty(t)) return null; const i = JSON.parse(t); return T.string(e) && e.length ? i[e] : i }), e(this, "set", e => { if (!be.supported || !this.enabled) return; if (!T.object(e)) return; let t = this.get(); T.empty(t) && (t = {}), E(t, e); try { window.localStorage.setItem(this.key, JSON.stringify(t)) } catch (e) { } }), this.enabled = t.config.storage.enabled, this.key = t.config.storage.key } static get supported() { try { if (!("localStorage" in window)) return !1; const e = "___test"; return window.localStorage.setItem(e, e), window.localStorage.removeItem(e), !0 } catch (e) { return !1 } } } function ye(e, t = "text") { return new Promise((i, n) => { try { const s = new XMLHttpRequest; if (!("withCredentials" in s)) return; s.addEventListener("load", () => { if ("text" === t) try { i(JSON.parse(s.responseText)) } catch (e) { i(s.responseText) } else i(s.response) }), s.addEventListener("error", () => { throw new Error(s.status) }), s.open("GET", e, !0), s.responseType = t, s.send() } catch (e) { n(e) } }) } function we(e, t) { if (!T.string(e)) return; const i = T.string(t); let n = !1; const s = () => null !== document.getElementById(t), o = (e, t) => { e.innerHTML = t, i && s() || document.body.insertAdjacentElement("afterbegin", e) }; if (!i || !s()) { const s = be.supported, a = document.createElement("div"); if (a.setAttribute("hidden", ""), i && a.setAttribute("id", t), s) { const e = window.localStorage.getItem(`cache-${t}`); if (n = null !== e) { const t = JSON.parse(e); o(a, t.content) } } ye(e).then(e => { if (!T.empty(e)) { if (s) try { window.localStorage.setItem(`cache-${t}`, JSON.stringify({ content: e })) } catch (e) { } o(a, e) } }).catch(() => { }) } } const _e = e => Math.trunc(e / 60 / 60 % 60, 10), Ce = e => Math.trunc(e / 60 % 60, 10), ke = e => Math.trunc(e % 60, 10); function xe(e = 0, t = !1, i = !1) { if (!T.number(e)) return xe(void 0, t, i); const n = e => `0${e}`.slice(-2); let s = _e(e); const o = Ce(e), a = ke(e); return `${i && e > 0 ? "-" : ""}${s = t || s > 0 ? `${s}:` : ""}${n(o)}:${n(a)}` } const Te = { getIconUrl() { const e = new URL(this.config.iconUrl, window.location), t = window.location.host ? window.location.host : window.top.location.host, i = e.host !== t || M.isIE && !window.svg4everybody; return { url: this.config.iconUrl, cors: i } }, findElements() { try { return this.elements.controls = W.call(this, this.config.selectors.controls.wrapper), this.elements.buttons = { play: U.call(this, this.config.selectors.buttons.play), pause: W.call(this, this.config.selectors.buttons.pause), restart: W.call(this, this.config.selectors.buttons.restart), rewind: W.call(this, this.config.selectors.buttons.rewind), fastForward: W.call(this, this.config.selectors.buttons.fastForward), mute: W.call(this, this.config.selectors.buttons.mute), pip: W.call(this, this.config.selectors.buttons.pip), airplay: W.call(this, this.config.selectors.buttons.airplay), settings: W.call(this, this.config.selectors.buttons.settings), captions: W.call(this, this.config.selectors.buttons.captions), fullscreen: W.call(this, this.config.selectors.buttons.fullscreen) }, this.elements.progress = W.call(this, this.config.selectors.progress), this.elements.inputs = { seek: W.call(this, this.config.selectors.inputs.seek), volume: W.call(this, this.config.selectors.inputs.volume) }, this.elements.display = { buffer: W.call(this, this.config.selectors.display.buffer), currentTime: W.call(this, this.config.selectors.display.currentTime), duration: W.call(this, this.config.selectors.display.duration) }, T.element(this.elements.progress) && (this.elements.display.seekTooltip = this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)), !0 } catch (e) { return this.debug.warn("It looks like there is a problem with your custom controls HTML", e), this.toggleNativeControls(!0), !1 } }, createIcon(e, t) { const i = Te.getIconUrl.call(this), n = `${i.cors ? "" : i.url}#${this.config.iconPrefix}`, s = document.createElementNS("http://www.w3.org/2000/svg", "svg"); F(s, E(t, { "aria-hidden": "true", focusable: "false" })); const o = document.createElementNS("http://www.w3.org/2000/svg", "use"), a = `${n}-${e}`; return "href" in o && o.setAttributeNS("http://www.w3.org/1999/xlink", "href", a), o.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", a), s.appendChild(o), s }, createLabel(e, t = {}) { const i = ve.get(e, this.config); return I("span", { ...t, class: [t.class, this.config.classNames.hidden].filter(Boolean).join(" ") }, i) }, createBadge(e) { if (T.empty(e)) return null; const t = I("span", { class: this.config.classNames.menu.value }); return t.appendChild(I("span", { class: this.config.classNames.menu.badge }, e)), t }, createButton(e, t) { const i = E({}, t); let n = fe(e); const s = { element: "button", toggle: !1, label: null, icon: null, labelPressed: null, iconPressed: null }; switch (["element", "icon", "label"].forEach(e => { Object.keys(i).includes(e) && (s[e] = i[e], delete i[e]) }), "button" !== s.element || Object.keys(i).includes("type") || (i.type = "button"), Object.keys(i).includes("class") ? i.class.split(" ").some(e => e === this.config.classNames.control) || E(i, { class: `${i.class} ${this.config.classNames.control}` }) : i.class = this.config.classNames.control, e) { case "play": s.toggle = !0, s.label = "play", s.labelPressed = "pause", s.icon = "play", s.iconPressed = "pause"; break; case "mute": s.toggle = !0, s.label = "mute", s.labelPressed = "unmute", s.icon = "volume", s.iconPressed = "muted"; break; case "captions": s.toggle = !0, s.label = "enableCaptions", s.labelPressed = "disableCaptions", s.icon = "captions-off", s.iconPressed = "captions-on"; break; case "fullscreen": s.toggle = !0, s.label = "enterFullscreen", s.labelPressed = "exitFullscreen", s.icon = "enter-fullscreen", s.iconPressed = "exit-fullscreen"; break; case "play-large": i.class += ` ${this.config.classNames.control}--overlaid`, n = "play", s.label = "play", s.icon = "play"; break; default: T.empty(s.label) && (s.label = n), T.empty(s.icon) && (s.icon = e) }const o = I(s.element); return s.toggle ? (o.appendChild(Te.createIcon.call(this, s.iconPressed, { class: "icon--pressed" })), o.appendChild(Te.createIcon.call(this, s.icon, { class: "icon--not-pressed" })), o.appendChild(Te.createLabel.call(this, s.labelPressed, { class: "label--pressed" })), o.appendChild(Te.createLabel.call(this, s.label, { class: "label--not-pressed" }))) : (o.appendChild(Te.createIcon.call(this, s.icon)), o.appendChild(Te.createLabel.call(this, s.label))), E(i, j(this.config.selectors.buttons[n], i)), F(o, i), "play" === n ? (T.array(this.elements.buttons[n]) || (this.elements.buttons[n] = []), this.elements.buttons[n].push(o)) : this.elements.buttons[n] = o, o }, createRange(e, t) { const i = I("input", E(j(this.config.selectors.inputs[e]), { type: "range", min: 0, max: 100, step: .01, value: 0, autocomplete: "off", role: "slider", "aria-label": ve.get(e, this.config), "aria-valuemin": 0, "aria-valuemax": 100, "aria-valuenow": 0 }, t)); return this.elements.inputs[e] = i, Te.updateRangeFill.call(this, i), m.setup(i), i }, createProgress(e, t) { const i = I("progress", E(j(this.config.selectors.display[e]), { min: 0, max: 100, value: 0, role: "progressbar", "aria-hidden": !0 }, t)); if ("volume" !== e) { i.appendChild(I("span", null, "0")); const t = { played: "played", buffer: "buffered" }[e], n = t ? ve.get(t, this.config) : ""; i.innerText = `% ${n.toLowerCase()}` } return this.elements.display[e] = i, i }, createTime(e, t) { const i = j(this.config.selectors.display[e], t), n = I("div", E(i, { class: `${i.class ? i.class : ""} ${this.config.classNames.display.time} `.trim(), "aria-label": ve.get(e, this.config) }), "00:00"); return this.elements.display[e] = n, n }, bindMenuItemShortcuts(e, t) { K.call(this, e, "keydown keyup", i => { if (![32, 38, 39, 40].includes(i.which)) return; if (i.preventDefault(), i.stopPropagation(), "keydown" === i.type) return; const n = q(e, '[role="menuitemradio"]'); if (!n && [32, 39].includes(i.which)) Te.showMenuPanel.call(this, t, !0); else { let t; 32 !== i.which && (40 === i.which || n && 39 === i.which ? (t = e.nextElementSibling, T.element(t) || (t = e.parentNode.firstElementChild)) : (t = e.previousElementSibling, T.element(t) || (t = e.parentNode.lastElementChild)), B.call(this, t, !0)) } }, !1), K.call(this, e, "keyup", e => { 13 === e.which && Te.focusFirstMenuItem.call(this, null, !0) }) }, createMenuItem({ value: e, list: t, type: i, title: n, badge: s = null, checked: o = !1 }) { const a = j(this.config.selectors.inputs[i]), r = I("button", E(a, { type: "button", role: "menuitemradio", class: `${this.config.classNames.control} ${a.class ? a.class : ""}`.trim(), "aria-checked": o, value: e })), l = I("span"); l.innerHTML = n, T.element(s) && l.appendChild(s), r.appendChild(l), Object.defineProperty(r, "checked", { enumerable: !0, get: () => "true" === r.getAttribute("aria-checked"), set(e) { e && Array.from(r.parentNode.children).filter(e => q(e, '[role="menuitemradio"]')).forEach(e => e.setAttribute("aria-checked", "false")), r.setAttribute("aria-checked", e ? "true" : "false") } }), this.listeners.bind(r, "click keyup", t => { if (!T.keyboardEvent(t) || 32 === t.which) { switch (t.preventDefault(), t.stopPropagation(), r.checked = !0, i) { case "language": this.currentTrack = Number(e); break; case "quality": this.quality = e; break; case "speed": this.speed = parseFloat(e) }Te.showMenuPanel.call(this, "home", T.keyboardEvent(t)) } }, i, !1), Te.bindMenuItemShortcuts.call(this, r, i), t.appendChild(r) }, formatTime(e = 0, t = !1) { if (!T.number(e)) return e; return xe(e, _e(this.duration) > 0, t) }, updateTimeDisplay(e = null, t = 0, i = !1) { T.element(e) && T.number(t) && (e.innerText = Te.formatTime(t, i)) }, updateVolume() { this.supported.ui && (T.element(this.elements.inputs.volume) && Te.setRange.call(this, this.elements.inputs.volume, this.muted ? 0 : this.volume), T.element(this.elements.buttons.mute) && (this.elements.buttons.mute.pressed = this.muted || 0 === this.volume)) }, setRange(e, t = 0) { T.element(e) && (e.value = t, Te.updateRangeFill.call(this, e)) }, updateProgress(e) { if (!this.supported.ui || !T.event(e)) return; let t = 0; const i = (e, t) => { const i = T.number(t) ? t : 0, n = T.element(e) ? e : this.elements.display.buffer; if (T.element(n)) { n.value = i; const e = n.getElementsByTagName("span")[0]; T.element(e) && (e.childNodes[0].nodeValue = i) } }; if (e) switch (e.type) { case "timeupdate": case "seeking": case "seeked": n = this.currentTime, s = this.duration, t = 0 === n || 0 === s || Number.isNaN(n) || Number.isNaN(s) ? 0 : (n / s * 100).toFixed(2), "timeupdate" === e.type && Te.setRange.call(this, this.elements.inputs.seek, t); break; case "playing": case "progress": i(this.elements.display.buffer, 100 * this.buffered) }var n, s }, updateRangeFill(e) { const t = T.event(e) ? e.target : e; if (T.element(t) && "range" === t.getAttribute("type")) { if (q(t, this.config.selectors.inputs.seek)) { t.setAttribute("aria-valuenow", this.currentTime); const e = Te.formatTime(this.currentTime), i = Te.formatTime(this.duration), n = ve.get("seekLabel", this.config); t.setAttribute("aria-valuetext", n.replace("{currentTime}", e).replace("{duration}", i)) } else if (q(t, this.config.selectors.inputs.volume)) { const e = 100 * t.value; t.setAttribute("aria-valuenow", e), t.setAttribute("aria-valuetext", `${e.toFixed(1)}%`) } else t.setAttribute("aria-valuenow", t.value); M.isWebkit && t.style.setProperty("--value", `${t.value / t.max * 100}%`) } }, updateSeekTooltip(e) { if (!this.config.tooltips.seek || !T.element(this.elements.inputs.seek) || !T.element(this.elements.display.seekTooltip) || 0 === this.duration) return; const t = `${this.config.classNames.tooltip}--visible`, i = e => z(this.elements.display.seekTooltip, t, e); if (this.touch) return void i(!1); let n = 0; const s = this.elements.progress.getBoundingClientRect(); if (T.event(e)) n = 100 / s.width * (e.pageX - s.left); else { if (!H(this.elements.display.seekTooltip, t)) return; n = parseFloat(this.elements.display.seekTooltip.style.left, 10) } n < 0 ? n = 0 : n > 100 && (n = 100), Te.updateTimeDisplay.call(this, this.elements.display.seekTooltip, this.duration / 100 * n), this.elements.display.seekTooltip.style.left = `${n}%`, T.event(e) && ["mouseenter", "mouseleave"].includes(e.type) && i("mouseenter" === e.type) }, timeUpdate(e) { const t = !T.element(this.elements.display.duration) && this.config.invertTime; Te.updateTimeDisplay.call(this, this.elements.display.currentTime, t ? this.duration - this.currentTime : this.currentTime, t), e && "timeupdate" === e.type && this.media.seeking || Te.updateProgress.call(this, e) }, durationUpdate() { if (!this.supported.ui || !this.config.invertTime && this.currentTime) return; if (this.duration >= 2 ** 32) return N(this.elements.display.currentTime, !0), void N(this.elements.progress, !0); T.element(this.elements.inputs.seek) && this.elements.inputs.seek.setAttribute("aria-valuemax", this.duration); const e = T.element(this.elements.display.duration); !e && this.config.displayDuration && this.paused && Te.updateTimeDisplay.call(this, this.elements.display.currentTime, this.duration), e && Te.updateTimeDisplay.call(this, this.elements.display.duration, this.duration), Te.updateSeekTooltip.call(this) }, toggleMenuButton(e, t) { N(this.elements.settings.buttons[e], !t) }, updateSetting(e, t, i) { const n = this.elements.settings.panels[e]; let s = null, o = t; if ("captions" === e) s = this.currentTrack; else { if (s = T.empty(i) ? this[e] : i, T.empty(s) && (s = this.config[e].default), !T.empty(this.options[e]) && !this.options[e].includes(s)) return void this.debug.warn(`Unsupported value of '${s}' for ${e}`); if (!this.config[e].options.includes(s)) return void this.debug.warn(`Disabled value of '${s}' for ${e}`) } if (T.element(o) || (o = n && n.querySelector('[role="menu"]')), !T.element(o)) return; this.elements.settings.buttons[e].querySelector(`.${this.config.classNames.menu.value}`).innerHTML = Te.getLabel.call(this, e, s); const a = o && o.querySelector(`[value="${s}"]`); T.element(a) && (a.checked = !0) }, getLabel(e, t) { switch (e) { case "speed": return 1 === t ? ve.get("normal", this.config) : `${t}&times;`; case "quality": if (T.number(t)) { const e = ve.get(`qualityLabel.${t}`, this.config); return e.length ? e : `${t}p` } return pe(t); case "captions": return Me.getLabel.call(this); default: return null } }, setQualityMenu(e) { if (!T.element(this.elements.settings.panels.quality)) return; const t = this.elements.settings.panels.quality.querySelector('[role="menu"]'); T.array(e) && (this.options.quality = te(e).filter(e => this.config.quality.options.includes(e))); const i = !T.empty(this.options.quality) && this.options.quality.length > 1; if (Te.toggleMenuButton.call(this, "quality", i), O(t), Te.checkMenu.call(this), !i) return; const n = e => { const t = ve.get(`qualityBadge.${e}`, this.config); return t.length ? Te.createBadge.call(this, t) : null }; this.options.quality.sort((e, t) => { const i = this.config.quality.options; return i.indexOf(e) > i.indexOf(t) ? 1 : -1 }).forEach(e => { Te.createMenuItem.call(this, { value: e, list: t, type: "quality", title: Te.getLabel.call(this, "quality", e), badge: n(e) }) }), Te.updateSetting.call(this, "quality", t) }, setCaptionsMenu() { if (!T.element(this.elements.settings.panels.captions)) return; const e = this.elements.settings.panels.captions.querySelector('[role="menu"]'), t = Me.getTracks.call(this), i = Boolean(t.length); if (Te.toggleMenuButton.call(this, "captions", i), O(e), Te.checkMenu.call(this), !i) return; const n = t.map((t, i) => ({ value: i, checked: this.captions.toggled && this.currentTrack === i, title: Me.getLabel.call(this, t), badge: t.language && Te.createBadge.call(this, t.language.toUpperCase()), list: e, type: "language" })); n.unshift({ value: -1, checked: !this.captions.toggled, title: ve.get("disabled", this.config), list: e, type: "language" }), n.forEach(Te.createMenuItem.bind(this)), Te.updateSetting.call(this, "captions", e) }, setSpeedMenu() { if (!T.element(this.elements.settings.panels.speed)) return; const e = this.elements.settings.panels.speed.querySelector('[role="menu"]'); this.options.speed = this.options.speed.filter(e => e >= this.minimumSpeed && e <= this.maximumSpeed); const t = !T.empty(this.options.speed) && this.options.speed.length > 1; Te.toggleMenuButton.call(this, "speed", t), O(e), Te.checkMenu.call(this), t && (this.options.speed.forEach(t => { Te.createMenuItem.call(this, { value: t, list: e, type: "speed", title: Te.getLabel.call(this, "speed", t) }) }), Te.updateSetting.call(this, "speed", e)) }, checkMenu() { const { buttons: e } = this.elements.settings, t = !T.empty(e) && Object.values(e).some(e => !e.hidden); N(this.elements.settings.menu, !t) }, focusFirstMenuItem(e, t = !1) { if (this.elements.settings.popup.hidden) return; let i = e; T.element(i) || (i = Object.values(this.elements.settings.panels).find(e => !e.hidden)); const n = i.querySelector('[role^="menuitem"]'); B.call(this, n, t) }, toggleMenu(e) { const { popup: t } = this.elements.settings, i = this.elements.buttons.settings; if (!T.element(t) || !T.element(i)) return; const { hidden: n } = t; let s = n; if (T.boolean(e)) s = e; else if (T.keyboardEvent(e) && 27 === e.which) s = !1; else if (T.event(e)) { const n = T.function(e.composedPath) ? e.composedPath()[0] : e.target, o = t.contains(n); if (o || !o && e.target !== i && s) return } i.setAttribute("aria-expanded", s), N(t, !s), z(this.elements.container, this.config.classNames.menu.open, s), s && T.keyboardEvent(e) ? Te.focusFirstMenuItem.call(this, null, !0) : s || n || B.call(this, i, T.keyboardEvent(e)) }, getMenuSize(e) { const t = e.cloneNode(!0); t.style.position = "absolute", t.style.opacity = 0, t.removeAttribute("hidden"), e.parentNode.appendChild(t); const i = t.scrollWidth, n = t.scrollHeight; return R(t), { width: i, height: n } }, showMenuPanel(e = "", t = !1) { const i = this.elements.container.querySelector(`#plyr-settings-${this.id}-${e}`); if (!T.element(i)) return; const n = i.parentNode, s = Array.from(n.children).find(e => !e.hidden); if (G.transitions && !G.reducedMotion) { n.style.width = `${s.scrollWidth}px`, n.style.height = `${s.scrollHeight}px`; const e = Te.getMenuSize.call(this, i), t = e => { e.target === n && ["width", "height"].includes(e.propertyName) && (n.style.width = "", n.style.height = "", X.call(this, n, $, t)) }; K.call(this, n, $, t), n.style.width = `${e.width}px`, n.style.height = `${e.height}px` } N(s, !0), N(i, !1), Te.focusFirstMenuItem.call(this, i, t) }, setDownloadUrl() { const e = this.elements.buttons.download; T.element(e) && e.setAttribute("href", this.download) }, create(e) { const { bindMenuItemShortcuts: t, createButton: i, createProgress: n, createRange: s, createTime: o, setQualityMenu: a, setSpeedMenu: r, showMenuPanel: l } = Te; this.elements.controls = null, T.array(this.config.controls) && this.config.controls.includes("play-large") && this.elements.container.appendChild(i.call(this, "play-large")); const c = I("div", j(this.config.selectors.controls.wrapper)); this.elements.controls = c; const d = { class: "plyr__controls__item" }; return te(T.array(this.config.controls) ? this.config.controls : []).forEach(a => { if ("restart" === a && c.appendChild(i.call(this, "restart", d)), "rewind" === a && c.appendChild(i.call(this, "rewind", d)), "play" === a && c.appendChild(i.call(this, "play", d)), "fast-forward" === a && c.appendChild(i.call(this, "fast-forward", d)), "progress" === a) { const t = I("div", { class: `${d.class} plyr__progress__container` }), i = I("div", j(this.config.selectors.progress)); if (i.appendChild(s.call(this, "seek", { id: `plyr-seek-${e.id}` })), i.appendChild(n.call(this, "buffer")), this.config.tooltips.seek) { const e = I("span", { class: this.config.classNames.tooltip }, "00:00"); i.appendChild(e), this.elements.display.seekTooltip = e } this.elements.progress = i, t.appendChild(this.elements.progress), c.appendChild(t) } if ("current-time" === a && c.appendChild(o.call(this, "currentTime", d)), "duration" === a && c.appendChild(o.call(this, "duration", d)), "mute" === a || "volume" === a) { let { volume: t } = this.elements; if (T.element(t) && c.contains(t) || (t = I("div", E({}, d, { class: `${d.class} plyr__volume`.trim() })), this.elements.volume = t, c.appendChild(t)), "mute" === a && t.appendChild(i.call(this, "mute")), "volume" === a && !M.isIos) { const i = { max: 1, step: .05, value: this.config.volume }; t.appendChild(s.call(this, "volume", E(i, { id: `plyr-volume-${e.id}` }))) } } if ("captions" === a && c.appendChild(i.call(this, "captions", d)), "settings" === a && !T.empty(this.config.settings)) { const n = I("div", E({}, d, { class: `${d.class} plyr__menu`.trim(), hidden: "" })); n.appendChild(i.call(this, "settings", { "aria-haspopup": !0, "aria-controls": `plyr-settings-${e.id}`, "aria-expanded": !1 })); const s = I("div", { class: "plyr__menu__container", id: `plyr-settings-${e.id}`, hidden: "" }), o = I("div"), a = I("div", { id: `plyr-settings-${e.id}-home` }), r = I("div", { role: "menu" }); a.appendChild(r), o.appendChild(a), this.elements.settings.panels.home = a, this.config.settings.forEach(i => { const n = I("button", E(j(this.config.selectors.buttons.settings), { type: "button", class: `${this.config.classNames.control} ${this.config.classNames.control}--forward`, role: "menuitem", "aria-haspopup": !0, hidden: "" })); t.call(this, n, i), K.call(this, n, "click", () => { l.call(this, i, !1) }); const s = I("span", null, ve.get(i, this.config)), a = I("span", { class: this.config.classNames.menu.value }); a.innerHTML = e[i], s.appendChild(a), n.appendChild(s), r.appendChild(n); const c = I("div", { id: `plyr-settings-${e.id}-${i}`, hidden: "" }), d = I("button", { type: "button", class: `${this.config.classNames.control} ${this.config.classNames.control}--back` }); d.appendChild(I("span", { "aria-hidden": !0 }, ve.get(i, this.config))), d.appendChild(I("span", { class: this.config.classNames.hidden }, ve.get("menuBack", this.config))), K.call(this, c, "keydown", e => { 37 === e.which && (e.preventDefault(), e.stopPropagation(), l.call(this, "home", !0)) }, !1), K.call(this, d, "click", () => { l.call(this, "home", !1) }), c.appendChild(d), c.appendChild(I("div", { role: "menu" })), o.appendChild(c), this.elements.settings.buttons[i] = n, this.elements.settings.panels[i] = c }), s.appendChild(o), n.appendChild(s), c.appendChild(n), this.elements.settings.popup = s, this.elements.settings.menu = n } if ("pip" === a && G.pip && c.appendChild(i.call(this, "pip", d)), "airplay" === a && G.airplay && c.appendChild(i.call(this, "airplay", d)), "download" === a) { const e = E({}, d, { element: "a", href: this.download, target: "_blank" }); this.isHTML5 && (e.download = ""); const { download: t } = this.config.urls; !T.url(t) && this.isEmbed && E(e, { icon: `logo-${this.provider}`, label: this.provider }), c.appendChild(i.call(this, "download", e)) } "fullscreen" === a && c.appendChild(i.call(this, "fullscreen", d)) }), this.isHTML5 && a.call(this, de.getQualityOptions.call(this)), r.call(this), c }, inject() { if (this.config.loadSprite) { const e = Te.getIconUrl.call(this); e.cors && we(e.url, "sprite-plyr") } this.id = Math.floor(1e4 * Math.random()); let e = null; this.elements.controls = null; const t = { id: this.id, seektime: this.config.seekTime, title: this.config.title }; let i = !0; T.function(this.config.controls) && (this.config.controls = this.config.controls.call(this, t)), this.config.controls || (this.config.controls = []), T.element(this.config.controls) || T.string(this.config.controls) ? e = this.config.controls : (e = Te.create.call(this, { id: this.id, seektime: this.config.seekTime, speed: this.speed, quality: this.quality, captions: Me.getLabel.call(this) }), i = !1); let n; if (i && T.string(this.config.controls) && (e = (e => { let i = e; return Object.entries(t).forEach(([e, t]) => { i = ue(i, `{${e}}`, t) }), i })(e)), T.string(this.config.selectors.controls.container) && (n = document.querySelector(this.config.selectors.controls.container)), T.element(n) || (n = this.elements.container), n[T.element(e) ? "insertAdjacentElement" : "insertAdjacentHTML"]("afterbegin", e), T.element(this.elements.controls) || Te.findElements.call(this), !T.empty(this.elements.buttons)) { const e = e => { const t = this.config.classNames.controlPressed; Object.defineProperty(e, "pressed", { enumerable: !0, get: () => H(e, t), set(i = !1) { z(e, t, i) } }) }; Object.values(this.elements.buttons).filter(Boolean).forEach(t => { T.array(t) || T.nodeList(t) ? Array.from(t).filter(Boolean).forEach(e) : e(t) }) } if (M.isEdge && S(n), this.config.tooltips.controls) { const { classNames: e, selectors: t } = this.config, i = `${t.controls.wrapper} ${t.labels} .${e.hidden}`, n = U.call(this, i); Array.from(n).forEach(e => { z(e, this.config.classNames.hidden, !1), z(e, this.config.classNames.tooltip, !0) }) } } }; function $e(e, t = !0) { let i = e; if (t) { const e = document.createElement("a"); e.href = i, i = e.href } try { return new URL(i) } catch (e) { return null } } function Se(e) { const t = new URLSearchParams; return T.object(e) && Object.entries(e).forEach(([e, i]) => { t.set(e, i) }), t } const Me = { setup() { if (!this.supported.ui) return; if (!this.isVideo || this.isYouTube || this.isHTML5 && !G.textTracks) return void (T.array(this.config.controls) && this.config.controls.includes("settings") && this.config.settings.includes("captions") && Te.setCaptionsMenu.call(this)); var e, t; if (T.element(this.elements.captions) || (this.elements.captions = I("div", j(this.config.selectors.captions)), e = this.elements.captions, t = this.elements.wrapper, T.element(e) && T.element(t) && t.parentNode.insertBefore(e, t.nextSibling)), M.isIE && window.URL) { const e = this.media.querySelectorAll("track"); Array.from(e).forEach(e => { const t = e.getAttribute("src"), i = $e(t); null !== i && i.hostname !== window.location.href.hostname && ["http:", "https:"].includes(i.protocol) && ye(t, "blob").then(t => { e.setAttribute("src", window.URL.createObjectURL(t)) }).catch(() => { R(e) }) }) } const i = te((navigator.languages || [navigator.language || navigator.userLanguage || "en"]).map(e => e.split("-")[0])); let n = (this.storage.get("language") || this.config.captions.language || "auto").toLowerCase(); "auto" === n && ([n] = i); let s = this.storage.get("captions"); if (T.boolean(s) || ({ active: s } = this.config.captions), Object.assign(this.captions, { toggled: !1, active: s, language: n, languages: i }), this.isHTML5) { const e = this.config.captions.update ? "addtrack removetrack" : "removetrack"; K.call(this, this.media.textTracks, e, Me.update.bind(this)) } setTimeout(Me.update.bind(this), 0) }, update() { const e = Me.getTracks.call(this, !0), { active: t, language: i, meta: n, currentTrackNode: s } = this.captions, o = Boolean(e.find(e => e.language === i)); this.isHTML5 && this.isVideo && e.filter(e => !n.get(e)).forEach(e => { this.debug.log("Track added", e), n.set(e, { default: "showing" === e.mode }), "showing" === e.mode && (e.mode = "hidden"), K.call(this, e, "cuechange", () => Me.updateCues.call(this)) }), (o && this.language !== i || !e.includes(s)) && (Me.setLanguage.call(this, i), Me.toggle.call(this, t && o)), this.elements && z(this.elements.container, this.config.classNames.captions.enabled, !T.empty(e)), T.array(this.config.controls) && this.config.controls.includes("settings") && this.config.settings.includes("captions") && Te.setCaptionsMenu.call(this) }, toggle(e, t = !0) { if (!this.supported.ui) return; const { toggled: i } = this.captions, n = this.config.classNames.captions.active, s = T.nullOrUndefined(e) ? !i : e; if (s !== i) { if (t || (this.captions.active = s, this.storage.set({ captions: s })), !this.language && s && !t) { const e = Me.getTracks.call(this), t = Me.findTrack.call(this, [this.captions.language, ...this.captions.languages], !0); return this.captions.language = t.language, void Me.set.call(this, e.indexOf(t)) } this.elements.buttons.captions && (this.elements.buttons.captions.pressed = s), z(this.elements.container, n, s), this.captions.toggled = s, Te.updateSetting.call(this, "captions"), J.call(this, this.media, s ? "captionsenabled" : "captionsdisabled") } setTimeout(() => { s && this.captions.toggled && (this.captions.currentTrackNode.mode = "hidden") }) }, set(e, t = !0) { const i = Me.getTracks.call(this); if (-1 !== e) if (T.number(e)) if (e in i) { if (this.captions.currentTrack !== e) { this.captions.currentTrack = e; const n = i[e], { language: s } = n || {}; this.captions.currentTrackNode = n, Te.updateSetting.call(this, "captions"), t || (this.captions.language = s, this.storage.set({ language: s })), this.isVimeo && this.embed.enableTextTrack(s), J.call(this, this.media, "languagechange") } Me.toggle.call(this, !0, t), this.isHTML5 && this.isVideo && Me.updateCues.call(this) } else this.debug.warn("Track not found", e); else this.debug.warn("Invalid caption argument", e); else Me.toggle.call(this, !1, t) }, setLanguage(e, t = !0) { if (!T.string(e)) return void this.debug.warn("Invalid language argument", e); const i = e.toLowerCase(); this.captions.language = i; const n = Me.getTracks.call(this), s = Me.findTrack.call(this, [i]); Me.set.call(this, n.indexOf(s), t) }, getTracks(e = !1) { return Array.from((this.media || {}).textTracks || []).filter(t => !this.isHTML5 || e || this.captions.meta.has(t)).filter(e => ["captions", "subtitles"].includes(e.kind)) }, findTrack(e, t = !1) { const i = Me.getTracks.call(this), n = e => Number((this.captions.meta.get(e) || {}).default), s = Array.from(i).sort((e, t) => n(t) - n(e)); let o; return e.every(e => !(o = s.find(t => t.language === e))), o || (t ? s[0] : void 0) }, getCurrentTrack() { return Me.getTracks.call(this)[this.currentTrack] }, getLabel(e) { let t = e; return !T.track(t) && G.textTracks && this.captions.toggled && (t = Me.getCurrentTrack.call(this)), T.track(t) ? T.empty(t.label) ? T.empty(t.language) ? ve.get("enabled", this.config) : e.language.toUpperCase() : t.label : ve.get("disabled", this.config) }, updateCues(e) { if (!this.supported.ui) return; if (!T.element(this.elements.captions)) return void this.debug.warn("No captions element to render to"); if (!T.nullOrUndefined(e) && !Array.isArray(e)) return void this.debug.warn("updateCues: Invalid input", e); let t = e; if (!t) { const e = Me.getCurrentTrack.call(this); t = Array.from((e || {}).activeCues || []).map(e => e.getCueAsHTML()).map(me) } const i = t.map(e => e.trim()).join("\n"); if (i !== this.elements.captions.innerHTML) { O(this.elements.captions); const e = I("span", j(this.config.selectors.caption)); e.innerHTML = i, this.elements.captions.appendChild(e), J.call(this, this.media, "cuechange") } } }, De = { enabled: !0, title: "", debug: !1, autoplay: !1, autopause: !0, playsinline: !0, seekTime: 10, volume: 1, muted: !1, duration: null, displayDuration: !0, invertTime: !0, toggleInvert: !0, ratio: null, clickToPlay: !0, hideControls: !0, resetOnEnd: !1, disableContextMenu: !0, loadSprite: !0, iconPrefix: "plyr", iconUrl: "https://cdn.plyr.io/3.6.12/plyr.svg", blankVideo: "https://cdn.plyr.io/static/blank.mp4", quality: { default: 576, options: [4320, 2880, 2160, 1440, 1080, 720, 576, 480, 360, 240], forced: !1, onChange: null }, loop: { active: !1 }, speed: { selected: 1, options: [.5, .75, 1, 1.25, 1.5, 1.75, 2, 4] }, keyboard: { focused: !0, global: !1 }, tooltips: { controls: !1, seek: !0 }, captions: { active: !1, language: "auto", update: !1 }, fullscreen: { enabled: !0, fallback: !0, iosNative: !1 }, storage: { enabled: !0, key: "plyr" }, controls: ["play-large", "play", "progress", "current-time", "mute", "volume", "captions", "settings", "pip", "airplay", "fullscreen"], settings: ["captions", "quality", "speed"], i18n: { restart: "Restart", rewind: "Rewind {seektime}s", play: "Play", pause: "Pause", fastForward: "Forward {seektime}s", seek: "Seek", seekLabel: "{currentTime} of {duration}", played: "Played", buffered: "Buffered", currentTime: "Current time", duration: "Duration", volume: "Volume", mute: "Mute", unmute: "Unmute", enableCaptions: "Enable captions", disableCaptions: "Disable captions", download: "Download", enterFullscreen: "Enter fullscreen", exitFullscreen: "Exit fullscreen", frameTitle: "Player for {title}", captions: "Captions", settings: "Settings", pip: "PIP", menuBack: "Go back to previous menu", speed: "Speed", normal: "Normal", quality: "Quality", loop: "Loop", start: "Start", end: "End", all: "All", reset: "Reset", disabled: "Disabled", enabled: "Enabled", advertisement: "Ad", qualityBadge: { 2160: "4K", 1440: "HD", 1080: "HD", 720: "HD", 576: "SD", 480: "SD" } }, urls: { download: null, vimeo: { sdk: "https://player.vimeo.com/api/player.js", iframe: "https://player.vimeo.com/video/{0}?{1}", api: "https://vimeo.com/api/oembed.json?url={0}" }, youtube: { sdk: "https://www.youtube.com/iframe_api", api: "https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}" }, googleIMA: { sdk: "https://imasdk.googleapis.com/js/sdkloader/ima3.js" } }, listeners: { seek: null, play: null, pause: null, restart: null, rewind: null, fastForward: null, mute: null, volume: null, captions: null, download: null, fullscreen: null, pip: null, airplay: null, speed: null, quality: null, loop: null, language: null }, events: ["ended", "progress", "stalled", "playing", "waiting", "canplay", "canplaythrough", "loadstart", "loadeddata", "loadedmetadata", "timeupdate", "volumechange", "play", "pause", "error", "seeking", "seeked", "emptied", "ratechange", "cuechange", "download", "enterfullscreen", "exitfullscreen", "captionsenabled", "captionsdisabled", "languagechange", "controlshidden", "controlsshown", "ready", "statechange", "qualitychange", "adsloaded", "adscontentpause", "adscontentresume", "adstarted", "adsmidpoint", "adscomplete", "adsallcomplete", "adsimpression", "adsclick"], selectors: { editable: "input, textarea, select, [contenteditable]", container: ".plyr", controls: { container: null, wrapper: ".plyr__controls" }, labels: "[data-plyr]", buttons: { play: '[data-plyr="play"]', pause: '[data-plyr="pause"]', restart: '[data-plyr="restart"]', rewind: '[data-plyr="rewind"]', fastForward: '[data-plyr="fast-forward"]', mute: '[data-plyr="mute"]', captions: '[data-plyr="captions"]', download: '[data-plyr="download"]', fullscreen: '[data-plyr="fullscreen"]', pip: '[data-plyr="pip"]', airplay: '[data-plyr="airplay"]', settings: '[data-plyr="settings"]', loop: '[data-plyr="loop"]' }, inputs: { seek: '[data-plyr="seek"]', volume: '[data-plyr="volume"]', speed: '[data-plyr="speed"]', language: '[data-plyr="language"]', quality: '[data-plyr="quality"]' }, display: { currentTime: ".plyr__time--current", duration: ".plyr__time--duration", buffer: ".plyr__progress__buffer", loop: ".plyr__progress__loop", volume: ".plyr__volume--display" }, progress: ".plyr__progress", captions: ".plyr__captions", caption: ".plyr__caption" }, classNames: { type: "plyr--{0}", provider: "plyr--{0}", video: "plyr__video-wrapper", embed: "plyr__video-embed", videoFixedRatio: "plyr__video-wrapper--fixed-ratio", embedContainer: "plyr__video-embed__container", poster: "plyr__poster", posterEnabled: "plyr__poster-enabled", ads: "plyr__ads", control: "plyr__control", controlPressed: "plyr__control--pressed", playing: "plyr--playing", paused: "plyr--paused", stopped: "plyr--stopped", loading: "plyr--loading", hover: "plyr--hover", tooltip: "plyr__tooltip", cues: "plyr__cues", hidden: "plyr__sr-only", hideControls: "plyr--hide-controls", isIos: "plyr--is-ios", isTouch: "plyr--is-touch", uiSupported: "plyr--full-ui", noTransition: "plyr--no-transition", display: { time: "plyr__time" }, menu: { value: "plyr__menu__value", badge: "plyr__badge", open: "plyr--menu-open" }, captions: { enabled: "plyr--captions-enabled", active: "plyr--captions-active" }, fullscreen: { enabled: "plyr--fullscreen-enabled", fallback: "plyr--fullscreen-fallback" }, pip: { supported: "plyr--pip-supported", active: "plyr--pip-active" }, airplay: { supported: "plyr--airplay-supported", active: "plyr--airplay-active" }, tabFocus: "plyr__tab-focus", previewThumbnails: { thumbContainer: "plyr__preview-thumb", thumbContainerShown: "plyr__preview-thumb--is-shown", imageContainer: "plyr__preview-thumb__image-container", timeContainer: "plyr__preview-thumb__time-container", scrubbingContainer: "plyr__preview-scrubbing", scrubbingContainerShown: "plyr__preview-scrubbing--is-shown" } }, attributes: { embed: { provider: "data-plyr-provider", id: "data-plyr-embed-id", hash: "data-plyr-embed-hash" } }, ads: { enabled: !1, publisherId: "", tagUrl: "" }, previewThumbnails: { enabled: !1, src: "" }, vimeo: { byline: !1, portrait: !1, title: !1, speed: !0, transparent: !1, customControls: !0, referrerPolicy: null, premium: !1 }, youtube: { rel: 0, showinfo: 0, iv_load_policy: 3, modestbranding: 1, customControls: !0, noCookie: !1 } }, Ee = { active: "picture-in-picture", inactive: "inline" }, Ae = { html5: "html5", youtube: "youtube", vimeo: "vimeo" }, Fe = { audio: "audio", video: "video" }; const Ie = () => { }; class Pe { constructor(e = !1) { this.enabled = window.console && e, this.enabled && this.log("Debugging enabled") } get log() { return this.enabled ? Function.prototype.bind.call(console.log, console) : Ie } get warn() { return this.enabled ? Function.prototype.bind.call(console.warn, console) : Ie } get error() { return this.enabled ? Function.prototype.bind.call(console.error, console) : Ie } } class Re { constructor(t) { e(this, "onChange", () => { if (!this.enabled) return; const e = this.player.elements.buttons.fullscreen; T.element(e) && (e.pressed = this.active); const t = this.target === this.player.media ? this.target : this.player.elements.container; J.call(this.player, t, this.active ? "enterfullscreen" : "exitfullscreen", !0) }), e(this, "toggleFallback", (e = !1) => { if (e ? this.scrollPosition = { x: window.scrollX || 0, y: window.scrollY || 0 } : window.scrollTo(this.scrollPosition.x, this.scrollPosition.y), document.body.style.overflow = e ? "hidden" : "", z(this.target, this.player.config.classNames.fullscreen.fallback, e), M.isIos) { let t = document.head.querySelector('meta[name="viewport"]'); const i = "viewport-fit=cover"; t || (t = document.createElement("meta")).setAttribute("name", "viewport"); const n = T.string(t.content) && t.content.includes(i); e ? (this.cleanupViewport = !n, n || (t.content += `,${i}`)) : this.cleanupViewport && (t.content = t.content.split(",").filter(e => e.trim() !== i).join(",")) } this.onChange() }), e(this, "trapFocus", e => { if (M.isIos || !this.active || "Tab" !== e.key || 9 !== e.keyCode) return; const t = document.activeElement, i = U.call(this.player, "a[href], button:not(:disabled), input:not(:disabled), [tabindex]"), [n] = i, s = i[i.length - 1]; t !== s || e.shiftKey ? t === n && e.shiftKey && (s.focus(), e.preventDefault()) : (n.focus(), e.preventDefault()) }), e(this, "update", () => { if (this.enabled) { let e; e = this.forceFallback ? "Fallback (forced)" : Re.native ? "Native" : "Fallback", this.player.debug.log(`${e} fullscreen enabled`) } else this.player.debug.log("Fullscreen not supported and fallback disabled"); z(this.player.elements.container, this.player.config.classNames.fullscreen.enabled, this.enabled) }), e(this, "enter", () => { this.enabled && (M.isIos && this.player.config.fullscreen.iosNative ? this.player.isVimeo ? this.player.embed.requestFullscreen() : this.target.webkitEnterFullscreen() : !Re.native || this.forceFallback ? this.toggleFallback(!0) : this.prefix ? T.empty(this.prefix) || this.target[`${this.prefix}Request${this.property}`]() : this.target.requestFullscreen({ navigationUI: "hide" })) }), e(this, "exit", () => { if (this.enabled) if (M.isIos && this.player.config.fullscreen.iosNative) this.target.webkitExitFullscreen(), ee(this.player.play()); else if (!Re.native || this.forceFallback) this.toggleFallback(!1); else if (this.prefix) { if (!T.empty(this.prefix)) { const e = "moz" === this.prefix ? "Cancel" : "Exit"; document[`${this.prefix}${e}${this.property}`]() } } else (document.cancelFullScreen || document.exitFullscreen).call(document) }), e(this, "toggle", () => { this.active ? this.exit() : this.enter() }), this.player = t, this.prefix = Re.prefix, this.property = Re.property, this.scrollPosition = { x: 0, y: 0 }, this.forceFallback = "force" === t.config.fullscreen.fallback, this.player.elements.fullscreen = t.config.fullscreen.container && function (e, t) { const { prototype: i } = Element; return (i.closest || function () { let e = this; do { if (q.matches(e, t)) return e; e = e.parentElement || e.parentNode } while (null !== e && 1 === e.nodeType); return null }).call(e, t) }(this.player.elements.container, t.config.fullscreen.container), K.call(this.player, document, "ms" === this.prefix ? "MSFullscreenChange" : `${this.prefix}fullscreenchange`, () => { this.onChange() }), K.call(this.player, this.player.elements.container, "dblclick", e => { T.element(this.player.elements.controls) && this.player.elements.controls.contains(e.target) || this.player.listeners.proxy(e, this.toggle, "fullscreen") }), K.call(this, this.player.elements.container, "keydown", e => this.trapFocus(e)), this.update() } static get native() { return !!(document.fullscreenEnabled || document.webkitFullscreenEnabled || document.mozFullScreenEnabled || document.msFullscreenEnabled) } get usingNative() { return Re.native && !this.forceFallback } static get prefix() { if (T.function(document.exitFullscreen)) return ""; let e = ""; return ["webkit", "moz", "ms"].some(t => !(!T.function(document[`${t}ExitFullscreen`]) && !T.function(document[`${t}CancelFullScreen`])) && (e = t, !0)), e } static get property() { return "moz" === this.prefix ? "FullScreen" : "Fullscreen" } get enabled() { return (Re.native || this.player.config.fullscreen.fallback) && this.player.config.fullscreen.enabled && this.player.supported.ui && this.player.isVideo } get active() { if (!this.enabled) return !1; if (!Re.native || this.forceFallback) return H(this.target, this.player.config.classNames.fullscreen.fallback); const e = this.prefix ? this.target.getRootNode()[`${this.prefix}${this.property}Element`] : this.target.getRootNode().fullscreenElement; return e && e.shadowRoot ? e === this.target.getRootNode().host : e === this.target } get target() { return M.isIos && this.player.config.fullscreen.iosNative ? this.player.media : this.player.elements.fullscreen || this.player.elements.container } } function Oe(e, t = 1) { return new Promise((i, n) => { const s = new Image, o = () => { delete s.onload, delete s.onerror, (s.naturalWidth >= t ? i : n)(s) }; Object.assign(s, { onload: o, onerror: o, src: e }) }) } const Le = { addStyleHook() { z(this.elements.container, this.config.selectors.container.replace(".", ""), !0), z(this.elements.container, this.config.classNames.uiSupported, this.supported.ui) }, toggleNativeControls(e = !1) { e && this.isHTML5 ? this.media.setAttribute("controls", "") : this.media.removeAttribute("controls") }, build() { if (this.listeners.media(), !this.supported.ui) return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`), void Le.toggleNativeControls.call(this, !0); T.element(this.elements.controls) || (Te.inject.call(this), this.listeners.controls()), Le.toggleNativeControls.call(this), this.isHTML5 && Me.setup.call(this), this.volume = null, this.muted = null, this.loop = null, this.quality = null, this.speed = null, Te.updateVolume.call(this), Te.timeUpdate.call(this), Te.durationUpdate.call(this), Le.checkPlaying.call(this), z(this.elements.container, this.config.classNames.pip.supported, G.pip && this.isHTML5 && this.isVideo), z(this.elements.container, this.config.classNames.airplay.supported, G.airplay && this.isHTML5), z(this.elements.container, this.config.classNames.isIos, M.isIos), z(this.elements.container, this.config.classNames.isTouch, this.touch), this.ready = !0, setTimeout(() => { J.call(this, this.media, "ready") }, 0), Le.setTitle.call(this), this.poster && Le.setPoster.call(this, this.poster, !1).catch(() => { }), this.config.duration && Te.durationUpdate.call(this) }, setTitle() { let e = ve.get("play", this.config); if (T.string(this.config.title) && !T.empty(this.config.title) && (e += `, ${this.config.title}`), Array.from(this.elements.buttons.play || []).forEach(t => { t.setAttribute("aria-label", e) }), this.isEmbed) { const e = W.call(this, "iframe"); if (!T.element(e)) return; const t = T.empty(this.config.title) ? "video" : this.config.title, i = ve.get("frameTitle", this.config); e.setAttribute("title", i.replace("{title}", t)) } }, togglePoster(e) { z(this.elements.container, this.config.classNames.posterEnabled, e) }, setPoster(e, t = !0) { return t && this.poster ? Promise.reject(new Error("Poster already set")) : (this.media.setAttribute("data-poster", e), this.elements.poster.removeAttribute("hidden"), function () { return new Promise(e => this.ready ? setTimeout(e, 0) : K.call(this, this.elements.container, "ready", e)).then(() => { }) }.call(this).then(() => Oe(e)).catch(t => { throw e === this.poster && Le.togglePoster.call(this, !1), t }).then(() => { if (e !== this.poster) throw new Error("setPoster cancelled by later call to setPoster") }).then(() => (Object.assign(this.elements.poster.style, { backgroundImage: `url('${e}')`, backgroundSize: "" }), Le.togglePoster.call(this, !0), e))) }, checkPlaying(e) { z(this.elements.container, this.config.classNames.playing, this.playing), z(this.elements.container, this.config.classNames.paused, this.paused), z(this.elements.container, this.config.classNames.stopped, this.stopped), Array.from(this.elements.buttons.play || []).forEach(e => { Object.assign(e, { pressed: this.playing }), e.setAttribute("aria-label", ve.get(this.playing ? "pause" : "play", this.config)) }), T.event(e) && "timeupdate" === e.type || Le.toggleControls.call(this) }, checkLoading(e) { this.loading = ["stalled", "waiting"].includes(e.type), clearTimeout(this.timers.loading), this.timers.loading = setTimeout(() => { z(this.elements.container, this.config.classNames.loading, this.loading), Le.toggleControls.call(this) }, this.loading ? 250 : 0) }, toggleControls(e) { const { controls: t } = this.elements; if (t && this.config.hideControls) { const i = this.touch && this.lastSeekTime + 2e3 > Date.now(); this.toggleControls(Boolean(e || this.loading || this.paused || t.pressed || t.hover || i)) } }, migrateStyles() { Object.values({ ...this.media.style }).filter(e => !T.empty(e) && T.string(e) && e.startsWith("--plyr")).forEach(e => { this.elements.container.style.setProperty(e, this.media.style.getPropertyValue(e)), this.media.style.removeProperty(e) }), T.empty(this.media.style) && this.media.removeAttribute("style") } }; class je { constructor(t) { e(this, "firstTouch", () => { const { player: e } = this, { elements: t } = e; e.touch = !0, z(t.container, e.config.classNames.isTouch, !0) }), e(this, "setTabFocus", e => { const { player: t } = this, { elements: i } = t; if (clearTimeout(this.focusTimer), "keydown" === e.type && 9 !== e.which) return; "keydown" === e.type && (this.lastKeyDown = e.timeStamp); const n = e.timeStamp - this.lastKeyDown <= 20; ("focus" !== e.type || n) && ((() => { const e = t.config.classNames.tabFocus; z(U.call(t, `.${e}`), e, !1) })(), "focusout" !== e.type && (this.focusTimer = setTimeout(() => { const e = document.activeElement; i.container.contains(e) && z(document.activeElement, t.config.classNames.tabFocus, !0) }, 10))) }), e(this, "global", (e = !0) => { const { player: t } = this; t.config.keyboard.global && Q.call(t, window, "keydown keyup", this.handleKey, e, !1), Q.call(t, document.body, "click", this.toggleMenu, e), Z.call(t, document.body, "touchstart", this.firstTouch), Q.call(t, document.body, "keydown focus blur focusout", this.setTabFocus, e, !1, !0) }), e(this, "container", () => { const { player: e } = this, { config: t, elements: i, timers: n } = e; !t.keyboard.global && t.keyboard.focused && K.call(e, i.container, "keydown keyup", this.handleKey, !1), K.call(e, i.container, "mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen", t => { const { controls: s } = i; s && "enterfullscreen" === t.type && (s.pressed = !1, s.hover = !1); let o = 0;["touchstart", "touchmove", "mousemove"].includes(t.type) && (Le.toggleControls.call(e, !0), o = e.touch ? 3e3 : 2e3), clearTimeout(n.controls), n.controls = setTimeout(() => Le.toggleControls.call(e, !1), o) }); const s = () => { if (!e.isVimeo || e.config.vimeo.premium) return; const t = i.wrapper, { active: n } = e.fullscreen, [s, o] = re.call(e), a = ne(`aspect-ratio: ${s} / ${o}`); if (!n) return void (a ? (t.style.width = null, t.style.height = null) : (t.style.maxWidth = null, t.style.margin = null)); const [r, l] = [Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0), Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0)], c = r / l > s / o; a ? (t.style.width = c ? "auto" : "100%", t.style.height = c ? "100%" : "auto") : (t.style.maxWidth = c ? `${l / o * s}px` : null, t.style.margin = c ? "0 auto" : null) }, o = () => { clearTimeout(n.resized), n.resized = setTimeout(s, 50) }; K.call(e, i.container, "enterfullscreen exitfullscreen", t => { const { target: n } = e.fullscreen; n === i.container && (!e.isEmbed && T.empty(e.config.ratio) || (s(), ("enterfullscreen" === t.type ? K : X).call(e, window, "resize", o))) }) }), e(this, "media", () => { const { player: e } = this, { elements: t } = e; if (K.call(e, e.media, "timeupdate seeking seeked", t => Te.timeUpdate.call(e, t)), K.call(e, e.media, "durationchange loadeddata loadedmetadata", t => Te.durationUpdate.call(e, t)), K.call(e, e.media, "ended", () => { e.isHTML5 && e.isVideo && e.config.resetOnEnd && (e.restart(), e.pause()) }), K.call(e, e.media, "progress playing seeking seeked", t => Te.updateProgress.call(e, t)), K.call(e, e.media, "volumechange", t => Te.updateVolume.call(e, t)), K.call(e, e.media, "playing play pause ended emptied timeupdate", t => Le.checkPlaying.call(e, t)), K.call(e, e.media, "waiting canplay seeked playing", t => Le.checkLoading.call(e, t)), e.supported.ui && e.config.clickToPlay && !e.isAudio) { const i = W.call(e, `.${e.config.classNames.video}`); if (!T.element(i)) return; K.call(e, t.container, "click", n => { ([t.container, i].includes(n.target) || i.contains(n.target)) && (e.touch && e.config.hideControls || (e.ended ? (this.proxy(n, e.restart, "restart"), this.proxy(n, () => { ee(e.play()) }, "play")) : this.proxy(n, () => { ee(e.togglePlay()) }, "play"))) }) } e.supported.ui && e.config.disableContextMenu && K.call(e, t.wrapper, "contextmenu", e => { e.preventDefault() }, !1), K.call(e, e.media, "volumechange", () => { e.storage.set({ volume: e.volume, muted: e.muted }) }), K.call(e, e.media, "ratechange", () => { Te.updateSetting.call(e, "speed"), e.storage.set({ speed: e.speed }) }), K.call(e, e.media, "qualitychange", t => { Te.updateSetting.call(e, "quality", null, t.detail.quality) }), K.call(e, e.media, "ready qualitychange", () => { Te.setDownloadUrl.call(e) }); const i = e.config.events.concat(["keyup", "keydown"]).join(" "); K.call(e, e.media, i, i => { let { detail: n = {} } = i; "error" === i.type && (n = e.media.error), J.call(e, t.container, i.type, !0, n) }) }), e(this, "proxy", (e, t, i) => { const { player: n } = this, s = n.config.listeners[i]; let o = !0; T.function(s) && (o = s.call(n, e)), !1 !== o && T.function(t) && t.call(n, e) }), e(this, "bind", (e, t, i, n, s = !0) => { const { player: o } = this, a = o.config.listeners[n], r = T.function(a); K.call(o, e, t, e => this.proxy(e, i, n), s && !r) }), e(this, "controls", () => { const { player: e } = this, { elements: t } = e, i = M.isIE ? "change" : "input"; if (t.buttons.play && Array.from(t.buttons.play).forEach(t => { this.bind(t, "click", () => { ee(e.togglePlay()) }, "play") }), this.bind(t.buttons.restart, "click", e.restart, "restart"), this.bind(t.buttons.rewind, "click", () => { e.lastSeekTime = Date.now(), e.rewind() }, "rewind"), this.bind(t.buttons.fastForward, "click", () => { e.lastSeekTime = Date.now(), e.forward() }, "fastForward"), this.bind(t.buttons.mute, "click", () => { e.muted = !e.muted }, "mute"), this.bind(t.buttons.captions, "click", () => e.toggleCaptions()), this.bind(t.buttons.download, "click", () => { J.call(e, e.media, "download") }, "download"), this.bind(t.buttons.fullscreen, "click", () => { e.fullscreen.toggle() }, "fullscreen"), this.bind(t.buttons.pip, "click", () => { e.pip = "toggle" }, "pip"), this.bind(t.buttons.airplay, "click", e.airplay, "airplay"), this.bind(t.buttons.settings, "click", t => { t.stopPropagation(), t.preventDefault(), Te.toggleMenu.call(e, t) }, null, !1), this.bind(t.buttons.settings, "keyup", t => { const i = t.which;[13, 32].includes(i) && (13 !== i ? (t.preventDefault(), t.stopPropagation(), Te.toggleMenu.call(e, t)) : Te.focusFirstMenuItem.call(e, null, !0)) }, null, !1), this.bind(t.settings.menu, "keydown", t => { 27 === t.which && Te.toggleMenu.call(e, t) }), this.bind(t.inputs.seek, "mousedown mousemove", e => { const i = t.progress.getBoundingClientRect(), n = 100 / i.width * (e.pageX - i.left); e.currentTarget.setAttribute("seek-value", n) }), this.bind(t.inputs.seek, "mousedown mouseup keydown keyup touchstart touchend", t => { const i = t.currentTarget, n = t.keyCode ? t.keyCode : t.which; if (T.keyboardEvent(t) && 39 !== n && 37 !== n) return; e.lastSeekTime = Date.now(); const s = i.hasAttribute("play-on-seeked"), o = ["mouseup", "touchend", "keyup"].includes(t.type); s && o ? (i.removeAttribute("play-on-seeked"), ee(e.play())) : !o && e.playing && (i.setAttribute("play-on-seeked", ""), e.pause()) }), M.isIos) { const t = U.call(e, 'input[type="range"]'); Array.from(t).forEach(e => this.bind(e, i, e => S(e.target))) } this.bind(t.inputs.seek, i, t => { const i = t.currentTarget; let n = i.getAttribute("seek-value"); T.empty(n) && (n = i.value), i.removeAttribute("seek-value"), e.currentTime = n / i.max * e.duration }, "seek"), this.bind(t.progress, "mouseenter mouseleave mousemove", t => Te.updateSeekTooltip.call(e, t)), this.bind(t.progress, "mousemove touchmove", t => { const { previewThumbnails: i } = e; i && i.loaded && i.startMove(t) }), this.bind(t.progress, "mouseleave touchend click", () => { const { previewThumbnails: t } = e; t && t.loaded && t.endMove(!1, !0) }), this.bind(t.progress, "mousedown touchstart", t => { const { previewThumbnails: i } = e; i && i.loaded && i.startScrubbing(t) }), this.bind(t.progress, "mouseup touchend", t => { const { previewThumbnails: i } = e; i && i.loaded && i.endScrubbing(t) }), M.isWebkit && Array.from(U.call(e, 'input[type="range"]')).forEach(t => { this.bind(t, "input", t => Te.updateRangeFill.call(e, t.target)) }), e.config.toggleInvert && !T.element(t.display.duration) && this.bind(t.display.currentTime, "click", () => { 0 !== e.currentTime && (e.config.invertTime = !e.config.invertTime, Te.timeUpdate.call(e)) }), this.bind(t.inputs.volume, i, t => { e.volume = t.target.value }, "volume"), this.bind(t.controls, "mouseenter mouseleave", i => { t.controls.hover = !e.touch && "mouseenter" === i.type }), t.fullscreen && Array.from(t.fullscreen.children).filter(e => !e.contains(t.container)).forEach(i => { this.bind(i, "mouseenter mouseleave", i => { t.controls && (t.controls.hover = !e.touch && "mouseenter" === i.type) }) }), this.bind(t.controls, "mousedown mouseup touchstart touchend touchcancel", e => { t.controls.pressed = ["mousedown", "touchstart"].includes(e.type) }), this.bind(t.controls, "focusin", () => { const { config: i, timers: n } = e; z(t.controls, i.classNames.noTransition, !0), Le.toggleControls.call(e, !0), setTimeout(() => { z(t.controls, i.classNames.noTransition, !1) }, 0); const s = this.touch ? 3e3 : 4e3; clearTimeout(n.controls), n.controls = setTimeout(() => Le.toggleControls.call(e, !1), s) }), this.bind(t.inputs.volume, "wheel", t => { const i = t.webkitDirectionInvertedFromDevice, [n, s] = [t.deltaX, -t.deltaY].map(e => i ? -e : e), o = Math.sign(Math.abs(n) > Math.abs(s) ? n : s); e.increaseVolume(o / 50); const { volume: a } = e.media; (1 === o && a < 1 || -1 === o && a > 0) && t.preventDefault() }, "volume", !1) }), this.player = t, this.lastKey = null, this.focusTimer = null, this.lastKeyDown = null, this.handleKey = this.handleKey.bind(this), this.toggleMenu = this.toggleMenu.bind(this), this.setTabFocus = this.setTabFocus.bind(this), this.firstTouch = this.firstTouch.bind(this) } handleKey(e) { const { player: t } = this, { elements: i } = t, n = e.keyCode ? e.keyCode : e.which, s = "keydown" === e.type, o = s && n === this.lastKey; if (e.altKey || e.ctrlKey || e.metaKey || e.shiftKey) return; if (!T.number(n)) return; if (s) { const s = document.activeElement; if (T.element(s)) { const { editable: n } = t.config.selectors, { seek: o } = i.inputs; if (s !== o && q(s, n)) return; if (32 === e.which && q(s, 'button, [role^="menuitem"]')) return } switch ([32, 37, 38, 39, 40, 48, 49, 50, 51, 52, 53, 54, 56, 57, 67, 70, 73, 75, 76, 77, 79].includes(n) && (e.preventDefault(), e.stopPropagation()), n) { case 48: case 49: case 50: case 51: case 52: case 53: case 54: case 55: case 56: case 57: o || (t.currentTime = t.duration / 10 * (n - 48)); break; case 32: case 75: o || ee(t.togglePlay()); break; case 38: t.increaseVolume(.1); break; case 40: t.decreaseVolume(.1); break; case 77: o || (t.muted = !t.muted); break; case 39: t.forward(); break; case 37: t.rewind(); break; case 70: t.fullscreen.toggle(); break; case 67: o || t.toggleCaptions(); break; case 76: t.loop = !t.loop }27 === n && !t.fullscreen.usingNative && t.fullscreen.active && t.fullscreen.toggle(), this.lastKey = n } else this.lastKey = null } toggleMenu(e) { Te.toggleMenu.call(this.player, e) } } "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self && self; var Ne, ze = (function (e, t) { e.exports = function () { var e = function () { }, t = {}, i = {}, n = {}; function s(e, t) { if (e) { var s = n[e]; if (i[e] = t, s) for (; s.length;)s[0](e, t), s.splice(0, 1) } } function o(t, i) { t.call && (t = { success: t }), i.length ? (t.error || e)(i) : (t.success || e)(t) } function a(t, i, n, s) { var o, r, l = document, c = n.async, d = (n.numRetries || 0) + 1, h = n.before || e, u = t.replace(/[\?|#].*$/, ""), p = t.replace(/^(css|img)!/, ""); s = s || 0, /(^css!|\.css$)/.test(u) ? ((r = l.createElement("link")).rel = "stylesheet", r.href = p, (o = "hideFocus" in r) && r.relList && (o = 0, r.rel = "preload", r.as = "style")) : /(^img!|\.(png|gif|jpg|svg|webp)$)/.test(u) ? (r = l.createElement("img")).src = p : ((r = l.createElement("script")).src = t, r.async = void 0 === c || c), r.onload = r.onerror = r.onbeforeload = function (e) { var l = e.type[0]; if (o) try { r.sheet.cssText.length || (l = "e") } catch (e) { 18 != e.code && (l = "e") } if ("e" == l) { if ((s += 1) < d) return a(t, i, n, s) } else if ("preload" == r.rel && "style" == r.as) return r.rel = "stylesheet"; i(t, l, e.defaultPrevented) }, !1 !== h(t, r) && l.head.appendChild(r) } function r(e, i, n) { var r, l; if (i && i.trim && (r = i), l = (r ? n : i) || {}, r) { if (r in t) throw "LoadJS"; t[r] = !0 } function c(t, i) { !function (e, t, i) { var n, s, o = (e = e.push ? e : [e]).length, r = o, l = []; for (n = function (e, i, n) { if ("e" == i && l.push(e), "b" == i) { if (!n) return; l.push(e) } --o || t(l) }, s = 0; s < r; s++)a(e[s], n, i) }(e, function (e) { o(l, e), t && o({ success: t, error: i }, e), s(r, e) }, l) } if (l.returnPromise) return new Promise(c); c() } return r.ready = function (e, t) { return function (e, t) { e = e.push ? e : [e]; var s, o, a, r = [], l = e.length, c = l; for (s = function (e, i) { i.length && r.push(e), --c || t(r) }; l--;)o = e[l], (a = i[o]) ? s(o, a) : (n[o] = n[o] || []).push(s) }(e, function (e) { o(t, e) }), r }, r.done = function (e) { s(e, []) }, r.reset = function () { t = {}, i = {}, n = {} }, r.isDefined = function (e) { return e in t }, r }() }(Ne = { exports: {} }, Ne.exports), Ne.exports); function He(e) { return new Promise((t, i) => { ze(e, { success: t, error: i }) }) } function qe(e) { e && !this.embed.hasPlayed && (this.embed.hasPlayed = !0), this.media.paused === e && (this.media.paused = !e, J.call(this, this.media, e ? "play" : "pause")) } const Ue = { setup() { const e = this; z(e.elements.wrapper, e.config.classNames.embed, !0), e.options.speed = e.config.speed.options, le.call(e), T.object(window.Vimeo) ? Ue.ready.call(e) : He(e.config.urls.vimeo.sdk).then(() => { Ue.ready.call(e) }).catch(t => { e.debug.warn("Vimeo SDK (player.js) failed to load", t) }) }, ready() { const e = this, t = e.config.vimeo, { premium: i, referrerPolicy: n, ...s } = t; let o = e.media.getAttribute("src"), a = ""; T.empty(o) ? (o = e.media.getAttribute(e.config.attributes.embed.id), a = e.media.getAttribute(e.config.attributes.embed.hash)) : a = function (e) { const t = e.match(/^.*(?:vimeo.com\/|video\/)(?:\d+)(?:\?.*&*h=|\/)+(?<hash>[\d,a-f]+)/); return t ? t.groups.hash : null }(o); const r = a ? { h: a } : {}; i && Object.assign(s, { controls: !1, sidedock: !1 }); const l = Se({ loop: e.config.loop.active, autoplay: e.autoplay, muted: e.muted, gesture: "media", playsinline: !this.config.fullscreen.iosNative, ...r, ...s }), c = (d = o, T.empty(d) ? null : T.number(Number(d)) ? d : d.match(/^.*(vimeo.com\/|video\/)(\d+).*/) ? RegExp.$2 : d); var d; const h = I("iframe"), u = he(e.config.urls.vimeo.iframe, c, l); if (h.setAttribute("src", u), h.setAttribute("allowfullscreen", ""), h.setAttribute("allow", ["autoplay", "fullscreen", "picture-in-picture", "encrypted-media", "accelerometer", "gyroscope"].join("; ")), T.empty(n) || h.setAttribute("referrerPolicy", n), i || !t.customControls) h.setAttribute("data-poster", e.poster), e.media = L(h, e.media); else { const t = I("div", { class: e.config.classNames.embedContainer, "data-poster": e.poster }); t.appendChild(h), e.media = L(t, e.media) } t.customControls || ye(he(e.config.urls.vimeo.api, u)).then(t => { !T.empty(t) && t.thumbnail_url && Le.setPoster.call(e, t.thumbnail_url).catch(() => { }) }), e.embed = new window.Vimeo.Player(h, { autopause: e.config.autopause, muted: e.muted }), e.media.paused = !0, e.media.currentTime = 0, e.supported.ui && e.embed.disableTextTrack(), e.media.play = (() => (qe.call(e, !0), e.embed.play())), e.media.pause = (() => (qe.call(e, !1), e.embed.pause())), e.media.stop = (() => { e.pause(), e.currentTime = 0 }); let { currentTime: p } = e.media; Object.defineProperty(e.media, "currentTime", { get: () => p, set(t) { const { embed: i, media: n, paused: s, volume: o } = e, a = s && !i.hasPlayed; n.seeking = !0, J.call(e, n, "seeking"), Promise.resolve(a && i.setVolume(0)).then(() => i.setCurrentTime(t)).then(() => a && i.pause()).then(() => a && i.setVolume(o)).catch(() => { }) } }); let f = e.config.speed.selected; Object.defineProperty(e.media, "playbackRate", { get: () => f, set(t) { e.embed.setPlaybackRate(t).then(() => { f = t, J.call(e, e.media, "ratechange") }).catch(() => { e.options.speed = [1] }) } }); let { volume: m } = e.config; Object.defineProperty(e.media, "volume", { get: () => m, set(t) { e.embed.setVolume(t).then(() => { m = t, J.call(e, e.media, "volumechange") }) } }); let { muted: g } = e.config; Object.defineProperty(e.media, "muted", { get: () => g, set(t) { const i = !!T.boolean(t) && t; e.embed.setVolume(i ? 0 : e.config.volume).then(() => { g = i, J.call(e, e.media, "volumechange") }) } }); let v, { loop: b } = e.config; Object.defineProperty(e.media, "loop", { get: () => b, set(t) { const i = T.boolean(t) ? t : e.config.loop.active; e.embed.setLoop(i).then(() => { b = i }) } }), e.embed.getVideoUrl().then(t => { v = t, Te.setDownloadUrl.call(e) }).catch(e => { this.debug.warn(e) }), Object.defineProperty(e.media, "currentSrc", { get: () => v }), Object.defineProperty(e.media, "ended", { get: () => e.currentTime === e.duration }), Promise.all([e.embed.getVideoWidth(), e.embed.getVideoHeight()]).then(t => { const [i, n] = t; e.embed.ratio = ce(i, n), le.call(this) }), e.embed.setAutopause(e.config.autopause).then(t => { e.config.autopause = t }), e.embed.getVideoTitle().then(t => { e.config.title = t, Le.setTitle.call(this) }), e.embed.getCurrentTime().then(t => { p = t, J.call(e, e.media, "timeupdate") }), e.embed.getDuration().then(t => { e.media.duration = t, J.call(e, e.media, "durationchange") }), e.embed.getTextTracks().then(t => { e.media.textTracks = t, Me.setup.call(e) }), e.embed.on("cuechange", ({ cues: t = [] }) => { const i = t.map(e => (function (e) { const t = document.createDocumentFragment(), i = document.createElement("div"); return t.appendChild(i), i.innerHTML = e, t.firstChild.innerText })(e.text)); Me.updateCues.call(e, i) }), e.embed.on("loaded", () => { if (e.embed.getPaused().then(t => { qe.call(e, !t), t || J.call(e, e.media, "playing") }), T.element(e.embed.element) && e.supported.ui) { e.embed.element.setAttribute("tabindex", -1) } }), e.embed.on("bufferstart", () => { J.call(e, e.media, "waiting") }), e.embed.on("bufferend", () => { J.call(e, e.media, "playing") }), e.embed.on("play", () => { qe.call(e, !0), J.call(e, e.media, "playing") }), e.embed.on("pause", () => { qe.call(e, !1) }), e.embed.on("timeupdate", t => { e.media.seeking = !1, p = t.seconds, J.call(e, e.media, "timeupdate") }), e.embed.on("progress", t => { e.media.buffered = t.percent, J.call(e, e.media, "progress"), 1 === parseInt(t.percent, 10) && J.call(e, e.media, "canplaythrough"), e.embed.getDuration().then(t => { t !== e.media.duration && (e.media.duration = t, J.call(e, e.media, "durationchange")) }) }), e.embed.on("seeked", () => { e.media.seeking = !1, J.call(e, e.media, "seeked") }), e.embed.on("ended", () => { e.media.paused = !0, J.call(e, e.media, "ended") }), e.embed.on("error", t => { e.media.error = t, J.call(e, e.media, "error") }), t.customControls && setTimeout(() => Le.build.call(e), 0) } }; function We(e) { e && !this.embed.hasPlayed && (this.embed.hasPlayed = !0), this.media.paused === e && (this.media.paused = !e, J.call(this, this.media, e ? "play" : "pause")) } function Be(e) { return e.noCookie ? "https://www.youtube-nocookie.com" : "http:" === window.location.protocol ? "http://www.youtube.com" : void 0 } const Ve = { setup() { if (z(this.elements.wrapper, this.config.classNames.embed, !0), T.object(window.YT) && T.function(window.YT.Player)) Ve.ready.call(this); else { const e = window.onYouTubeIframeAPIReady; window.onYouTubeIframeAPIReady = (() => { T.function(e) && e(), Ve.ready.call(this) }), He(this.config.urls.youtube.sdk).catch(e => { this.debug.warn("YouTube API failed to load", e) }) } }, getTitle(e) { ye(he(this.config.urls.youtube.api, e)).then(e => { if (T.object(e)) { const { title: t, height: i, width: n } = e; this.config.title = t, Le.setTitle.call(this), this.embed.ratio = ce(n, i) } le.call(this) }).catch(() => { le.call(this) }) }, ready() { const e = this, t = e.config.youtube, i = e.media && e.media.getAttribute("id"); if (!T.empty(i) && i.startsWith("youtube-")) return; let n = e.media.getAttribute("src"); T.empty(n) && (n = e.media.getAttribute(this.config.attributes.embed.id)); const s = (o = n, T.empty(o) ? null : o.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/) ? RegExp.$2 : o); var o; const a = I("div", { id: `${e.provider}-${Math.floor(1e4 * Math.random())}`, "data-poster": t.customControls ? e.poster : void 0 }); if (e.media = L(a, e.media), t.customControls) { const t = e => `https://i.ytimg.com/vi/${s}/${e}default.jpg`; Oe(t("maxres"), 121).catch(() => Oe(t("sd"), 121)).catch(() => Oe(t("hq"))).then(t => Le.setPoster.call(e, t.src)).then(t => { t.includes("maxres") || (e.elements.poster.style.backgroundSize = "cover") }).catch(() => { }) } e.embed = new window.YT.Player(e.media, { videoId: s, host: Be(t), playerVars: E({}, { autoplay: e.config.autoplay ? 1 : 0, hl: e.config.hl, controls: e.supported.ui && t.customControls ? 0 : 1, disablekb: 1, playsinline: e.config.fullscreen.iosNative ? 0 : 1, cc_load_policy: e.captions.active ? 1 : 0, cc_lang_pref: e.config.captions.language, widget_referrer: window ? window.location.href : null }, t), events: { onError(t) { if (!e.media.error) { const i = t.data, n = { 2: "The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.", 5: "The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.", 100: "The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.", 101: "The owner of the requested video does not allow it to be played in embedded players.", 150: "The owner of the requested video does not allow it to be played in embedded players." }[i] || "An unknown error occured"; e.media.error = { code: i, message: n }, J.call(e, e.media, "error") } }, onPlaybackRateChange(t) { const i = t.target; e.media.playbackRate = i.getPlaybackRate(), J.call(e, e.media, "ratechange") }, onReady(i) { if (T.function(e.media.play)) return; const n = i.target; Ve.getTitle.call(e, s), e.media.play = (() => { We.call(e, !0), n.playVideo() }), e.media.pause = (() => { We.call(e, !1), n.pauseVideo() }), e.media.stop = (() => { n.stopVideo() }), e.media.duration = n.getDuration(), e.media.paused = !0, e.media.currentTime = 0, Object.defineProperty(e.media, "currentTime", { get: () => Number(n.getCurrentTime()), set(t) { e.paused && !e.embed.hasPlayed && e.embed.mute(), e.media.seeking = !0, J.call(e, e.media, "seeking"), n.seekTo(t) } }), Object.defineProperty(e.media, "playbackRate", { get: () => n.getPlaybackRate(), set(e) { n.setPlaybackRate(e) } }); let { volume: o } = e.config; Object.defineProperty(e.media, "volume", { get: () => o, set(t) { o = t, n.setVolume(100 * o), J.call(e, e.media, "volumechange") } }); let { muted: a } = e.config; Object.defineProperty(e.media, "muted", { get: () => a, set(t) { const i = T.boolean(t) ? t : a; a = i, n[i ? "mute" : "unMute"](), n.setVolume(100 * o), J.call(e, e.media, "volumechange") } }), Object.defineProperty(e.media, "currentSrc", { get: () => n.getVideoUrl() }), Object.defineProperty(e.media, "ended", { get: () => e.currentTime === e.duration }); const r = n.getAvailablePlaybackRates(); e.options.speed = r.filter(t => e.config.speed.options.includes(t)), e.supported.ui && t.customControls && e.media.setAttribute("tabindex", -1), J.call(e, e.media, "timeupdate"), J.call(e, e.media, "durationchange"), clearInterval(e.timers.buffering), e.timers.buffering = setInterval(() => { e.media.buffered = n.getVideoLoadedFraction(), (null === e.media.lastBuffered || e.media.lastBuffered < e.media.buffered) && J.call(e, e.media, "progress"), e.media.lastBuffered = e.media.buffered, 1 === e.media.buffered && (clearInterval(e.timers.buffering), J.call(e, e.media, "canplaythrough")) }, 200), t.customControls && setTimeout(() => Le.build.call(e), 50) }, onStateChange(i) { const n = i.target; switch (clearInterval(e.timers.playing), e.media.seeking && [1, 2].includes(i.data) && (e.media.seeking = !1, J.call(e, e.media, "seeked")), i.data) { case -1: J.call(e, e.media, "timeupdate"), e.media.buffered = n.getVideoLoadedFraction(), J.call(e, e.media, "progress"); break; case 0: We.call(e, !1), e.media.loop ? (n.stopVideo(), n.playVideo()) : J.call(e, e.media, "ended"); break; case 1: t.customControls && !e.config.autoplay && e.media.paused && !e.embed.hasPlayed ? e.media.pause() : (We.call(e, !0), J.call(e, e.media, "playing"), e.timers.playing = setInterval(() => { J.call(e, e.media, "timeupdate") }, 50), e.media.duration !== n.getDuration() && (e.media.duration = n.getDuration(), J.call(e, e.media, "durationchange"))); break; case 2: e.muted || e.embed.unMute(), We.call(e, !1); break; case 3: J.call(e, e.media, "waiting") }J.call(e, e.elements.container, "statechange", !1, { code: i.data }) } } }) } }, Ge = { setup() { this.media ? (z(this.elements.container, this.config.classNames.type.replace("{0}", this.type), !0), z(this.elements.container, this.config.classNames.provider.replace("{0}", this.provider), !0), this.isEmbed && z(this.elements.container, this.config.classNames.type.replace("{0}", "video"), !0), this.isVideo && (this.elements.wrapper = I("div", { class: this.config.classNames.video }), A(this.media, this.elements.wrapper), this.elements.poster = I("div", { class: this.config.classNames.poster }), this.elements.wrapper.appendChild(this.elements.poster)), this.isHTML5 ? de.setup.call(this) : this.isYouTube ? Ve.setup.call(this) : this.isVimeo && Ue.setup.call(this)) : this.debug.warn("No media element found!") } }, Ye = e => { e.manager && e.manager.destroy(), e.elements.displayContainer && e.elements.displayContainer.destroy(), e.elements.container.remove() }; class Qe { constructor(t) { e(this, "load", () => { this.enabled && (T.object(window.google) && T.object(window.google.ima) ? this.ready() : He(this.player.config.urls.googleIMA.sdk).then(() => { this.ready() }).catch(() => { this.trigger("error", new Error("Google IMA SDK failed to load")) })) }), e(this, "ready", () => { this.enabled || Ye(this), this.startSafetyTimer(12e3, "ready()"), this.managerPromise.then(() => { this.clearSafetyTimer("onAdsManagerLoaded()") }), this.listeners(), this.setupIMA() }), e(this, "setupIMA", () => { this.elements.container = I("div", { class: this.player.config.classNames.ads }), this.player.elements.container.appendChild(this.elements.container), google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED), google.ima.settings.setLocale(this.player.config.ads.language), google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline), this.elements.displayContainer = new google.ima.AdDisplayContainer(this.elements.container, this.player.media), this.loader = new google.ima.AdsLoader(this.elements.displayContainer), this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, e => this.onAdsManagerLoaded(e), !1), this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, e => this.onAdError(e), !1), this.requestAds() }), e(this, "requestAds", () => { const { container: e } = this.player.elements; try { const t = new google.ima.AdsRequest; t.adTagUrl = this.tagUrl, t.linearAdSlotWidth = e.offsetWidth, t.linearAdSlotHeight = e.offsetHeight, t.nonLinearAdSlotWidth = e.offsetWidth, t.nonLinearAdSlotHeight = e.offsetHeight, t.forceNonLinearFullSlot = !1, t.setAdWillPlayMuted(!this.player.muted), this.loader.requestAds(t) } catch (e) { this.onAdError(e) } }), e(this, "pollCountdown", (e = !1) => { if (!e) return clearInterval(this.countdownTimer), void this.elements.container.removeAttribute("data-badge-text"); this.countdownTimer = setInterval(() => { const e = xe(Math.max(this.manager.getRemainingTime(), 0)), t = `${ve.get("advertisement", this.player.config)} - ${e}`; this.elements.container.setAttribute("data-badge-text", t) }, 100) }), e(this, "onAdsManagerLoaded", e => { if (!this.enabled) return; const t = new google.ima.AdsRenderingSettings; t.restoreCustomPlaybackStateOnAdBreakComplete = !0, t.enablePreloading = !0, this.manager = e.getAdsManager(this.player, t), this.cuePoints = this.manager.getCuePoints(), this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, e => this.onAdError(e)), Object.keys(google.ima.AdEvent.Type).forEach(e => { this.manager.addEventListener(google.ima.AdEvent.Type[e], e => this.onAdEvent(e)) }), this.trigger("loaded") }), e(this, "addCuePoints", () => { T.empty(this.cuePoints) || this.cuePoints.forEach(e => { if (0 !== e && -1 !== e && e < this.player.duration) { const t = this.player.elements.progress; if (T.element(t)) { const i = 100 / this.player.duration * e, n = I("span", { class: this.player.config.classNames.cues }); n.style.left = `${i.toString()}%`, t.appendChild(n) } } }) }), e(this, "onAdEvent", e => { const { container: t } = this.player.elements, i = e.getAd(), n = e.getAdData(); switch ((e => { J.call(this.player, this.player.media, `ads${e.replace(/_/g, "").toLowerCase()}`) })(e.type), e.type) { case google.ima.AdEvent.Type.LOADED: this.trigger("loaded"), this.pollCountdown(!0), i.isLinear() || (i.width = t.offsetWidth, i.height = t.offsetHeight); break; case google.ima.AdEvent.Type.STARTED: this.manager.setVolume(this.player.volume); break; case google.ima.AdEvent.Type.ALL_ADS_COMPLETED: this.player.ended ? this.loadAds() : this.loader.contentComplete(); break; case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED: this.pauseContent(); break; case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED: this.pollCountdown(), this.resumeContent(); break; case google.ima.AdEvent.Type.LOG: n.adError && this.player.debug.warn(`Non-fatal ad error: ${n.adError.getMessage()}`) } }), e(this, "onAdError", e => { this.cancel(), this.player.debug.warn("Ads error", e) }), e(this, "listeners", () => { const { container: e } = this.player.elements; let t; this.player.on("canplay", () => { this.addCuePoints() }), this.player.on("ended", () => { this.loader.contentComplete() }), this.player.on("timeupdate", () => { t = this.player.currentTime }), this.player.on("seeked", () => { const e = this.player.currentTime; T.empty(this.cuePoints) || this.cuePoints.forEach((i, n) => { t < i && i < e && (this.manager.discardAdBreak(), this.cuePoints.splice(n, 1)) }) }), window.addEventListener("resize", () => { this.manager && this.manager.resize(e.offsetWidth, e.offsetHeight, google.ima.ViewMode.NORMAL) }) }), e(this, "play", () => { const { container: e } = this.player.elements; this.managerPromise || this.resumeContent(), this.managerPromise.then(() => { this.manager.setVolume(this.player.volume), this.elements.displayContainer.initialize(); try { this.initialized || (this.manager.init(e.offsetWidth, e.offsetHeight, google.ima.ViewMode.NORMAL), this.manager.start()), this.initialized = !0 } catch (e) { this.onAdError(e) } }).catch(() => { }) }), e(this, "resumeContent", () => { this.elements.container.style.zIndex = "", this.playing = !1, ee(this.player.media.play()) }), e(this, "pauseContent", () => { this.elements.container.style.zIndex = 3, this.playing = !0, this.player.media.pause() }), e(this, "cancel", () => { this.initialized && this.resumeContent(), this.trigger("error"), this.loadAds() }), e(this, "loadAds", () => { this.managerPromise.then(() => { this.manager && this.manager.destroy(), this.managerPromise = new Promise(e => { this.on("loaded", e), this.player.debug.log(this.manager) }), this.initialized = !1, this.requestAds() }).catch(() => { }) }), e(this, "trigger", (e, ...t) => { const i = this.events[e]; T.array(i) && i.forEach(e => { T.function(e) && e.apply(this, t) }) }), e(this, "on", (e, t) => (T.array(this.events[e]) || (this.events[e] = []), this.events[e].push(t), this)), e(this, "startSafetyTimer", (e, t) => { this.player.debug.log(`Safety timer invoked from: ${t}`), this.safetyTimer = setTimeout(() => { this.cancel(), this.clearSafetyTimer("startSafetyTimer()") }, e) }), e(this, "clearSafetyTimer", e => { T.nullOrUndefined(this.safetyTimer) || (this.player.debug.log(`Safety timer cleared from: ${e}`), clearTimeout(this.safetyTimer), this.safetyTimer = null) }), this.player = t, this.config = t.config.ads, this.playing = !1, this.initialized = !1, this.elements = { container: null, displayContainer: null }, this.manager = null, this.loader = null, this.cuePoints = null, this.events = {}, this.safetyTimer = null, this.countdownTimer = null, this.managerPromise = new Promise((e, t) => { this.on("loaded", e), this.on("error", t) }), this.load() } get enabled() { const { config: e } = this; return this.player.isHTML5 && this.player.isVideo && e.enabled && (!T.empty(e.publisherId) || T.url(e.tagUrl)) } get tagUrl() { const { config: e } = this; if (T.url(e.tagUrl)) return e.tagUrl; return `https://go.aniview.com/api/adserver6/vast/?${Se({ AV_PUBLISHERID: "58c25bb0073ef448b1087ad6", AV_CHANNELID: "5a0458dc28a06145e4519d21", AV_URL: window.location.hostname, cb: Date.now(), AV_WIDTH: 640, AV_HEIGHT: 480, AV_CDIM2: e.publisherId })}` } } const Ke = e => { const t = []; return e.split(/\r\n\r\n|\n\n|\r\r/).forEach(e => { const i = {}; e.split(/\r\n|\n|\r/).forEach(e => { if (T.number(i.startTime)) { if (!T.empty(e.trim()) && T.empty(i.text)) { const t = e.trim().split("#xywh=");[i.text] = t, t[1] && ([i.x, i.y, i.w, i.h] = t[1].split(",")) } } else { const t = e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/); t && (i.startTime = 60 * Number(t[1] || 0) * 60 + 60 * Number(t[2]) + Number(t[3]) + Number(`0.${t[4]}`), i.endTime = 60 * Number(t[6] || 0) * 60 + 60 * Number(t[7]) + Number(t[8]) + Number(`0.${t[9]}`)) } }), i.text && t.push(i) }), t }, Xe = (e, t) => { const i = {}; return e > t.width / t.height ? (i.width = t.width, i.height = 1 / e * t.width) : (i.height = t.height, i.width = e * t.height), i }; class Ze { constructor(t) { e(this, "load", () => { this.player.elements.display.seekTooltip && (this.player.elements.display.seekTooltip.hidden = this.enabled), this.enabled && this.getThumbnails().then(() => { this.enabled && (this.render(), this.determineContainerAutoSizing(), this.loaded = !0) }) }), e(this, "getThumbnails", () => new Promise(e => { const { src: t } = this.player.config.previewThumbnails; if (T.empty(t)) throw new Error("Missing previewThumbnails.src config attribute"); const i = () => { this.thumbnails.sort((e, t) => e.height - t.height), this.player.debug.log("Preview thumbnails", this.thumbnails), e() }; if (T.function(t)) t(e => { this.thumbnails = e, i() }); else { const e = (T.string(t) ? [t] : t).map(e => this.getThumbnail(e)); Promise.all(e).then(i) } })), e(this, "getThumbnail", e => new Promise(t => { ye(e).then(i => { const n = { frames: Ke(i), height: null, urlPrefix: "" }; n.frames[0].text.startsWith("/") || n.frames[0].text.startsWith("http://") || n.frames[0].text.startsWith("https://") || (n.urlPrefix = e.substring(0, e.lastIndexOf("/") + 1)); const s = new Image; s.onload = (() => { n.height = s.naturalHeight, n.width = s.naturalWidth, this.thumbnails.push(n), t() }), s.src = n.urlPrefix + n.frames[0].text }) })), e(this, "startMove", e => { if (this.loaded && T.event(e) && ["touchmove", "mousemove"].includes(e.type) && this.player.media.duration) { if ("touchmove" === e.type) this.seekTime = this.player.media.duration * (this.player.elements.inputs.seek.value / 100); else { const t = this.player.elements.progress.getBoundingClientRect(), i = 100 / t.width * (e.pageX - t.left); this.seekTime = this.player.media.duration * (i / 100), this.seekTime < 0 && (this.seekTime = 0), this.seekTime > this.player.media.duration - 1 && (this.seekTime = this.player.media.duration - 1), this.mousePosX = e.pageX, this.elements.thumb.time.innerText = xe(this.seekTime) } this.showImageAtCurrentTime() } }), e(this, "endMove", () => { this.toggleThumbContainer(!1, !0) }), e(this, "startScrubbing", e => { (T.nullOrUndefined(e.button) || !1 === e.button || 0 === e.button) && (this.mouseDown = !0, this.player.media.duration && (this.toggleScrubbingContainer(!0), this.toggleThumbContainer(!1, !0), this.showImageAtCurrentTime())) }), e(this, "endScrubbing", () => { this.mouseDown = !1, Math.ceil(this.lastTime) === Math.ceil(this.player.media.currentTime) ? this.toggleScrubbingContainer(!1) : Z.call(this.player, this.player.media, "timeupdate", () => { this.mouseDown || this.toggleScrubbingContainer(!1) }) }), e(this, "listeners", () => { this.player.on("play", () => { this.toggleThumbContainer(!1, !0) }), this.player.on("seeked", () => { this.toggleThumbContainer(!1) }), this.player.on("timeupdate", () => { this.lastTime = this.player.media.currentTime }) }), e(this, "render", () => { this.elements.thumb.container = I("div", { class: this.player.config.classNames.previewThumbnails.thumbContainer }), this.elements.thumb.imageContainer = I("div", { class: this.player.config.classNames.previewThumbnails.imageContainer }), this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer); const e = I("div", { class: this.player.config.classNames.previewThumbnails.timeContainer }); this.elements.thumb.time = I("span", {}, "00:00"), e.appendChild(this.elements.thumb.time), this.elements.thumb.container.appendChild(e), T.element(this.player.elements.progress) && this.player.elements.progress.appendChild(this.elements.thumb.container), this.elements.scrubbing.container = I("div", { class: this.player.config.classNames.previewThumbnails.scrubbingContainer }), this.player.elements.wrapper.appendChild(this.elements.scrubbing.container) }), e(this, "destroy", () => { this.elements.thumb.container && this.elements.thumb.container.remove(), this.elements.scrubbing.container && this.elements.scrubbing.container.remove() }), e(this, "showImageAtCurrentTime", () => { this.mouseDown ? this.setScrubbingContainerSize() : this.setThumbContainerSizeAndPos(); const e = this.thumbnails[0].frames.findIndex(e => this.seekTime >= e.startTime && this.seekTime <= e.endTime), t = e >= 0; let i = 0; this.mouseDown || this.toggleThumbContainer(t), t && (this.thumbnails.forEach((t, n) => { this.loadedImages.includes(t.frames[e].text) && (i = n) }), e !== this.showingThumb && (this.showingThumb = e, this.loadImage(i))) }), e(this, "loadImage", (e = 0) => { const t = this.showingThumb, i = this.thumbnails[e], { urlPrefix: n } = i, s = i.frames[t], o = i.frames[t].text, a = n + o; if (this.currentImageElement && this.currentImageElement.dataset.filename === o) this.showImage(this.currentImageElement, s, e, t, o, !1), this.currentImageElement.dataset.index = t, this.removeOldImages(this.currentImageElement); else { this.loadingImage && this.usingSprites && (this.loadingImage.onload = null); const i = new Image; i.src = a, i.dataset.index = t, i.dataset.filename = o, this.showingThumbFilename = o, this.player.debug.log(`Loading image: ${a}`), i.onload = (() => this.showImage(i, s, e, t, o, !0)), this.loadingImage = i, this.removeOldImages(i) } }), e(this, "showImage", (e, t, i, n, s, o = !0) => { this.player.debug.log(`Showing thumb: ${s}. num: ${n}. qual: ${i}. newimg: ${o}`), this.setImageSizeAndOffset(e, t), o && (this.currentImageContainer.appendChild(e), this.currentImageElement = e, this.loadedImages.includes(s) || this.loadedImages.push(s)), this.preloadNearby(n, !0).then(this.preloadNearby(n, !1)).then(this.getHigherQuality(i, e, t, s)) }), e(this, "removeOldImages", e => { Array.from(this.currentImageContainer.children).forEach(t => { if ("img" !== t.tagName.toLowerCase()) return; const i = this.usingSprites ? 500 : 1e3; if (t.dataset.index !== e.dataset.index && !t.dataset.deleting) { t.dataset.deleting = !0; const { currentImageContainer: e } = this; setTimeout(() => { e.removeChild(t), this.player.debug.log(`Removing thumb: ${t.dataset.filename}`) }, i) } }) }), e(this, "preloadNearby", (e, t = !0) => new Promise(i => { setTimeout(() => { const n = this.thumbnails[0].frames[e].text; if (this.showingThumbFilename === n) { let s; s = t ? this.thumbnails[0].frames.slice(e) : this.thumbnails[0].frames.slice(0, e).reverse(); let o = !1; s.forEach(e => { const t = e.text; if (t !== n && !this.loadedImages.includes(t)) { o = !0, this.player.debug.log(`Preloading thumb filename: ${t}`); const { urlPrefix: e } = this.thumbnails[0], n = e + t, s = new Image; s.src = n, s.onload = (() => { this.player.debug.log(`Preloaded thumb filename: ${t}`), this.loadedImages.includes(t) || this.loadedImages.push(t), i() }) } }), o || i() } }, 300) })), e(this, "getHigherQuality", (e, t, i, n) => { if (e < this.thumbnails.length - 1) { let s = t.naturalHeight; this.usingSprites && (s = i.h), s < this.thumbContainerHeight && setTimeout(() => { this.showingThumbFilename === n && (this.player.debug.log(`Showing higher quality thumb for: ${n}`), this.loadImage(e + 1)) }, 300) } }), e(this, "toggleThumbContainer", (e = !1, t = !1) => { const i = this.player.config.classNames.previewThumbnails.thumbContainerShown; this.elements.thumb.container.classList.toggle(i, e), !e && t && (this.showingThumb = null, this.showingThumbFilename = null) }), e(this, "toggleScrubbingContainer", (e = !1) => { const t = this.player.config.classNames.previewThumbnails.scrubbingContainerShown; this.elements.scrubbing.container.classList.toggle(t, e), e || (this.showingThumb = null, this.showingThumbFilename = null) }), e(this, "determineContainerAutoSizing", () => { (this.elements.thumb.imageContainer.clientHeight > 20 || this.elements.thumb.imageContainer.clientWidth > 20) && (this.sizeSpecifiedInCSS = !0) }), e(this, "setThumbContainerSizeAndPos", () => { if (this.sizeSpecifiedInCSS) { if (this.elements.thumb.imageContainer.clientHeight > 20 && this.elements.thumb.imageContainer.clientWidth < 20) { const e = Math.floor(this.elements.thumb.imageContainer.clientHeight * this.thumbAspectRatio); this.elements.thumb.imageContainer.style.width = `${e}px` } else if (this.elements.thumb.imageContainer.clientHeight < 20 && this.elements.thumb.imageContainer.clientWidth > 20) { const e = Math.floor(this.elements.thumb.imageContainer.clientWidth / this.thumbAspectRatio); this.elements.thumb.imageContainer.style.height = `${e}px` } } else { const e = Math.floor(this.thumbContainerHeight * this.thumbAspectRatio); this.elements.thumb.imageContainer.style.height = `${this.thumbContainerHeight}px`, this.elements.thumb.imageContainer.style.width = `${e}px` } this.setThumbContainerPos() }), e(this, "setThumbContainerPos", () => { const e = this.player.elements.progress.getBoundingClientRect(), t = this.player.elements.container.getBoundingClientRect(), { container: i } = this.elements.thumb, n = t.left - e.left + 10, s = t.right - e.left - i.clientWidth - 10; let o = this.mousePosX - e.left - i.clientWidth / 2; o < n && (o = n), o > s && (o = s), i.style.left = `${o}px` }), e(this, "setScrubbingContainerSize", () => { const { width: e, height: t } = Xe(this.thumbAspectRatio, { width: this.player.media.clientWidth, height: this.player.media.clientHeight }); this.elements.scrubbing.container.style.width = `${e}px`, this.elements.scrubbing.container.style.height = `${t}px` }), e(this, "setImageSizeAndOffset", (e, t) => { if (!this.usingSprites) return; const i = this.thumbContainerHeight / t.h; e.style.height = `${e.naturalHeight * i}px`, e.style.width = `${e.naturalWidth * i}px`, e.style.left = `-${t.x * i}px`, e.style.top = `-${t.y * i}px` }), this.player = t, this.thumbnails = [], this.loaded = !1, this.lastMouseMoveTime = Date.now(), this.mouseDown = !1, this.loadedImages = [], this.elements = { thumb: {}, scrubbing: {} }, this.load() } get enabled() { return this.player.isHTML5 && this.player.isVideo && this.player.config.previewThumbnails.enabled } get currentImageContainer() { return this.mouseDown ? this.elements.scrubbing.container : this.elements.thumb.imageContainer } get usingSprites() { return Object.keys(this.thumbnails[0].frames[0]).includes("w") } get thumbAspectRatio() { return this.usingSprites ? this.thumbnails[0].frames[0].w / this.thumbnails[0].frames[0].h : this.thumbnails[0].width / this.thumbnails[0].height } get thumbContainerHeight() { if (this.mouseDown) { const { height: e } = Xe(this.thumbAspectRatio, { width: this.player.media.clientWidth, height: this.player.media.clientHeight }); return e } return this.sizeSpecifiedInCSS ? this.elements.thumb.imageContainer.clientHeight : Math.floor(this.player.media.clientWidth / this.thumbAspectRatio / 4) } get currentImageElement() { return this.mouseDown ? this.currentScrubbingImageElement : this.currentThumbnailImageElement } set currentImageElement(e) { this.mouseDown ? this.currentScrubbingImageElement = e : this.currentThumbnailImageElement = e } } const Je = { insertElements(e, t) { T.string(t) ? P(e, this.media, { src: t }) : T.array(t) && t.forEach(t => { P(e, this.media, t) }) }, change(e) { D(e, "sources.length") ? (de.cancelRequests.call(this), this.destroy.call(this, () => { this.options.quality = [], R(this.media), this.media = null, T.element(this.elements.container) && this.elements.container.removeAttribute("class"); const { sources: t, type: i } = e, [{ provider: n = Ae.html5, src: s }] = t, o = "html5" === n ? i : "div", a = "html5" === n ? {} : { src: s }; Object.assign(this, { provider: n, type: i, supported: G.check(i, n, this.config.playsinline), media: I(o, a) }), this.elements.container.appendChild(this.media), T.boolean(e.autoplay) && (this.config.autoplay = e.autoplay), this.isHTML5 && (this.config.crossorigin && this.media.setAttribute("crossorigin", ""), this.config.autoplay && this.media.setAttribute("autoplay", ""), T.empty(e.poster) || (this.poster = e.poster), this.config.loop.active && this.media.setAttribute("loop", ""), this.config.muted && this.media.setAttribute("muted", ""), this.config.playsinline && this.media.setAttribute("playsinline", "")), Le.addStyleHook.call(this), this.isHTML5 && Je.insertElements.call(this, "source", t), this.config.title = e.title, Ge.setup.call(this), this.isHTML5 && Object.keys(e).includes("tracks") && Je.insertElements.call(this, "track", e.tracks), (this.isHTML5 || this.isEmbed && !this.supported.ui) && Le.build.call(this), this.isHTML5 && this.media.load(), T.empty(e.previewThumbnails) || (Object.assign(this.config.previewThumbnails, e.previewThumbnails), this.previewThumbnails && this.previewThumbnails.loaded && (this.previewThumbnails.destroy(), this.previewThumbnails = null), this.config.previewThumbnails.enabled && (this.previewThumbnails = new Ze(this))), this.fullscreen.update() }, !0)) : this.debug.warn("Invalid source format") } }; class et { constructor(t, i) { if (e(this, "play", () => T.function(this.media.play) ? (this.ads && this.ads.enabled && this.ads.managerPromise.then(() => this.ads.play()).catch(() => ee(this.media.play())), this.media.play()) : null), e(this, "pause", () => this.playing && T.function(this.media.pause) ? this.media.pause() : null), e(this, "togglePlay", e => { return (T.boolean(e) ? e : !this.playing) ? this.play() : this.pause() }), e(this, "stop", () => { this.isHTML5 ? (this.pause(), this.restart()) : T.function(this.media.stop) && this.media.stop() }), e(this, "restart", () => { this.currentTime = 0 }), e(this, "rewind", e => { this.currentTime -= T.number(e) ? e : this.config.seekTime }), e(this, "forward", e => { this.currentTime += T.number(e) ? e : this.config.seekTime }), e(this, "increaseVolume", e => { const t = this.media.muted ? 0 : this.volume; this.volume = t + (T.number(e) ? e : 0) }), e(this, "decreaseVolume", e => { this.increaseVolume(-e) }), e(this, "airplay", () => { G.airplay && this.media.webkitShowPlaybackTargetPicker() }), e(this, "toggleControls", e => { if (this.supported.ui && !this.isAudio) { const t = H(this.elements.container, this.config.classNames.hideControls), i = void 0 === e ? void 0 : !e, n = z(this.elements.container, this.config.classNames.hideControls, i); if (n && T.array(this.config.controls) && this.config.controls.includes("settings") && !T.empty(this.config.settings) && Te.toggleMenu.call(this, !1), n !== t) { const e = n ? "controlshidden" : "controlsshown"; J.call(this, this.media, e) } return !n } return !1 }), e(this, "on", (e, t) => { K.call(this, this.elements.container, e, t) }), e(this, "once", (e, t) => { Z.call(this, this.elements.container, e, t) }), e(this, "off", (e, t) => { X(this.elements.container, e, t) }), e(this, "destroy", (e, t = !1) => { if (!this.ready) return; const i = () => { document.body.style.overflow = "", this.embed = null, t ? (Object.keys(this.elements).length && (R(this.elements.buttons.play), R(this.elements.captions), R(this.elements.controls), R(this.elements.wrapper), this.elements.buttons.play = null, this.elements.captions = null, this.elements.controls = null, this.elements.wrapper = null), T.function(e) && e()) : (function () { this && this.eventListeners && (this.eventListeners.forEach(e => { const { element: t, type: i, callback: n, options: s } = e; t.removeEventListener(i, n, s) }), this.eventListeners = []) }.call(this), de.cancelRequests.call(this), L(this.elements.original, this.elements.container), J.call(this, this.elements.original, "destroyed", !0), T.function(e) && e.call(this.elements.original), this.ready = !1, setTimeout(() => { this.elements = null, this.media = null }, 200)) }; this.stop(), clearTimeout(this.timers.loading), clearTimeout(this.timers.controls), clearTimeout(this.timers.resized), this.isHTML5 ? (Le.toggleNativeControls.call(this, !0), i()) : this.isYouTube ? (clearInterval(this.timers.buffering), clearInterval(this.timers.playing), null !== this.embed && T.function(this.embed.destroy) && this.embed.destroy(), i()) : this.isVimeo && (null !== this.embed && this.embed.unload().then(i), setTimeout(i, 200)) }), e(this, "supports", e => G.mime.call(this, e)), this.timers = {}, this.ready = !1, this.loading = !1, this.failed = !1, this.touch = G.touch, this.media = t, T.string(this.media) && (this.media = document.querySelectorAll(this.media)), (window.jQuery && this.media instanceof jQuery || T.nodeList(this.media) || T.array(this.media)) && (this.media = this.media[0]), this.config = E({}, De, et.defaults, i || {}, (() => { try { return JSON.parse(this.media.getAttribute("data-plyr-config")) } catch (e) { return {} } })()), this.elements = { container: null, fullscreen: null, captions: null, buttons: {}, display: {}, progress: {}, inputs: {}, settings: { popup: null, menu: null, panels: {}, buttons: {} } }, this.captions = { active: null, currentTrack: -1, meta: new WeakMap }, this.fullscreen = { active: !1 }, this.options = { speed: [], quality: [] }, this.debug = new Pe(this.config.debug), this.debug.log("Config", this.config), this.debug.log("Support", G), T.nullOrUndefined(this.media) || !T.element(this.media)) return void this.debug.error("Setup failed: no suitable element passed"); if (this.media.plyr) return void this.debug.warn("Target already setup"); if (!this.config.enabled) return void this.debug.error("Setup failed: disabled by config"); if (!G.check().api) return void this.debug.error("Setup failed: no support"); const n = this.media.cloneNode(!0); n.autoplay = !1, this.elements.original = n; const s = this.media.tagName.toLowerCase(); let o = null, a = null; switch (s) { case "div": if (o = this.media.querySelector("iframe"), T.element(o)) { if (a = $e(o.getAttribute("src")), this.provider = function (e) { return /^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e) ? Ae.youtube : /^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e) ? Ae.vimeo : null }(a.toString()), this.elements.container = this.media, this.media = o, this.elements.container.className = "", a.search.length) { const e = ["1", "true"]; e.includes(a.searchParams.get("autoplay")) && (this.config.autoplay = !0), e.includes(a.searchParams.get("loop")) && (this.config.loop.active = !0), this.isYouTube ? (this.config.playsinline = e.includes(a.searchParams.get("playsinline")), this.config.youtube.hl = a.searchParams.get("hl")) : this.config.playsinline = !0 } } else this.provider = this.media.getAttribute(this.config.attributes.embed.provider), this.media.removeAttribute(this.config.attributes.embed.provider); if (T.empty(this.provider) || !Object.values(Ae).includes(this.provider)) return void this.debug.error("Setup failed: Invalid provider"); this.type = Fe.video; break; case "video": case "audio": this.type = s, this.provider = Ae.html5, this.media.hasAttribute("crossorigin") && (this.config.crossorigin = !0), this.media.hasAttribute("autoplay") && (this.config.autoplay = !0), (this.media.hasAttribute("playsinline") || this.media.hasAttribute("webkit-playsinline")) && (this.config.playsinline = !0), this.media.hasAttribute("muted") && (this.config.muted = !0), this.media.hasAttribute("loop") && (this.config.loop.active = !0); break; default: return void this.debug.error("Setup failed: unsupported type") }this.supported = G.check(this.type, this.provider, this.config.playsinline), this.supported.api ? (this.eventListeners = [], this.listeners = new je(this), this.storage = new be(this), this.media.plyr = this, T.element(this.elements.container) || (this.elements.container = I("div", { tabindex: 0 }), A(this.media, this.elements.container)), Le.migrateStyles.call(this), Le.addStyleHook.call(this), Ge.setup.call(this), this.config.debug && K.call(this, this.elements.container, this.config.events.join(" "), e => { this.debug.log(`event: ${e.type}`) }), this.fullscreen = new Re(this), (this.isHTML5 || this.isEmbed && !this.supported.ui) && Le.build.call(this), this.listeners.container(), this.listeners.global(), this.config.ads.enabled && (this.ads = new Qe(this)), this.isHTML5 && this.config.autoplay && this.once("canplay", () => ee(this.play())), this.lastSeekTime = 0, this.config.previewThumbnails.enabled && (this.previewThumbnails = new Ze(this))) : this.debug.error("Setup failed: no support") } get isHTML5() { return this.provider === Ae.html5 } get isEmbed() { return this.isYouTube || this.isVimeo } get isYouTube() { return this.provider === Ae.youtube } get isVimeo() { return this.provider === Ae.vimeo } get isVideo() { return this.type === Fe.video } get isAudio() { return this.type === Fe.audio } get playing() { return Boolean(this.ready && !this.paused && !this.ended) } get paused() { return Boolean(this.media.paused) } get stopped() { return Boolean(this.paused && 0 === this.currentTime) } get ended() { return Boolean(this.media.ended) } set currentTime(e) { if (!this.duration) return; const t = T.number(e) && e > 0; this.media.currentTime = t ? Math.min(e, this.duration) : 0, this.debug.log(`Seeking to ${this.currentTime} seconds`) } get currentTime() { return Number(this.media.currentTime) } get buffered() { const { buffered: e } = this.media; return T.number(e) ? e : e && e.length && this.duration > 0 ? e.end(0) / this.duration : 0 } get seeking() { return Boolean(this.media.seeking) } get duration() { const e = parseFloat(this.config.duration), t = (this.media || {}).duration, i = T.number(t) && t !== 1 / 0 ? t : 0; return e || i } set volume(e) { let t = e; T.string(t) && (t = Number(t)), T.number(t) || (t = this.storage.get("volume")), T.number(t) || ({ volume: t } = this.config), t > 1 && (t = 1), t < 0 && (t = 0), this.config.volume = t, this.media.volume = t, !T.empty(e) && this.muted && t > 0 && (this.muted = !1) } get volume() { return Number(this.media.volume) } set muted(e) { let t = e; T.boolean(t) || (t = this.storage.get("muted")), T.boolean(t) || (t = this.config.muted), this.config.muted = t, this.media.muted = t } get muted() { return Boolean(this.media.muted) } get hasAudio() { return !this.isHTML5 || (!!this.isAudio || (Boolean(this.media.mozHasAudio) || Boolean(this.media.webkitAudioDecodedByteCount) || Boolean(this.media.audioTracks && this.media.audioTracks.length))) } set speed(e) { let t = null; T.number(e) && (t = e), T.number(t) || (t = this.storage.get("speed")), T.number(t) || (t = this.config.speed.selected); const { minimumSpeed: i, maximumSpeed: n } = this; t = function (e = 0, t = 0, i = 255) { return Math.min(Math.max(e, t), i) }(t, i, n), this.config.speed.selected = t, setTimeout(() => { this.media && (this.media.playbackRate = t) }, 0) } get speed() { return Number(this.media.playbackRate) } get minimumSpeed() { return this.isYouTube ? Math.min(...this.options.speed) : this.isVimeo ? .5 : .0625 } get maximumSpeed() { return this.isYouTube ? Math.max(...this.options.speed) : this.isVimeo ? 2 : 16 } set quality(e) { const t = this.config.quality, i = this.options.quality; if (!i.length) return; let n = [!T.empty(e) && Number(e), this.storage.get("quality"), t.selected, t.default].find(T.number), s = !0; if (!i.includes(n)) { const e = ie(i, n); this.debug.warn(`Unsupported quality option: ${n}, using ${e} instead`), n = e, s = !1 } t.selected = n, this.media.quality = n, s && this.storage.set({ quality: n }) } get quality() { return this.media.quality } set loop(e) { const t = T.boolean(e) ? e : this.config.loop.active; this.config.loop.active = t, this.media.loop = t } get loop() { return Boolean(this.media.loop) } set source(e) { Je.change.call(this, e) } get source() { return this.media.currentSrc } get download() { const { download: e } = this.config.urls; return T.url(e) ? e : this.source } set download(e) { T.url(e) && (this.config.urls.download = e, Te.setDownloadUrl.call(this)) } set poster(e) { this.isVideo ? Le.setPoster.call(this, e, !1).catch(() => { }) : this.debug.warn("Poster can only be set for video") } get poster() { return this.isVideo ? this.media.getAttribute("poster") || this.media.getAttribute("data-poster") : null } get ratio() { if (!this.isVideo) return null; const e = ae(re.call(this)); return T.array(e) ? e.join(":") : e } set ratio(e) { this.isVideo ? T.string(e) && oe(e) ? (this.config.ratio = ae(e), le.call(this)) : this.debug.error(`Invalid aspect ratio specified (${e})`) : this.debug.warn("Aspect ratio can only be set for video") } set autoplay(e) { const t = T.boolean(e) ? e : this.config.autoplay; this.config.autoplay = t } get autoplay() { return Boolean(this.config.autoplay) } toggleCaptions(e) { Me.toggle.call(this, e, !1) } set currentTrack(e) { Me.set.call(this, e, !1), Me.setup() } get currentTrack() { const { toggled: e, currentTrack: t } = this.captions; return e ? t : -1 } set language(e) { Me.setLanguage.call(this, e, !1) } get language() { return (Me.getCurrentTrack.call(this) || {}).language } set pip(e) { if (!G.pip) return; const t = T.boolean(e) ? e : !this.pip; T.function(this.media.webkitSetPresentationMode) && this.media.webkitSetPresentationMode(t ? Ee.active : Ee.inactive), T.function(this.media.requestPictureInPicture) && (!this.pip && t ? this.media.requestPictureInPicture() : this.pip && !t && document.exitPictureInPicture()) } get pip() { return G.pip ? T.empty(this.media.webkitPresentationMode) ? this.media === document.pictureInPictureElement : this.media.webkitPresentationMode === Ee.active : null } setPreviewThumbnails(e) { this.previewThumbnails && this.previewThumbnails.loaded && (this.previewThumbnails.destroy(), this.previewThumbnails = null), Object.assign(this.config.previewThumbnails, e), this.config.previewThumbnails.enabled && (this.previewThumbnails = new Ze(this)) } static supported(e, t, i) { return G.check(e, t, i) } static loadSprite(e, t) { return we(e, t) } static setup(e, t = {}) { let i = null; return T.string(e) ? i = Array.from(document.querySelectorAll(e)) : T.nodeList(e) ? i = Array.from(e) : T.array(e) && (i = e.filter(T.element)), T.empty(i) ? null : i.map(e => new et(e, t)) } } var tt; return et.defaults = (tt = De, JSON.parse(JSON.stringify(tt))), et }), function (e) { "use strict"; "function" == typeof define && define.amd ? define(["jquery"], e) : "object" == typeof exports && "function" == typeof require ? e(require("jquery")) : e(jQuery) }(function (e) { "use strict"; var t = { escapeRegExChars: function (e) { return e.replace(/[|\\{}()[\]^$+*?.]/g, "\\$&") }, createNode: function (e) { var t = document.createElement("div"); return t.className = e, t.style.position = "absolute", t.style.display = "none", t } }, i = 27, n = 9, s = 13, o = 38, a = 39, r = 40, l = e.noop; function c(t, i) { this.element = t, this.el = e(t), this.suggestions = [], this.badQueries = [], this.selectedIndex = -1, this.currentValue = this.element.value, this.timeoutId = null, this.cachedResponse = {}, this.onChangeTimeout = null, this.onChange = null, this.isLocal = !1, this.suggestionsContainer = null, this.noSuggestionsContainer = null, this.options = e.extend(!0, {}, c.defaults, i), this.classes = { selected: "autocomplete-selected", suggestion: "autocomplete-suggestion" }, this.hint = null, this.hintValue = "", this.selection = null, this.initialize(), this.setOptions(i) } c.utils = t, e.Autocomplete = c, c.defaults = { ajaxSettings: {}, autoSelectFirst: !1, appendTo: "body", serviceUrl: null, lookup: null, onSelect: null, width: "auto", minChars: 1, maxHeight: 300, deferRequestBy: 0, params: {}, formatResult: function (e, i) { if (!i) return e.value; var n = "(" + t.escapeRegExChars(i) + ")"; return e.value.replace(new RegExp(n, "gi"), "<strong>$1</strong>").replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/&lt;(\/?strong)&gt;/g, "<$1>") }, formatGroup: function (e, t) { return '<div class="autocomplete-group">' + t + "</div>" }, delimiter: null, zIndex: 9999, type: "GET", noCache: !1, onSearchStart: l, onSearchComplete: l, onSearchError: l, preserveInput: !1, containerClass: "autocomplete-suggestions", tabDisabled: !1, dataType: "text", currentRequest: null, triggerSelectOnValidInput: !0, preventBadQueries: !0, lookupFilter: function (e, t, i) { return -1 !== e.value.toLowerCase().indexOf(i) }, paramName: "query", transformResult: function (t) { return "string" == typeof t ? e.parseJSON(t) : t }, showNoSuggestionNotice: !1, noSuggestionNotice: "No results", orientation: "bottom", forceFixPosition: !1 }, c.prototype = { initialize: function () { var t, i = this, n = "." + i.classes.suggestion, s = i.classes.selected, o = i.options; i.element.setAttribute("autocomplete", "off"), i.noSuggestionsContainer = e('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0), i.suggestionsContainer = c.utils.createNode(o.containerClass), (t = e(i.suggestionsContainer)).appendTo(o.appendTo || "body"), "auto" !== o.width && t.css("width", o.width), t.on("mouseover.autocomplete", n, function () { i.activate(e(this).data("index")) }), t.on("mouseout.autocomplete", function () { i.selectedIndex = -1, t.children("." + s).removeClass(s) }), t.on("click.autocomplete", n, function () { i.select(e(this).data("index")) }), t.on("click.autocomplete", function () { clearTimeout(i.blurTimeoutId) }), i.fixPositionCapture = function () { i.visible && i.fixPosition() }, e(window).on("resize.autocomplete", i.fixPositionCapture), i.el.on("keydown.autocomplete", function (e) { i.onKeyPress(e) }), i.el.on("keyup.autocomplete", function (e) { i.onKeyUp(e) }), i.el.on("blur.autocomplete", function () { i.onBlur() }), i.el.on("focus.autocomplete", function () { i.onFocus() }), i.el.on("change.autocomplete", function (e) { i.onKeyUp(e) }), i.el.on("input.autocomplete", function (e) { i.onKeyUp(e) }) }, onFocus: function () { this.disabled || (this.fixPosition(), this.el.val().length >= this.options.minChars && this.onValueChange()) }, onBlur: function () { var t = this, i = t.options, n = t.el.val(), s = t.getQuery(n); t.blurTimeoutId = setTimeout(function () { t.hide(), t.selection && t.currentValue !== s && (i.onInvalidateSelection || e.noop).call(t.element) }, 200) }, abortAjax: function () { this.currentRequest && (this.currentRequest.abort(), this.currentRequest = null) }, setOptions: function (t) { var i = e.extend({}, this.options, t); this.isLocal = Array.isArray(i.lookup), this.isLocal && (i.lookup = this.verifySuggestionsFormat(i.lookup)), i.orientation = this.validateOrientation(i.orientation, "bottom"), e(this.suggestionsContainer).css({ "max-height": i.maxHeight + "px", width: i.width + "px", "z-index": i.zIndex }), this.options = i }, clearCache: function () { this.cachedResponse = {}, this.badQueries = [] }, clear: function () { this.clearCache(), this.currentValue = "", this.suggestions = [] }, disable: function () { this.disabled = !0, clearTimeout(this.onChangeTimeout), this.abortAjax() }, enable: function () { this.disabled = !1 }, fixPosition: function () { var t = e(this.suggestionsContainer), i = t.parent().get(0); if (i === document.body || this.options.forceFixPosition) { var n = this.options.orientation, s = t.outerHeight(), o = this.el.outerHeight(), a = this.el.offset(), r = { top: a.top, left: a.left }; if ("auto" === n) { var l = e(window).height(), c = e(window).scrollTop(), d = -c + a.top - s, h = c + l - (a.top + o + s); n = Math.max(d, h) === d ? "top" : "bottom" } if (r.top += "top" === n ? -s : o, i !== document.body) { var u, p = t.css("opacity"); this.visible || t.css("opacity", 0).show(), u = t.offsetParent().offset(), r.top -= u.top, r.top += i.scrollTop, r.left -= u.left, this.visible || t.css("opacity", p).hide() } "auto" === this.options.width && (r.width = this.el.outerWidth() + "px"), t.css(r) } }, isCursorAtEnd: function () { var e, t = this.el.val().length, i = this.element.selectionStart; return "number" == typeof i ? i === t : !document.selection || ((e = document.selection.createRange()).moveStart("character", -t), t === e.text.length) }, onKeyPress: function (e) { if (this.disabled || this.visible || e.which !== r || !this.currentValue) { if (!this.disabled && this.visible) { switch (e.which) { case i: this.el.val(this.currentValue), this.hide(); break; case a: if (this.hint && this.options.onHint && this.isCursorAtEnd()) { this.selectHint(); break } return; case n: if (this.hint && this.options.onHint) return void this.selectHint(); if (-1 === this.selectedIndex) return void this.hide(); if (this.select(this.selectedIndex), !1 === this.options.tabDisabled) return; break; case s: if (-1 === this.selectedIndex) return void this.hide(); this.select(this.selectedIndex); break; case o: this.moveUp(); break; case r: this.moveDown(); break; default: return }e.stopImmediatePropagation(), e.preventDefault() } } else this.suggest() }, onKeyUp: function (e) { var t = this; if (!t.disabled) { switch (e.which) { case o: case r: return }clearTimeout(t.onChangeTimeout), t.currentValue !== t.el.val() && (t.findBestHint(), t.options.deferRequestBy > 0 ? t.onChangeTimeout = setTimeout(function () { t.onValueChange() }, t.options.deferRequestBy) : t.onValueChange()) } }, onValueChange: function () { if (this.ignoreValueChange) this.ignoreValueChange = !1; else { var t = this.options, i = this.el.val(), n = this.getQuery(i); this.selection && this.currentValue !== n && (this.selection = null, (t.onInvalidateSelection || e.noop).call(this.element)), clearTimeout(this.onChangeTimeout), this.currentValue = i, this.selectedIndex = -1, t.triggerSelectOnValidInput && this.isExactMatch(n) ? this.select(0) : n.length < t.minChars ? this.hide() : this.getSuggestions(n) } }, isExactMatch: function (e) { var t = this.suggestions; return 1 === t.length && t[0].value.toLowerCase() === e.toLowerCase() }, getQuery: function (t) { var i, n = this.options.delimiter; return n ? (i = t.split(n), e.trim(i[i.length - 1])) : t }, getSuggestionsLocal: function (t) { var i, n = this.options, s = t.toLowerCase(), o = n.lookupFilter, a = parseInt(n.lookupLimit, 10); return i = { suggestions: e.grep(n.lookup, function (e) { return o(e, t, s) }) }, a && i.suggestions.length > a && (i.suggestions = i.suggestions.slice(0, a)), i }, getSuggestions: function (t) { var i, n, s, o, a = this, r = a.options, l = r.serviceUrl; r.params[r.paramName] = t, !1 !== r.onSearchStart.call(a.element, r.params) && (n = r.ignoreParams ? null : r.params, e.isFunction(r.lookup) ? r.lookup(t, function (e) { a.suggestions = e.suggestions, a.suggest(), r.onSearchComplete.call(a.element, t, e.suggestions) }) : (a.isLocal ? i = a.getSuggestionsLocal(t) : (e.isFunction(l) && (l = l.call(a.element, t)), s = l + "?" + e.param(n || {}), i = a.cachedResponse[s]), i && Array.isArray(i.suggestions) ? (a.suggestions = i.suggestions, a.suggest(), r.onSearchComplete.call(a.element, t, i.suggestions)) : a.isBadQuery(t) ? r.onSearchComplete.call(a.element, t, []) : (a.abortAjax(), o = { url: l, data: n, type: r.type, dataType: r.dataType }, e.extend(o, r.ajaxSettings), a.currentRequest = e.ajax(o).done(function (e) { var i; a.currentRequest = null, i = r.transformResult(e, t), a.processResponse(i, t, s), r.onSearchComplete.call(a.element, t, i.suggestions) }).fail(function (e, i, n) { r.onSearchError.call(a.element, t, e, i, n) })))) }, isBadQuery: function (e) { if (!this.options.preventBadQueries) return !1; for (var t = this.badQueries, i = t.length; i--;)if (0 === e.indexOf(t[i])) return !0; return !1 }, hide: function () { var t = e(this.suggestionsContainer); e.isFunction(this.options.onHide) && this.visible && this.options.onHide.call(this.element, t), this.visible = !1, this.selectedIndex = -1, clearTimeout(this.onChangeTimeout), e(this.suggestionsContainer).hide(), this.signalHint(null) }, suggest: function () { if (this.suggestions.length) { var t, i = this.options, n = i.groupBy, s = i.formatResult, o = this.getQuery(this.currentValue), a = this.classes.suggestion, r = this.classes.selected, l = e(this.suggestionsContainer), c = e(this.noSuggestionsContainer), d = i.beforeRender, h = ""; i.triggerSelectOnValidInput && this.isExactMatch(o) ? this.select(0) : (e.each(this.suggestions, function (e, r) { n && (h += function (e, s) { var o = e.data[n]; return t === o ? "" : (t = o, i.formatGroup(e, t)) }(r, 0)), h += '<div class="' + a + '" data-index="' + e + '">' + s(r, o, e) + "</div>" }), this.adjustContainerWidth(), c.detach(), l.html(h), e.isFunction(d) && d.call(this.element, l, this.suggestions), this.fixPosition(), l.show(), i.autoSelectFirst && (this.selectedIndex = 0, l.scrollTop(0), l.children("." + a).first().addClass(r)), this.visible = !0, this.findBestHint()) } else this.options.showNoSuggestionNotice ? this.noSuggestions() : this.hide() }, noSuggestions: function () { var t = this.options.beforeRender, i = e(this.suggestionsContainer), n = e(this.noSuggestionsContainer); this.adjustContainerWidth(), n.detach(), i.empty(), i.append(n), e.isFunction(t) && t.call(this.element, i, this.suggestions), this.fixPosition(), i.show(), this.visible = !0 }, adjustContainerWidth: function () { var t, i = this.options, n = e(this.suggestionsContainer); "auto" === i.width ? (t = this.el.outerWidth(), n.css("width", t > 0 ? t : 300)) : "flex" === i.width && n.css("width", "") }, findBestHint: function () { var t = this.el.val().toLowerCase(), i = null; t && (e.each(this.suggestions, function (e, n) { var s = 0 === n.value.toLowerCase().indexOf(t); return s && (i = n), !s }), this.signalHint(i)) }, signalHint: function (t) { var i = ""; t && (i = this.currentValue + t.value.substr(this.currentValue.length)), this.hintValue !== i && (this.hintValue = i, this.hint = t, (this.options.onHint || e.noop)(i)) }, verifySuggestionsFormat: function (t) { return t.length && "string" == typeof t[0] ? e.map(t, function (e) { return { value: e, data: null } }) : t }, validateOrientation: function (t, i) { return t = e.trim(t || "").toLowerCase(), -1 === e.inArray(t, ["auto", "bottom", "top"]) && (t = i), t }, processResponse: function (e, t, i) { var n = this.options; e.suggestions = this.verifySuggestionsFormat(e.suggestions), n.noCache || (this.cachedResponse[i] = e, n.preventBadQueries && !e.suggestions.length && this.badQueries.push(t)), t === this.getQuery(this.currentValue) && (this.suggestions = e.suggestions, this.suggest()) }, activate: function (t) { var i, n = this.classes.selected, s = e(this.suggestionsContainer), o = s.find("." + this.classes.suggestion); return s.find("." + n).removeClass(n), this.selectedIndex = t, -1 !== this.selectedIndex && o.length > this.selectedIndex ? (i = o.get(this.selectedIndex), e(i).addClass(n), i) : null }, selectHint: function () { var t = e.inArray(this.hint, this.suggestions); this.select(t) }, select: function (e) { this.hide(), this.onSelect(e) }, moveUp: function () { if (-1 !== this.selectedIndex) return 0 === this.selectedIndex ? (e(this.suggestionsContainer).children("." + this.classes.suggestion).first().removeClass(this.classes.selected), this.selectedIndex = -1, this.ignoreValueChange = !1, this.el.val(this.currentValue), void this.findBestHint()) : void this.adjustScroll(this.selectedIndex - 1) }, moveDown: function () { this.selectedIndex !== this.suggestions.length - 1 && this.adjustScroll(this.selectedIndex + 1) }, adjustScroll: function (t) { var i = this.activate(t); if (i) { var n, s, o, a = e(i).outerHeight(); n = i.offsetTop, o = (s = e(this.suggestionsContainer).scrollTop()) + this.options.maxHeight - a, n < s ? e(this.suggestionsContainer).scrollTop(n) : n > o && e(this.suggestionsContainer).scrollTop(n - this.options.maxHeight + a), this.options.preserveInput || (this.ignoreValueChange = !0, this.el.val(this.getValue(this.suggestions[t].value))), this.signalHint(null) } }, onSelect: function (t) { var i = this.options.onSelect, n = this.suggestions[t]; this.currentValue = this.getValue(n.value), this.currentValue === this.el.val() || this.options.preserveInput || this.el.val(this.currentValue), this.signalHint(null), this.suggestions = [], this.selection = n, e.isFunction(i) && i.call(this.element, n) }, getValue: function (e) { var t, i, n = this.options.delimiter; return n ? 1 === (i = (t = this.currentValue).split(n)).length ? e : t.substr(0, t.length - i[i.length - 1].length) + e : e }, dispose: function () { this.el.off(".autocomplete").removeData("autocomplete"), e(window).off("resize.autocomplete", this.fixPositionCapture), e(this.suggestionsContainer).remove() } }, e.fn.devbridgeAutocomplete = function (t, i) { return arguments.length ? this.each(function () { var n = e(this), s = n.data("autocomplete"); "string" == typeof t ? s && "function" == typeof s[t] && s[t](i) : (s && s.dispose && s.dispose(), s = new c(this, t), n.data("autocomplete", s)) }) : this.first().data("autocomplete") }, e.fn.autocomplete || (e.fn.autocomplete = e.fn.devbridgeAutocomplete) }); var Base64 = { _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", encode: function (e) { var t, i, n, s, o, a, r, l = "", c = 0; for (e = Base64._utf8_encode(e); c < e.length;)s = (t = e.charCodeAt(c++)) >> 2, o = (3 & t) << 4 | (i = e.charCodeAt(c++)) >> 4, a = (15 & i) << 2 | (n = e.charCodeAt(c++)) >> 6, r = 63 & n, isNaN(i) ? a = r = 64 : isNaN(n) && (r = 64), l = l + this._keyStr.charAt(s) + this._keyStr.charAt(o) + this._keyStr.charAt(a) + this._keyStr.charAt(r); return l }, decode: function (e) { var t, i, n, s, o, a, r = "", l = 0; for (e = e.replace(/[^A-Za-z0-9\+\/\=]/g, ""); l < e.length;)t = this._keyStr.indexOf(e.charAt(l++)) << 2 | (s = this._keyStr.indexOf(e.charAt(l++))) >> 4, i = (15 & s) << 4 | (o = this._keyStr.indexOf(e.charAt(l++))) >> 2, n = (3 & o) << 6 | (a = this._keyStr.indexOf(e.charAt(l++))), r += String.fromCharCode(t), 64 != o && (r += String.fromCharCode(i)), 64 != a && (r += String.fromCharCode(n)); return r = Base64._utf8_decode(r) }, _utf8_encode: function (e) { e = e.replace(/\r\n/g, "\n"); for (var t = "", i = 0; i < e.length; i++) { var n = e.charCodeAt(i); n < 128 ? t += String.fromCharCode(n) : n > 127 && n < 2048 ? (t += String.fromCharCode(n >> 6 | 192), t += String.fromCharCode(63 & n | 128)) : (t += String.fromCharCode(n >> 12 | 224), t += String.fromCharCode(n >> 6 & 63 | 128), t += String.fromCharCode(63 & n | 128)) } return t }, _utf8_decode: function (e) { for (var t = "", i = 0, n = c1 = c2 = 0; i < e.length;)(n = e.charCodeAt(i)) < 128 ? (t += String.fromCharCode(n), i++) : n > 191 && n < 224 ? (c2 = e.charCodeAt(i + 1), t += String.fromCharCode((31 & n) << 6 | 63 & c2), i += 2) : (c2 = e.charCodeAt(i + 1), c3 = e.charCodeAt(i + 2), t += String.fromCharCode((15 & n) << 12 | (63 & c2) << 6 | 63 & c3), i += 3); return t } }; function getSelectize(e) { var t = e.selectize(); if (t && t.length) return t[0].selectize } function updateTagsInputCounter(e) { var t = getSelectize(e); void 0 !== t && e.data("count", t.items.length) } function clearInputTags(e, t) { var i = getSelectize(e); void 0 !== i && i.clear(t) } function clearInputOptions(e, t) { var i = getSelectize(e); void 0 !== i && (i.clearOptions(t), i.clear(t)) } function clearCheckbox(e) { e.removeAttr("checked") } function removeTagFromInput(e, t, i) { var n = getSelectize(e); void 0 !== n && n.removeItem(t, i) } function addTagToInput(e, t, i) { var n = getSelectize(e); void 0 !== n && n.addItem(t, i) } function addTagsToInput(e, t, i) { if (t.length) for (; t.length;)addTagToInput(e, t.pop(), i) } function addOptionsToInput(e, t) { if (t.length) { var i = getSelectize(e); void 0 !== i && i.addOption(t) } } function selectizeRenderItem(e, t) { return '<span class="selected-item">' + (e.text ? t(e.text) : "") + "</span>" } Selectize.define("placeholder_option", function (e) { var t, i = this; e = $.extend({ placeholder: i.settings.placeholder, html: function (e) { return '<div data-selectable class="option placeholder-option" data-value="">' + e.placeholder + "</div>" } }, e), i.setup = (t = i.setup, function () { t.apply(this, arguments), i.$placeholder_container = $(e.html(e)), i.$dropdown.prepend(i.$placeholder_container) }), i.onOptionSelect = function () { var e = i.onOptionSelect; return function (t) { var i, n; i = (n = $(t.currentTarget)).attr("data-value"), this.getOption(i), n.hasClass("placeholder-option") ? (this.clear(), this.close()) : e.apply(this, arguments) } }() }), Selectize.define("selectize_size", function (e) { var t, i = this; i.setup = (t = i.setup, function () { t.apply(i, arguments); var e = i.$input.data("size"); e && i.$wrapper.addClass("selectize_" + e) }) }), Selectize.define("readOnly", function () { var e, t = this; t.setup = (e = t.setup, function () { e.apply(t, arguments), t.$input.is("[readonly]") && (t.$control_input.prop("readonly", !0), t.$control.off(), t.$control.css("background-color", "#eeeeee"), t.$control.find(".remove-single").remove(), t.$control.find(".remove").remove()) }) }); var dropZones = [], dropZoneFiles = []; function newDropZoneConfig(e, t, i) { return $.extend(t, { dictDefaultMessage: null != e.errorMessages && null != e.errorMessages.dictDefaultMessage ? e.errorMessages.dictDefaultMessage : Mostaql.lang.dropzone.dictDefaultMessage, dictFallbackMessage: null != e.errorMessages && null != e.errorMessages.dictFallbackMessage ? e.errorMessages.dictFallbackMessage : Mostaql.lang.dropzone.dictFallbackMessage, dictFallbackText: null != e.errorMessages && null != e.errorMessages.dictFallbackText ? e.errorMessages.dictFallbackText : Mostaql.lang.dropzone.dictFallbackText, dictFileTooBig: null != e.errorMessages && null != e.errorMessages.dictFileTooBig ? e.errorMessages.dictFileTooBig : Mostaql.lang.dropzone.dictFileTooBig, dictInvalidFileType: null != e.errorMessages && null != e.errorMessages.dictInvalidFileType ? e.errorMessages.dictInvalidFileType : Mostaql.lang.dropzone.dictInvalidFileType, dictResponseError: null != e.errorMessages && null != e.errorMessages.dictResponseError ? e.errorMessages.dictResponseError : Mostaql.lang.dropzone.dictResponseError, dictCancelUpload: null != e.errorMessages && null != e.errorMessages.dictCancelUpload ? e.errorMessages.dictCancelUpload : Mostaql.lang.dropzone.dictCancelUpload, dictCancelUploadConfirmation: null != e.errorMessages && null != e.errorMessages.dictCancelUploadConfirmation ? e.errorMessages.dictCancelUploadConfirmation : Mostaql.lang.dropzone.dictCancelUploadConfirmation, dictRemoveFile: null != e.errorMessages && null != e.errorMessages.dictRemoveFile ? e.errorMessages.dictRemoveFile : Mostaql.lang.dropzone.dictRemoveFile, dictRemoveFileConfirmation: null != e.errorMessages && null != e.errorMessages.dictRemoveFileConfirmation ? e.errorMessages.dictRemoveFileConfirmation : Mostaql.lang.dropzone.dictRemoveFileConfirmation, dictMaxFilesExceeded: null != e.errorMessages && null != e.errorMessages.dictMaxFilesExceeded ? e.errorMessages.dictMaxFilesExceeded : Mostaql.lang.dropzone.dictMaxFilesExceeded, paramName: e.paramName, url: e.url, maxFiles: e.maxFiles, maxAllowedFiles: e.maxFiles, addRemoveLinks: !0, autoProcessQueue: !0, init: i, resize: function (e) { var t = { srcX: 0, srcY: 0, srcWidth: e.width, srcHeight: e.height }, i = e.width / e.height; return e.height > this.options.thumbnailHeight || e.width > this.options.thumbnailWidth ? (t.trgHeight = this.options.thumbnailHeight, t.trgWidth = t.trgHeight * i, t.trgWidth > this.options.thumbnailWidth && (t.trgWidth = this.options.thumbnailWidth, t.trgHeight = t.trgWidth / i)) : (t.trgHeight = e.height, t.trgWidth = e.width), t }, sending: function (t, i, n) { n.append(e.token_name, e.token_value), n.append("filesize", t.size) } }) } function initDropZone(e) { var t = function () { var t = $(e.globalInput), i = t.closest('[data-up-completed="multiple"]'), n = $('[data-type="uploads"]'); dropZones.global = this, this.on("success", function (e, i) { e.fullName = i.name, dropZoneFiles.push(e.fullName), t.val(dropZoneFiles.join("/")) }), this.on("addedfile", function (e) { var t = n.length ? n.data("files-count") : 0; this.options.maxFiles = this.options.maxAllowedFiles - t, i.val(null) }), this.on("removedfile", function (e) { dropZoneFiles = $.grep(dropZoneFiles, function (t) { return t != e.fullName }), t.val(dropZoneFiles.join("/")) }), this.on("queuecomplete", function (e) { }), this.on("drop", function (e) { }), this.on("maxfilesexceeded", function (e) { this.removeFile(e), addFlashMessage(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}", this.options.maxFiles), "warning", 1e4) }), this.on("complete", function (e) { i.val("true"), i.parent().find("[data-error]").remove() }), this.on("error", function (e, t, i) { i && i.status && (t = 422 == i.status ? Lang.get("error.dropzone_invalid_type") : (t = Lang.get("error.dropzone_upload_failed")) + " - " + i.status), e.previewElement.classList.add("dz-error"), $(e.previewElement).find(".dz-error-message").text(t) }) }; $('[data-ui="dropzone"]').each(function () { e.globalInput = "input[name=" + $(this).data("input-name") + "]", $(this).dropzone(newDropZoneConfig(e, e.listOptions, t)) }), $('[data-ui="dropzoneThumb"]').dropzone(newDropZoneConfig(e, e.thumbOptions, function () { dropZones.thumb = this; var t = $(e.thumbInput), i = $('[data-up-completed="thumb"]'); this.on("success", function (e, i) { t.val(i.name) }), this.on("addedfile", function (e) { void 0 !== this.files[1] && this.removeFile(this.files[0]), i.val(null) }), this.on("removedfile", function (e) { t.val("") }), this.on("complete", function (e) { i.val("true"), i.parent().find("[data-error]").remove() }), this.on("error", function (e, t, i) { i && i.status && (t = 422 == i.status ? Lang.get("error.dropzone_invalid_type") : (t = Lang.get("error.dropzone_upload_failed")) + " - " + i.status), e.previewElement.classList.add("dz-error"), $(e.previewElement).find(".dz-error-message").text(t) }) })) } !function (e, t, i) { var n = { messages: { required: " ", required_without_space: " ", required_if_not: " ", matches: ' "%s"    "%p"', default: "   ", valid_email: "   ", valid_emails: "       ", min_length: "      %p ", max_length: "      %p ", exact_length: "     %p ", greater_than: "      %p", equal_or_greater_than: "     %p", less_than: "      %p", equal_or_less_than: "     %p", alpha: "    ", alpha_space: "    ", alpha_arabic: "   ", alpha_arabic_space: "   ", alpha_numeric: "     ", alpha_dash: "      (-) ", alpha_underscore_alpha: "       (_)  ", numeric: "   ", integer: "    ", decimal: "    ", is_natural: "     ", is_natural_no_zero: "      ", valid_ip: "  IP  ", valid_base64: "     base64 ", valid_credit_card: "    ", is_file_type: "    %p ", valid_url: "  ", video_url: "  ", picalica_url: "  " }, callback: function (e) { } }, s = /^(.+?)\[(.+)\]$/, o = /^[0-9]+$/, a = /^\-?[0-9]+$/, r = /^\-?[0-9]*\.?[0-9]+$/, l = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/, c = /^[a-z]+$/i, d = /([a-zA-Z]+\s)*[a-zA-Z]+$/i, h = /^[a-z-\u0600-\u06FF]+$/i, u = /^[a-zA-Z\u0600-\u06FF]+[a-zA-Z\u0600-\u06FF\s]*$/i, p = /^[a-z0-9]+$/i, f = /^[a-z0-9_\-]+$/i, m = /^[a-z0-9][a-z0-9_]*[a-z0-9]$/i, g = /^[0-9]+$/i, v = /^[1-9][0-9]*$/i, b = /^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/i, y = /[^a-zA-Z0-9\/\+=]/i, w = /^[\d\-\s]+$/, _ = /^((http|https):\/\/(\w+:{0,1}\w*@)?(\S+)|)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/, C = /(?:https?:\/\/(?:www\.)?)?picalica.com\/u\/[a-zA-Z0-9-_]+$/i, k = /(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/, x = function (e, t, i) { this.callback = i || n.callback, this.errors = [], this.fields = {}, this.form = this._formByNameOrNode(e) || {}, this.messages = {}, this.handlers = {}, this.conditionals = {}; for (var s = 0, o = t.length; s < o; s++) { var a = t[s]; if ((a.name || a.names) && a.rules) if (a.names) for (var r = 0, l = a.names.length; r < l; r++)this._addField(a, a.names[r]); else this._addField(a, a.name) } var c, d = this.form.onsubmit; this.form.onsubmit = (c = this, function (e) { try { return c._validateForm(e) && (void 0 === d || d()) } catch (e) { } }) }, T = function (e, t) { var i; if (!(e.length > 0) || "radio" !== e[0].type && "checkbox" !== e[0].type) return e[t]; for (i = 0, elementLength = e.length; i < elementLength; i++)if (e[i].checked) return e[i][t] }; x.prototype.setMessage = function (e, t) { return this.messages[e] = t, this }, x.prototype.registerCallback = function (e, t) { return e && "string" == typeof e && t && "function" == typeof t && (this.handlers[e] = t), this }, x.prototype.registerConditional = function (e, t) { return e && "string" == typeof e && t && "function" == typeof t && (this.conditionals[e] = t), this }, x.prototype._formByNameOrNode = function (e) { return "object" == typeof e ? e : t.forms[e] }, x.prototype._addField = function (e, t) { this.fields[t] = { name: t, display: e.display || t, rules: e.rules, depends: e.depends, id: null, element: null, type: null, value: null, checked: null } }, x.prototype._validateForm = function (e) { for (var t in this.errors = [], this.fields) if (this.fields.hasOwnProperty(t)) { var i = this.fields[t] || {}, n = this.form[i.name]; n && void 0 !== n && (i.id = T(n, "id"), i.element = n, i.type = n.length > 0 ? n[0].type : n.type, i.value = T(n, "value"), i.checked = T(n, "checked"), i.depends && "function" == typeof i.depends ? i.depends.call(this, i) && this._validateField(i) : i.depends && "string" == typeof i.depends && this.conditionals[i.depends] ? this.conditionals[i.depends].call(this, i) && this._validateField(i) : this._validateField(i)) } return "function" == typeof this.callback && this.callback(this.errors, e), this.errors.length > 0 && (e && e.preventDefault ? e.preventDefault() : event && (event.returnValue = !1)), !0 }, x.prototype._validateField = function (e, t) { for (var i = e.rules.split("|"), o = e.rules.indexOf("required"), a = !e.value || "" === e.value || void 0 === e.value, r = 0, l = i.length; r < l; r++) { var c = i[r], d = null, h = !1, u = s.exec(c); if ((-1 !== o || -1 !== c.indexOf("!callback_") || !a) && (u && (c = u[1], d = u[2]), "!" === c.charAt(0) && (c = c.substring(1, c.length)), "function" == typeof this._hooks[c] ? this._hooks[c].apply(this, [e, d]) || (h = !0) : "callback_" === c.substring(0, 9) && (c = c.substring(9, c.length), "function" == typeof this.handlers[c] && !1 === this.handlers[c].apply(this, [e.value, d, e]) && (h = !0)), h)) { var p = this.messages[e.name + "." + c] || this.messages[c] || n.messages[c], f = "An error has occurred with the " + e.display + " field."; p && (f = p.replace("%s", e.display), d && (f = f.replace("%p", this.fields[d] ? this.fields[d].display : d))); var m = { id: e.id, element: e.element, name: e.name, message: f, rule: c }; if (t) return m; this.errors.push(m); break } } }, x.prototype.validateField = function (e) { var t = !1; for (var i in this.fields) if (this.fields[i].name == e) { t = this.fields[i]; break } if (t) { var n = this.form[t.name]; if (n && void 0 !== n) if (t.id = T(n, "id"), t.element = n, t.type = n.length > 0 ? n[0].type : n.type, t.value = T(n, "value"), t.checked = T(n, "checked"), t.depends && "function" == typeof t.depends) { if (t.depends.call(this, t)) return this._validateField(t, !0) } else { if (!t.depends || "string" != typeof t.depends || !this.conditionals[t.depends]) return this._validateField(t, !0); if (this.conditionals[t.depends].call(this, t)) return this._validateField(t, !0) } return !1 } }, x.prototype._hooks = { required: function (e) { var t = e.value; return "checkbox" === e.type || "radio" === e.type ? !0 === e.checked : null !== t && "" !== t }, required_without_space: function (e) { var t = e.value; return null != t && "" !== t.trim() }, required_if_not: function (e, t) { var i = e.value, n = $("#" + t).val(); return "checkbox" === t.type || "radio" === t.type ? !0 === e.checked : !!n || ("checkbox" === e.type || "radio" === e.type ? !0 === e.checked : null !== i && "" !== i) }, default: function (e, t) { return e.value !== t }, matches: function (e, t) { var i = this.form[t]; return !!i && e.value === i.value }, valid_email: function (e) { return l.test(e.value) }, valid_emails: function (e) { for (var t = e.value.split(","), i = 0, n = t.length; i < n; i++)if (!l.test(t[i])) return !1; return !0 }, min_length: function (e, t) { return !!o.test(t) && e.value.length >= parseInt(t, 10) }, max_length: function (e, t) { return !!o.test(t) && e.value.length <= parseInt(t, 10) }, exact_length: function (e, t) { return !!o.test(t) && e.value.length === parseInt(t, 10) }, greater_than: function (e, t) { return !!r.test(e.value) && parseFloat(e.value) > parseFloat(t) }, less_than: function (e, t) { return !!r.test(e.value) && parseFloat(e.value) < parseFloat(t) }, equal_or_greater_than: function (e, t) { return !!r.test(e.value) && parseFloat(e.value) >= parseFloat(t) }, equal_or_less_than: function (e, t) { return !!r.test(e.value) && parseFloat(e.value) <= parseFloat(t) }, alpha: function (e) { return c.test(e.value) }, alpha_space: function (e) { return d.test(e.value) }, alpha_arabic: function (e) { return h.test(e.value) }, alpha_arabic_space: function (e) { return u.test(e.value) }, alpha_numeric: function (e) { return p.test(e.value) }, alpha_dash: function (e) { return f.test(e.value) }, alpha_underscore_alpha: function (e) { return m.test(e.value) }, numeric: function (e) { return o.test(e.value) }, integer: function (e) { return a.test(e.value) }, decimal: function (e) { return r.test(e.value) }, is_natural: function (e) { return g.test(e.value) }, is_natural_no_zero: function (e) { return v.test(e.value) }, valid_ip: function (e) { return b.test(e.value) }, valid_base64: function (e) { return y.test(e.value) }, valid_url: function (e) { return _.test(e.value) }, video_url: function (e) { return k.test(e.value) }, picalica_url: function (e) { return C.test(e.value) }, clean_text: function (e) { return cleanInputValue(e), !0 }, valid_credit_card: function (e) { if (!w.test(e.value)) return !1; for (var t = 0, i = 0, n = !1, s = e.value.replace(/\D/g, ""), o = s.length - 1; o >= 0; o--) { var a = s.charAt(o); i = parseInt(a, 10), n && (i *= 2) > 9 && (i -= 9), t += i, n = !n } return t % 10 == 0 }, is_file_type: function (e, t) { if ("file" !== e.type) return !0; for (var i = e.value.substr(e.value.lastIndexOf(".") + 1), n = t.split(","), s = !1, o = 0, a = n.length; o < a; o++)i == n[o] && (s = !0); return s } }, e.FormValidator = x }(window, document); var formValidators = []; function hookBidFormValidation(e) { hookFormValidation("project__bid", addBidValidationRules, e).registerCallback("prevent_urls", function (e) { return preventUrlsValidator(e) }).setMessage("prevent_urls", "      .               .").registerCallback("cost_equal_or_greater_than", function (e) { return parseInt(e) >= parseInt(costValidationMinValue) }).setMessage("cost_equal_or_greater_than", costEqualOrGreaterThanErrorMessage) } function hookProjectFormValidation(e) { formValidators[name] = new FormValidator(e, createProjectValidationRules, function (e, t) { showFormValidationErrors($(t.target), e), e.length || ($("button[name=project__submit]").attr("disabled", "disabled"), $(document.activeElement).append(' <i class="fa fa-cog fa-spin"></i>')) }) } function hookFormValidation(e, t, i) { void 0 !== i || (i = e), formValidators[e] = new FormValidator(i, t, function (e, t) { showFormValidationErrors($(t.target), e) }); var n = $(formValidators[e].form); return n.length && (n.attr("novalidate", !0), n.data("validationHooked", "true")), formValidators[e] } function preventUrlsValidator(e) { return !new RegExp(["(", '\\s|[^a-zA-Z0-9.\\+_\\/"\\>\\-]|^', ")(?:", "(", "[a-zA-Z0-9\\+_\\-]+", "(?:", "\\.[a-zA-Z0-9\\+_\\-]+", ")*@", ")?(", "http:\\/\\/|https:\\/\\/|ftp:\\/\\/", ")?(", "(?:(?:[a-z0-9][a-z0-9_%\\-_+]*\\.)+)", ")(", "(?:com|ca|co|edu|gov|net|org|dev|biz|cat|int|pro|tel|mil|aero|asia|coop|info|jobs|mobi|museum|name|post|travel|local|[a-z]{2})", ")(", "(?::\\d{1,5})", ")?(", "(?:", "[\\/|\\?]", "(?:", "[\\-a-zA-Z0-9_%#*&+=~!?,;:.\\/]*", ")*", ")", "[\\-\\/a-zA-Z0-9_%#*&+=~]", "|", "\\/?", ")?", ")(", '[^a-zA-Z0-9\\+_\\/"\\<\\-]|$', ")"].join(""), "g").exec(e) } function showFormValidationErrors(e, t) { if (t.length > 0) { for (key in e.find(".form-group").removeClass("has-success").removeClass("has-error"), e.find("[data-error]").remove(), t) { var i = e.find('[name="' + t[key].name + '"]').parents(".form-group"); i.addClass("has-error"), i.append('<p class="help-block text-zeta clr-red" data-error="' + t[key].name + '"><label for="' + t[key].id + '">' + t[key].message + "</label></p>") } e.attr("data-validated", "false"), 1 != e.data("disableValidationWarning") && addFlashMessage(Mostaql.lang.validationErrorMessage, "danger", 1e4), triggerModalAjaxStop() } else e.find(".help-block[data-error]").remove(), e.attr("data-validated", "true") } function initFormValidation() { "undefined" != typeof addPortfolioValidationRules && hookFormValidation("portfolio_form", addPortfolioValidationRules), "undefined" != typeof createProjectValidationRules && hookProjectFormValidation("project__create", createProjectValidationRules), "undefined" != typeof editProjectValidationRules && hookFormValidation("project__edit", editProjectValidationRules), "undefined" != typeof addBidValidationRules && (injectBidAnswersValidation(), hookBidFormValidation()), "undefined" != typeof addReviewValidationRules && hookFormValidation("deal__review", addReviewValidationRules), "undefined" != typeof addFeedbackValidationRules && hookFormValidation("deal__feedback", addFeedbackValidationRules), "undefined" != typeof addDiscussionValidationRules && hookFormValidation("project__discussion", addDiscussionValidationRules), "undefined" != typeof addNoteValidationRules && hookFormValidation("note__form", addNoteValidationRules), "undefined" != typeof signUpValidationRules && hookFormValidation("signup-form", signUpValidationRules), "undefined" != typeof signInValidationRules && hookFormValidation("signin-form", signInValidationRules), "undefined" != typeof resetAccountValidationRules && hookFormValidation("reset-form", resetAccountValidationRules), "undefined" != typeof resendAccountValidationRules && hookFormValidation("resend-form", resendAccountValidationRules), "undefined" != typeof newPasswordValidationRules && hookFormValidation("new-password-form", newPasswordValidationRules), "undefined" != typeof createMessageValidationRules && hookFormValidation("message__compose", createMessageValidationRules), "undefined" != typeof replyMessageValidationRules && hookFormValidation("message__reply", replyMessageValidationRules), "undefined" != typeof editProfileValidationRules && hookFormValidation("profile_form", editProfileValidationRules).registerCallback("prevent_urls", function (e) { return preventUrlsValidator(e) }).setMessage("prevent_urls", "       .               .").registerCallback("required_for_freelancer", function (e) { var t = $.trim(e); return $('[data-account-type="freelancer"]:checked').length < 1 || null !== t && "" !== t && void 0 !== t }).setMessage("required_for_freelancer", '" "   '), "undefined" != typeof mobileConfirmValidationRules && hookFormValidation("mobile-confirm-form", mobileConfirmValidationRules), "undefined" != typeof mobileResendValidationRules && hookFormValidation("mobile-resend-form", mobileResendValidationRules), "undefined" != typeof mobileOptCallValidationRules && hookFormValidation("mobile-otp-call-form", mobileOptCallValidationRules), "undefined" != typeof mobileOptConfirmValidationRules && hookFormValidation("mobile-otp-confirm-form", mobileOptConfirmValidationRules), "undefined" != typeof editEmailValidationRules && hookFormValidation("email-form", editEmailValidationRules), "undefined" != typeof editPasswordValidationRules && hookFormValidation("password-form", editPasswordValidationRules), "undefined" != typeof contactValidationRules && hookFormValidation("contact-form", contactValidationRules), "undefined" != typeof paymentDepositValidationRules && (formValidators.deposit__form = new FormValidator("deposit__form", paymentDepositValidationRules, function (e, t) { var i = $(t.target); showFormValidationErrors(i, e), e.length || submitFormDeposit(i) }), formValidators.deposit__form.registerConditional("serviceIsHsoub", function (e) { var t = $(e.element.form).find("#payment__service").val(), i = $("#payment_cc_type").val(); return "stripe" == t && "savedCards" == i }), formValidators.deposit__form.registerConditional("serviceIsStripe", function (e) { var t = $(e.element.form).find("#payment__service").val(), i = $("#payment_cc_type").val(); return "stripe" == t && "stripe" == i }), formValidators.deposit__form.registerConditional("serviceIsCoupon", function (e) { return "coupon" == $(e.element.form).find("#payment__service").val() }), formValidators.deposit__form.registerConditional("amountIsRequired", function (e) { return "coupon" != $(e.element.form).find("#payment__service").val() }), formValidators.deposit__form.setMessage("equal_or_greater_than", "     10$."), formValidators.deposit__form.setMessage("equal_or_less_than", "     10000$.")); var e = $("#withdraw__paypal_amount").attr("min"), t = $("#withdraw__bank_amount").attr("min"); "undefined" != typeof paymentWithdrawValidationRules && (formValidators.withdraw__form = new FormValidator("withdraw__form", paymentWithdrawValidationRules, function (e, t) { var i = $(t.target); showFormValidationErrors(i, e), e.length || submitFormWithdraw(i) }), formValidators.withdraw__form.registerCallback("paypal_equal_or_greater_than", function (t) { return parseInt(t) >= parseInt(e) }).setMessage("paypal_equal_or_greater_than", "       " + e + "$."), formValidators.withdraw__form.registerCallback("bank_equal_or_greater_than", function (e) { return parseInt(e) >= parseInt(t) }).setMessage("bank_equal_or_greater_than", "       " + t + "$."), formValidators.withdraw__form.registerConditional("withdrawMethodIsPaypal", function (e) { return "paypal" == $(e.element.form).find("#withdraw__method").val() }), formValidators.withdraw__form.registerConditional("withdrawMethodIsBank", function (e) { return "bank" == $(e.element.form).find("#withdraw__method").val() })), "undefined" != typeof editUsernameValidationRules && (formValidators["username-form"] = new FormValidator("username-form", editUsernameValidationRules, function (e, t) { var i = $(t.target); $("[data-check-message]").text(""), $('[data-error="username"]').text(""), showFormValidationErrors(i, e), e.length || (window.location.href = "/account/profile") })), "undefined" != typeof addAnswerValidationRules && $.each($("form[name^='question__answer_']"), function (e, t) { hookFormValidation(t.name, addAnswerValidationRules) }), "undefined" != typeof organizationFormValidationRules && hookFormValidation("organization__form", organizationFormValidationRules), "undefined" != typeof organizationTeamFormValidationRules && hookFormValidation("organization-team__form", organizationTeamFormValidationRules), "undefined" != typeof teamMemberFormValidationRules && hookFormValidation("team-member__form", teamMemberFormValidationRules), "undefined" != typeof changeFunderFormValidationRules && hookFormValidation("moderator-member__form", changeFunderFormValidationRules) } function injectBidAnswersValidation() { var e = $(".answer_input"); e.length && e.each((e, t) => addBidValidationRules.push({ name: t.name, rules: ("required" == $(t).attr("require") ? "required_without_space|" : "") + "clean_text|callback_prevent_urls|max_length[" + $(t).data("maxlength") + "]" })) } function clearRatingUI(e) { e.val(0), e.closest(".rating-input").find(".rating-clear").trigger("click") } function isElementOnScreen(e) { var t = $(window).height(), i = e.offset().top - $(window).scrollTop(); return i > 0 && i < t } function scrollToElement(e, t, i) { void 0 !== t || (t = 500), void 0 !== i || (i = 0); var n = "top" == e ? 0 : e.offset().top; $("html,body").animate({ scrollTop: n + i }, t) } function getBidElement(e) { var t = $('[data-bid-item][id="bid' + e + '"]'); if (t.length) return t } function highlightBid(e, t) { $bid = getBidElement(e), $bid && (t && scrollToElement($bid), fadeHighlight($bid)) } function addFlashMessage(e, t, i, n) { void 0 !== t || (t = "danger"), "error" == t && (t = "danger"), void 0 !== n || (n = ".js-flash-messages"), void 0 !== i || (i = 0); var s = $('<div class="alert alert-' + t + ' media alert-dismissible "><button class="close media-object" data-bs-dismiss="alert"  data-dismiss="alert"><b aria-hidden="true">&times;</b><span class="sr-only"></span></button> <div class="media-body message__body"></div> </div>'); if (s.find(".message__body").html(e), s.find('[data-toggle="tab"]').on("click", function (e) { e.preventDefault(), targetedTab = $(this).data("target") || $(this).attr("href"), $('[data-tabs="main"] a[data-toggle="tab"][href="' + targetedTab + '"]').tab("show") }), $(n).prepend(s.hide()), s.slideDown(250), i) setTimeout(function () { s.fadeOut(200, function () { $(this).remove() }) }, i) } function addSuccessMessage(e) { addFlashMessage(e, "success") } function addFailMessage(e) { if (void 0 !== e.readyState && 0 != e.readyState) { if (void 0 !== e.responseJSON) { var t = e.responseJSON; if (t.message) { if ("warning" == t.status) return addFlashMessage(t.message, "warning", 1e4); if ("error" == t.status) return addFlashMessage(t.message, "danger", 1e4) } } return addFlashMessage(Mostaql.lang.unknownError, "danger", 1e4) } } function removeFlashNotification() { $(".js-flash-messages").html("") } function refreshSubSelect(e, t) { void 0 !== e || (e = $("#" + t.data("selectRequire"))), void 0 !== t || (t = $("#" + e.data("selectRequiredBy"))); var i = getSelectize(t); e.length && i && (e.val() ? i.enable() : i.disable()) } function fadeHighlight(e) { e.addClass("bg-yellow-light"), setTimeout(function () { e.addClass("bg-fade"), e.removeClass("bg-yellow-light") }, 2e3) } function getDocumentHash(e) { var t = ""; return -1 != e.indexOf("#") && (t = e.substring(parseInt(e.indexOf("#")) + 1)), t } function convertArabicDigits(e) { e = e.replace(/[^0-9  -]/g, ""); var t = { " ": "0", "": "1", "": "2", "": "3", "": "4", "": "5", "": "6", "": "7", "": "8", "": "9", 0: "0", 1: "1", 2: "2", 3: "3", 4: "4", 5: "5", 6: "6", 7: "7", 8: "8", 9: "9" }; return String(e).split("").map(function (e, i) { return t[e] || "" }).join("") } function removeLastComma(e) { return e.replace(/,(\s+)?$/, "") } function implodeSelector(e) { var t = ""; return e.each(function () { t += $(this).val() + "," }), removeLastComma(t) } function slideFiltersMenu() { $(".mobile_filter_btn .open-filters").on("click", function (e) { $(".filter--container_sidebar").removeClass("outside"), $("body").css("overflow", "hidden"); var t = $('[data-filter="form"]')[0]; t && localStorage.setItem(t.id, window.location.href) }), $('[data-action="change-filters"]').on("click", function (e) { e.preventDefault(), $("body").css("overflow", "initial"), $(".filter--container_sidebar").addClass("outside"); var t = $('[data-filter="form"]')[0]; t && localStorage.removeItem(t.id) }), $('[data-action="back-filters"]').on("click", function (e) { e.preventDefault(), $("body").css("overflow", "initial"); var t = $('[data-filter="form"]')[0]; $(".filter--container_sidebar").addClass("outside"), t && window.location.href != localStorage.getItem(t.id) && (window.location = localStorage.getItem(t.id)) }) } function closeFiltersSidebar() { var e = $(".close-filters"); e.length && $(window).width() <= 767 && e.click() } function isMobileBrowser() { return /iphone|ipod|ipad|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec/i.test(navigator.userAgent.toLowerCase()) } function copyToClipboard(e) { if (window.clipboardData && window.clipboardData.setData) return clipboardData.setData("Text", e); if (document.queryCommandSupported && document.queryCommandSupported("copy")) { var t = document.createElement("textarea"); t.textContent = e, t.style.position = "fixed", document.body.appendChild(t), t.select(); try { return document.execCommand("copy") } catch (e) { return console.warn("Copy to clipboard failed.", e), !1 } finally { document.body.removeChild(t) } } } function markModalAsElasticHeight() { $('[data-modal="global"]').addClass("modal-elastic-height") } function markModalAsFixedHeight() { $('[data-modal="global"]').removeClass("modal-elastic-height") } function disableModalButtons() { $('[data-action="modalConfirm"]').attr("disabled", !0) } function enableModalButtons() { $('[data-action="modalConfirm"]').attr("disabled", !1) } function isJson(e) { try { JSON.parse(e) } catch (e) { return !1 } return !0 } function sanitize(e) { const t = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#x27;", "/": "&#x2F;" }; return e.replace(/[&<>"'/]/gi, e => t[e]) } function triggerDataHref(e) { e.each(function (e) { var t = $(this); t.attr("href", t.data("href")) }) } function triggerLoadDelayedSrcImages(e) { e.each(function (e) { var t = $(this); t.attr("src", t.data("delaySrc")) }) } function triggerUploadInput(e) { e.each(function (e) { var t = $(this); $(this).filestyle({ buttonText: t.data("text") }) }) } function triggerFadeOut(e) { e.each(function () { var e = $(this); e.addClass(e.data("classFadeout")), setTimeout(function () { e.addClass("bg-fade"), e.removeClass(e.data("classFadeout")) }, 2e3) }) } function triggerSkillsLimit(e) { e.each(function (e) { var t = $(this), i = t.children(), n = parseInt(t.data("limit")); i.length > n && (i.each(function (e) { e >= n && $(this).addClass("more").addClass("hide") }), t.append('<li><a class="bg-gray-hard" data-toggle="skillsLimit" data-target="ul" title="">&hellip;</a></li>')) }), e.find('[data-toggle="skillsLimit"]').click(function (e) { e.preventDefault(); var t = $(this); t.closest(t.data("target")).children(".more").toggleClass("hide") }) } function triggerRatingInput(e) { e.length && (e.rating(), e.find("i:first-child").trigger("mouseleave")) } function cleanInputValue(e) { e && $("#" + e.id).val(e.value.replace(/((.)\2{4,}|[\#\-\=\.\-\.\,\+_]{4,}[\n\#\-\=\-\.\,\+_]{4,})/g, "")) } function triggerModalAjaxSubmit() { var e = globalModal.find('[data-action="modalConfirm"]'), t = globalModal.find('[data-content="modalLoading"]'); t.html(t.data("formLoading")), e.attr("disabled", !0) } function triggerModalAjaxStop() { var e = globalModal.find('[data-action="modalConfirm"]'), t = globalModal.find('[data-content="modalLoading"]'); e && e.attr("disabled", !1), t && t.html("") } function initUITriggers() { triggerDataHref($("[data-href]")), triggerFadeOut($("[data-class-fadeOut]")), triggerSkillsLimit($('[data-ui="skillsLimit"]')), triggerUploadInput($('[data-ui="upload"]')); var e = $("[data-select-required-by]"); e.length && (e.each(function () { refreshSubSelect($(this)) }), e.on("change", function (e) { refreshSubSelect($(this)) })) } function hookSlideSide() { $(document).on("mouseenter", "[data-slideside]", function (e) { var t = $(this); t.find(t.data("slideside")).animate({ width: "toggle" }, 200) }), $(document).on("mouseleave", "[data-slideside]", function (e) { var t = $(this); t.find(t.data("slideside")).animate({ width: "toggle" }, 200) }) } function hookHoverOut() { $(document).on("mouseenter", "[data-hoverout]", function (e) { var t = $(this); t.find(t.data("hoverout")).removeClass("hide") }), $(document).on("mouseleave", "[data-hoverout]", function (e) { var t = $(this); t.find(t.data("hoverout")).addClass("hide") }) } function hookCollapse() { $(document).on("click", "[data-collapse]", function (e) { "A" !== e.target.nodeName && "BUTTON" !== e.target.nodeName && $(e.target).parents("a").length <= 0 && $(e.target).parents("button").length <= 0 && $(this).find($(this).data("collapse")).collapse("toggle") }) } function hookCollapseToggle() { $(document).on("show.bs.collapse", ".collapse", function (e) { var t = $(this), i = $('[data-collapse-toggle][data-target="#' + t.attr("id") + '"]'); if (i.length) { var n = i.find(".icon"); n.toggleClass("fa-chevron-up", !0), n.toggleClass("fa-chevron-down", !1) } }), $(document).on("hide.bs.collapse", ".collapse", function (e) { var t = $(this), i = $('[data-collapse-toggle][data-target="#' + t.attr("id") + '"]'); if (i.length) { var n = i.find(".icon"); n.toggleClass("fa-chevron-up", !1), n.toggleClass("fa-chevron-down", !0) } }) } function hookExpand() { $(document).on("click", "[data-expand]", function (e) { if ("A" !== e.target.nodeName && "BUTTON" !== e.target.nodeName && "INPUT" !== e.target.nodeName && "LABEL" !== e.target.nodeName && $(e.target).parents("a").length <= 0 && $(e.target).parents("button").length <= 0 && $(e.target).parents("label").length <= 0) { var t = $(this), i = $("[data-expand]"); i.find("[data-expand-holder]").addClass("hide"), t.hasClass("active") ? i.removeClass("active") : (i.removeClass("active"), t.find("[data-expand-holder]").outerHeight(t.height()).removeClass("hide"), t.addClass("active")) } }) } function hookScrollTop() { var e = $('[data-ui="scrollTop"]'); $(window).scroll(function () { $(this).scrollTop() > $(".page-body").offset().top ? e.fadeIn("slow") : e.fadeOut("slow") }), $(document).on("click", '[data-ui="scrollTop"]', function (e) { $("body,html").animate({ scrollTop: 0 }, 800), $('[data-ui="scrollToLastMessage"]').show() }) } function hookAutoSubmit() { $(document).on("change", "[data-autosubmit]", function (e) { var t = $($(this).data("autosubmit")); t.length && t.first().submit() }) } function hookCostChange() { $(document).on("keyup blur", '[data-bid="cost"]', function (e) { var t = $(this); (i = null) && 4 != i.readyState && i.abort(); var i = $.get(t.data("remote"), { previous_cost: t.data("previous-cost"), cost: t.val() }, function (e) { $('[data-bid="realCost"]').val(e), $('span[data-bid="realCost"]').text(e) }) }) } function hookSelectOnFocus() { $(document).on("focus mouseup keyup", '[data-action="selectOnFocus"]', function (e) { e.preventDefault(), $(this).select() }) } function hookSelectFilter() { $(document).on("click", '[data-action="selectFilter"]', function (e) { var t = $(this), i = $('[data-filter="' + t.data("filterTarget") + '"]'), n = t.data("statusTarget"); if (i.length) { var s = getSelectize(i); s ? s.setValue(n) : i.val(n).trigger("change") } }) } function hookDropdownFilter() { $(document).on("click", '[data-action="dropdownFilter"]', function (e) { var t = $(this), i = $('[data-filter="' + t.data("filterTarget") + '"]'), n = t.data("statusTarget"); i.next(".dropdown").find('[data-ui="dropdownSelect"] a[data-filter-value="' + n + '"]').click() }) } function hookTabHooks() { $(document).on("show.bs.tab", '[data-toggle="tab"]', function (e) { var t = $(this), i = $(e.relatedTarget); if (i.data("tabVisibleWith") && ($target = $(i.data("tabVisibleWith")), $target.removeClass("hide")), t.data("tabVisibleWith") && ($target = $(t.data("tabVisibleWith")), $target.addClass("hide")), i.data("tabHiddenWith") && ($target = $(i.data("tabHiddenWith")), $target.addClass("hide")), t.data("tabHiddenWith") && ($target = $(t.data("tabHiddenWith")), $target.removeClass("hide")), i.data("tabCollapseIn") && ($target = $(i.data("tabCollapseIn")), $target.collapse("hide")), t.data("tabCollapseIn") && ($target = $(t.data("tabCollapseIn")), $target.collapse("show")), t.data("tabUrl")) { var n = t.attr("href"), s = t.data("tabTitle"); n && history.pushState && window.location.href != n && history.pushState({ target: t.data("target") }, s, n) } if (t.data("tabTitle")) { var o = t.data("tabTitle"); o && (document.title = o) } }), $(window).bind("popstate", function (e) { $tab = $('[data-tab-url][href="' + window.location.href + '"]'), $tab.tab("show"), $tab.focus() }), $(document).on("shown.bs.tab", '[data-toggle="tab"]', function (e) { $(this) }) } function hookUrlHandling() { var e, t = document.location.toString(); if (t.match("#") && (e = t.split("#")[1])) { if (0 === (e = e.replace(/[^\w-]+/g, "")).length) return; if (0 === e.indexOf("message")) { var i = $('[data-status="unread"]').first(); i.length || (i = $('[data-reply][id="' + e + '"]')), i.length && (scrollToElement(i), fadeHighlight(i)) } $tabLink = $('[data-toggle="tab"][href="#' + e + '"] , [data-toggle="tab"][datat-target="' + e + '"]'), $tabLink.length && $tabLink.tab("show").trigger("show.bs.tab").trigger("shown.bs.tab"), collapsibleElem = $(".collapse#" + e), collapsibleElem.length && collapsibleElem.tab("show") } Mostaql.linkedBid && (highlightBid(Mostaql.linkedBid, !0), "accept" == (e = getDocumentHash(t)) && $("a[data-bid-id='" + Mostaql.linkedBid + "']").click()) } function hookScrollToLastMessage() { $(document).on("click", '[data-ui="scrollToLastMessage"]', function (e) { var t = $('[data-ui="scrollToLastMessage"]'); scrollToElement($("#project__discussions .discussion-item").last()), t.hide() }) } function hookScrollTo() { $(document).on("click", "[data-scroll]", function (e) { var t = $(this).data("scroll"), i = $("#" + t); i && scrollToElement(i) }) } function hookDepositAmountChange() { $(document).on("keyup blur change click", '[data-deposit="amount"]', function (e) { var t = parseInt($(this).val()), i = t + t * Mostaql.config.depositFees / 100; i = isNaN(i) ? 0 : i.toFixed(2), $('[data-deposit="real_amount"]').text(i), $('[data-deposit="payment_real_amount"]').val(100 * t), $("#stripe_deposit_amount").val((100 * i).toFixed(0)).change() }) } function hookWithdrawAmountChange() { $(document).on("keyup blur change click", "#withdraw__bank_amount", function (e) { calculateWithdrawFinalAmount() }) } function hookWithdrawBankChange() { $(document).on("change", 'input[name="withdraw[bank_account]"]', function (e) { calculateWithdrawFinalAmount() }) } function checkBankWithdrawSubmitButtonStatus() { $(document).on("change", 'input[name="withdraw[agreements][]"]', function (e) { refreshWithdrawSubmitButtonStatus("bank") }) } function hookSelectMultipleSelectize() { $('[data-ui="multipleSelect"]').selectize({ plugins: ["remove_button"], render: { item: function (e, t) { return $('div[data-filter="collection"]').append(e.card), '<span class="tag  bg-bluecurious "><bdi>' + (e.text ? '<span class="name">' + t(e.text) + "</span>" : "") + "</bdi></span>" } } }) } function initUIHooks() { var e; hookUrlHandling(), hookScrollToLastMessage(), hookHoverOut(), hookCollapse(), hookCollapseToggle(), hookExpand(), hookSlideSide(), hookScrollTop(), hookAutoSubmit(), hookCostChange(), hookSelectOnFocus(), hookSelectFilter(), hookDropdownFilter(), hookTabHooks(), hookDepositAmountChange(), hookWithdrawAmountChange(), hookWithdrawBankChange(), hookSelectMultipleSelectize(), checkBankWithdrawSubmitButtonStatus(), hookScrollTo(), $("select#project__category").on("change", function (t) { var i = $(this), n = getSelectize($("#" + i.data("selectRequiredBy"))); if (n) if (n.clearOptions(), n.disable(), i.val()) { var s = Mostaql.config.api.subCategories.replace(":id", i.val()); e && e.abort(), e = $.getJSON(s, {}, function (e) { if (e.length) { for (var t = []; e.length;) { var i = e.pop(); t.push({ value: i.id, text: i.title }) } n.addOption(t) } n.refreshOptions(), n.enable() }) } else n.refreshOptions() }), $('[data-delegate="click"]').click(function (e) { var t = $($(this).data("target")); t.length && (e.preventDefault(), t.click()) }), $('a[data-toggle="tab"]').not('[data-tabs="main"] a[data-toggle="tab"]').on("click", function (e) { e.preventDefault(), targetedTab = $(this).data("target") || $(this).attr("href"), $('[data-tabs="main"] a[data-toggle="tab"][href="' + targetedTab + '"], [data-tabs="main"] a[data-toggle="tab"][data-target="' + targetedTab + '"]').tab("show") }), $('[data-dismiss="parent"]').on("click", function (e) { e.preventDefault(); var t = $(this).parents($(this).data("target")); t.length && t.slideUp(250, function () { $(this).remove() }) }), $('[data-payments="depositForm"]').submit(function (e) { e.preventDefault() }), $('[data-deposit="service"]').on("change", function () { $('[data-deposit="creditCard"]').collapse({ toggle: !1 }); var e = $(this).val(); "stripe" == e ? $('[data-deposit="creditCard"]').collapse("show") : $('[data-deposit="creditCard"]').collapse("hide"), "coupon" == e ? ($('[data-deposit="couponCodeContainer"]').removeClass("hide"), $('[data-deposit="amountContainer"]').addClass("hide"), $(".payment_deposit_instructions").addClass("hide")) : ($('[data-deposit="couponCodeContainer"]').addClass("hide"), $('[data-deposit="amountContainer"]').removeClass("hide"), $(".payment_deposit_instructions").removeClass("hide")) }), $('[data-payments="withdrawForm"]').submit(function (e) { e.preventDefault() }), $("[data-video]").click(function () { var e = $(this).data("target"), t = $(this).attr("data-video"), i = t + "?modestbranding=1&rel=0&controls=1&showinfo=0&html5=1&autoplay=1"; $(e + " iframe").attr("src", i), $(e + " button.close").click(function () { $(e + " iframe").attr("src", t) }), $(e).on("hide.bs.modal,hidden.bs.modal", function (t) { $(e + " iframe").attr("src", "") }) }) } function actionAjaxSubmit() { $(document).on("submit", '[data-action="ajaxSubmit"]', function (e) { e.preventDefault(); var t = $(this); beforeFormSubmit(t), submitFormAjax(t) }) } function actionModalMessage() { $(document).on("click", '[data-action="modalMessage"]', function (e) { e.preventDefault(); var t = $(this), i = t.data("message"), n = t.data("actionUrl"), s = t.data("actionText"), o = t.data("hideConfirmation") ? "hide" : ""; showGlobalModal({ title: t.text(), body: i, confirmText: s, confirmType: "success " + o, confirmCallback: function (e) { window.location.href = n, globalModal.modal("hide") }, confirmData: { btn: t } }) }) } function actionDealCompleteOrDeliver() { $(document).on("click", '[data-action="deliverDeal"],[data-action="completeDeal"]', function (e) { e.preventDefault(); var t = $(this), i = $('[data-terms="' + t.data("action") + '"]'); showGlobalModal({ title: t.text(), body: i.html(), confirmText: t.text(), confirmType: "success", confirmCallback: function (e) { var t = { _method: "patch", _token: Mostaql.config.csrfToken }; $.post(e.btn.data("url"), t, function (e) { "success" == e.status && e.redirect ? window.location.href = e.redirect : addFlashMessage(e.message, "danger", 5e3) }), globalModal.modal("hide") }, confirmData: { btn: t } }) }) } function actionShareMyPortfolio() { $(document).on("click", '[data-action="shareMyPortfolio"]', function (e) { e.preventDefault(); var t = $(this), i = $('[data-modal="' + t.data("action") + '"]'); $('[data-action="modalConfirm"]').remove(), showGlobalModal({ title: t.text(), body: i.html(), confirmText: t.text(), confirmType: "success", cancelText: "", confirmCallback: function (e) { globalModal.modal("hide") }, confirmData: { btn: t } }) }) } function actionReportAbuse() { $(document).on("click", '[data-action="report"]', function (e) { e.preventDefault(); var t = $(this), i = $("<div></div>"), n = Mostaql.template.reportReasons; i.append(n), showGlobalModal({ title: Mostaql.lang.reportInappropriateContent, body: i, confirmText: "", confirmCallback: function (e) { var i = $('input[name="report_reason"]:checked').val(), n = $('textarea[name="comment"]').val(); if (i && i.length) { var s = { _method: "post", _token: Mostaql.config.csrfToken, reason: i, comment: n }; $.post(e.btn.data("url"), s, function (e) { "success" == e.status ? (t.remove(), addFlashMessage(e.message, "success", 5e3)) : addFlashMessage(e.message, "danger", 5e3) }), globalModal.modal("hide") } else addFlashMessage("    ", "danger", 5e3) }, confirmData: { btn: t } }) }) } function deleteAttachment() { $(document).on("click", '[data-action="removeAttachment"]', function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: " ", body: Mostaql.lang.removeAttachmentConfirmation, confirmText: t.text(), confirmCallback: function (e) { var t = { file: e.btn.data("fileId"), model: e.btn.data("modelId"), _token: Mostaql.config.csrfToken }; $.ajax({ url: e.btn.data("url"), type: "DELETE", data: t, success: function (t) { if ("success" == t.status) { e.btn.parents("li.attachment").slideUp(300, function (e) { $(this).remove() }); var i = $('[data-type="uploads"]'); if (i.length) { var n = i.attr("data-files-count"); i.attr("data-files-count", n - 1) } } else t.message ? addFlashMessage(t.message, "danger", 5e3) : addFlashMessage(Mostaql.lang.removeAttachmentError, "danger", 5e3) } }), globalModal.modal("hide") }, cancelCallback: function (e) { }, confirmData: { btn: t } }) }) } function setDefaultGateway(e) { var t = $('[data-payments="depositForm"]').find("[name='payment[service]']").selectize()[0].selectize; t.setValue(e), t.trigger("change") } function actionBidAccept() { $(document).on("click", '[data-action="bidAccept"]', function (e) { var t = $(this), i = t.data("userCredit"), n = t.data("bidCost"); if (n > i && t.data("team-id") < 1) { getFreshCreditCards(); var s = Math.ceil(Math.max(n - i, 10)), o = $('[data-payments="depositFormHolder"]'), a = $('[data-payments="depositForm"]').removeClass("hide"), r = $("#bid_available__alert_container").html(); a.find("#payment__amount").val(s), a.find("#payment__amount").attr("min", s), a.find("#payment__bid_id").val(t.data("bidId")), a.find("#payment__amount").change(), $('[data-content="custom_payment_text_holder"]').html(r); var l = $('[data-type="modalNavigations"]'); setDefaultGateway("stripe"), $('a[data-gateway="stripe"]').click(), showGlobalModal({ title: t.text(), navigation: l.html(), body: a.removeClass("hide"), cancelText: "", confirmText: t.text(), confirmType: "success", confirmCallback: function (e) { e.form.trigger("submit") }, confirmData: { form: a }, cancelCallback: function (e) { e.form.addClass("hide"), e.container.append(e.form) }, shownCallback: function (e) { var t = $('[data-payments="depositForm"] #payment__amount'); t && t.attr("disabled", "disabled") }, cancelData: { form: a, container: o } }), disableSelectizeOnMobile(function () { a.find("#payment__amount").val(s) }), actionSelectedPaymentTab(), globalModal.find('[data-action="modalConfirm"]').after('<div id="payment-request-button" class="service-pay-button pull-right" dir="ltr" style="width: 120px;display: none"></div>').promise().then(() => { generatePaymentButton() }) } else { var c = $('[data-terms="bidAccept"]'); showGlobalModal({ title: t.text(), body: c.html(), confirmText: t.text(), confirmType: "success", confirmCallback: function (e) { var t = { bid: e.btn.data("bidId"), _token: Mostaql.config.csrfToken }; redirectWithData(e.btn.data("url"), t) }, confirmData: { btn: t } }) } }) } function actionRequestChangeReject() { $(document).on("click", '[data-action="requestChangeReject"]', function (e) { var t = $(this), i = Lang.get("layouts.reject_change_request"); showGlobalModal({ title: t.text(), body: i, confirmText: t.text(), confirmType: "success", confirmCallback: function (e) { var t = { bid: e.btn.data("bidId"), _token: Mostaql.config.csrfToken }; redirectWithData(e.btn.data("url"), t) }, confirmData: { btn: t } }) }) } function actionNotifyUnavailableFreelancer() { $(document).on("click", '[data-action="bidAcceptUnavailable"]', function (e) { var t = $(this), i = $('[data-terms="availabilityWarning"]'); showGlobalModal({ title: t.text(), body: i.html(), confirmText: "  ", confirmType: "success", confirmCallback: function (e) { var t = { bid: e.btn.data("bidId"), _token: Mostaql.config.csrfToken }; $.post(e.btn.data("url"), t, function (e) { addFlashMessage(e.message, e.status, 5e3), globalModal.modal("hide"), globalModal.modal("hide") }).fail(function (e) { addFailMessage(e) }), e.btn.attr("disabled", !0) }, confirmData: { btn: t } }) }) } function actionLike() { $(document).on("click", '[data-action="like"]', function (e) { e.preventDefault(); var t = $(this), i = t.find("i"), n = t.find(".action-text"), s = { _token: Mostaql.config.csrfToken, action: "like" }; $.post(t.data("url"), s, function (e) { if ("success" == e.status && ("liked" == e.context && (i.removeClass(t.data("inactiveClass")), i.addClass(t.data("activeClass")), n.text(t.data("activeText"))), "unliked" == e.context && (i.removeClass(t.data("activeClass")), i.addClass(t.data("inactiveClass")), n.text(t.data("inactiveText")), t.data("dismiss")))) { var s = t.parents(t.data("dismiss")); s.fadeOut(300, function () { s.remove() }) } addFlashMessage(e.message, "error" != e.status ? e.status : "danger", 3e3) }).fail(function (e) { addFailMessage(e) }) }) } function actionBookmark() { $(document).on("click", '[data-action="bookmark"]', function (e) { e.preventDefault(); var t = $(this), i = t.find("i"), n = t.find(".action-text"), s = { _token: Mostaql.config.csrfToken }; $.post(t.data("url"), s, function (e) { if ("success" == e.status && ("bookmarked" == e.context && (i.removeClass(t.data("inactiveClass")), i.addClass(t.data("activeClass")), n.text(t.data("activeText"))), "unbookmarked" == e.context && (i.removeClass(t.data("activeClass")), i.addClass(t.data("inactiveClass")), n.text(t.data("inactiveText")), t.data("dismiss")))) { var s = t.parents(t.data("dismiss")); s.fadeOut(300, function () { s.remove() }) } addFlashMessage(e.message, "error" != e.status ? e.status : "danger", 3e3) }).fail(function (e) { addFailMessage(e) }) }) } function actionContactFreelancer() { $(document).on("click", '[data-action="contactFreelancer"]', function (e) { e.preventDefault(); var t = $(this), i = $('[data-type="contact--form"]').html(), n = t.parents("div.bid"); if (t.parents("div").siblings('[data-scenario="createBidMessage"]').length) return !0; $("#message__compose").remove(), n.append(i), n.find('[name="type_id"]').val(t.data("related-id")), n.find('[name="type"]').val(t.data("related-type")), hookFormValidation("message__compose", createMessageValidationRules), initDropZone(Mostaql.dropzoneConfig), initAudioFilePlayer() }) } function actionRemovePortfolio() { $(document).on("click", '[data-action="removePortfolio"]', function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: " ", body: Mostaql.lang.removePortfolioConfirmation, confirmText: t.text(), confirmCallback: function (e) { var i = { _method: "delete", _token: Mostaql.config.csrfToken }; "single" == e.btn.data("type") ? redirectWithData(e.btn.data("url"), i) : $.post(e.btn.data("url"), i, function (i) { if ("success" == i.status) { if (e.btn.data("dismiss")) { var n = e.btn.parents(t.data("dismiss")); n.fadeOut(300, function () { n.remove() }) } } else addFlashMessage(Mostaql.lang.removePortfolioError, "danger", 5e3) }), globalModal.modal("hide") }, confirmData: { btn: t } }) }) } function validateHsoubAccessToken() { return $.get(Mostaql.routes.creditcards).fail(function (e, t, i) { window.location.href = e.responseJSON.url }) } function actionDeleteItem() { $(document).on("click", '[data-action="deleteItem"]', function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: t.data("modal-title"), body: t.data("modal-body"), confirmText: t.data("confirm-text").trim(), confirmType: t.data("confirm-type") || "danger", confirmCallback: function (e) { var t = { _method: "delete", _token: Mostaql.config.csrfToken }; $.post(e.btn.data("url"), t, function (e) { "success" == e.status && e.redirect ? window.location.href = e.redirect : "success" == e.status ? addSuccessMessage(e.message) : addFlashMessage(e.message, "danger") }).fail(function (e) { addFailMessage(e) }), globalModal.modal("hide") }, confirmData: { btn: t } }) }) } function actionCopyText() { $(document).on("click", '[data-action="copyToClipboard"]', function (e) { e.preventDefault(); var t = $(this); copyToClipboard(t.data("text")), t.data("flash-alert") && addFlashMessage(t.data("flash-alert"), "success", 5e3) }) } function initUIActions() { var e; actionBidAccept(), actionContactFreelancer(), actionRequestChangeReject(), actionNotifyUnavailableFreelancer(), actionLike(), actionBookmark(), actionAjaxSubmit(), actionDealCompleteOrDeliver(), actionShareMyPortfolio(), actionModalMessage(), actionReportAbuse(), actionRemovePortfolio(), actionDisplayAndFillNoteForm(), actionDeleteNote(), deleteAttachment(), actionDeleteItem(), actionCopyText(), initOrganizationUIActions(), actionEditBidModal(), $(document).on("click", '[data-action="deposit"]', function (e) { e.preventDefault(), getFreshCreditCards(); var t = $(this), i = $('[data-payments="depositForm"]'), n = $('[data-type="modalNavigations"]'), s = $('[data-payments="depositContainer"]'), o = $('[data-payments="depositForm"]').find("[name='payment[service]']").selectize()[0].selectize; o.setValue("stripe"), o.trigger("change"), $('[data-action="modalCancel"]').addClass("hide"); var a = $('[data-content="footer"]').html(); $('[data-footer="content"]').html(a), $("a[data-gateway]").parent().removeClass("active"), $('a[data-gateway="stripe"]').click(), showGlobalModal({ title: t.text(), navigation: n.html(), body: i.removeClass("hide"), confirmText: t.text(), confirmType: "success", confirmCallback: function (e) { e.form.trigger("submit") }, confirmData: { form: i }, cancelCallback: function (e) { e.form.addClass("hide"), e.container.append(e.form) }, cancelData: { form: i, container: s }, shownCallback: function () { $('[data-toggle="tooltip"]').tooltip() } }), actionSelectedPaymentTab(), globalModal.find('[data-action="modalConfirm"]').after('<div id="payment-request-button" class="service-pay-button pull-right" dir="ltr" style="width: 120px;display: none"></div>').promise().then(() => { generatePaymentButton() }) }), $('button[data-action="withdraw"]').length && $('[data-withdraw-gateway="bank"]').length && getFreshBankAccounts(), $('[data-action="withdraw"]').click(function (e) { e.preventDefault(); var t = $(this), i = $('[data-payments="withdrawForm"]'), n = $('[data-type="withdrawModalNavigations"]'), s = $('[data-payments="withdrawContainer"]'); $("a[data-withdraw-gateway]").parent().removeClass("active"), $('a[data-withdraw-gateway="bank"]').length ? $('a[data-withdraw-gateway="bank"]').click() : $('a[data-withdraw-gateway="paypal"]').click(), showGlobalModal({ title: t.text(), navigation: n.html(), body: i.removeClass("hide"), confirmText: t.text(), confirmType: "success", confirmCallback: function (e) { e.form.trigger("submit") }, confirmData: { form: i }, cancelCallback: function (e) { e.form.addClass("hide"), e.container.append(e.form) }, cancelData: { form: i, container: s } }) }), $('[data-action="verifyIdentity"]').on("click", function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: Lang.get("layouts.verify_account"), body: Lang.get("layouts.need_to_verify_identity_error"), confirmText: Lang.get("layouts.verify_account"), confirmType: "primary", confirmCallback: function (e) { $('a[data-target="verify_account"]')[0].click(), globalModal.modal("hide") }, confirmData: { btn: t } }) }), $('[data-action="removeAttachment"]').on("click", function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: " ", body: Mostaql.lang.removeAttachmentConfirmation, confirmText: t.text(), confirmCallback: function (e) { var t = { file: e.btn.data("fileId"), model: e.btn.data("modelId"), _token: Mostaql.config.csrfToken }; $.ajax({ url: e.btn.data("url"), type: "DELETE", data: t, success: function (t) { "success" == t.status ? e.btn.parents("li.attachment").slideUp(300, function (e) { $(this).remove() }) : t.message ? addFlashMessage(t.message, "danger", 5e3) : addFlashMessage(Mostaql.lang.removeAttachmentError, "danger", 5e3) } }), globalModal.modal("hide") }, confirmData: { btn: t } }) }), $("body").on("click", '[data-action="reopenProject"]', function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: Lang.get("project.reopen_project_modal_title"), body: Lang.get("project.reopen_project_modal_body"), confirmText: t.text(), confirmType: "info", confirmCallback: function (e) { var t = { _method: "patch", _token: Mostaql.config.csrfToken }; $.post(e.btn.data("url"), t, function (e) { "success" == e.status && e.redirect ? window.location.href = e.redirect : addFlashMessage(e.message, "danger", 5e3) }), globalModal.modal("hide") }, confirmData: { btn: t } }) }), $('[data-action="closeProject"]').on("click", function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: "  ", body: Lang.get("project.close_project_confirmation"), confirmText: t.text(), confirmCallback: function (e) { var t = { _method: "patch", _token: Mostaql.config.csrfToken }; $.post(e.btn.data("url"), t, function (e) { "success" == e.status && e.redirect ? window.location.href = e.redirect : addFlashMessage(e.message, "danger", 5e3) }), globalModal.modal("hide") }, confirmData: { btn: t } }) }), $('[data-action="cancelProject"], [data-action="cancelDeal"]').on("click", function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: "  ", body: Mostaql.lang.cancelProjectConfirmation, confirmText: t.text(), confirmCallback: function (e) { var t = { _method: "patch", _token: Mostaql.config.csrfToken }; $.post(e.btn.data("url"), t, function (e) { "success" == e.status && e.redirect ? window.location.href = e.redirect : addFlashMessage(e.message, "danger", 5e3) }), globalModal.modal("hide") }, confirmData: { btn: t } }) }), $('[data-action="editProjectBudget"]').on("click", function (e) { e.preventDefault(); var t = $(this), i = t.data("min-budget"), n = $('<div class="row dsp--b col-md-6" style="float: none"></div>'), s = $(Mostaql.template.budgetSelect); n.append('<label class="control-label">  <em class="clr-red">*</em> </label>'), n.append(s), s.find("[data-range-min]").filter(function () { return $(this).attr("data-range-min") < i }).remove(), showGlobalModal({ title: "  ", body: n, confirmText: "", confirmType: "success", confirmCallback: function (e) { if (e.dropdownBudgetRange.val().length) { var t = { _method: "patch", _token: Mostaql.config.csrfToken, budget: e.dropdownBudgetRange.val() }; $.post(e.btn.data("url"), t, function (e) { addFlashMessage(e.message, e.status, 5e3), "success" == e.status && ($('[data-type="project-budget_range"]').html(e.budget), $('[data-type="header-alert"]').hide()) }), globalModal.modal("hide") } else addFlashMessage("     !") }, confirmData: { btn: t, dropdownBudgetRange: s }, shownCallback: function () { } }) }), $('[data-action="editDealCost"]').on("click", function (e) { e.preventDefault(); var t = $(this); return $("#bidsCollection-panel").collapse(), highlightBid(t.data("bid-id"), !0), displayEditBidForm(t), !0 }), $('[data-action="pulloutDeal"]').on("click", function (e) { e.preventDefault(); var t = $(this), i = $("<div></div>"), n = $('<textarea class="form-control" name="pullout_reason"></textarea>'); i.append("<p>" + Mostaql.lang.pulloutDealConfirmation + "</p>"), i.append("<label>  </label>"), i.append(n), showGlobalModal({ title: "   ", body: i, confirmText: " ", confirmCallback: function (e) { if (e.pulloutReasonTextarea.val().length) { var t = { _method: "patch", _token: Mostaql.config.csrfToken, pullout_reason: e.pulloutReasonTextarea.val() }; $.post(e.btn.data("url"), t, function (e) { "success" == e.status && e.redirect ? window.location.href = e.redirect : addFlashMessage(e.message, "danger", 5e3) }), globalModal.modal("hide") } else addFlashMessage("     !") }, confirmData: { btn: t, pulloutReasonTextarea: n } }) }), $('[data-action="undoPulloutDeal"]').on("click", function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: "    ", body: Mostaql.lang.undoPulloutDealConfirmationMessage, confirmText: t.text(), confirmCallback: function (e) { var t = { _method: "patch", _token: Mostaql.config.csrfToken }; $.post(e.btn.data("url"), t, function (e) { "success" == e.status && e.redirect ? window.location.href = e.redirect : addFlashMessage(e.message, "danger", 5e3) }), globalModal.modal("hide") }, confirmData: { btn: t } }) }), $('[data-action="cancelWithdraw"]').on("click", function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: "  ", body: Mostaql.lang.cancelWithdrawConfirmation, confirmText: t.text(), confirmType: "danger", confirmCallback: function (e) { var i = { unique_id: t.data("hash"), _token: Mostaql.config.csrfToken }; $.post(e.btn.data("url"), i, function (e) { "success" == e.status && e.redirect ? window.location.href = e.redirect : addFlashMessage(e.message, "danger", 5e3) }), globalModal.modal("hide") }, confirmData: { btn: t } }) }), $('[data-action="openProject"]').on("click", function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: "   ", body: Mostaql.lang.makeProjectPublicConfirmation, confirmText: t.text(), confirmType: "primary", confirmCallback: function (e) { var t = { _method: "patch", _token: Mostaql.config.csrfToken }; $.post(e.btn.data("url"), t, function (e) { "success" == e.status && e.redirect ? window.location.href = e.redirect : addFlashMessage(e.message, "danger", 5e3) }), globalModal.modal("hide") }, confirmData: { btn: t } }) }), $('[data-sortable="questionsTree"]').sortable({ handle: ".panel-heading", cursor: "move", handle: ".handle", opacity: .5, stop: function (e, t) { var i = $('[data-sortable="questionsTree"]').sortable("serialize"); $.ajax({ url: $(this).data("url"), type: "POST", data: i, success: function (e) { } }) } }), $(document).on("click", '[data-action="pokeFreelancer"]', function (e) { e.preventDefault(); var t = $(this); $('form[name="pokes-form"] input[name="freelancers[]"]').val(t.data("freelancer")); var i = $('[data-modal-name="projectToPoke"]'); $('[data-action="modalConfirm"]').remove(), showGlobalModal({ title: t.text(), body: i.html(), confirmText: t.text(), confirmType: "success", cancelCallback: function (e) { globalModal.modal("hide") } }) }), $('[data-action="checkUsername"], [data-action="checkUsermail"]').on("keyup blur", function () { var t = $(this), i = t.closest("form"), n = t.closest(".form-group"), s = {}; s.block = n.find("[data-check-status]"), s.message = s.block.find("[data-check-message]"), s.loading = s.block.find("[data-check-loading]"); var o = formValidators[i.attr("name")].validateField(t.attr("name")); if (o) n.removeClass("has-success").addClass("has-error"), s.block.removeClass("hide"), s.message.html("<span data-error>" + o.message + "</span>"); else { s.block.removeClass("hide"), s.loading.removeClass("hide"); var a = { _token: Mostaql.config.csrfToken }; a[t.attr("name")] = t.val(), $.ajaxSetup({ beforeSend: function () { null != e && e.abort() } }), e = $.post(t.data("remote"), a, function (e) { e && "available" == e.status ? (n.removeClass("has-error").addClass("has-success"), s.message.html("<span data-error>   " + t.val() + "</span>")) : e && "taken" == e.status ? (n.removeClass("has-success").addClass("has-error"), s.message.html("<span data-error>    " + t.val() + "   </span>")) : e && "notvalid" == e.status ? (n.removeClass("has-success").addClass("has-error"), s.message.html("<span data-error>    " + t.val() + " .</span>")) : (n.removeClass("has-success").addClass("has-error"), s.message.html("<span data-error>    .</span>")), s.loading.addClass("hide") }) } }), $(document).on("click", '[data-action="openImageUpload"]', function (e) { e.preventDefault(); var t = $(this); t.find("img"); $("#" + t.data("target")).trigger("click") }), $(document).on("click", '[data-action="displayAllReviews"]', function (e) { e.preventDefault(), $('[data-target="#reviews"]').parent("li").removeClass("active").removeClass("hidden"), $('[data-target="#review"]').parent("li").addClass("hidden"), $('[data-target="#reviews"]').click(), $('[data-target="#reviews"]').parent("li").addClass("active") }) } function actionDisplayAndFillNoteForm() { $(document).on("click", '[data-action="editNote"]', function (e) { e.preventDefault(); var t = $(this), i = t.parents("div.note-item"), n = i.find("div.note__details"), s = n.data("origin").replace(/<[^>]+>/g, "").trim(); i.find("div.note__form").html(Mostaql.template.noteForm); var o = i.find('form[name="note__form"]'); if (o.find("[name=team_id]").val(t.data("team-id")), o.find("[name=notable_id]").val(t.data("noteable-id")), o.find("[name=notable_type]").val(t.data("type")), o.find("[name=_method]").val("patch"), o.find("[name=details]").val(s), o.attr("action", t.data("url")), o.attr("name", "edit__form"), "undefined" !== t.data("personal")) { if ("user" == t.data("type")) var a = t.data("team-id") ? t.data("team-id") : 0; else a = t.data("personal"); o.find("#team-organization").val(a), o.find("#team-organization").trigger("change") } o.data("scenario", "editNote"), n.hide(), hookFormValidation("edit__form", addNoteValidationRules), reInitSelectizeInput(o.find('[data-ui="placeholder-select"]')), refreshSelectizeSelect(), $('[data-type="note_form"]:last').hide(), $('[data-notes="collection"] hr:last').hide() }) } function actionDeleteNote() { $(document).on("click", '[data-action="deleteNote"]', function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: " ", body: Lang.get("layouts.note.delete_confirmation"), confirmText: t.text(), confirmCallback: function (e) { var t = { _method: "delete", _token: Mostaql.config.csrfToken }; $.post(e.btn.data("url"), t, function (t) { if ("success" == t.status) { var i = e.btn.parents(".note-item"); i.fadeOut(300, function () { i.next("hr.separator").remove(), i.remove(), toggleNotesEmptyResult() }) } else addFlashMessage(Lang.get("layouts.note.delete_note_error"), "danger", 5e3) }), globalModal.modal("hide") }, confirmData: { btn: t } }) }) } function actionAdminDisplayAndFillNoteForm() { $(document).on("click", '[data-action="editNote"]', function (e) { e.preventDefault(); var t = $(this), i = t.parents("div.note-item"), n = i.find("div.note__details"), s = n.data("origin").replace(/<[^>]+>/g, "").trim(); i.find("div.note__form").html(Mostaql.template.noteForm); var o = i.find('form[name="note__form"]'); o.find("[name=team_id]").val(t.data("team-id")), o.find("[name=notable_id]").val(t.data("noteable-id")), o.find("[name=notable_type]").val(t.data("type")), o.find("[name=_method]").val("patch"), o.find("[name=details]").val(s), o.attr("action", t.data("url")), o.attr("name", "edit__form"), o.data("scenario", "editNote"), n.hide(), $('[data-notes="collection"] hr:last').hide() }) } function initOrganizationUIActions() { actionDetachTeamMember(), actionAddTeamMember(), changeLogoInput(), deleteOrganization(), deleteOrganizationTeam(), onHoverLogoUpload(), actionAddOrganizationMember(), actionCreateInvitationLine(), leaveOrganization(), selectAllPermissions(), actionChangePermissionTypeTab(), actionChangeOrganizationDropDown(), actionChangeOrganizationFunder(), actionFundingInvitationAccept(), actionFundingInvitationDecline(), actionListInvitations(), actionOrganizationEditMemberTeams() } function actionAddTeamMember() { $(document).on("click", '[data-action="addTeamMember"]', function (e) { e.preventDefault(); var t = $(this), i = $("<div>"); i.append('<div class="row"></div>'), i.append('<div class="col-md-6">'); var n = $('<input type="email" class="form-control " name="email"/>'); i.append("<label>  </label>"), i.append(n), i.append("</div>"), showGlobalModal({ title: "  ", body: i, confirmText: "", confirmType: "primary", confirmCallback: function (e) { if (e.emailTextInput.val().length) { var t = { _method: "post", _token: Mostaql.config.csrfToken, email: e.emailTextInput.val() }; $.post(e.btn.data("url"), t, function (e) { "success" == e.status && e.redirect ? window.location.href = e.redirect : addFlashMessage(e.message, "danger", 5e3) }), globalModal.modal("hide") } else addFlashMessage("     ") }, confirmData: { btn: t, emailTextInput: n } }) }) } function actionDetachTeamMember() { $(document).on("click", '[data-action="detachTeamMember"]', function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: " ", body: t.data("message"), confirmText: t.text(), confirmCallback: function (e) { triggerModalAjaxSubmit(); var t = { _token: Mostaql.config.csrfToken }; $.ajax({ url: e.btn.data("url"), type: "DELETE", data: t, success: function (e) { "success" == e.status ? window.location.href = e.redirect : (e.message ? addFlashMessage(e.message, "danger", 5e3) : addFlashMessage(Mostaql.lang.unknownError, "danger", 5e3), triggerModalAjaxStop()) }, error: function (e, t, i) { triggerModalAjaxStop() } }), globalModal.modal("hide") }, confirmData: { btn: t } }) }) } function deleteOrganization() { $(document).on("click", '[data-action="deleteOrganization"]', function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: " ", body: t.data("message"), confirmText: t.text(), confirmCallback: function (e) { var t = { _token: Mostaql.config.csrfToken }; $.ajax({ url: e.btn.data("url"), type: "DELETE", data: t, success: function (e) { "success" == e.status ? window.location.href = e.redirect : e.message ? addFlashMessage(e.message, "danger", 5e3) : addFlashMessage(Mostaql.lang.unknownError, "danger", 5e3) } }), globalModal.modal("hide") }, confirmData: { btn: t } }) }) } function deleteOrganizationTeam() { $(document).on("click", '[data-action="deleteTeam"]', function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: " ", body: t.data("message"), confirmText: t.text(), confirmCallback: function (e) { var t = { _token: Mostaql.config.csrfToken }; $.ajax({ url: e.btn.data("url"), type: "DELETE", data: t, success: function (e) { "success" == e.status ? window.location.href = e.redirect : addFlashMessage(e.message ? e.message : Mostaql.lang.unknownError, "danger", 5e3) } }), globalModal.modal("hide") }, confirmData: { btn: t } }) }) } function leaveOrganization() { $(document).on("click", '[data-action="leaveOrganization"]', function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: " ", body: t.data("message"), confirmText: t.text(), confirmCallback: function (e) { var t = { _token: Mostaql.config.csrfToken }; $.ajax({ url: e.btn.data("url"), type: "DELETE", data: t, success: function (e) { "success" == e.status ? window.location.href = e.redirect : addFlashMessage(e.message ? e.message : Mostaql.lang.unknownError, "danger", 5e3) } }), globalModal.modal("hide") }, confirmData: { btn: t } }) }) } function onHoverLogoUpload() { $(".profile-card--avatar").on({ mouseenter: function () { $(".image-camera__overlay").removeClass("dsp--n"), $(".image-camera__overlay").addClass("dsp--f") }, mouseleave: function () { $(".image-camera__overlay").removeClass("dsp--f"), $(".image-camera__overlay").addClass("dsp--n") } }) } function readURL(e) { if (e.files && e.files[0]) { var t = new FileReader; t.onload = function (e) { $(".organization-avatar").attr("src", e.target.result) }, t.readAsDataURL(e.files[0]) } } function changeLogoInput() { $("input#organization_logo").on("change", function () { readURL(this), alertForUnsavedChanges() }) } function selectAllPermissions() { $(document).on("click", ".header--level", function (e) { var t = $(this).data("target-level"), i = $(this); i.data("checked", !i.data("checked")), i.parents('[data-ui="permissions-checkboxes"]').find("[data-level=" + t + "] input:checkbox:not(:disabled)").prop("checked", i.data("checked")) }) } function actionChangePermissionTypeTab(e) { $(document).on("click", '[data-action="changePermissionType"]', function (e) { e.preventDefault(); $(this); $("input#permissions_type").val($(this).data("type")) }) } function actionFundingInvitationAccept() { $(document).on("click", '[data-action="fundingInvitationAccept"]', function (e) { var t = $(this); showGlobalModal({ title: t.data("title"), body: t.data("content"), confirmText: t.text(), confirmType: "info", confirmCallback: function (e) { var t = { username: e.btn.data("username"), _token: Mostaql.config.csrfToken }; $.post(e.btn.data("url"), t, function (e) { addSuccessMessage(e.message), $("#funding_invitation_alert").remove() }).fail(function (e) { addFailMessage(e) }), globalModal.modal("hide") }, confirmData: { btn: t } }) }) } function actionFundingInvitationDecline() { $(document).on("click", '[data-action="fundingInvitationDecline"]', function (e) { var t = $(this); e.preventDefault(), showGlobalModal({ title: t.text(), body: t.data("message"), confirmText: t.text(), confirmType: "danger", confirmCallback: function (e) { var t = { username: e.btn.data("username"), _token: Mostaql.config.csrfToken }; $.post(e.btn.data("url"), t, function (e) { addSuccessMessage(e.message), $("#funding_invitation_alert").remove() }).fail(function (e) { addFailMessage(e) }), globalModal.modal("hide") }, confirmData: { btn: t } }) }) } function addMemberTabAction() { $(document).on("shown.bs.tab", '#addMemberNavs a[data-toggle="tab"] ', function (e) { var t = $(e.target), i = t.attr("href"); $(e.relatedTarget).attr("href"); if (t.parent().hasClass("active") && "#invitationLink" == i) { var n = globalModal.find('[data-action="modalConfirm"]'); $(".modal-footer").find('[data-action="createInvitationLink"]').length && $(".modal-footer").find('[data-action="createInvitationLink"]').remove(), n.after($("#invitationLinkButton").html()).promise().then(() => { $('.modal-footer [data-action="modalConfirm"]').hide(), $(".modal-footer #invitationLinkButton").show() }) } else $('.modal-footer [data-action="createInvitationLink"]').hide(), $('.modal-footer [data-action="modalConfirm"]').show(), $("#invitationInputContainer").hide() }) } function actionAddOrganizationMember() { $(document).on("click", '[data-action="addOrganizationMember"]', function (e) { e.preventDefault(); var t = $(this); addMemberTabAction(), showGlobalModal({ title: t.text(), navigation: $("template#add-member__form-nav").html(), body: $("template#add-member__form").html(), confirmText: t.data("confirm-text").trim(), confirmType: "success", confirmCallback: function (e) { hookFormValidation("team-member__form", teamMemberFormValidationRules); var t = $("form[name=team-member__form]"), i = t.find('[name="members"]').val(), n = t.find('[name="emails"]').val(), s = $('div[data-modal="global"]').find("ul.nav li.active"), o = s.data("invitation-type"), a = s.data("action-url"), r = $("select[name='teams']").val(); if ("link" == o) return globalModal.modal("hide"), !0; if (!i.length && !n || !r) return addFlashMessage("    ", "danger"), !1; var l = { _method: "post", _token: Mostaql.config.csrfToken, email: t.find('[name="email"]').val(), teams: r, members: i, emails: n, invitationType: o }; disableModalButtons(), $.post(a, l, function (e) { addFlashMessage(e.message, "success"), $(".collection-browse--table.freelancers-table").length ? $.each(e.rendered, function (e, t) { $(".collection-browse--table tr:last").after(t.rendered) }) : $(".collection-browse--table.teams-table").length && $.each(r, function (t, i) { $.each(e.avatars, function (e, t) { var n = $('tr[data-team-id="' + i + '"]'); if (n.length) { var s = n.find("div.team_members-photos__wrapper .team-members-counts"); if (s.length) { var o = s.find(".team-count-number"); o.text(parseInt(o.text()) + 1) } else n.find("div.team_members-photos__wrapper").append(t.avatar); $('[data-toggle="tooltip"]').tooltip() } }) }), globalModal.modal("hide"), $('[data-content="listInvitationsBtn"]').show(), $('[data-action="listInvitations"] .action-text').text(e.text) }).fail(function (e) { addFailMessage(e), enableModalButtons() }) }, hideCallback: function () { $('.modal-footer [data-action="createInvitationLink"]').hide(), $('.modal-footer [data-action="modalConfirm"]').show(), markModalAsFixedHeight(), enableModalButtons() }, shownCallback: function () { markModalAsElasticHeight(), enableModalButtons(), initUserItemController($("#users__list")), hookSelectMultipleSelectize(), t.data("team-id") && $("select#teams__list")[0].selectize.addItems(1) } }), $('[data-toggle="tooltip"]').tooltip() }) } var FilterAdapter = function (e, t) { this.config = e, this.options = t }; function redirectWithData(e, t, i) { if (i = i && "GET" == i.toUpperCase() ? "GET" : "POST", t) { t.token_validation = ""; var n = $("<form>", { attr: { method: i, action: e } }); for (var s in t) $("<input>", { attr: { type: "hidden", name: s, value: t[s] } }).appendTo(n); n.addClass("hide").appendTo("body").submit() } } function submitFormAjax(e) { if ("disabled" == e.attr("data-validate") || "true" == e.attr("data-validated")) { var t = e.find("[data-form-loading]"), i = e.find('[type="submit"]'); t.html(t.data("formLoading")), i.attr("disabled", !0); $.post(e.attr("action"), e.serialize(), function (n) { n && (afterFormSubmit(e.data("scenario"), n, e), i.attr("disabled", !1), t.html(t.data("formText"))) }).fail(function (e) { addFailMessage(e) }).always(function (e) { i.attr("disabled", !1), t.html(t.data("formText")) }) } } function afterFormSubmit(e, t, i) { if ("success" == t.status) if ("addMessageReply" == e) afterAddMessageAjaxRequest(t, i); else if ("editBid" == e) updateBidView(t), t.redirect ? window.location.href = t.redirect : t.message && addFlashMessage(t.message, "success", 3e3), globalModal.modal("hide"); else if ("rateBid" == e) t.message && addFlashMessage(t.message, "success", 3e3); else if ("signIn" == e || "signUp" == e) window.location.href = t.redirect; else if ("mobileConfirm" == e || "mobileResend" == e) t.redirect ? window.location.href = t.redirect : (i.find('[type="submit"]').prop("disabled", !0), addFlashMessage(t.message, "success", 5e3)); else if ("mobileOtpCall" == e) t.redirect ? window.location.href = t.redirect : (i.find('[type="submit"]').prop("disabled", !0), t.response ? ($('[data-otp="keymatch"]').val(t.response.keymatch), $('[data-otp="caller"]').val(t.response.otp_start)) : t.message && addFlashMessage(t.message, "success", 5e3)); else if ("mobileOtpConfirm" == e) t.redirect ? window.location.href = t.redirect : (i.find('[type="submit"]').prop("disabled", !0), t.message && addFlashMessage(t.message, "success", 5e3)); else { if ("addOrganizationMember" == e) return window.location.href = t.redirect_url; if ("redeemCoupon" == e) t.redirect ? window.location.href = t.redirect : addFlashMessage(t.message, t.status, 5e3); else if ("withdraw" == e) t.redirect ? window.location.href = t.redirect : t.message && addFlashMessage(t.message, "success", 5e3); else if ("createBidMessage" == e) { addFlashMessage(t.message, "success", 1e4), scrollToElement(i.parents("div")); var n = i.siblings("div.bid-actions").find('[data-action="contactFreelancer"]'); n.removeAttr("data-toggle").removeAttr("data-action").attr("onclick", "location.href='" + t.url + "'"), n.find("span").text(n.data("replace")), i.remove() } else "addNote" == e ? afterAddNoteAjaxRequest(t, i) : "editNote" == e && afterEditNoteAjaxRequest(t, i) } else if ("warning" == t.status) addFlashMessage(t.message, "warning", 1e4); else if ("error" == t.status) { if ("editBid" == e) { if (t.validation && t.validation.cost && t.validation.cost[0]) { var s = i.find('[data-error="cost"]'); 0 !== s.length ? s.html('<label for="bid__cost">' + t.validation.cost[0] + "</label>") : (s = '<p class="help-block text-zeta clr-red" data-error="cost"><label for="bid__cost">' + t.validation.cost[0] + "</label></p>", i.find('input[name="cost"]').parent().after(s)) } triggerModalAjaxStop() } addFlashMessage(t.message, "danger", 1e4) } else addFlashMessage(Mostaql.lang.unknownError, "danger", 1e4); i.attr("data-validated", "false") } function beforeFormSubmit(e) { return "addMessageReply" == e.data("scenario") && Mostaql.voiceMessage.recorder && "recording" == Mostaql.voiceMessage.recorder.getState() && (addFlashMessage(Lang.get("layouts.warning_still_recording"), "warning", 1e4), actionStopRecord()), !0 } function createFilterAdapter() { var e = function (e, t) { FilterAdapter.call(this, e, t) }; function t() { } return t.prototype = FilterAdapter.prototype, e.prototype = new t, e } function submitFormWithdraw(e) { var t = $('[data-modal="global"]'), i = t.find('[data-action="modalConfirm"]'), n = t.find('[data-content="modalLoading"]'); n.html(n.data("formLoading")), i.attr("disabled", !0); $.post(e.attr("action"), e.serialize(), function (t) { t && afterFormSubmit("withdraw", t, e) }).fail(function (e) { addFailMessage(e) }).always(function (e) { i.attr("disabled", !1), n.html("") }) } function submitFormDeposit(e) { var t = e.find("#payment__service").val(), i = (e.find("#payment__real__amount").val(), $("#payment_cc_type").val()); if ("coupon" == t) { var n = globalModal.find('[data-action="modalConfirm"]'); (s = globalModal.find('[data-content="modalLoading"]')).html(s.data("formLoading")), n.attr("disabled", !0); $.post(e.data("couponUrl"), e.serialize(), function (t) { t && afterFormSubmit("redeemCoupon", t, e) }).fail(function (e) { addFailMessage(e) }).always(function (e) { n.attr("disabled", !1), s.html("") }) } else if ("paypal" == t) { $("form#deposit_form_paypal"); $("#paypal_deposit_amount").val(e.find('[data-deposit="amount"]').val()), $("#paypal_deposit_bid_id").val(e.find("#payment__bid_id").val()), $("form#deposit_form_paypal").trigger("submit") } else { if ("stripe" == t && "stripe" == i) { var s; n = globalModal.find('[data-action="modalConfirm"]'); return (s = globalModal.find('[data-content="modalLoading"]')).html(s.data("formLoading")), n.attr("disabled", !0), void $("form#deposit__form").trigger("stripeHandle") } if ("stripe" == t && "savedCards" == i) { $("form#deposit_form_saved_cards"); $("#saved_cards_deposit_amount").val(e.find('input[data-deposit="amount"]').val()), $("#saved_cards_deposit_card_id").val(e.find("input[name='card_id']:checked").val()), $("#saved_cards_deposit_card_country").val(e.find("input[name='card_id']:checked").data("country")), $("#saved_cards_deposit_project_url").val(e.find("#payment__bid_id").val()), $('[data-action="modalConfirm"]').prop("disabled", !0), $("form#deposit_form_saved_cards").trigger("submit") } } } function changePaymentService(e) { $("#payment_cc_type").val(e) } function changePaymentGateway() { $(document).on("click", "[data-gateway]", function (e) { var t = $(this).data("gateway"), i = $('[data-deposit="amountContainer"]'); "coupon" == t ? i.hide() : i.show(), $('[data-deposit="service"]').val(t).change() }) } function changeWithdrawGateway() { $(document).on("click", "[data-withdraw-gateway]", function (e) { var t = $(this).data("withdraw-gateway"); "paypal" === t ? ($('[data-disable-for-bank="true"]').removeAttr("disabled"), $("#withdraw__paypal_amount").val($("#withdraw__bank_amount").val()).change()) : "bank" === t && ($('[data-disable-for-bank="true"]').attr("disabled", "disabled"), $("#withdraw__bank_amount").val($("#withdraw__paypal_amount").val()).change()), $('[data-withdraw="method"]').val(t).change(), refreshWithdrawSubmitButtonStatus() }) } function refreshWithdrawSubmitButtonStatus() { gateway = $('[data-withdraw="method"]').val(), "bank" === gateway && 3 !== $('input[name="withdraw[agreements][]"]:checked').length ? $('[data-action="modalConfirm"]').prop("disabled", !0) : $('[data-action="modalConfirm"]').prop("disabled", !1) } function getFreshCreditCards() { return $.get(Mostaql.routes.creditcards, function (e) { e.count && ($('[data-type="payment-saved-cards"]').empty(), e.collection.forEach(function (e) { $('[data-type="payment-saved-cards"]').append(e.rendered) }), $('a[href="#cc-new"]').click(), $('a[data-name="savedCards"]').show(), $('a[data-name="savedCards"]').click(), selectSavedCard()) }).fail(function (e, t, i) { window.location.href = e.responseJSON.url }) } function getFreshBankAccounts() { return $.get(Mostaql.routes.bankAccounts, function (e) { $('[data-type="withdraw-bank-accounts"]').empty(), e.count ? (e.collection.forEach(function (e) { $('[data-type="withdraw-bank-accounts"]').append(e.rendered) }), $("#withdraw_manage_bank_accounts").show(), calculateWithdrawFinalAmount(), selectBankAccount(), $('input[name="withdraw[agreements][]"]:checked').prop("checked", !1).change()) : ($('[data-type="withdraw-bank-accounts"]').html(e.no_bank_accounts_html), $("#withdraw_manage_bank_accounts").hide()), e.has_active_account ? ($("#withdraw__bank_amount--form-group").show(), $("#withdraw__bank_final_amount--div").show(), $('[data-action="modalConfirm"]').attr("data-disable-for-bank", "false"), $('[data-action="modalConfirm"]').removeAttr("disabled", "disabled")) : ($("#withdraw__bank_amount--form-group").hide(), $("#withdraw__bank_final_amount--div").hide(), $('[data-action="modalConfirm"]').attr("data-disable-for-bank", "true"), "bank" == $('[data-withdraw="method"]').val() && $('[data-action="modalConfirm"]').attr("disabled", "disabled")) }).fail(function (e, t, i) { 401 == e.status && "authentication" == e.responseJSON.error_type ? addFlashMessage("   .   .", "danger", 1e4) : 500 == e.status ? addFlashMessage("   .   .", "danger", 1e4) : addFlashMessage(e.responseJSON.message, "danger", 1e4) }) } function calculateWithdrawFinalAmount() { var e = $("#withdraw__bank_amount").val(), t = $('input[name="withdraw[bank_account]"]:checked').data("withdraw-fees"), i = $("#withdraw__bank_fees_text").data("text").replace(/%s/g, t), n = e - t; n < 0 && (n = 0), $('[data-withdraw="withdraw_final_amount"]').html(n), $("#withdraw__bank_fees_text").html(i) } function fetchPaymentIntent(e, t) { return new Promise((t, i) => { $.ajax({ url: "/ajax/payment/stripe/paymentIntent", type: "POST", dataType: "json", data: { amount: e, secret: null }, success: function (e) { return $("#stripe_secret").val(e.clinet_secret), e }, error: function (e) { $.each(data.errors, function (e, t) { addFlashMessage(t, "danger") }), resetPaymentform(), i(e) } }) }) } function resetStripePaymentForm(e = !0) { var t = $('[data-modal="global"]'), i = t.find('[data-action="modalConfirm"]'); e && t.modal("hide"), t.find("[id^='error_']").css("display", "none"), $("input#saved_cards_deposit_payment_charge_id").val(""), $("input#saved_cards_deposit_payment_intent").val(""), displayLoadingIndicator(!1), i.attr("disabled", !1) } function displayLoadingIndicator(e = !0) { var t = $('[data-modal="global"]').find('[data-content="modalLoading"]'), i = $('[data-modal="global"]').find('[data-action="modalConfirm"]'); 1 == e ? (t.html(t.data("formLoading")), i.text(Mostaql.lang.pleaseWait)) : (t.html(""), i.text(Mostaql.lang.balanceRecharge)) } function getPaymentMethod(e, t, i) { return e.createPaymentMethod("card", t, { billing_details: { name: i } }) } function charge3DPaymentIntent(e) { return new Promise((t, i) => $.ajax({ url: "/ajax/payment/creditcard/3ds", type: "POST", dataType: "json", data: { payment_intent: e, bid: $("input#payment__bid_id").val() } }).done(function (e, i, n) { return n.responseJSON || (addFlashMessage(stripeErrorMessages.processing_error, "danger"), resetStripePaymentForm(!1)), t(e), "succeeded" == e.status ? window.location.href = e.redirect_url : e }).fail(function (e, t, i) { addFlashMessage(e.responseJSON ? e.responseJSON.error : stripeErrorMessages.processing_error, "danger"), resetStripePaymentForm(!1) })) } function generatePaymentIntent(e, t, i, n, s) { return new Promise((e, o) => $.ajax({ url: "/ajax/payment/creditcard", type: "POST", dataType: "json", data: { amount: i, confirmation_method: n, pm: t, bid: $("input#payment__bid_id").val(), remember: !(!$('[name="deposit_card_remember"]').is(":checked") || "#cc-new" != activeTab) } }).done(function (t, i, n) { return n.responseJSON || (addFlashMessage(stripeErrorMessages.processing_error, "danger"), resetStripePaymentForm(!1)), e(t), t }).fail(function (e, t, i) { s && s.complete("fail"), addFlashMessage(e.responseJSON ? e.responseJSON.error : stripeErrorMessages.processing_error, "danger"), resetStripePaymentForm(!1) })).then(function (e) { if (e.error || !e.status) throw s && s.complete("fail"), addFlashMessage(e.error, "danger"), { error: e.error, code: "validation" }; return e }).then(function (t) { return "requires_action" == t.status ? e.handleCardPayment(t.client_secret).then(function (e) { if (e.error && "card_declined" != e.error.code) throw resetStripePaymentForm(), { error: stripeErrorMessages.payment_intent_authentication_failure, code: "validation" }; return e.error ? e.error.payment_intent.id : e.paymentIntent.id }).then(function (e) { charge3DPaymentIntent(e) }) : "succeeded" == t.status ? window.location.href = t.redirect_url : t }) } function selectSavedCard() { $("div.cc-chooser").not(".disabled").find("div.cc-chooser-item").on("click", function () { $(this).parent().parent().find("div.cc-chooser-item").removeClass("selected"), $(this).addClass("selected"), $(this).find('input[type="radio"]').prop("checked", !0) }) } function selectBankAccount() { $("div.ba-chooser").not(".disabled").find("div.ba-chooser-item").not(".disabled").on("click", function () { $(this).parent().parent().find("div.ba-chooser-item").removeClass("selected"), $(this).addClass("selected"), $(this).find('input[type="radio"]').prop("checked", !0).change() }) } function generatePaymentButton() { var e = Stripe(stripeConfig.publishable, { locale: "en" }), t = e.elements(), i = e.paymentRequest({ country: stripeConfig.country, currency: stripeConfig.currency, total: { label: stripeConfig.statement_descriptor, amount: 0 }, requestPayerName: !0, requestPayerEmail: !1, requestShipping: !1, requestPayerPhone: !1 }), n = t.create("paymentRequestButton", { paymentRequest: i, style: { paymentRequestButton: { type: "default", theme: "dark" } } }); i.canMakePayment().then(function (e) { if (e) { var t = e.applePay ? "Apple" : "Google"; $('[data-gateway="payButton"] span').text(t + " Pay"), $('[data-gateway="payButton"] i').addClass("fa-" + t.toLowerCase()), $('[data-gateway="payButton"]').show(), n.mount("#payment-request-button") } }), i.on("paymentmethod", t => { var i = $("#stripe_deposit_amount").val(); return generatePaymentIntent(e, t.paymentMethod.id, i, "automatic", t) }), n.on("click", function (e) { var t = parseFloat($('[data-deposit="real_amount"]').text() ? $('[data-deposit="real_amount"]').text() : 0).toFixed(2), n = parseInt(100 * t); if (i.update({ total: { label: stripeConfig.statement_descriptor, amount: n } }), t < $("#payment__amount").attr("min")) return e.preventDefault(), showFormValidationErrors($("#deposit__form"), [{ id: "payment__amount", element: {}, name: "payment[amount]", message: "     10$.", rule: "equal_or_greater_than" }]), !1 }) } FilterAdapter.prototype.boot = function () { this.params = {}, this.flags = { firstTime: !0 }, this.config.defaults || (this.config.defaults = {}), this.hold = this.options.hold || !1, this.xhr = null, this.lastQuery = this.getQuery(), this.booting(), this.bindEvents() }, FilterAdapter.prototype.getParams = function () { return this.params.page || this.config.page && (this.params.page = this.config.page), this.params }, FilterAdapter.prototype.load = function () { var e = this; e.xhr && e.xhr.abort(), e.xhr = $.ajax({ url: e.getFilterUrl(), cache: !1, type: "GET", dataType: "json", beforeSend: function (t, i) { e.beforeSend(t, i) }, complete: function (t, i) { e.complete(t, i) }, success: function (t, i, n) { e.success(t, i, n) }, error: function (t, i, n) { e.error(t, i, n) }, statusCode: {} }) }, FilterAdapter.prototype.getRelevantParams = function (e, t) { void 0 === t && (t = this.getParams()); var i = []; for (var n in t) e && this.options.infinite && "page" == n || t.hasOwnProperty(n) && t[n] && !this.isDefaultParam(n, t[n]) && i.push({ key: n, value: t[n] }); return i }, FilterAdapter.prototype.getQuery = function (e) { for (var t = this.getRelevantParams(e), i = "", n = 0; n < t.length; ++n)i += (i.length ? "&" : "") + t[n].key + "=" + t[n].value; return i }, FilterAdapter.prototype.isDefaultParam = function (e, t) { return this.config.defaults[e] && this.config.defaults[e] == t }, FilterAdapter.prototype.updatePager = function (e, t) { if (this.options.pager) { var i = this.options.pager; i.show(), e.pager ? i.html(e.pager) : (i.hide(), i.empty()) } }, FilterAdapter.prototype.updateState = function (e, t) { if (this.options.pushState && history.pushState) { var i = this.getStateUrl(); history.pushState({}, "", i) } }, FilterAdapter.prototype.updateLoader = function (e) { if (this.options.loader) { var t = this.options.loader; e ? t.removeClass("hide") : t.addClass("hide") } this.options.pager && this.updatePagerLoader(e) }, FilterAdapter.prototype.updatePagerLoader = function (e) { var t = this.options.pager, i = t.find("a"), n = t.find(".js-loader"); e ? (i.addClass("disabled"), n.removeClass("hide")) : (i.removeClass("disabled"), n.addClass("hide")) }, FilterAdapter.prototype.bindEvents = function () { this.bindDefaultEvents() }, FilterAdapter.prototype.bindDefaultEvents = function () { var e = this; this.options.pager && this.options.pager.on("click", "a", function (t) { e.handlePageClick($(this), t) }); if (this.options.keyword) { var t = this.options.keyword; t.on("keyup", function (i) { 32 == i.keyCode && t.val().trim() !== e.params.keyword && e.fire(t, i) }).on("blur", function (t) { e.fire($(this), t) }) } if (this.options.form) { var i = this.options.form; i.on("submit", function (t) { t.preventDefault(), e.fire(i, t) }), i.on("reset", function (t) { t.preventDefault(), e.reset(i, t) }) } }, FilterAdapter.prototype.handlePageClick = function (e, t) { t.preventDefault(), this.params.page = e.data("pageNumber"), e.hasClass("disabled") || this.fire(e, t) }, FilterAdapter.prototype.getFilterUrl = function () { var e = this.getQuery(); return this.config.url + (e ? "?" + e : "") }, FilterAdapter.prototype.getStateUrl = function () { var e = this.getQuery(!0); return this.config.url + (e ? "?" + e : "") }, FilterAdapter.prototype.fire = function (e, t) { this.handleFiredEvent(e, t); var i = t && t.currentTarget && "select-multiple" == t.currentTarget.type, n = t && t.currentTarget && "switchChange" == t.type; (!this.hold && (this.options.live || this.getQuery() !== this.lastQuery) || i || n) && (this.lastQuery = this.getQuery(), this.load()), this.hold = !1 }, FilterAdapter.prototype.onHold = function (e) { this.hold = !0, e(), this.hold = !1 }, FilterAdapter.prototype.handleFiredEvent = function (e, t) { this.options.pager && void 0 !== e && !e.data("pageNumber") ? (this.params.page = 1, this.flags.emptyCollection = !this.options.keepOldItems) : this.flags.emptyCollection = !(this.options.infinite || this.options.keepOldItems), this.setParams(e, t) }, FilterAdapter.prototype.reset = function (e, t) { var i = this; i.onHold(function () { i.handleReset(e, t) }), i.fire(e, t) }, FilterAdapter.prototype.beforeSend = function (e, t) { this.handleBeforeSend(e, t) }, FilterAdapter.prototype.success = function (e, t, i) { this.handleSuccess(e, t, i) }, FilterAdapter.prototype.complete = function (e, t) { this.handleComplete(e, t), this.xhr = null }, FilterAdapter.prototype.error = function (e, t, i) { this.options.silent || "abort" == e.statusText || this.handleError(e, t, i) }, FilterAdapter.prototype.handleBeforeSend = function (e, t) { this.updateLoader(!0) }, FilterAdapter.prototype.handleSuccess = function (e, t, i) { this.updatePager(e, t), this.updateView(e, t), this.updateState(e, t), this.flags.firstTime = !1 }, FilterAdapter.prototype.handleComplete = function (e, t) { this.updateLoader(!1) }, FilterAdapter.prototype.handleError = function (e, t, i) { void 0 === e.readyState && 0 != e.readyState && addFlashMessage(Mostaql.lang.filterError, "danger", 5e3) }, FilterAdapter.prototype.booting = function (e, t) { }, FilterAdapter.prototype.setParams = function (e, t) { }, FilterAdapter.prototype.handleReset = function (e, t) { }, FilterAdapter.prototype.updateView = function (e, t) { if (this.flags.emptyCollection && this.emptyCollection(), e.reloadCollection && e.reloadCollection.length && this.renderReloadCollection(e.reloadCollection), e.collection && e.collection.length) { for (var i = $("<div></div>"); e.collection.length;) { var n = this.options.desc ? e.collection.pop() : e.collection.shift(); if (!this.keepFirstTime() || n.id != this.options.keepFirstTime) { var s = $(n.rendered); this.renderItem(i, s, n) } } this.beforeRenderCollection(i), this.renderCollection(i), this.afterRenderCollection(i) } else this.renderEmptyState() }, FilterAdapter.prototype.keepFirstTime = function () { return this.flags.firstTime && this.options.keepFirstTime }, FilterAdapter.prototype.emptyCollection = function () { this.keepFirstTime() || this.options.collection.empty() }, FilterAdapter.prototype.renderItem = function (e, t, i) { this.options.prepend ? e.prepend(t) : e.append(t), this.config.lastLoaded = i.id }, FilterAdapter.prototype.renderCollection = function (e) { var t = this.options.collection; this.options.prepend ? t.prepend(e.children()) : t.append(e.children()) }, FilterAdapter.prototype.renderReloadCollection = function (e) { }, FilterAdapter.prototype.beforeRenderCollection = function (e) { }, FilterAdapter.prototype.afterRenderCollection = function (e) { }, FilterAdapter.prototype.renderEmptyState = function (e) { }, $(function () { if (selectSavedCard(), "undefined" != typeof stripeConfig) { if ("undefined" == typeof Stripe) return console.error("Error", "error while loading stripe js from source"), !1; var e = Stripe(stripeConfig.publishable, { locale: "en" }), t = e.elements().create("card", { classes: { base: "form-control no-spin" }, style: { base: { fontSize: "16px" } }, hideIcon: !1 }); t.mount("#card-element") } $("form#deposit__form").on("stripeHandle", {}, function (i) { getPaymentMethod(e, t, $("#deposit_card_name").val()).then(function (e) { if (e.error) throw $('[data-modal="global"]').find('[data-action="modalConfirm"]').attr("disabled", !1), displayLoadingIndicator(!1), { error: stripeErrorMessages[e.error.code], code: "validation" }; return displayLoadingIndicator(), e }).then(function (t) { return generatePaymentIntent(e, t.paymentMethod.id, $("#stripe_deposit_amount").val(), "automatic") }).catch(function (e) { var t = null != e.error ? e.error : stripeErrorMessages.processing_error; t && "validation" != e.code && resetStripePaymentForm(), e.ignore || addFlashMessage(t, "danger") }) }), $("#deposit_form_saved_cards").on("submit", function (e) { e.preventDefault(), displayLoadingIndicator(), generatePaymentIntent(Stripe(stripeConfig.publishable, { locale: "en" }), $("input[name='card_id']:checked").val(), $("#stripe_deposit_amount").val(), "automatic").catch(function (e) { var t = e && null != e.error ? e.error : stripeErrorMessages.processing_error; t && e && "validation" != e.code && resetStripePaymentForm(), e.ignore || addFlashMessage(t, "danger") }) }) }); var activeTab = null; function actionSelectedPaymentTab() { $(document).on("shown.bs.tab", 'a[data-toggle="tab"]', function (e) { var t = $(e.target).attr("href"); activeTab = t, "#payButton" == t ? (globalModal.find('[data-action="modalConfirm"]').hide(), globalModal.find("#payment-request-button").show()) : (globalModal.find('[data-action="modalConfirm"]').show(), globalModal.find("#payment-request-button").hide()) }) } var globalModal = $('[data-modal="global"]'); function showGlobalModal(e) { void 0 !== e.confirmType || (e.confirmType = "danger"), void 0 !== e.confirmText || (e.confirmText = ""), void 0 !== e.cancelText || (e.cancelText = ""); var t = { body: globalModal.find('[data-content="modalBody"]'), title: globalModal.find('[data-content="modalTitle"]'), navigation: globalModal.find('[data-content="modalNavigation"]'), loading: globalModal.find('[data-content="modalLoading"]'), confirm: globalModal.find('[data-action="modalConfirm"]'), cancel: globalModal.find('[data-action="modalCancel"]') }; t.title.text(e.title), t.body.empty().append(e.body), t.navigation.empty(), e.navigation && t.navigation.html(e.navigation), t.cancel.text(e.cancelText), t.cancel.show(), e.cancelText || t.cancel.hide(), t.confirm.text(e.confirmText), t.confirm.removeClass().addClass("pull-right btn btn-" + e.confirmType), t.confirm.unbind("click").on("click", function (t) { e.confirmCallback(e.confirmData) }), void 0 !== e.cancelCallback && globalModal.unbind("hidden.bs.modal").on("hidden.bs.modal", function (t) { e.cancelCallback(e.cancelData) }), void 0 !== e.showCallback && globalModal.on("show.bs.modal", function (t) { e.showCallback(e) }), void 0 !== e.shownCallback && globalModal.on("shown.bs.modal", function (t) { e.shownCallback(e) }), void 0 !== e.hideCallback && globalModal.on("hidden.bs.modal", function (t) { e.hideCallback(e) }), globalModal.modal("show") } var voiceMessage = { btnStartRecording: $("#btn-start-recording"), btnStopRecording: $("#btn-stop-recording"), captureMicrophone: function (e) { Mostaql.voiceMessage.microphone ? e(Mostaql.voiceMessage.microphone) : (void 0 !== navigator.mediaDevices && navigator.mediaDevices.getUserMedia || (addFlashMessage("       .", "danger", 1e3), navigator.getUserMedia && addFlashMessage("           .", "danger", 1e4)), navigator.mediaDevices.getUserMedia({ audio: !0 }).then(function (t) { e(t) }).catch(function (e) { $("#voicemessage-capture-permission").html(Lang.get("layouts.capture_mic_exception")), recordStateChanged("#voicemessage-capture-permission"), addFlashMessage(Lang.get("layouts.mic_capture_mic_permission"), "danger", 1e4) })) }, stopRecordingCallback: function () { voiceMessage.replaceAudioSrc(URL.createObjectURL(Mostaql.voiceMessage.recorder.getBlob())), Mostaql.voiceMessage.microphone && (Mostaql.voiceMessage.microphone.stop(), Mostaql.voiceMessage.microphone = null), voiceMessage.upload() }, replaceAudioSrc: function (e) { var t = document.createElement("audio"); t.setAttribute("data-type", "audio-player"), t.setAttribute("crossorigin", !0), t.controls = !0, t.controlsList = "nodownload", e ? (t.src = e, disableRecorderPlayer(!1)) : disableRecorderPlayer(); var i = $('[data-container="voice-message-recorder"] [data-container="voicemessage-audio"]'); i.html(""), i.html(t), audio = t, initAudioFilePlayer(i.find("audio"), !1) }, click: function (e) { var t = document.createEvent("Event"); t.initEvent("click", !0, !0), e.dispatchEvent(t) }, getRandomString: function (e) { return (Math.random() * (new Date).getTime()).toString(e).replace(/\./g, "") }, getFileName: function (e) { var t = new Date; return "voicemessage-" + t.getFullYear() + "-" + t.getMonth() + "-" + t.getDate() + "-" + this.getRandomString(5) + "." + e }, upload: function () { $('input[name="voicemessage_up_completed"]').val(""); var e = Mostaql.voiceMessage.recorder.getBlob(), t = voiceMessage.getFileName(e.type.split("/")[1]); (i = new FormData).append("audio-filename", t), i.append("audio-blob", e); var i, n = new File([e], t, { type: e.type }); (i = new FormData).append("file", n), i.append("filename", n.name), uploadVoiceMessage(i) } }; function initVoiceRecords() { window.btnRemoveMessage = $("button[data-voicemessage-remove]"), window.audio = document.querySelector("audio"), window.isEdge = !(-1 === navigator.userAgent.indexOf("Edge") || !navigator.msSaveOrOpenBlob && !navigator.msSaveBlob), window.isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent), $(document).on("click", "#btn-start-recording", function (e) { if ($('input[name="voicemessage"]').val().length) { var t = $(this); showGlobalModal({ title: "   ", body: Lang.get("layouts.remove_voicemessage_confirmation_rerecord"), confirmText: Lang.get("layouts.remove"), confirmCallback: function (e) { startRecordMessage(), globalModal.modal("hide") }, confirmData: { btn: t } }) } else startRecordMessage() }), $(document).on("click", '[data-action="stopRecordingVoice"]', function (e) { actionStopRecord() }), $(document).on("click", "button[data-voicemessage-remove]", function (e) { e.preventDefault(), actionRemoveRecordedMessageModal($(this), Lang.get("layouts.remove_voicemessage_confirmation")) }), $(document).on("change", '[name="voicemessage"]', function (e) { $(this).val() ? $("button[data-voicemessage-remove]").show() : $("button[data-voicemessage-remove]").hide() }) } function actionStopRecord() { $('[data-action="stopRecordingVoice"]').hide(), $('[data-action="startRecordingVoice"]').show(), recordStateChanged("#voicemessage-uploading"), Mostaql.voiceMessage.recorder.stopRecording(voiceMessage.stopRecordingCallback) } function startRecordMessage() { if ($('[name="voicemessage"]').val("").change(), !Mostaql.voiceMessage.microphone) return recordStateChanged("#voicemessage-capture-permission"), void voiceMessage.captureMicrophone(function (e) { if (Mostaql.voiceMessage.microphone = e, isSafari) return voiceMessage.replaceAudioSrc(), audio.muted = !0, setSrcObject(Mostaql.voiceMessage.microphone, audio), audio.play(), voiceMessage.btnStartRecording.hide(), voiceMessage.btnStopRecording.show(), void addFlashMessage("           .", "warning", 1e4); voiceMessage.click(document.getElementById("btn-start-recording")) }); $("#btn-start-recording").hide(), $("#btn-stop-recording").show(), recordStateChanged("#voicemessage-recording"), voiceMessage.replaceAudioSrc(), audio.muted = !0, setSrcObject(Mostaql.voiceMessage.microphone, audio), audio.play(); var e = getRecordingOptions(); Mostaql.voiceMessage.recorder && (Mostaql.voiceMessage.recorder.destroy(), Mostaql.voiceMessage.recorder = null), Mostaql.voiceMessage.recorder = RecordRTC(Mostaql.voiceMessage.microphone, e), Mostaql.voiceMessage.recorder.startRecording() } function actionRemoveRecordedMessageModal(e, t) { showGlobalModal({ title: "   ", body: t, confirmText: e.text(), confirmCallback: function (t) { $('input[name="voicemessage"]').val(""), e.hide(), voiceMessage.replaceAudioSrc(""), globalModal.modal("hide"), recordStateChanged($("#voicemessage-title")) }, confirmData: { btn: e } }) } function recordStateChanged(e) { Array.from(["#voicemessage-title", "#voicemessage-recording", "#voicemessage-uploading", "#voicemessage-capture-permission", "#voicemessage-listen"]).map(function (e) { $(e).hide() }), $(e).show(), "voicemessage-listen" == $(e).attr("id") ? ($("#voicemessage_meta-send").show(), $("#voicemessage_meta-title").hide()) : ($("#voicemessage_meta-send").hide(), $("#voicemessage_meta-title").show()) } function uploadVoiceMessage(e) { $.ajax({ url: Mostaql.dropzoneConfig.url, data: e, cache: !1, contentType: !1, processData: !1, type: "POST", statusCode: { 405: function (t) { uploadVoiceMessage(e) }, 422: function (e) { setTimeout(function () { voiceMessage.upload() }, 2e3) } }, success: function (e) { e.name ? ($('[name="voicemessage"]').val(e.name).change(), disableRecorderPlayer(!1), $('[name="voicemessage_up_completed"]').val(!0), $("button[data-voicemessage-remove]").show(), recordStateChanged($("#voicemessage-listen"))) : console.log(e) }, fail: function (t) { uploadVoiceMessage(e) } }) } function disableRecorderPlayer(e) { return (e = void 0 === e || 1 == e) ? $(".voicemessage-recorder-player").hide() : $(".voicemessage-recorder-player").show() } function getRecordingOptions() { var e = { type: "audio", recorderType: MediaStreamRecorder, checkForInactiveTracks: !0, disableLogs: !0 }; return (isSafari || isEdge) && (e.recorderType = StereoAudioRecorder), e } function syncFreelanceSa(e = "update") { disableFreelanceSaSubmitButton("freelance_sa_sync_submit"), $.post(Mostaql.routes.syncFreelanceSa + "?type=" + e, function (t, i, n) { setTimeout(function () { getFreelanceSaCertificates(e) }, 5e3) }).fail(function (e, t, i, n) { 403 == e.status ? addFlashMessage("         ", "danger", 1e4) : 422 == e.status ? addFlashMessage(e.responseJSON.message, "danger", 1e4) : addFlashMessage("     .         ", "danger", 1e4), enableFreelanceSaSubmitButton("freelance_sa_sync_submit") }) } function getFreelanceSaCertificates(e = "update") { $.get(Mostaql.routes.getFreelanceSaCertificates + "?type=" + e, function (e) { $("#freelance_sa_data_container").html(e.html), addFlashMessage(e.message, e.message_type, 1e4) }).fail(function (e, t, i) { addFlashMessage("     .         ", "danger", 1e4) }).always(function () { enableFreelanceSaSubmitButton("freelance_sa_sync_submit") }) } function setFreelanceSaNonSaCitizen() { disableFreelanceSaSubmitButton("freelance_sa_non_sa_citizen_submit"), $.post(Mostaql.routes.setFreelanceSaNonSaCitizen, function (e, t, i) { removeSpinnerFromButton($("#freelance_sa_data_container").find("#freelance_sa_non_sa_citizen_submit")), addFlashMessage(e.message, e.message_type, 1e4) }).fail(function (e, t, i, n) { 403 == e.status ? addFlashMessage("     ", "danger", 1e4) : addFlashMessage("  .         ", "danger", 1e4), enableFreelanceSaSubmitButton("freelance_sa_non_sa_citizen_submit") }) } function disableFreelanceSaSubmitButton(e) { var t = $("#freelance_sa_data_container").find("#" + e); t.prop("disabled", "disabled"), removeSpinnerFromButton(t), t.append(' <i class="fa fa-spinner fa-spin"></i>') } function enableFreelanceSaSubmitButton(e) { button = $("#freelance_sa_data_container").find("#" + e), removeSpinnerFromButton(button), button.removeAttr("disabled") } function removeSpinnerFromButton(e) { e.find(".fa-spinner").remove() } function displayEditBidForm(e) { var t = $("template#edit_bid__form:last-child").html(), i = e.data("confirm-text"); showGlobalModal({ title: e.text(), body: t, confirmText: i, confirmType: "success", confirmCallback: function (e) { injectBidAnswersValidation(); var t = $(document).find('form[data-scenario="editBid"]').get(0); t.length && hookBidFormValidation(t); var i = $(document).find('form[data-scenario="editBid"]'); i.trigger("submit"), "true" == i.attr("data-validated") && triggerModalAjaxSubmit() }, confirmData: { btn: e }, shownCallback: function () { "editDealCost" != e.data("action") && initDropZone(Mostaql.dropzoneConfig) } }) } function actionEditBidModal() { $(document).on("click", '[data-action="editBid"]', function (e) { e.preventDefault(), displayEditBidForm($(this)) }) } $(document).ready(function () { $("#freelance_sa_data_container").on("click", 'input[name="freelance_sa_registeration"]', function () { $(this).tab("show") }), $("#freelance_sa_data_container").on("click", "#freelance_sa_sync_submit", function (e) { e.preventDefault(), syncFreelanceSa($(this).data("type")) }), $("#freelance_sa_data_container").on("click", "#freelance_sa_non_sa_citizen_submit", function (e) { e.preventDefault(), setFreelanceSaNonSaCitizen() }) }), $(window).load(function () { $("#freelance_sa_data_container").find('input[name="freelance_sa_registeration"]:checked').tab("show") }), $(document).ready(function () { $('[data-action="purchase_extra_bids_package"]').on("click", function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: t.attr("confirm-title"), body: t.attr("confirm-text"), confirmText: t.text(), confirmType: "success", confirmCallback: function (e) { t.parent("form").submit(), globalModal.modal("hide") }, confirmData: { btn: t } }) }) }); var bootMessagesAdapter = function (e) { var t = $('[data-messages="loader"]'), i = $('[data-messages="counter"]'), n = $('[data-messages="collection"]'), s = $('[data-messages="container"]'), o = $('[name="voicemessage"]'), a = createFilterAdapter(); a.prototype.bindEvents = function () { var e = this; this.bindDefaultEvents(), e.interval = setInterval(function () { e.fire($(document)) }, e.config.activeInterval), $(window).on("blur focus", function (t) { e.adjustInterval(t.type) }) }, a.prototype.adjustInterval = function (e) { var t = this; if (t.config.intervalType !== e) { t.config.intervalType = e; var i = "blur" === e ? t.config.inactiveInterval : t.config.activeInterval; clearInterval(t.interval), t.interval = setInterval(function () { t.fire($(document)) }, i) } }, a.prototype.handleSuccess = function (e, t, i) { this.updateView(e, t), this.updateCounter(e, t) }, a.prototype.beforeRenderCollection = function (e) { s.removeClass("hide"), triggerLoadDelayedSrcImages(e.find("[data-delay-src]")) }, a.prototype.handleReset = function (e, t) { o.val("") }, a.prototype.updateCounter = function (e, t) { if (void 0 !== e.newMessagesCount) { var n = parseInt(e.newMessagesCount); i.attr("data-value", n).data("value", n).text(n), n > 0 ? i.removeClass("hide") : i.addClass("hide") } }; var r = new a(e, { loader: t, collection: n, silent: !0, live: !0 }); return r.boot(), r }, bootRepliesAdapter = function (e) { var t = $('[data-replies="collection"]'), i = createFilterAdapter(); i.prototype.setParams = function (e, t) { var i = $(document).find("[data-reload=true]").map(function () { return $(this).parents("div.msg , div.discussion-item").data("reply") }).get().join(); this.params = { after: this.config.lastLoaded, reload: i } }, i.prototype.bindEvents = function () { var e = this; this.bindDefaultEvents(), e.intervalMessage = setInterval(function () { e.fire($(document)) }, e.config.activeInterval), $(window).on("blur focus", function (t) { e.adjustInterval(t.type) }) }, i.prototype.adjustInterval = function (e) { var t = this; if (t.config.intervalType !== e) { t.config.intervalType = e; var i = "blur" === e ? t.config.inactiveInterval : t.config.activeInterval; "focus" === e && t.fire($(document)), clearInterval(t.intervalMessage), t.intervalMessage = setInterval(function () { t.fire($(document)) }, i) } }, i.prototype.renderItem = function (e, i, n) { addMessageReply(e, i, n, t), this.config.lastLoaded = n.id }, i.prototype.afterRenderCollection = function (e) { initAudioFilePlayer(), attachReloadDataAttribute(t) }, i.prototype.renderReloadCollection = function (e) { e && e.length && (e.forEach(function (e) { var i = $(e.rendered); t.find('[data-reply="' + e.id + '"]').replaceWith(i) }), this.beforeRenderCollection(t), this.renderCollection(t), this.afterRenderCollection(t)) }; var n = new i(e, { collection: t, silent: !0, live: !0, keepOldItems: !0 }); return n.boot(), n }; function addMessageReply(e, t, i, n) { void 0 !== n || (n = e); var s = n.find('[data-reply="' + i.id + '"]'); 0 != s.length && s.remove(), e.append(t), triggerLoadDelayedSrcImages(t.find("[data-delay-src]")), 0 == s.length && fadeHighlight(t) } function afterAddMessageAjaxRequest(e, t) { if (e.data) { var i = $('[data-replies="collection"]'), n = $(e.data.rendered), s = $('[data-container="voice-message-recorder"] audio'), o = $('input[name="voicemessage"]'); new Plyr(s).stop(), s.attr("src", ""), o.val("").change(), addMessageReply(i, n, e.data), Mostaql.repliesConfig.lastLoaded = e.data.id, disableRecorderPlayer() } void 0 !== dropZones.global && Dropzone.forElement('[data-ui="dropzone"]').removeAllFiles(!0), t.trigger("reset"), setTimeout(function () { initAudioFilePlayer() }, 2e3) } function afterAddNoteAjaxRequest(e, t) { e.data && (addNewNote($('[data-notes="collection"]'), $(e.data.rendered), e.data), toggleNotesEmptyResult()); void 0 !== dropZones.global && dropZones.global.removeAllFiles(!0), t.trigger("reset") } function afterEditNoteAjaxRequest(e, t) { t.remove(); var i = $(e.data.rendered), n = $("[data-note=" + e.data.id + "]"); n.html(i.html()), n.data("origin", i.html()), $('[data-type="note_form"]:last').show(), $('[data-notes="collection"] hr:last').show() } function addNewNote(e, t, i, n) { void 0 !== n || (n = e); var s = n.find('[data-note="' + i.id + '"]'); 0 != s.length && s.remove(), e.append(t) } function toggleNotesEmptyResult() { var e = $("[data-note]").length, t = $('[data-filer="empty-notes"]'); e ? t.hide() : t.show() } var bootPortfolioAdapter = function (e) { var t = $('[data-filter="pager"]'), i = $('[data-filter="loader"]'), n = $('[data-filter="form"]'), s = $('[data-filter="keyword"]'), o = $('[data-filter="skills"]'), a = $('[data-filter="collection"]'), r = $('[data-filter="empty"]'), l = $('[data-action="sort"]'), c = $('[data-filter="newness"]'), d = createFilterAdapter(); d.prototype.setParams = function (e, t) { this.params = { page: this.params.page, sort: this.params.sort, keyword: s.val().trim(), skills: o.val(), newness: c.val().trim() } }, d.prototype.getParams = function () { return this.params.page || this.config.page && (this.params.page = this.config.page), this.params.sort || (this.params.sort = l.data("initValue")), this.params }, d.prototype.handleReset = function (e, t) { this.params.page = 1, this.params.sort = this.config.defaults.sort, s.val(""), clearInputTags(o), clearInputTags(c), this.updateActiveSort() }, d.prototype.bindEvents = function () { var e = this; this.bindDefaultEvents(), $.each([s, o, c], function (t, i) { i.on("change", function (t) { e.fire($(this), t) }) }), l.on("click", "a", function (t) { t.preventDefault(); var i = $(this); e.params.sort = i.data("filterValue"), e.updateActiveSort(i), e.fire(i, t) }) }, d.prototype.renderEmptyState = function (e) { renderMasonryEmpty(this, a, r, e), $('[data-filer="empty-results"]').css("flex", 1) }, d.prototype.renderCollection = function (e) { renderMasonryCollection(this, a, e) }, d.prototype.afterRenderCollection = function (e) { updateBrowsingPageTitle() }, d.prototype.handleComplete = function (e, t) { }, d.prototype.handleError = function (e, t) { this.updateLoader(!1) }, d.prototype.updateActiveSort = function (e) { l.find("li").removeClass("active"), e || (e = l.find('[data-filter-value="' + this.params.sort + '"]')), e && e.length && e.parent("li").addClass("active") }; var h = new d(e, { pager: t, loader: i, keyword: s, form: n, collection: a, pushState: !0, infinite: !0 }); return h.boot(), h }, bootUserPortfolioAdapter = function (e) { var t = $('[data-filter="pager"]'), i = $('[data-filter="portfolioLoader"]'), n = $('[data-filter="portfolioCollection"]'), s = $('[data-filer="empty-results"]'), o = createFilterAdapter(); o.prototype.setParams = function (e, t) { this.params = { page: this.params.page } }, o.prototype.bindEvents = function () { var e = this; this.bindDefaultEvents(), e.config.booted ? i.remove() : (e.lastQuery = "init", $(window).load(function (t) { s.addClass("hide"), e.fire($(this), t) })) }, o.prototype.renderEmptyState = function (e) { renderMasonryEmpty(this, n, s, e) }, o.prototype.renderCollection = function (e) { renderMasonryCollection(this, n, e) }, o.prototype.handleComplete = function (e, t) { i.remove() }, o.prototype.handleError = function (e, t) { this.updateLoader(!1) }; var a = new o(e, { pager: t, loader: i, collection: n, infinite: !0 }); return a.boot(), a }; function renderMasonryCollection(e, t, i) { e.updateLoader(!0), e.renderEmptyState(!1), i.imagesLoaded(function () { var n = i.children(); t.append(n), e.flags.emptyCollection && layoutMasonry(t), e.updateLoader(!1) }) } function renderMasonryEmpty(e, t, i, n) { void 0 !== n || (n = !0), n ? (i.removeClass("hide"), e.updateLoader(!1), 0 === $('[data-filer="empty-results"]').length && (t.html(e.config.tmpEmpty), t.removeAttr("style"))) : i.addClass("hide") } function layoutMasonry(e) { } var bootFreelancersAdapter = function (e) { var t = $('[data-filter="pager"]'), i = $('[data-filter="loader"]'), n = $('[data-filter="form"]'), s = $('[data-filter="keyword"]'), o = $('[data-filter="category"]'), a = $('[data-filter="specialities"]'), r = $('[data-filter="skills"]'), l = $('[data-filter="titles"]'), c = $('[data-filter="country"]'), d = $('[data-filter="rating"]'), h = $('[data-filter="connected"]'), u = $('[data-filter="verified"]'), p = $('[data-filter="bid_me"]'), f = $('[data-filter="deal_with"]'), m = $('[data-filter="collection"]'), g = ($(e.tmpEmpty), $(e.tmpEmptyText), $('[data-filer="empty-results"]')), v = createFilterAdapter(); v.prototype.setParams = function (e, t) { var i = $('[data-filter="specialities"]:checked').map(function () { return $(this).val() }).get().join(","); this.params = { page: this.params.page, verified: u.is(":checked").toString(), keyword: s.val().trim(), category: o.val(), specialities: i, skills: r.val(), titles: l.val(), country: c.val(), rating: parseInt(d.val()), connected: h.is(":checked"), bid_me: p.is(":checked"), deal_with: f.is(":checked") } }, v.prototype.handleReset = function (e, t) { this.params.page = 1, s.val(""), clearInputTags(o), clearCheckbox(a), clearInputTags(c), clearInputTags(r), clearInputTags(l), clearRatingUI(d), clearRatingUI(h), clearRatingUI(u), h.attr("checked", !1), u.attr("checked", !1), p.attr("checked", !1), f.attr("checked", !1) }, v.prototype.bindEvents = function () { var e = this; this.bindDefaultEvents(), $.each([s, o, a, c, r, l, d, h, u, p, f], function (t, i) { i.on("change click switchChange.bootstrapSwitch", function (t) { e.fire($(this), t) }) }) }, v.prototype.renderEmptyState = function () { m.hide(), g.html(e.tmpEmptyText), g.show() }, v.prototype.beforeRenderCollection = function (e) { m.show(), g.hide(), triggerDataHref(e.find("[data-href]")), triggerSkillsLimit(e.find('[data-ui="skillsLimit"]')), triggerLoadDelayedSrcImages(e.find("[data-delay-src]")), e.find('[data-toggle="tooltip"]').tooltip({ container: "body" }) }, v.prototype.afterRenderCollection = function (e) { updateBrowsingPageTitle() }; var b = new v(e, { pager: t, loader: i, keyword: s, form: n, collection: m, pushState: !0 }); return b.boot(), b }, bootProjectsAdapter = function (e) { var t = $('[data-filter="pager"]'), i = $('[data-filter="loader"]'), n = $('[data-filter="form"]'), s = $('[data-filter="keyword"]'), o = $('[data-filter="category"]'), a = $('[data-filter="skills"]'), r = $('[data-filter="duration"]'), l = $('[data-filter="budgetMin"]'), c = $('[data-filter="budgetMax"]'), d = $('[data-filter="budgetRange"]'), h = $('[data-filter="sort"]'), u = $('[data-action="sort"]'), p = $('[data-filter="collection"]'), f = ($(e.tmpEmpty), e.tmpEmptyText), m = $('[data-filer="empty-results"]'), g = createFilterAdapter(); g.prototype.setParams = function (e, t) { var i = $('[data-filter="duration"]:checked').map(function () { return $(this).val() }).get().join(","), n = $('[data-filter="category"]:checked').map(function () { return $(this).val() }).get().join(","); this.params = { page: this.params.page, keyword: s.val().trim(), category: n, skills: a.val(), duration: i, budget_min: parseInt(l.val()), budget_max: parseInt(c.val()), sort: h.val() } }, g.prototype.handleReset = function (e, t) { this.params.page = 1, s.val(""), clearCheckbox(o), clearCheckbox(r), clearInputTags(a), l.val(l.data("min")), c.val(c.data("max")), d.val([l.data("min"), c.data("max")]) }, g.prototype.bindEvents = function () { var e = this; this.bindDefaultEvents(), u.on("click", "a", function (t) { t.preventDefault(); var i = $(this); e.params.sort = i.data("filterValue"), h.val(i.data("filterValue")), e.fire(i, t) }), $.each([s, o, a, r, d], function (t, i) { i.on("change", function (t) { e.fire($(this), t) }) }) }, g.prototype.renderEmptyState = function () { p.hide(), m.html(f), m.show() }, g.prototype.beforeRenderCollection = function (e) { p.show(), m.hide(), triggerDataHref(e.find("[data-href]")) }, g.prototype.afterRenderCollection = function (e) { $('[data-toggle="tooltip"]').tooltip(), updateBrowsingPageTitle() }, g.prototype.getStateUrl = function () { for (var e = this.getRelevantParams(!0), t = !1, i = !1, n = 0; n < e.length; ++n)"category" === e[n].key ? t = e[n].value : i = !0; if (t && !i) return this.config.url + "/" + t; var s = this.getQuery(!0); return this.config.url + (s ? "?" + s : "") }; var v = new g(e, { pager: t, loader: i, keyword: s, form: n, collection: p, pushState: !0 }); return v.boot(), v }, bootPaymentsAdapter = function (e) { var t = $('[data-filter="pager"]'), i = $('[data-filter="loader"]'), n = $('[data-filter="form"]'), s = $('[data-filter="start"]'), o = $('[data-filter="end"]'), a = $('[data-filter="types"]'), r = $('[data-action="sort"]'), l = $('[data-filter="paymentsCollection"]'), c = $('[data-filter="teams"]'), d = $('[data-filter="members"]'), h = $('[data-filter="freelancers"]'), u = $('[data-filter="organizations"]'), p = $(e.tmpEmpty), f = createFilterAdapter(); f.prototype.setParams = function (e, t) { var i = checkedOrganizations = ""; $('[data-filter="types"]:checked').each(function () { i += $(this).val() + "," }); var n = ""; $('[data-filter="teams"]:checked').each(function () { n += $(this).val() + "," }), $('[data-filter="organizations"]:checked').each(function () { checkedOrganizations += $(this).val() + "," }), this.params = { page: this.params.page, teams: removeLastComma(n), types: removeLastComma(i), start: s.val(), end: o.val(), organizations: removeLastComma(checkedOrganizations), members: d.val(), freelancers: h.val(), sort: r.val() } }, f.prototype.handleReset = function (e, t) { this.params.page = 1, s.val(""), o.val(""), clearCheckbox(a), clearCheckbox(u), clearInputTags(c), clearInputTags(d), clearInputTags(h) }, f.prototype.bindEvents = function () { var e = this; this.bindDefaultEvents(), $('[data-action="sort"] li a').on("click", function (t) { t.preventDefault(); var i = $(this); i.parents("ul").find("a").removeClass("active"), i.addClass("active"), r.val($(this).data("filterValue")), e.fire(i, t) }), $.each([r, c, d, h, u, a, o, s], function (t, i) { i.on("change click switchChange.bootstrapSwitch", function (t) { e.fire($(this), t) }) }) }, f.prototype.renderEmptyState = function () { l.append(p) }, f.prototype.beforeRenderCollection = function (e) { triggerDataHref(e.find("[data-href]")), triggerLoadDelayedSrcImages(e.find("[data-delay-src]")), e.find('[data-toggle="tooltip"]').tooltip() }; var m = new f(e, { pager: t, loader: i, sort: r, start: s, end: o, form: n, collection: l, pushState: !0 }); return m.boot(), m }, bootProfileProjectsAdapter = function (e) { var t = $('[data-filter="projectsPager"]'), i = $('[data-filter="projectsLoader"]'), n = $('[data-filter="projectsForm"]'), s = $('[data-filter="projectsStatus"]'), o = $('[data-filter="projectsOrder"]'), a = $('[data-filter="projectsCollection"]'), r = $(e.tmpEmpty), l = !0, c = createFilterAdapter(); c.prototype.setParams = function (e, t) { this.params = { page: this.params.page, status: s.val(), order: o.val() } }, c.prototype.bindEvents = function () { var e = this; this.bindDefaultEvents(), $('[data-action="projectsOrder"] li a , [data-action="projectsStatus"] li a').on("click", function (t) { t.preventDefault(); var i = $(this); i.parents("ul").find("a").removeClass("active"), i.addClass("active"), s.val($('[data-action="projectsStatus"] a.active').data("filterValue")), o.val($('[data-action="projectsOrder"]  a.active').data("filterValue")), e.params.status = s.val(), e.params.order = o.val(), e.fire(i, t) }), $.each([s, o], function (t, i) { i.on("change", function (t) { e.fire($(this), t) }) }), e.config.booted || $(window).load(function (t) { e.fire($(this), t) }) }, c.prototype.afterRenderCollection = function (e) { l || scrollToElement($("#projects"), 500, -62), l = !1 }, c.prototype.renderEmptyState = function () { a.append(r) }; var d = new c(e, { pager: t, loader: i, form: n, collection: a }); return d.boot(), d }, bootProfileBidsAdapter = function (e) { var t = $('[data-filter="bidsPager"]'), i = $('[data-filter="bidsLoader"]'), n = $('[data-filter="bidsForm"]'), s = $('[data-filter="bidsStatus"]'), o = $('[data-filter="bidsOrder"]'), a = $('[data-filter="bidsCollection"]'), r = $(e.tmpEmpty), l = !0, c = createFilterAdapter(); c.prototype.setParams = function (e, t) { this.params = { page: this.params.page, status: s.val(), order: o.val() } }, c.prototype.bindEvents = function () { var e = this; this.bindDefaultEvents(), $('[data-action="bidsOrder"] li a , [data-action="bidsStatus"] li a').on("click", function (t) { t.preventDefault(); var i = $(this); i.parents("ul").find("a").removeClass("active"), i.addClass("active"), s.val($('[data-action="bidsStatus"] a.active').data("filterValue")), o.val($('[data-action="bidsOrder"]  a.active').data("filterValue")), e.params.status = s.val(), e.params.order = o.val(), e.fire(i, t) }), e.config.booted || $(window).load(function (t) { e.fire($(this), t) }) }, c.prototype.afterRenderCollection = function (e) { l || scrollToElement($("#bids"), 500, -62), l = !1 }, c.prototype.renderEmptyState = function () { a.append(r) }; var d = new c(e, { pager: t, loader: i, form: n, collection: a }); return d.boot(), d }, bootProfileReviewsAdapter = function (e) { var t = $('[data-filter="reviewsPager"]'), i = $('[data-filter="reviewsLoader"]'), n = $('[data-filter="reviewsForm"]'), s = $('[data-filter="reviewsOrder"]'), o = $('[data-filter="reviewsCollection"]'), a = $(e.tmpEmpty), r = !(-1 != window.location.toString().indexOf("reviews")), l = createFilterAdapter(); l.prototype.setParams = function (e, t) { this.params = { page: this.params.page, order: s.val() } }, l.prototype.bindEvents = function () { var e = this; this.bindDefaultEvents(), $('[data-action="reviewsOrder"] li a').on("click", function (t) { t.preventDefault(); var i = $(this); i.parents("ul").find("a").removeClass("active"), i.addClass("active"), s.val($(this).data("filterValue")), e.params.order = s.val(), e.fire(i, t) }), e.config.booted || $(window).load(function (t) { e.fire($(this), t) }) }, l.prototype.beforeRenderCollection = function (e) { triggerLoadDelayedSrcImages(e.find("[data-delay-src]")) }, l.prototype.afterRenderCollection = function (e) { r || scrollToElement($("#reviews"), 500, -62), r = !1 }, l.prototype.renderEmptyState = function () { o.append(a) }; var c = new l(e, { pager: t, loader: i, form: n, collection: o }); return c.boot(), c }, bootProjectBidsAdapter = function (e) { var t = $('[data-filter="bidsPager"]'), i = $('[data-filter="bidsLoader"]'), n = $('[data-filter="bidsForm"]'), s = $('[data-filter="bidsSort"]'), o = $('[data-filter="bidsCollection"]'), a = $(e.tmpEmpty), r = createFilterAdapter(); r.prototype.setParams = function (e, t) { this.params = { page: this.params.page, sort: s.val() } }, r.prototype.bindEvents = function () { var e = this; this.bindDefaultEvents(), $('[data-action="bidsSort"] li a').on("click", function (t) { t.preventDefault(); var i = $(this); i.parents("ul").find("a").removeClass("active"), i.addClass("active"), s.val($(this).data("filterValue")), e.fire(i, t) }), $.each([s], function (t, i) { i.on("change", function (t) { e.fire($(this), t) }) }) }, r.prototype.beforeRenderCollection = function (e) { triggerLoadDelayedSrcImages(e.find("[data-delay-src]")), e.find('[data-toggle="tooltip"]').tooltip(), $forms = e.find('form[data-scenario="editBid"]'), $forms.length && hookBidFormValidation($forms.get(0)), this.$ratingInputs = e.find('[data-ui="bs-ratings"]') }, r.prototype.afterRenderCollection = function (e) { this.$ratingInputs.rating(), !1 }, r.prototype.renderEmptyState = function () { o.append(a) }; var l = new r(e, { pager: t, loader: i, form: n, collection: o, keepFirstTime: Mostaql.linkedBid, hold: !0 }); return l.boot(), l }; function updateBidView(e) { if (e.bid) { var t = e.bid, i = $('[data-bid-item="' + t.id + '"]'); i.length && ($("template#edit_bid__form").remove(), i.fadeOut(250, function () { var e = $(t.rendered); i.replaceWith(e), triggerLoadDelayedSrcImages(e.find("[data-delay-src]")), e.find('[data-ui="bs-ratings"]').rating(), $("div#editBid").attr("data-files-count", t.files_count) })) } } var SkillsAdapter = function (e, t) { this.input = e, this.config = t, this.data = {}, this.xhrList = null, this.xhrTree = null }; function initSkillsController() { if (Mostaql.skillsChecklists) for (var e in Mostaql.skillsChecklists) { var t = $("#" + e); if (t.length) { var i = Mostaql.skillsChecklists[e]; new SkillsAdapter(t, i).init() } } } SkillsAdapter.prototype.init = function () { var e = this; if (e.data = { count: e.config.count, parsed: null, skillsList: null, skillsTree: null }, e.initSelectize(), e.counters = $('[data-skills-counter="' + this.input.attr("id") + '"]'), e.config.checklist && (e.checklistButton = $("#" + e.config.checklist), e.checklistButton.click(function (t) { t.preventDefault(), e.renderSkillsTree() })), e.config.sync) { var t = $('input[data-skills-item][data-tagsinput="' + e.input.attr("id") + '"]'); t.length && (t.prop("checked", !1), t.change(function () { e.handleCheckEvent($(this)) })) } e.getSkillsList(function () { addOptionsToInput(e.input, e.data.skillsList), e.config.selected.length && e.addSkills(e.config.selected, !0) }) }, SkillsAdapter.prototype.initSelectize = function (e) { var t = this; this.input.selectize({ diacritics: !0, persist: !0, plugins: { remove_button: { label: '<i class="fa fa-times"></i>', title: "", className: "remove" } }, create: !!t.config.allow_suggest && function (e, t) { var i = "suggested_skill_" + e; t({ id: i, name: e, type: "new" }), $("#suggested__skills_notice").show(), $("#suggested__skills_container").prepend('<input type="text" id="' + i + '"  name="suggested_skill[]" value="' + e + '" />') }, maxItems: t.config.max ? t.config.max : null, maxOptions: 50, valueField: t.config.valueField ? t.config.valueField : "id", labelField: "name", searchField: ["slug", "arabic_name", "english_name", "description", "alternative"], options: e, onItemAdd(e, t) { this.items.length == this.settings.maxItems && $('[data-action="skillsChecklist"]').attr("disabled", !0) }, onItemRemove(e) { this.items.length < this.settings.maxItems && $('[data-action="skillsChecklist"]').attr("disabled", !1) }, render: { item: function (e, t) { return '<span class="tag ' + (e.type ? "bg-greensurfie" : "bg-bluecurious") + ' "><bdi>' + (e.name ? '<span class="name">' + t(e.name) + "</span>" : "") + "</bdi></span>" }, option: function (e, t) { return '<div class="option"><span class="name">' + t(e.name) + "</span></div>" }, option_create: function (e, t) { return t(e.input).length < 3 ? "" : '<div class="create  bg-gray-darker">  : <strong>' + t(e.input) + "</strong>&hellip;</div>" } }, load: function (e, i) { if (e.length >= Mostaql.config.selectizeMaxQuerySize) return i(); $.ajax({ url: t.config.listUrl, type: "GET", data: { query: e, page_limit: 10 }, error: function () { i() }, success: function (e) { i(e.data) } }) } }), this.selectize = getSelectize(this.input), this.selectize.clearOptions(), this.selectize.on("item_add", function (e, i) { t.handleSkillAdded(e) }), this.selectize.on("item_remove", function (e, i) { t.handleSkillRemoved(e) }) }, SkillsAdapter.prototype.checkItem = function (e) { var t = $('input[data-tagsinput="' + this.input.attr("id") + '"][data-skills-item="' + e + '"]'); t.length && !t.prop("checked") && (this.getRest() > 0 ? (t.prop("checked", !0), t.trigger("change")) : (this.removeSkill(e), this.showMaxError())) }, SkillsAdapter.prototype.unCheckItem = function (e) { var t = $('[data-tagsinput="' + this.input.attr("id") + '"][data-skills-item="' + e + '"]'); t.length && (t.prop("checked", !1), t.trigger("change")) }, SkillsAdapter.prototype.handleCheckEvent = function (e) { var t = e.data("skillsItem"); e.prop("checked") ? this.getRest() <= 0 ? (e.prop("checked", !1), e.trigger("change"), this.showMaxError()) : this.addSkill(t) : this.removeSkill(t) }, SkillsAdapter.prototype.removeSkill = function (e, t) { removeTagFromInput(this.input, e, t) }, SkillsAdapter.prototype.addSkill = function (e, t) { addTagToInput(this.input, e, t) }, SkillsAdapter.prototype.addSkills = function (e, t) { addTagsToInput(this.input, e, t) }, SkillsAdapter.prototype.handleSkillAdded = function (e) { this.config.sync && this.checkItem(e), this.updateCounters() }, SkillsAdapter.prototype.handleSkillRemoved = function (e) { if (e.length && e.startsWith("suggested_skill_")) return $("#" + e).remove(); this.config.sync && this.unCheckItem(e), this.updateCounters() }, SkillsAdapter.prototype.showMaxError = function () { addFlashMessage("      (" + this.config.max + " )", "warning", 5e3) }, SkillsAdapter.prototype.getRest = function () { return this.config.max > 0 ? this.config.max - this.data.count : 99 }, SkillsAdapter.prototype.getSkill = function (e) { var t = this.filterSkills([e]); if (t.length) return t.pop() }, SkillsAdapter.prototype.filterSkills = function (e) { for (var t in e) e[t] = parseInt(e[t]); return $.grep(this.data.skillsList, function (t, i) { return void 0 !== t.id && $.inArray(parseInt(t.id), e) > -1 }) }, SkillsAdapter.prototype.updateCounters = function () { this.data.count = this.selectize.items.length; var e = this.getRest(); this.counters.data("value", e).attr("data-value", e).text(e) }, SkillsAdapter.prototype.getSkillsList = function (e, t) { var i = this; t || !this.data.skillsList ? this.xhrList = $.ajax({ url: this.config.listUrl, cache: !0, type: "GET", dataType: "json", beforeSend: function (e) { }, success: function (t) { i.data.skillsList = t, e() }, error: function (e, t, i) { "abort" != e.statusText && addFailMessage(e) } }) : e() }, SkillsAdapter.prototype.getSkillsTree = function (e, t) { var i = this; t || !this.data.skillsTree ? this.xhrTree = $.ajax({ url: this.config.treeUrl, cache: !0, type: "GET", dataType: "json", beforeSend: function (e) { }, success: function (t) { i.data.skillsTree = t, e() }, error: function (e, t, i) { "abort" != e.statusText && addFailMessage(e) } }) : e() }, SkillsAdapter.prototype.renderSkillsTree = function () { var e = this; if (e.config.parsed) e.showChecklistModal(); else { var t = this.checklistButton.find(".js-loader"); t.removeClass("hide"), e.getSkillsList(function () { e.getSkillsTree(function () { e.parseSkillsTree(), e.showChecklistModal(), t.addClass("hide"), e.checklistLimits() }) }) } }, SkillsAdapter.prototype.parseSkillsTree = function () { var e = $(this.config.templates.checklist); for (var t in this.data.skillsTree) { var i = this.data.skillsTree[t]; if (void 0 !== i.skills && i.skills.length) { var n = $(this.config.templates.category); n.find("[data-category-title]").text(i.title), n.find("[data-category-toggle]").attr("href", "#category-" + i.slug), n.find("[data-category-panel]").attr("id", "category-" + i.slug); var s = n.find("[data-category-skills]"), o = i.skills; for (var a in o) { var r = o[a], l = $(this.config.templates.skill); l.find("[data-skill-checkbox]").attr("name", "skill[" + r.id + "]").attr("id", "skill-" + r.slug).attr("data-skill-id", r.id), l.find("[data-skill-title]").text(r.name), s.append(l) } e.append(n) } } this.data.parsed = e }, SkillsAdapter.prototype.showChecklistModal = function () { var e = this, t = this.input.val().split(","); e.data.parsed.find("input[data-skill-checkbox]").each(function () { $(this).prop("checked", $.inArray($(this).attr("data-skill-id"), t) > -1) }), showGlobalModal({ title: e.config.title, body: e.data.parsed, cancelText: "", confirmText: "", confirmType: "success", confirmCallback: function (t) { globalModal.modal("hide"), e.syncCheckedSkills() } }) }, SkillsAdapter.prototype.clearSelectedSkills = function (e) { clearInputTags(this.input, e) }, SkillsAdapter.prototype.syncCheckedSkills = function () { var e = []; this.clearSelectedSkills(), this.data.parsed.find("input:checked").each(function () { e.push(parseInt($(this).data("skillId"))) }), e.length && this.addSkills(e) }, SkillsAdapter.prototype.checklistLimits = function () { $("[data-skill-checkbox]").click(() => { $("[data-skill-checkbox]:checked").length >= this.config.max ? ($("[data-skill-checkbox]").not(":checked").attr("disabled", !0), this.showMaxError()) : $("[data-skill-checkbox]").not(":checked").removeAttr("disabled") }) }; var UsersAdapter = function (e, t) { this.input = e, this.config = t, this.data = {}, this.xhrList = null, this.xhrTree = null }; function initUsersController() { if (Mostaql.usersChecklists) for (var e in Mostaql.usersChecklists) { var t = $("#" + e); if (t.length) { var i = Mostaql.usersChecklists[e]; new UsersAdapter(t, i).init() } } } function initUserItemController(e) { if (e.length && !e.hasClass("selectized")) { var t = Mostaql.usersChecklists.users__list; new UsersAdapter(e, t).init() } } UsersAdapter.prototype.init = function () { var e = this; if (e.data = { count: e.config.count, parsed: null, usersList: null, usersTree: null }, e.initSelectize(), e.counters = $('[data-users-counter="' + this.input.attr("id") + '"]'), e.config.checklist && (e.checklistButton = $("#" + e.config.checklist), e.checklistButton.click(function (t) { t.preventDefault(), e.renderUsersTree() })), e.config.sync) { var t = $('input[data-users-item][data-tagsinput="' + e.input.attr("id") + '"]'); t.length && (t.prop("checked", !1), t.change(function () { e.handleCheckEvent($(this)) })) } e.getUsersList(function () { addOptionsToInput(e.input, e.data.usersList), e.config.selected.length && (e.updateCounters(), e.addUsers(e.config.selected, !0)) }) }, UsersAdapter.prototype.initSelectize = function (e) { var t = this; this.input.selectize({ diacritics: !0, persist: !0, plugins: { remove_button: { label: '<i class="fa fa-times"></i>', title: "", className: "remove" } }, maxItems: t.config.max ? t.config.max : null, valueField: "id", labelField: "name", searchField: ["username", "name", "email"], options: e, render: { item: function (e, t) { return '<span class="tag ' + (e.type ? "bg-greensurfie" : "bg-bluecurious") + ' "><bdi>' + (e.name ? '<span class="name">' + t(e.name) + "</span>" : "") + "</bdi></span>" }, option: function (e, i) { return t.config.with_photo ? '<div class="option"><div class="image"><img class="hsoub-list-item-img"  width="42" height="42" src="' + e.photoUrl + '" /></div><div class="hsoub-list-item-content"><span class="name">' + i(e.name) + '</span><p class="username">' + i(e.username) + "</p></div></div>" : '<div class="option"><span class="name">' + i(e.name) + "</span></div>" } }, load: function (e, i) { e.length >= 4 && t.config.searchUrl && $.ajax({ url: t.config.searchUrl, type: "GET", data: { query: e, page_limit: 10 }, error: function () { i() }, success: function (e) { i(e.data) } }) } }), this.selectize = getSelectize(this.input), this.selectize.clearOptions(), this.selectize.on("item_add", function (e, i) { t.handleUserAdded(e) }), this.selectize.on("item_remove", function (e, i) { t.handleUserRemoved(e) }) }, UsersAdapter.prototype.checkItem = function (e) { var t = $('input[data-tagsinput="' + this.input.attr("id") + '"][data-users-item="' + e + '"]'); t.length && !t.prop("checked") && (this.getRest() > 0 ? (t.prop("checked", !0), t.trigger("change")) : (this.removeUser(e), this.showMaxError())) }, UsersAdapter.prototype.unCheckItem = function (e) { var t = $('[data-tagsinput="' + this.input.attr("id") + '"][data-users-item="' + e + '"]'); t.length && (t.prop("checked", !1), t.trigger("change")) }, UsersAdapter.prototype.handleCheckEvent = function (e) { var t = e.data("usersItem"); e.prop("checked") ? this.getRest() <= 0 ? (e.prop("checked", !1), e.trigger("change"), this.showMaxError()) : this.addUser(t) : this.removeUser(t) }, UsersAdapter.prototype.removeUser = function (e, t) { removeTagFromInput(this.input, e, t) }, UsersAdapter.prototype.addUser = function (e, t) { addTagToInput(this.input, e, t) }, UsersAdapter.prototype.addUsers = function (e, t) { addTagsToInput(this.input, e, t) }, UsersAdapter.prototype.handleUserAdded = function (e) { this.config.sync && this.checkItem(e), this.updateCounters() }, UsersAdapter.prototype.handleUserRemoved = function (e) { if (e.length && e.startsWith("suggested_user_")) return $("#" + e).remove(); this.config.sync && this.unCheckItem(e), this.updateCounters() }, UsersAdapter.prototype.showMaxError = function () { addFlashMessage("      (" + this.config.max + " )", "warning", 5e3) }, UsersAdapter.prototype.getRest = function () { return this.config.max > 0 ? this.config.max - this.data.count : 99 }, UsersAdapter.prototype.getUser = function (e) { var t = this.filterUsers([e]); if (t.length) return t.pop() }, UsersAdapter.prototype.filterUsers = function (e) { for (var t in e) e[t] = parseInt(e[t]); return $.grep(this.data.usersList, function (t, i) { return void 0 !== t.username && $.inArray(parseInt(t.username), e) > -1 }) }, UsersAdapter.prototype.updateCounters = function () { this.data.count = this.selectize.items.length; var e = this.getRest(); this.counters.data("value", e).attr("data-value", e).text(e) }, UsersAdapter.prototype.getUsersList = function (e, t) { var i = this; t || !this.data.usersList ? this.xhrList = $.ajax({ url: this.config.listUrl, cache: !0, type: "GET", dataType: "json", beforeSend: function (e) { }, success: function (t) { i.data.usersList = t, e() }, error: function (e, t, i) { "abort" != e.statusText && addFailMessage(e) } }) : e() }, UsersAdapter.prototype.renderUsersTree = function () { this.config.parsed ? this.showChecklistModal() : this.checklistButton.find(".js-loader").removeClass("hide") }, UsersAdapter.prototype.clearSelectedUsers = function (e) { clearInputTags(this.input, e) }, UsersAdapter.prototype.syncCheckedUsers = function () { var e = []; this.clearSelectedUsers(), this.data.parsed.find("input:checked").each(function () { e.push(parseInt($(this).data("userId"))) }), e.length && this.addUsers(e) }, $(document).ready(function () { $('input[data-ui="freelancersPokeInput"]').selectize({ plugins: ["remove_button"], valueField: "username", labelField: "username", searchField: "username", options: ["username", "card"], maxItems: void 0 === Mostaql.freelancsersPoke ? 8 : Mostaql.freelancsersPoke.max, sync: !0, create: !1, score: function () { return function () { return 1 } }, openOnFocus: !1, closeAfterSelect: !0, render: { option: function (e, t) { return '<div class=" media mrg--bs">  <img src="' + e.image + '" class="media-object uavatar uavatar--42 img-circle pull-right" alt="" width="56" height="56">        <div class="media-body">            <h5 class="from mrg--an">                <bdi> ' + e.full_name + '</bdi>            </h5>            <div class="text-zeta">' + e.username + " </div>        </div>    </div>" }, item: function (e, t) { return $('div[data-filter="collection"]').append(e.card), '<span class="tag  bg-bluecurious "><bdi>' + (e.username ? '<span class="name">' + t(e.username) + "</span>" : "") + "</bdi></span>" } }, load: function (e, t) { if (!e.length) return t(); $.ajax({ url: Mostaql.freelancsersPoke.route, type: "get", data: { username: e }, error: function () { console.log("error") }, success: function (e) { console.log(e), t(e) } }) }, onItemRemove: function (e) { $('div[data-username="' + e + '"]').remove() } }) }); var bootDashboardBidsAdapter = function (e) { var t = $('[data-filter="pager"]'), i = $('[data-filter="loader"]'), n = $('[data-filter="form"]'), s = $('[data-filter="keyword"]'), o = $('[data-filter="status"]'), a = $('[data-filter="teams"]'), r = $('[data-filter="organizations"]'), l = $('[data-filter="members"]'), c = $('[data-filter="users"]'), d = $('[data-filter="freelancers"]'), h = $('[data-filter="sort"]'), u = $('[data-action="sort"]'), p = $('[data-filter="collection"]'), f = ($(e.tmpEmpty), $(e.tmpEmptyText)), m = $('[data-filer="empty-results"]'), g = createFilterAdapter(); g.prototype.setParams = function (e, t) { var i = checkedTeams = checkedOrganizations = ""; $('[data-filter="status"]:checked').each(function () { i += $(this).val() + "," }), $('[data-filter="teams"]:checked').each(function () { checkedTeams += $(this).val() + "," }), $('[data-filter="organizations"]:checked').each(function () { checkedOrganizations += $(this).val() + "," }), this.params = { page: this.params.page, keyword: s.val().trim(), status: removeLastComma(i), teams: removeLastComma(checkedTeams), organizations: removeLastComma(checkedOrganizations), users: c.val(), freelancers: d.val(), members: l.val(), sort: h.val() } }, g.prototype.handleReset = function (e, t) { this.params.page = 1, s.val(""), clearCheckbox(o), clearInputTags(c), clearInputTags(a), clearInputTags(l), clearInputTags(r), clearInputTags(d) }, g.prototype.bindEvents = function () { var e = this; this.bindDefaultEvents(), u.on("click", "a", function (t) { t.preventDefault(); var i = $(this); e.params.sort = i.data("filterValue"), h.val(i.data("filterValue")), e.fire(i, t) }), $.each([o, s, c, a, l, r, d], function (t, i) { i.on("change", function (t) { e.fire($(this), t) }) }) }, g.prototype.renderEmptyState = function () { p.hide(), m.html(f), m.show() }, g.prototype.beforeRenderCollection = function (e) { p.show(), m.hide(), triggerDataHref(e.find("[data-href]")) }, g.prototype.afterRenderCollection = function (e) { $('[data-toggle="tooltip"]').tooltip() }; var v = new g(e, { pager: t, loader: i, keyword: s, status: o, team: a, form: n, collection: p, pushState: !0 }); return v.boot(), v }, dashboardMessageFilterConfig = function (e) { var t = $('[data-filter="pager"]'), i = $('[data-filter="loader"]'), n = $('[data-filter="form"]'), s = $('[data-filter="keyword"]'), o = $('[data-filter="status"]'), a = $('[data-filter="users"]'), r = $('[data-filter="members"]'), l = $('[data-filter="organizations"]'), c = $('[data-filter="freelancers"]'), d = $('[data-filter="teams"]'), h = $('[data-filter="sort"]'), u = $('[data-action="sort"]'), p = $('[data-filter="collection"]'), f = $(e.tmpEmpty), m = createFilterAdapter(); m.prototype.setParams = function (e, t) { var i = $('[data-filter="status"]:checked').map(function () { return $(this).val() }).get().join(","); checkedTeams = checkedOrganizations = ""; $('[data-filter="teams"]:checked').each(function () { checkedTeams += $(this).val() + "," }), $('[data-filter="organizations"]:checked').each(function () { checkedOrganizations += $(this).val() + "," }), this.params = { page: this.params.page, keyword: s.val().trim(), status: i, users: a.val(), members: r.val(), freelancers: c.val(), teams: removeLastComma(checkedTeams), organizations: removeLastComma(checkedOrganizations), sort: h.val() } }, m.prototype.handleReset = function (e, t) { this.params.page = 1, s.val(""), clearInputTags(a), clearInputTags(r), clearInputTags(c), clearInputTags(d), clearInputTags(l) }, m.prototype.bindEvents = function () { var e = this; this.bindDefaultEvents(), u.on("click", "a", function (t) { t.preventDefault(); var i = $(this); e.params.sort = i.data("filterValue"), h.val(i.data("filterValue")), e.fire(i, t) }), $.each([a, r, c, d, l], function (t, i) { i.on("change", function (t) { e.fire($(this), t) }) }), $.each([o, s], function (t, i) { i.on("change", function (t) { e.fire($(this), t) }) }) }, m.prototype.renderEmptyState = function () { p.append(f) }, m.prototype.beforeRenderCollection = function (e) { triggerDataHref(e.find("[data-href]")) }, m.prototype.afterRenderCollection = function (e) { $('[data-toggle="tooltip"]').tooltip() }; var g = new m(e, { pager: t, loader: i, keyword: s, form: n, collection: p, pushState: !0 }); return g.boot(), g }, bootOrganizationMembersAdapter = function (e) { var t = $('[data-filter="pager"]'), i = $('[data-filter="loader"]'), n = $('[data-filter="membersForm"]'), s = $('[data-filter="keyword"]'), o = $('[data-filter="teams"]'), a = $('[data-filter="titles"]'), r = $('[data-filter="collection"]'), l = $('[data-filter="connected"]'), c = $('[data-filter="verified"]'), d = $('[data-filter="rating"]'), h = $('[data-filter="category"]'), u = $('[data-filter="specialities"]'), p = $('[data-filter="skills"]'), f = $('[data-filter="country"]'), m = $('[data-filter="members"]'), g = ($(e.tmpEmpty), $('[data-filer="empty-results"]')), v = createFilterAdapter(); v.prototype.setParams = function (e, t) { checkedTeams = "", $('[data-filter="teams"]:checked').each(function () { checkedTeams += $(this).val() + "," }); var i = $('[data-filter="specialities"]:checked').map(function () { return $(this).val() }).get().join(","); this.params = { page: this.params.page, keyword: s.val().trim(), teams: removeLastComma(checkedTeams), titles: a.val(), skills: p.val(), country: f.val(), members: m.val(), speciality: i, rating: parseInt(d.val()), connected: l.is(":checked"), verified: c.is(":checked").toString(), sort: this.params.sort } }, v.prototype.bindEvents = function () { var e = this; this.bindDefaultEvents(), $.each([s, o, h, u, f, m, p, a, d, l, c], function (t, i) { i.on("change click switchChange.bootstrapSwitch", function (t) { e.fire($(this), t) }) }) }, v.prototype.handleReset = function (e, t) { this.params.page = 1, s.val(""), clearInputTags(o), clearCheckbox(u), clearInputTags(f), clearInputTags(p), clearInputTags(a), clearInputTags(m), clearRatingUI(d), l.attr("checked", !1), c.attr("checked", !1) }, v.prototype.renderEmptyState = function () { r.hide(), g.show() }, v.prototype.beforeRenderCollection = function (e) { r.show(), g.hide() }; var b = new v(e, { pager: t, loader: i, form: n, collection: r, pushState: !0 }); return b.boot(), b }; function filterTitle() { if ($input = $('[data-filter="titles"]'), $input.length) { $inputValues = $('[data-action="titles_values"]'); $input.selectize({ plugins: { remove_button: { label: '<i class="fa fa-times"></i>', title: "", className: "remove" } }, maxItems: 10, valueField: "slug", labelField: "name", searchField: ["name", "name_ar", "name_en", "keywords", "description", "slug"], fields: ["name", "name_ar", "name_en", "keywords", "description", "score", "slug"], options: [], score: function (e) { return function (e) { return e.score + 1 } }, onItemRemove(e) { this.items.length < this.settings.maxItems && $inputValues.attr("disabled", !1) }, render: { item: function (e, t) { return '<span class="tag ' + (e.type ? "bg-greensurfie" : "bg-bluecurious") + ' "><bdi>' + (e.name ? '<span class="name">' + t(e.name) + "</span>" : "") + "</bdi></span>" }, option: function (e, t) { return '<div class="option"><span class="name">' + t(e.name) + "</span></div>" } }, load: function (e, t) { if (e.length >= Mostaql.config.selectizeMaxQuerySize) return t(); var i = this; $.ajax({ url: Mostaql.jobtitles.route, type: "POST", data: { query: e, page_limit: 10 }, error: function () { t() }, success: function (e) { i.renderCache = {}, i.clearOptions(), i.refreshOptions(!0), t(e.data) } }) } }) } } function autoCompleteJobTitlesInput() { var e = { serviceUrl: Mostaql.jobtitles.route, dataType: "json", minChars: 0, type: "POST", transformResult: function (e) { return { suggestions: $.map(e.data, function (e) { return { value: e.name, data: e.keywords, id: e.id } }) } }, onSelect: function (e) { $('input[data-type="job_title_id"]').val(e.id), $('input[data-type="job_title_id"]').change() }, lookupFilter: function (e, t, i) { var n = e.data || "", s = e.value || ""; return i = i.replace(/\s+/g, " ").trim(), 0 == n.toLowerCase().trim().indexOf(i) || 0 == n.indexOf(i) || 0 == s.toLowerCase().trim().indexOf(i) }, onSearchStart: function () { $('input[data-type="job_title_id"]').val(""), $('input[data-type="job_title_id"]').change() } }; $('[data-select="job_title"]').devbridgeAutocomplete(e) } $(document).ready(function () { $('[data-select="job_title"]').length && autoCompleteJobTitlesInput(), $('[data-filter="titles"]').length && filterTitle() }), function (e, t) { "use strict"; "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? module.exports = t() : e.Lang = t() }(this, function () { "use strict"; function e(e) { return "-Inf" === e ? -1 / 0 : "+Inf" === e || "Inf" === e || "*" === e ? 1 / 0 : parseInt(e, 10) } var t = /^({\s*(\-?\d+(\.\d+)?[\s*,\s*\-?\d+(\.\d+)?]*)\s*})|([\[\]])\s*(-Inf|\*|\-?\d+(\.\d+)?)\s*,\s*(\+?Inf|\*|\-?\d+(\.\d+)?)\s*([\[\]])$/, i = /({\s*(\-?\d+(\.\d+)?[\s*,\s*\-?\d+(\.\d+)?]*)\s*})|([\[\]])\s*(-Inf|\*|\-?\d+(\.\d+)?)\s*,\s*(\+?Inf|\*|\-?\d+(\.\d+)?)\s*([\[\]])/, n = "en", s = function (e) { e = e || {}, this.locale = e.locale || function () { if ("undefined" != typeof document && document.documentElement) return document.documentElement.lang }() || n, this.fallback = e.fallback, this.messages = e.messages }; return s.prototype.setMessages = function (e) { this.messages = e }, s.prototype.getLocale = function () { return this.locale || this.fallback }, s.prototype.setLocale = function (e) { this.locale = e }, s.prototype.getFallback = function () { return this.fallback }, s.prototype.setFallback = function (e) { this.fallback = e }, s.prototype.has = function (e, t) { return !("string" != typeof e || !this.messages) && null !== this._getMessage(e, t) }, s.prototype.get = function (e, t, i) { if (!this.has(e, i)) return e; var n = this._getMessage(e, i); return null === n ? e : (t && (n = this._applyReplacements(n, t)), n) }, s.prototype.trans = function (e, t) { return this.get(e, t) }, s.prototype.choice = function (e, t, n, s) { (n = void 0 !== n ? n : {}).count = t; var o = this.get(e, n, s); if (null == o) return o; for (var a = o.split("|"), r = [], l = 0; l < a.length; l++)if (a[l] = a[l].trim(), i.test(a[l])) { var c = a[l].split(/\s/); r.push(c.shift()), a[l] = c.join(" ") } if (1 === a.length) return o; for (var d = 0; d < r.length; d++)if (this._testInterval(t, r[d])) return a[d]; return a[this._getPluralForm(t)] }, s.prototype.transChoice = function (e, t, i) { return this.choice(e, t, i) }, s.prototype._parseKey = function (e, t) { if ("string" != typeof e || "string" != typeof t) return null; var i = e.split("."), n = i[0].replace(/\//g, "."); return { source: t + "." + n, sourceFallback: this.getFallback() + "." + n, entries: i.slice(1) } }, s.prototype._getMessage = function (e, t) { if (t = t || this.getLocale(), e = this._parseKey(e, t), void 0 === this.messages[e.source] && void 0 === this.messages[e.sourceFallback]) return null; for (var i = this.messages[e.source], n = e.entries.slice(), s = ""; n.length && void 0 !== i;) { void 0 !== i[s = s ? s.concat(".", n.shift()) : n.shift()] && (i = i[s], s = "") } if ("string" != typeof i && this.messages[e.sourceFallback]) for (i = this.messages[e.sourceFallback], n = e.entries.slice(), s = ""; n.length && void 0 !== i;) { i[s = s ? s.concat(".", n.shift()) : n.shift()] && (i = i[s], s = "") } return "string" != typeof i ? null : i }, s.prototype._findMessageInTree = function (e, t) { for (; e.length && void 0 !== t;) { var i = e.join("."); if (t[i]) { t = t[i]; break } t = t[e.shift()] } return t }, s.prototype._applyReplacements = function (e, t) { for (var i in t) e = e.replace(new RegExp(":" + i, "gi"), function (e) { var n = t[i]; return e === e.toUpperCase() ? n.toUpperCase() : e === e.replace(/\w/i, function (e) { return e.toUpperCase() }) ? n.charAt(0).toUpperCase() + n.slice(1) : n }); return e }, s.prototype._testInterval = function (i, n) { if ("string" != typeof n) throw "Invalid interval: should be a string."; var s = (n = n.trim()).match(t); if (!s) throw "Invalid interval: " + n; if (!s[2]) { var o = (s = s.filter(function (e) { return !!e }))[1], a = e(s[2]); a === 1 / 0 && (a = -1 / 0); var r = e(s[3]), l = s[4]; return ("[" === o ? i >= a : i > a) && ("]" === l ? i <= r : i < r) } for (var c = s[2].split(","), d = 0; d < c.length; d++)if (parseInt(c[d], 10) === i) return !0; return !1 }, s.prototype._getPluralForm = function (e) { switch (this.locale) { case "az": case "bo": case "dz": case "id": case "ja": case "jv": case "ka": case "km": case "kn": case "ko": case "ms": case "th": case "tr": case "vi": case "zh": return 0; case "af": case "bn": case "bg": case "ca": case "da": case "de": case "el": case "en": case "eo": case "es": case "et": case "eu": case "fa": case "fi": case "fo": case "fur": case "fy": case "gl": case "gu": case "ha": case "he": case "hu": case "is": case "it": case "ku": case "lb": case "ml": case "mn": case "mr": case "nah": case "nb": case "ne": case "nl": case "nn": case "no": case "om": case "or": case "pa": case "pap": case "ps": case "pt": case "so": case "sq": case "sv": case "sw": case "ta": case "te": case "tk": case "ur": case "zu": return 1 == e ? 0 : 1; case "am": case "bh": case "fil": case "fr": case "gun": case "hi": case "hy": case "ln": case "mg": case "nso": case "xbr": case "ti": case "wa": return 0 === e || 1 === e ? 0 : 1; case "be": case "bs": case "hr": case "ru": case "sr": case "uk": return e % 10 == 1 && e % 100 != 11 ? 0 : e % 10 >= 2 && e % 10 <= 4 && (e % 100 < 10 || e % 100 >= 20) ? 1 : 2; case "cs": case "sk": return 1 == e ? 0 : e >= 2 && e <= 4 ? 1 : 2; case "ga": return 1 == e ? 0 : 2 == e ? 1 : 2; case "lt": return e % 10 == 1 && e % 100 != 11 ? 0 : e % 10 >= 2 && (e % 100 < 10 || e % 100 >= 20) ? 1 : 2; case "sl": return e % 100 == 1 ? 0 : e % 100 == 2 ? 1 : e % 100 == 3 || e % 100 == 4 ? 2 : 3; case "mk": return e % 10 == 1 ? 0 : 1; case "mt": return 1 == e ? 0 : 0 === e || e % 100 > 1 && e % 100 < 11 ? 1 : e % 100 > 10 && e % 100 < 20 ? 2 : 3; case "lv": return 0 === e ? 0 : e % 10 == 1 && e % 100 != 11 ? 1 : 2; case "pl": return 1 == e ? 0 : e % 10 >= 2 && e % 10 <= 4 && (e % 100 < 12 || e % 100 > 14) ? 1 : 2; case "cy": return 1 == e ? 0 : 2 == e ? 1 : 8 == e || 11 == e ? 2 : 3; case "ro": return 1 == e ? 0 : 0 === e || e % 100 > 0 && e % 100 < 20 ? 1 : 2; case "ar": return 0 === e ? 0 : 1 == e ? 1 : 2 == e ? 2 : e % 100 >= 3 && e % 100 <= 10 ? 3 : e % 100 >= 11 && e % 100 <= 99 ? 4 : 5; default: return 0 } }, s }), Lang = new Lang, Lang.setMessages({ "ar.bid": { bid_created_before: "   .", bid_created_successfully: "   .", bid_on_private_project: "   ", bid_rated_successfully: "    .", bid_unrated_successfully: "     .", bid_updated_successfully: "    .", cost_min_median_validation_message: "       :min ", cost_min_validation_message: "        :min ", create_403_user_not_project_owner: "     ", create_404_project: "       !", create_unknown_error: "      !", dashboard_bids_title: "  ", dashboard_no_bids: "   .", dashboard_status_all: " ", dashboard_status_canceled: "", dashboard_status_closed: "", dashboard_status_completed: "", dashboard_status_lost: "", dashboard_status_pending: " ", dashboard_status_processing: " ", deal_correction_notice: "     :cost  :new_cost     :profit  :new_profit ", deal_cost: "  :cost", edit_403_bid_not_pending: "     .", edit_403_user_not_contacted: "           .", edit_403_user_not_owner: "      .", edit_404: "     !", edit_unknown_error: "      !", email_bid_added_subject: "    :title", extra_bid: { confirm_purchase: { text: "       :name    :price$  .", title: "    " }, factors: { available_credit: "    ", job_complete_rate: "   :value%  ", max_processing_projects: "  :value   ", min_rating: " :value   " }, notifications: { delete: { success: "    " }, package_purchase: { factors_not_met: "         ", no_enough_credit: "      :name", success: "   :name" }, restore: { success: "     " } }, packages_form: { extra_bids_package: { label: " :bids " } }, tooltip: { factors_not_met: "  ", not_enough_credit: " " } }, freelancer_notified_successfully: "            ", help_text: { bid_rating: "    .   " }, label: { portfolio: " " }, label_accept_bid: " ", label_accept_bid_with_new_project: "  ", label_amount: "", label_bid_status: "", label_contact_bidder: "  ", label_contact_canceled_bidder: '     <a href=":url">   </a>    .', label_contact_display: " ", label_cost: " ", label_details: " ", label_edit_bid: "  ", label_final_cost: "", label_period: " ", label_project: "", label_rating: " ", marked_as_reviewed: "   ", message_bidder_contacted: "       .", panel_add_bid_title: "  ", panel_deal_discussion_title: " ", profile_not_completed: '              . <a href=":href"> .</a>', rate_403_bid_not_pending: "    .", rate_403_user_not_project_owner: "     .", rate_404_bid: "     !", rate_unknown_error: "      !", sort_cheapest: "", sort_fastest: "", sort_freelancer: " ", sort_latest: "", sort_oldest: "", sort_rating: " ", source_balance_less_cost: "        ", total_previous_deals: "  ::total$", user_balance_less_cost: "      ", validation_message_budget_min: "       :min .", validation_message_cost_min: "       :min .", visibility_hidden: "", visibility_public: "", warning_freelancer_not_available: "          .     <a href=':href'> </a>.", warning_freelancer_not_type: "           .   <a href=':href'> </a>         .", warnings: { available_credit_not_enough: "  :available_credit     .    ", available_credit_not_enough_extra_bid: "      ", this_bid_accepted: "   " } }, "ar.error": { browse_freelancers: "   ", browse_projects: " ", default_404_error_message: "Controller method not found.", dropzone_invalid_type: "      .            .", dropzone_upload_failed: "  ", error_unknown: "     .", message_50x: "        !", page_not_exists: "   !", page_not_exists_message: "       .       .", skill_limit_exceeded: "       ", voicemessage_not_saved: "        .." }, "ar.layouts": { about: " ", account_info: "  ", account_settings: " ", account_steps: "  ", action_edit_deal_cost: "  ", actions: { accept: "", add: "", add_member: " ", add_new: "", back: "", bid_with_extra_fee: "   :amount", buy: "", cancel: "", close: "", create_link: " ", decline: "", delete: "", edit: "", init: "", leave: "", purchase_package: " ", save: "", share: "" }, add_new_projects: "  ", add_new_question_reply: " \n<a href=':url'>\n    \n</a>\n  .", add_new_works: "  ", add_project: " ", add_skills: " ", all_messages: " ", all_notifications: " ", avatar: " ", browse_freelancers_portfolio: "  ", browse_portfolio: " ", browse_projects: " ", capture_mic_exception: "      .   ", capture_mic_recorded_message: "   ", categories_list: "", change_avatar: " ", click_on_icon_to_record: "     ", click_on_icon_to_record_meta: "     ", click_on_icon_to_send_meta: "     ", contact: " ", contact_for_help: "  ", contact_us: " ", copyright: "    .", create_new_projects: "   ", credit: "", dashboard: "", dollar: "", drag_files_here: "   ", drag_image_here: "   ", edit_account: " ", edit_deal_cost_confirmation: "        ", email_confirmation: "  ", errors: { unknown_upload_error: "       " }, faq: " ", file_size: " ", find_freelancers: "  ", follow_mostaql: "    ", follow_mostaql_on: "  ", form_reset_button: "", guarantee: " ", hide_or_show_menu: "   ", identity_verification: " ", invite_friend: " ", labels: { recommended: " ", the_assigned_employer: " ", the_employer: " ", the_freelancer: "", the_organization: "", the_team: "" }, links: "", menu: { facebook: "", follow_us: " ", io: " I/O", rss: "", twitter: "" }, messages: "", mic_capture_mic_permission: "        .", mobile_confirmation: "  ", mostaql: "", mostaql_blog: " ", my_bids: "", my_bookmark: "", my_organizations: "", my_portfolio: "", my_projects: "", need_to_verify_identity_error: '        . \n        <a href="https://accounts.hsoub.com/settings/identity" data-target="verify_account" target="_blank">  </a>\n        .', new_messages: " ", no_new_notification: "   !", no_preview_exist: "", note: { delete_confirmation: "        ", delete_note_error: "     !", note_deleted_successfully: "   " }, notes: "", notifications: "", or_click_manual_option: "   ", organization: [], organization_enterprise: " ", organizations: "", payments_method: "  ", privacy: " ", profile: " ", profile_settings: "", recording_listen: " ", recording_message: " ", reject_change_request: "             ", remove: "", remove_avatar: " ", remove_voicemessage_confirmation: "              .", remove_voicemessage_confirmation_rerecord: "                 .", routes: { BrowseCategories: "", BrowseFreelancers: "  ", BrowseFreelancersBy: "  ", BrowseFreelancersByJob: "  ", BrowseFreelancersBySkill: "  ", BrowseFreelancersBySubDomain: "  ", BrowseMessages: "", BrowseNotifications: "", BrowseOrganizationInvitations: "", BrowsePortfolio: " ", BrowseProjects: "", BrowseProjectsByCategory: " ", BrowseProjectsBySkill: " ", CreatePortfolio: "  ", CreateProject: " ", DashboardBids: "  ", DashboardBookmarks: "", DashboardPortfolio: "  ", DashboardProjects: "  ", EditAnswers: "", EditNotificationSetting: "", EditPortfolio: " ", EditProfile: "  ", EditProject: " ", EditSkills: "", EditUserWizard: "  ", Freelancers: "", PaymentsHistory: " ", ShowHomePage: " ", ShowPage: "", account: { "freelance-sa": { show: "  " } }, orgs: { create: " ", edit: " ", freelancers: "", index: "", members: "", messages: "", payments: " ", projects: "", show: " ", team: { members: { create: "  " }, members_single: "" }, teams: { create: " ", edit: " ", list: "" } }, search: "" }, select_from_menu: "   ", send_record_message: "  ", send_request: " ", signin: "", signin_signup: " / ", signout: " ", signup: " ", support: "", support_center: " ", terms: " ", the_new_notifications: " ", uploading_recorded_message: "  ", user_menu: " ", user_real_avatar: "   ", verified_identity: " ", verify_account: " ", warning_still_recording: "     " }, "ar.project": { actions: { assign_to_user: " ", buy_extra_bid: "  ", change_assign_to_user: "", edit_budget: " ", make_it_public: "  ", send_private_message: "  " }, add_bid: " ", add_project: "  ", admin_new_project_created: "    :url", anonymous_draft_created_successfully: "     .    ", attachments_up_completed: "   ", bid_accept: " ", bid_accept_1: "     ", bid_accept_2: "           ", bid_accept_3: "   ", bid_accept_4: "     .", bid_accept_5: "       ", bid_accepted: "!       .", bid_accepted_employer: "        .", bid_accepted_freelancer: "!       .", bid_accepted_notification: "    <b>%s</b>", bid_amount: "", bid_by: " ", bid_cancel: " ", bid_cancel_error: "       ", bid_cancel_option: "", bid_canceled_successfully: "   ", bid_cost: "  ", bid_created_at: "   ", bid_details: " ", bid_during: "", bid_edit_status_403: "      ", bid_edit_status_404: "         ", bid_edit_status_success: "     ", bid_final_cost: " ", bid_owner_banned: "    .", bid_period: " ()", bid_send_4: "    ", bid_submit: " ", bidding_account_not_complete: '              . <a href="%s"> </a>', bidding_bidden: "       ", bidding_exceeded_max_bids: '           <a href="https://support.mostaql.com/available-bids" target="_blank"> </a>  ', bidding_exceeded_max_bids_buy_extra: "                 .                   :", bidding_exceeded_max_deals: "               ", bidding_exceeded_project_max_bids: '          <a href=":url"></a>      . ', bidding_prevented: "          ", bidding_project_not_open: '  %s       .  <a href="%s"> </a>.', bidding_user_guest: ' <div class="text-center"> <div class="btn-group mrg--st"> <a href=":register_url" class="btn btn-lg btn-info"> </a> </div> <div class="btn-group"> <a href=":login_url" class="btn btn-lg btn-default"></a> </div> </div>', bidding_user_owner: '        .  <a href="%s"> </a>  ', bids: "", bids_404: ",  !", bids_count: " ", bids_label: "   |  | |[3,10] :count  |[11,90000] :count ", bids_list_title: " ", bids_period: " | | |[3,10] :count  |[11,90000] :count ", browse_newest_projects: "  ", browse_projects: " ", cancel_403_project_has_active_deals: "      ", cancel_403_project_not_cancelable: "        ", cancel_403_project_not_closable: "        ", cancel_403_user_not_owner: "     ", cancel_404: "     !", cancel_unknown_error: "      !", cant_hire_yourself: "   . %s", card_project_card: " ", card_project_details: " ", card_project_skills: "  ", case_canceled_notificartion: "    :  <b>%s</b>", case_message: "", case_message_duplicate: " ", case_message_sent: "   ", case_you_are_owner: "  ", case_you_are_worker: "  ", category_404: '     "%s"      .', close_project_confirmation: "        ", create_403_invited_user_not_authorized_banned: '         .   <a href="%s" > </a>  .', create_403_user_cant_hire_himself: "    .", create_403_user_exceeded_max_canceled_projects: "         ", create_403_user_exceeded_max_closed_projects: "         ", create_403_user_not_authorized: "     ", create_403_user_not_authorized_banned: "       ", create_403_user_not_authorized_suspended: "       .", create_project: "   ", create_title: " ", create_unknown_error: "      !", dashboard_projects_title: "  ", dashboard_status_all: " ", dashboard_status_canceled: "", dashboard_status_closed: "", dashboard_status_completed: "", dashboard_status_declined: "", dashboard_status_draft: "", dashboard_status_open: "", dashboard_status_processing: " ", dashboard_status_reviewing: " ", deals_menu_title: " ", deliver_freelancer: " ", deliver_owner: "  ", edit_402_out_of_budget: "       ", edit_403_project_has_bids: "        ", edit_403_project_not_editable: "        ", edit_403_user_not_authorized_suspended: "        .", edit_403_user_not_owner: "       ", edit_404: "     !", edit_416_out_of_budget: "       ", edit_title: " ", edit_unknown_error: "      !", email_latest_project_subject: " :category", errors: { budget_should_bigger_than: "       :amount" }, file_delete_error: "     ", file_deleted_successfully: "   ", freelancer_invited_successfully: "     %s      ", help: { anonymous_publisher_title: "        ", anonymous_publisher_title_admin: "       .", cant_change_details_of_bid_project: "           .              .", cant_change_duration_of_bid_project: "         .              ", project_invitation_private_text: "       .", user_choose_to_hide_details: "               .        " }, invite_403_user_not_authorized: "      .", invite_has_exceeded_max_allowed: "     ", invite_user_has_invited: "  %s   .", invited_freelancer_not_found_or_banned: "      .", invited_to_work: " :", label__search_duration: "  ", label_admin_suggested_budget: "  ", label_budget: " ", label_category: "", label_deliver_date: " ", label_description: " ", label_duration: "  ", label_duration_meta: "   ", label_files: " ", label_freelancers_to_poke: "", label_hide_anonymous_published: "   ", label_low_budget: " ", label_notification_mail: " ", label_private_message: "  ", label_private_user: " ", label_processing_since: "  ", label_skills: " ", label_subcategory: " ", label_submit_create: " ", label_submit_create_draft: " ", label_submit_create_new: " ", label_submit_edit: " ", label_title: " ", list_all: "  ", mails: { project_assigned_message: "   ", project_assigned_subject: "   :project ", reject_reasons: "   " }, manage_project_now: "   ", max_bids: "  ", modals: { project_notifications_title: "  " }, must_to_be_employer: "      ( )     ", no_bids: "   .", no_bids_count: "   ", no_bids_yet: "   .", no_poke_has_been_saved_successfully: "      !", no_projects: "   ", notifications: { project_discussion: "  ", project_note: "  ", project_status: "  " }, notifications_size: { empty: " ", full: " ", partial: "" }, open_403_project_is_already_open: ' ":title"  ', open_403_project_is_already_public: "    ", open_403_project_is_completed: ' ":title"  ', open_403_project_is_not_editable: "        ", open_403_user_not_owner: "         ", open_404: "      !", open_projects: " ", open_unknown_error: "       !", options: { anonymous_published: "   " }, panels: { assign_to_user: " ", features: " ", notifications: "", old_messages: "   :name", reject_reasons: "   " }, percentage: " ", poke_403_project_has_pokes: "         .", poke_403_project_not_pokeable: "        .", poke_403_user_not_owner: "     .", poke_422_duplicated: "         .", poke_422_freelancer_bid: "       .", poke_509_projects_pokes_exceeded_limit: "        .", poke_freelancer_email: " ", poke_sent_successfully: "     ", poke_to_add_offer: "     ", pokes_saved_successfully: "            ", private_project: " ", projct_owner_banned: "    .", project_accepted_and_opened: "    :title     ", project_accepted_email_message: "!       .", project_accepted_email_subject: "   :title", project_account_not_completed: '           . <a href=":url"> </a>', project_add_exceeded_max_canceled: "         ", project_add_exceeded_max_closed: "         ", project_before_deliver_email_subject: "   ", project_bid: "", project_bid_reminder_email_message: "        .", project_bid_reminder_email_message_14: "                        .", project_bid_reminder_email_message_2: "                .", project_bid_reminder_email_message_7: "              .", project_bid_reminder_email_subject: "    :title", project_budget: "", project_budget_max: " ", project_budget_min: " ", project_cancel: " ", project_cancel_403: "     .", project_cancel_404: "     !", project_cancel_error: "    .    .", project_cancel_option: "", project_cancel_request: "    ", project_cancel_request_2: "       ", project_cancel_request_3: "   ", project_cancel_request_label: " <b>%s</b>   ", project_cancel_success: "   ", project_canceled_successfully: "   .", project_closed_email_message: "                        .", project_closed_email_subject: "   :title", project_closed_successfully: "   .", project_completed_email_footer_employer: "<span class='email-element__item-title'>:</span> <ul ><li>             .</li><li>        . </li><li>                </li></ul>", project_completed_email_footer_freelancer: "<span class='email-element__item-title'>:</span>\n                                                        <ul >\n                                                            <li>         </li>\n                                                           <li>        </li>\n                                                            <li>          </li>\n                                                            </ul>", project_completed_email_message: "    ", project_completed_email_message_freelancer: "            ", project_completed_email_subject: "    :title ", project_completion_request: " <b>%s</b>   <b>%s</b>", project_completion_request_sent: "    ", project_created_at: "  ", project_created_successfully: "   .", project_created_successfully_and_type_changed: "         ", project_declined_email_message: "      .", project_declined_email_subject: " :title  ", project_draft_created_successfully: "    .", project_draft_incomplete_profile_created_successfully: '     <a href=":url">     </a>    ', project_draft_updated_successfully: "    ", project_edit_status_401_message: "           ", project_edit_status_403_message: "      ", project_error: "           ", project_extend: " ", project_extend_days: "  ", project_extend_only_open: "     ", project_extend_option: "", project_extended: "   ", project_file: " ", project_finish_1: "  ", project_finish_2: "  ", project_finish_3: "    ", project_finish_4: "   ", project_finish_5: "   ", project_finish_6: "    ", project_finish_7: "    .    .", project_finish_8: "      24    ", project_has_been_declined: "    :title", project_invitation_email_message: "!  <b><bdi>:employer</bdi></b>   . ", project_invitation_email_subject: "    :title", project_invite_only_open: "     ", project_is_canceled: "  ", project_is_completed: "   .   !", project_is_completed_guest: "      ", project_label: "   |  | |[3,10] :count  |[11,90000] :count ", project_manage_status_403_message: "       .", project_no_bids: "    ", project_not_open: "   ", project_opened_successfully: "         .", project_pokes_count: " ", project_private_email_action: "    ", project_private_email_message: "!      .", project_private_email_subject: "      :title", project_private_notice_guest: "        ", project_private_notice_worker: "      ", project_public_403: "     .", project_public_404: "      !", project_public_error: "    .    .", project_public_success: "       .", project_report: "   ", project_sent_to_review: "    :title", project_skills: "", project_status: " ", project_undocancel_request: "     ", project_update_success: "   ", project_update_warning: "          ", project_updated_at: "  ", project_updated_successfully: "   ", project_will_send_to: "  :", projects_category_status_404_message: '     "%s"      .', projects_skill_status_404_message: '     "%s"      ', projects_subcategory_status_404_message: '      "%s/%s"    ', register_add_bid: "   ", reopen_304_exceed_max_reopen: "      .", reopen_304_status: "      .", reopen_project_modal_body: "<p>               .                 .</p>\n       ", reopen_project_modal_title: "   ", review_freelancer: " ", save_as_draft: " ", search_tab_title: "", select_budget: "      ", show_403_not_owner_or_invited: "     ", show_403_project_canceled: "     ", show_403_project_completed: "     ", show_403_project_declined: "     ", show_403_project_draft: "     ", show_403_project_open: "     ", show_403_project_reviewing: "     ", show_404: "     !", simple_notifications: { project_discussion: "", project_note: "", project_status: " " }, since: "", skill_404: '     "%s"', sort_latest: "", sort_less_bids: " ", sort_more_bids: " ", sort_oldest: "", status_canceled: "", status_closed: "", status_completed: "", status_declined: "", status_draft: "", status_lost: "", status_open: "", status_pending: "  ", status_private: "", status_processing: " ", status_public: "", status_reviewing: " ", subcategory_404: '      "%s/%s"    ', success: { project_assigned: "     ", project_notification_updated: "   " }, tab_deal: "", tab_project: "", th_accepted_since: " ", th_bids_avg: " ", th_bids_count: "", th_budget: "", th_duration: " ", th_project: "", the_publish_date: " ", title_browse_all: "", title_browse_projects: " ", to: "", validation_message_budget_min: "       :min .", validation_message_freelancers_pokes_array: "             :max !", validation_message_freelancers_pokes_array_or_email: "         ", validation_message_freelancers_pokes_required: "         !", validation_skills_integer_list: "     ", validation_team_required_with: "     ", view_bids: " ", view_project: " ", vip_project_fees: "  VIP", vip_project_hint: '        <a href=":link">  VIP</a>', warnings: { cant_close_and_reopen: "           ", closed_and_reopen: "     .        .", closed_and_review_bids: "  .              !", closed_project_cant_contact: "  .             .", low_budget_project: "       .        ", modify_project_details: "      ", owner_cancel_project: "    ", project_under_review: "                " }, widget_change_request_title: "  ", widget_latest_project_title: "  :category", widget_processing_project_title: "   ", widget_review_view: " ", widget_social_label: " ", wizard: { completed_level: " ", pending_level: "  ", processing_level: " " } }, "ar.team": { action_create_team: " ", actions: { delete: " ", edit: " ", member_delete: "  " }, add_new_member: "  ", default: { team_description_1: "                                   .", team_description_2: "                             .        .", team_name_1: "", team_name_2: "" }, edit_create_team: " ", edit_member: "  :name", empty_listing_result: "      ", fields: { description: "", members: "", monthly_budget: " ", monthly_budget_limited: "", monthly_budget_open: " ", name: "", open_monthly_budget: "", permissions: "", role: "" }, help_text: { description: "", invitation_link: "     ", members: "       ", members_email: "           ", monthly_budget: "     ", open_monthly_budget: "     " }, list_all: " :name", members: " :name", model: [], org_funder_deleted_error: "      ", org_member_deleted_confirmation: "       :name    <b>:org</b>", organization: " :name", team: " :name", team_created_successfully: "   ", team_delete_confirmation: "        <b>:name</b>", team_deleted_successfully: "  ", team_member_created_successfully: "    ", team_member_deleted_confirmation: "       :name    <b>:team</b>", team_member_deleted_failed: "     ", team_member_deleted_successfully: "    ", team_members_created_successfully: "    ", team_name: "  ", team_role_updated_successfully: "   ", team_updated_successfully: "   ", teams: " ", teams_name: "", title_browse_all: " ", title_browse_for: " :name", unlimited_budget: " ", validation: { members_not_valid: "   ", user_is_already_member: "     " } }, "en.bid": 1, "en.error": 1, "en.project": 1 }); var notificationsUtil = function () { var e, t, i, n, s, o; function a() { var s = Mostaql.headerNotificationsConfig.url; $.getJSON(s, function (s) { !function (s) { a = s.newNotificationsCount, i.badge = a, function (e) { n.badge = e }(s.newMessagesCount), e.replace(s.newNotificationsData), t.replace(s.newMessagesData); var a; var r = s.newNotificationsCount + s.newMessagesCount, l = Mostaql.pageTitle; document.title = r > 0 ? "(" + r + ") " + l : l; !function (e) { if (e > 0) return o.badge(e); o.reset() }(r) }(s), function (e) { var t = Cookies.get("notification_count"), e = e || 0; t && t < e && new Audio("/assets/videos/notification.mp3").play(); Cookies.set("notification_count", e) }(s.newNotificationsCount + s.newMessagesCount) }) } function r(e) { clearInterval(window.auto_update_interval), window.auto_update_interval = setInterval(function () { a() }, 1e3 * e) } return { init: function (l) { loggedIn && (function (a) { e = (s = a).find("notifications"), t = s.find("messages"), i = s.find("notificationsTrigger"), n = s.find("privateMsgsTrigger"), o = new Favico({ animation: "popFade" }) }(l), a(), $(i.element).on("click", function (t, i) { var n = []; $.each(e.components.items, function (e, t) { n.push(t.config.id.split("-")[1]) }), jQuery.unique(n), 0 != n.length && $.post(Mostaql.headerNotificationsConfig.seenUrl, { notification_ids: n }, function (e) { return setTimeout(a, 5e3) }, "json") }), $(window).on("blur focus", function (e) { if ($(this).data("previous_type") != e.type) switch (e.type) { case "blur": r(Mostaql.headerNotificationsConfig.inactiveInterval); break; case "focus": a(), r(Mostaql.headerNotificationsConfig.activeInterval) }$(this).data("previous_type", e.type) }), r(20)) } } }(); function suggestedSkillsInForms() { var e = $('[data-placeholder="skills_suggestions_container"]'), t = $('[data-placeholder="skills_suggestions"]'); if (t && t.length) { var i = ""; if (t.data("content").split(",").forEach(e => i = i + " " + $(e).val()), !(i = i.trim()).length) return; requestSkillsSuggestion(t.data("url"), i, t.data("type"), t.data("exclude"), e.parents("form").find(".form-control").serialize(), t.data("limit")).then(function (i) { if (i && i && i.length) { var n = '<ul class="skills text-zeta list-tags">'; Object.entries(i).forEach(([e, t]) => { n += `<li id="skill-id-${e}" data-id="${t.id}" data-text='${JSON.stringify(t)}' class="skills__item suggested__skill" data-action="suggest_skill"><a class="grey-tag suggested__skill__text"><i class="fa fa-fw fa-plus"></i> ${t.name}</a></li>` }), n += "</ul>", t.html(n), e.show() } else e.hide() }) } } function suggestedSkillAction() { $(document).on("click", '[data-action="suggest_skill"]', function (e) { var t = $(this), i = $('[data-ui="skillsInput"]')[0].selectize; i.removeOption(t.data("id")), i.addOption(t.data("text")), i.refreshOptions(!1), i.addItem(t.data("id"), !0), t.hide(), $('[data-placeholder="skills_suggestions"]').data("exclude", i.getValue()), suggestedSkillsInForms() }) } function fireFiltersSuggestedSkillsSuggest() { $(document).on("change", '[data-filter="form"]', function (e) { suggestedSkillsInFilters() }) } function fireSuggestedSkillsSuggest() { $(document).on("focusout", "#profile__bio,#profile__job_title,#project__details,#project__title,#portfolio__details,#portfolio__title", function (e) { suggestedSkillsInForms() }) } function suggestedSkillsInFilters() { if ($input = $('[data-ui="skillsInput"]'), $input && $input.length) { var e = $('[data-filter="form"]'); requestSkillsSuggestion($input.data("url"), e.find('[data-filter="keyword"]').val(), $input.data("model"), $input.val(), e.serialize(), 50).then(e => { if (e.length) { var t = $input[0].selectize; t.clearOptions(!0), e.forEach(e => t.addOption(e)), t.refreshOptions(!1) } }) } } function requestSkillsSuggestion(e, t, i, n, s, o) { return new Promise((a, r) => { $.ajax({ type: "POST", async: !1, data: { keyword: t, limit: o, type: i, exclude: n, data: s }, dataType: "json", url: e, success: function (e) { a(e.data) }, error: function (e, t, i) { } }) }) } function initUIComponents() { initAudioFilePlayer(), autoPauseAudio(), attachReloadDataAttribute(), scrollTopAfterPaginate(), slideFiltersMenu(), changePaymentGateway(), changeWithdrawGateway(), triggerProjectFeaturesChange(), inputFile(), selectChooserItem(), fixHsoubHeaderPadding(), updateProjectNotifications(), actionProjectNotificationsSetting(), actionChangeProjectAssigned(), actionListProjectTemplates(), AddReadMore(), addDynamicListRow(), suggestedSkillsInForms(), suggestedSkillAction(), fireSuggestedSkillsSuggest(), fireFiltersSuggestedSkillsSuggest(), $('[data-toggle="tooltip"]').tooltip({ container: "body", trigger: "hover" }), $('[data-toggle="popover"]').popover({ trigger: "click" }), $("[data-toggle='popover']").on("shown.bs.popover", function () { $('[data-toggle="tooltip"]').tooltip({ container: "body" }) }).on("hidden.bs.popover", function () { $('[data-toggle="tooltip"]').tooltip("hide") }).on("click", function (e) { e.preventDefault() }).on("blur", function () { $(this).popover("hide") }), $(document).on("click", ".dropler .dropdown-menu", function (e) { e.stopPropagation() }), $(document).ready(function () { $("head").append('<style type="text/css">@media (min-width: 992px) { .modal:not(.modal-elastic-height) .modal-body {max-height: ' + .8 * $("body").height() + "px;}}</style>") }), $('[data-ui="slimScroll"]').slimScroll({ height: "250px" }), refreshSelectizeSelect(), $('[data-ui="placeholder-select"]').selectize({ diacritics: !0, persist: !1, plugins: { placeholder_option: {} }, render: { item: selectizeRenderItem } }), $("[data-selectize-keyboard='disable'] .selectize-input input").attr("readonly", !0), $('[data-ui="multi-select"]').selectize({ diacritics: !0, persist: !1, plugins: { remove_button: { label: '<i class="fa fa-times"></i>', title: "", className: "remove" } }, render: { item: function (e, t) { return '<span class="tag bg-bluecurious"><bdi>' + (e.text ? '<span class="name">' + t(e.text) + "</span>" : "") + "</bdi></span>" } } }), $('[data-ui="bs-ratings"]').rating(), $('[data-ui="datepicker"]').datepicker({ orientation: "bottom auto", format: "dd/mm/yyyy", language: "ar", rtl: !0, todayHighlight: !0, endDate: "0" }), $('[data-ui="slider"]').each(function () { var e = $(this), t = e.find('[data-ui="sliderRange"]'), i = e.find('[data-ui="sliderMin"]'), n = e.find('[data-ui="sliderMax"]'), s = e.find('[data-ui="sliderInputs"]'), o = e.find('[data-source="sliderMin"]'), a = e.find('[data-source="sliderMax"]'), r = { start: [parseInt(i.val()), parseInt(n.val())], step: i.data("step"), connect: !0, direction: "rtl", snap: !0, range: t.data("range"), pips: { mode: "range", density: 50 } }; s.addClass("hide"), i.attr("type", "hidden"), n.attr("type", "hidden"), t.noUiSlider(r), t.Link("lower").to(o), t.Link("lower").to(i), t.Link("upper").to(a), t.Link("upper").to(n) }), $(".js-flash-messages .ready-alerts").hide().removeClass("hide").delay(10).slideDown(300); $('a[data-file-type="gif"],a[data-file-type="jpg"],a[data-file-type="jpeg"],a[data-file-type="png"]').addClass("fancybox").attr("rel", "lightbox").fancybox({ title: function (e) { return $("<span></span>").text(e.element.attr("title")).html() }, tpl: { error: '<p class="fancybox-error">' + Mostaql.lang.fancyboxError + ".</p>" }, helpers: { overlay: { locked: !1 } } }), $('[data-ui="checkbox-switch"]').bootstrapSwitch(), $('[data-type="english_digits"]').on("change keyup", function () { var e = $(this); e.val(parseInt(convertArabicDigits(e.val())) || "") }), $('[data-modal="global"]').on("hide.bs.modal", function () { $(this).find('[data-action="modalConfirm"]').removeAttr("disabled"), $(this).find('[data-action="modalCancel"]').removeClass("hide"), $(this).find('[data-footer="content"]').html("") }), $("form").on("focus", "input.no-spin", function (e) { $(this).on("wheel", function (e) { e.preventDefault() }) }), $("form").on("blur", "input.no-spin", function (e) { $(this).off("wheel") }), $("form").on("keydown", "input.no-spin", function (e) { 38 != e.which && 40 != e.which || e.preventDefault() }), $(".no-js").removeClass("no-js"), $('[data-ui="dropdownSelect"] li a').click(function () { $(this).parents(".dropdown").find(".btn").html($(this).text() + ' <span class="caret"></span>') }), $('[data-action="checkUsername"]').on("change input focus blur", function () { $('[data-error="username"]').text("") }), $("[data-remove-on]").each(function () { var e = getBootstrapBreakpoint(), t = $(this); t.data("removeOn") == e && t.remove() }), $(document).on("show", $(".datepicker").datepicker(), function () { $(".datepicker").removeClass("datepicker-orient-left"), $(".datepicker").addClass("datepicker-orient-right") }), $('[data-account-type="freelancer"]').on("checked uncheked change", function () { var e = $("#freelancer_availability"); if (this.checked) return e.show(); e.hide() }), $("input#bookmark__keyword").on("change blur", function (e) { $(this).parents("form").submit() }), $('[data-toggle="collapse-open"]').on("click", function (e) { e.preventDefault(); var t = $(this).data("target"); $(t).show() }), $('[data-toggle="collapse-close"]').on("click", function (e) { e.preventDefault(); var t = $(this).data("target"); $(t).hide() }), $('[data-action="toggleInput"]').on("change click input", function (e) { var t = $(this).data("target"), i = $(this).prop("checked"); "placeholder-select" == $(t).data("ui") ? $(t)[0].selectize ? i ? $(t)[0].selectize.disable() : $(t)[0].selectize.enable() : $(t).attr("disabled", i) : $(t).toggle(0 == $(this).val()) }), $('[data-action="toggleInput"][type="checkbox"]').trigger("input"), disableSelectizeOnMobile(), $('[data-action="markProjectPublic"]').on("click", function (e) { $("#panel-project--features").removeClass("hidden") }) } function getCountry(e) { return "undefined" != typeof mobileCountries && mobileCountries[e] } function AddReadMore() { $('[data-toggle="readmore"]').each(function () { if (!$(this).find(".firstSec").length) { $(this).addClass("addReadMore showlesscontent"); var e = $(this).text().trim(); if (e.length > 260) { var t = sanitize(e.substring(0, 260)) + "<span class='SecSec'>" + sanitize(e.substring(260, e.length)) + "</span><span class='readMore' >...  </span><span class='readLess'>   </span>"; $(this).html(t) } } }), $(document).on("click", ".readMore,.readLess", function () { $(this).closest(".addReadMore").toggleClass("showlesscontent showmorecontent") }) } function refreshSelectedMobileCode(e) { var t = $('[data-mobile-prefix="selector"]'); t.find("[data-selected-prefix]").text(e.prefix), t.find("[data-selected-flag]").attr("class", "flag flag-" + e.iso2), $('[data-mobile="country_iso2"]').val(e.iso2), $('[data-mobile="country_code"]').val(e.prefix) } function initMobilePrefix() { "undefined" != typeof mobileCountries && ($('[data-ui="mobile"]').each(function () { var e = $(this), t = $(mobilePrefixTpl); t.addClass("mobile-prefix-group"), e.after(t); var i = e.data("mobile-isotwo"); for (var n in i && "" != i || (i = "ae"), mobileCountries) { country = mobileCountries[n]; var s = ""; if (i.toLowerCase() == n.toLowerCase()) { refreshSelectedMobileCode(country); s = "active" } $('[data-mobile-prefix="list"]').append('<a class="list-group-item ' + s + '" href="#"  data-country-prefix="' + country.prefix + '" data-country-iso2="' + n + '" data-mobile-prefix="select"><span class="flag flag-' + n + '"></span> ' + country.name + " <span>+" + country.prefix + "</span></a>") } t.find('[data-ui="slimScroll"]').slimScroll({ height: "250px", wheelStep: 5 }) }), $('[data-mobile-prefix="select"]').on("click", function (e) { e.preventDefault(); var t = $(this), i = t.data("country-iso2"); t.siblings().removeClass("active"), t.addClass("active"), country = mobileCountries[i], refreshSelectedMobileCode(country) }), $('[data-action="country"]').on("change", function () { var e = $('[data-ui="mobile"]').data("mobile-isotwo"); e && "" != e || (country = mobileCountries[this.value.toLowerCase()], refreshSelectedMobileCode(country)) })) } function getBootstrapBreakpoint() { var e = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth; return e < 768 ? "xs" : e < 992 ? "sm" : e < 1200 ? "md" : "lg" } function getFinalUrl(e) { return fetch(e, { method: "GET" }).then(e => e.json()) } function handleAudioError(e) { } function initAudioFilePlayer(e, t) { t = void 0 === t || t; var i = { iconUrl: Mostaql.config.plyrIconUrl, invertTime: !1, i18n: { restart: "", rewind: "Rewind {seektime} secs", play: "", pause: " ", fastForward: "Forward {seektime} secs", seek: "Seek", played: "Played", buffered: "Buffered", currentTime: " ", duration: " ", volume: "", mute: "", unmute: " ", enableCaptions: "Enable captions", disableCaptions: "Disable captions", enterFullscreen: "Enter fullscreen", exitFullscreen: "Exit fullscreen", frameTitle: "Player for {title}", captions: "Captions", settings: "", speed: "", normal: "", quality: "", loop: "", start: "", end: "", all: "", reset: " ", disabled: "", advertisement: "Ad" }, controls: ["play", "progress", "current-time", "volume", "settings"] }; if (i.enable = t, void 0 !== e) return new Plyr(e, i); Array.from($('[data-type="audio-player"]')).map(function (e) { var t = e.parentElement, n = new Plyr(e, i); n.once("play", function (e) { updateSource(n, e) }), n.on("timeupdate", function (e) { e.target.parentElement.setAttribute("data-timeupdate", e.detail.plyr.currentTime) }), n.on("loadeddata", function (e) { n.currentTime = e.target.parentElement.getAttribute("data-timeupdate") }), n.on("error", function (e) { null != e.detail.plyr.media.error && [2, 4].includes(e.detail.plyr.media.error.code) && updateSource(n, e) }), t.style.visibility = "visible" }) } function updateSource(e, t) { new Promise((e, i) => { var n = t.target.parentElement.getAttribute("data-src"); return n ? e(getFinalUrl(n)) : Promise.reject("No URL for player") }).then(t => { e.source = { type: "audio", title: t.name, sources: [{ src: t.url, type: "audio/mpeg" }] } }).then(() => e.play()).catch(e => console.log("reject", e)) } function autoPauseAudio() { $("audio").bind("play", function () { activated = this, $("audio").each(function () { }) }) } function attachReloadDataAttribute(e) { isSafari && ($('[data-encode=""]').attr("data-reload", !0), (e = void 0 !== e ? e : $('[data-replies="collection"]')) && e.find('[data-reload=true] [data-plyr="play"]').map(function () { $(this).replaceWith('<i class="fa fa-2x fa-spin fa-spinner" aria-hidden="true" title="   " ></i>') })) } function disableSelectizeOnMobile(e) { /iphone|ipod|ipad|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec/i.test(navigator.userAgent.toLowerCase()) && ($('[data-ui="placeholder-select"]').each(function (e) { $(this).addClass("selectize-theme"); var t = $(this).val(); destroySelectizeInput($('[data-ui="placeholder-select"]')[e]), $(this).val(t) }), $('[data-ui="bs-select"]').each(function (e) { $(this).addClass("selectize-theme"), destroySelectizeInput($('[data-ui="bs-select"]')[e]), $(this).parents("#deposit__form").length && $(this).parents("#deposit__form")[0].reset() }), "function" == typeof e && e()) } function destroySelectizeInput(e) { e.selectize && e.selectize.destroy() } function reInitSelectizeInput(e) { e.selectize({ diacritics: !0, persist: !1, plugins: { placeholder_option: {} }, render: { item: selectizeRenderItem } }) } function scrollTopAfterPaginate() { $(document).on("click", '[data-filter="pager"]:not(.load--more) .page-link', function (e) { scrollToElement("top", 100) }) } function inputFile() { $('[data-type="upload__input-wrapper"]').before(function () { if (!$(this).prev().hasClass("input-ghost")) { var e = $("<input type='file' class='input-ghost' style='visibility:hidden; height:0'>"); return e.attr("name", $(this).attr("name")), e.on("change", function () { readImageUploadURL($(this)[0]), e.next(e).find("input").val(e.val().split("\\").pop()) }), $(this).find("button.btn-choose").click(function () { e.click() }), $(this).find("button.btn-reset").click(function () { e.val(null), $(this).parents(".input-file").find("input").val("") }), $(this).find("input").css("cursor", "pointer"), $(this).find("input").mousedown(function () { return $(this).parents(".input-file").prev().click(), !1 }), e } }) } function readImageUploadURL(e) { if (e.files && e.files[0]) { var t = new FileReader, i = $("#image-preview"); t.onload = function (e) { i.attr("src", e.target.result), i.removeClass("hidden") }, t.readAsDataURL(e.files[0]) } } function alertForUnsavedChanges() { $(window).bind("beforeunload", function (e) { return "You have unsaved changes on this page. Do you want to leave this page and discard your changes or stay on this page?" }), $(document).on("submit", "form", function (e) { $(window).off("beforeunload") }) } function triggerProjectFeaturesChange() { $('[data-toggle="checkbox"]').on("click", function (e) { $('input[name="is_anonymous"]').val($(this).data("value")), $(this).parents(".row").find('[data-toggle="checkbox"]').removeClass("bg-gray-light"), $(this).addClass("bg-gray-light") }) } function refreshSelectizeSelect() { $('[data-ui="bs-select"]').selectize({ diacritics: !0, persist: !1, plugins: { selectize_size: {} }, onDelete: function () { return !1 }, render: { item: selectizeRenderItem } }) } function actionChangeOrganizationDropDown() { $(document).on("change", '[data-action="changeOrganizationTeams"]', function (e) { e.preventDefault(); var t = $(this), i = $(document.getElementById("select-team")), n = i[0].selectize; i.empty(), n && n.clearOptions(); var s = teams[t.val()], o = []; s && ($.each(s, function (e, t) { $.Deferred(); n ? o.push(n.addOption({ value: t.id, text: t.name })) : o.push(i.append(`<option value="${t.id}"> ${t.name} </option>`)) }), $.when.apply($, o).done(function () { var e = i.data("selected"); e && (n && n.setValue(e), i.val(e)) })) }), $(document).ready(function () { $('[data-action="changeOrganizationTeams"]').trigger("change") }) } function actionChangeOrganizationFunder() { $(document).on("click", '[data-action="changeFunders"]', function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: t.text(), body: $("template#change-funder__form").html(), confirmText: t.text().trim(), confirmType: "success", confirmCallback: function (e) { hookFormValidation("moderator-member__form", changeFunderFormValidationRules); var t = $("form[name=moderator-member__form]"), i = t.find('input[name="funding_user_username"][checked=checked]').val(); if (!i) return addFlashMessage("     ", "danger"), !1; var n = { _method: "post", _token: Mostaql.config.csrfToken, funding_user_username: i }; $.post(t.attr("action"), n, function (e) { addSuccessMessage(e.message) }).fail(function (e) { addFailMessage(e) }), globalModal.modal("hide") }, cancelCallback: function (e) { globalModal.modal("hide") }, shownCallback: function () { } }), $('[data-toggle="tooltip"]').tooltip() }) } function selectChooserItem() { $(document).on("click", "div.list-chooser-item", function () { var e = $(this); e.parent().parent().find("div.list-chooser-item").removeClass("selected"), e.addClass("selected"), e.parent(".list-chooser").find('input[type="radio"]').removeAttr("checked"), e.find('input[type="radio"]').attr("checked", !0) }) } function fixHsoubHeaderPadding() { $('[data-modal="global"] , #videoModal, #projectNotifications').on("show.bs.modal", function (e) { var t = window.innerWidth - $(window).width(); t && $("header.hsoub-header").css("padding-right", t + "px") }).on("hide.bs.modal", function () { $("header.hsoub-header").css("padding-right", 0) }) } function updateBrowsingPageTitle() { $maintitleWrapper = $("h1.heada__title"), $maintitle = $maintitleWrapper.data("page-title"), $maintitle && ($maintitleWrapper.find('[data-type="page-header-title"]').text($maintitle), $(document).prop("title", $maintitle)), $(".heada__page_description").remove(), $(".page__content-footer").remove(), $(".breadcrumb-item[data-index=1]").remove() } function replaceUrls() { $('[data-action="activate_url"]').each(function (e, t) { var i = $(this).html(), n = ($(this).data("content-owner"), i.replace(/(\b(https?|ftp):\/\/[^\s<>"'\(\)]+)/gi, function (e) { var t = new URL(e, location).hostname; return Mostaql.redirectConfig.validDomains.includes(t) ? '<a href="' + e + '" rel="nofollow noopener noreferrer" target="_blank">' + e + "</a>" : '<a href="/redirect?url=' + Base64.encode(encodeURI(e)) + '" rel="nofollow noopener noreferrer" target="_blank">' + e + "</a>" })); $(this).html(n) }) } function updateProjectNotifications() { $('[data-type="project_notification_type"]').on("change", function (e) { $(this).parents("form").attr("action"); var t = []; $('[data-type="project_notification_type"]:checked').each(function (e, i) { t.push($(this).prop("name")) }) }) } function actionProjectNotificationsSetting() { $(document).on("click", '[data-action="updateProjectNotification"]', function (e) { e.preventDefault(); var t = $(this).data("action-url"), i = []; $('[data-type="project_notification_type"]:checked').each(function (e, t) { i.push($(this).prop("name")) }), $.ajax({ type: "POST", data: { notifications: i.join() }, dataType: "json", url: t, success: function (e) { $('[data-placeholder="notificationsText"]').text(e.checked), $('[data-placeholder="notificationsIcon"]').removeClass().addClass("fa " + e.icon), addFlashMessage(e.message, e.status, 5e3) }, error: function (e, t, i) { addFailMessage(e) } }), $("#projectNotifications").modal("hide"), globalModal.modal("hide") }) } function actionChangeProjectAssigned() { $(document).on("click", '[data-action="changeAssignedUser"]', function (e) { e.preventDefault(); var t = $(this); $.ajax({ type: "GET", dataType: "json", url: t.data("content-url"), success: function (e) { showGlobalModal({ title: t.data("modal-title"), body: $("template#change-user__form").html(), confirmText: t.data("confirm-text").trim(), confirmType: "success", confirmCallback: function (e) { hookFormValidation("project-user__form", changeAssignedUserFormValidationRules); var i = $("form[name=project-user__form]").find('input[name="assigned_user_username"][checked=checked]').val(); if (!i) return addFlashMessage("     ", "danger"), !1; var n = { _method: "post", _token: Mostaql.config.csrfToken, username: i }; $.post(t.data("action-url"), n, function (e) { return window.location.href = e.redirect_url }).fail(function (e) { addFailMessage(e) }), globalModal.modal("hide") }, cancelCallback: function (e) { globalModal.modal("hide") }, shownCallback: function () { } }), $("div#team-member-list").html(e.collection) }, error: function (e, t, i) { addFailMessage(e) } }), $('[data-toggle="tooltip"]').tooltip() }) } function actionCreateInvitationLine() { $(document).on("click", '[data-action="createInvitationLink"]', function (e) { e.preventDefault(); var t = $(this), i = $("select[name='teams']").val(); if (!i) return addFlashMessage("  ", "danger"), !1; var n = { _method: "post", _token: Mostaql.config.csrfToken, teams: i.join() }; $.post(t.data("url"), n, function (e) { $('[data-type="shareLink"]').val(e.link), $("#invitationInputContainer").show() }).fail(function (e) { addFailMessage(e) }), $('[data-toggle="tooltip"]').tooltip() }) } function actionListInvitations() { $(document).on("click", '[data-action="listInvitations"]', function (e) { e.preventDefault(); var t = $(this); $.ajax({ type: "GET", dataType: "json", url: t.data("url"), success: function (e) { showGlobalModal({ title: t.data("modal-title"), body: e.collection, cancelText: t.data("cancel-text"), confirmText: t.data("confirm-text"), confirmType: "primary", cancelCallback: function (e) { globalModal.modal("hide") }, confirmCallback: function () { new Promise((e, t) => { setTimeout(() => { e("hide") }, 300) }).then(() => $('[data-action="addOrganizationMember"]').click()).then(() => new Promise(e => setTimeout(() => e(), 1e3))).then(() => hookSelectMultipleSelectize()).then(() => initUserItemController($("#users__list"))).then(() => markModalAsElasticHeight()) }, hideCallback: function () { markModalAsElasticHeight() }, shownCallback: function () { markModalAsFixedHeight() } }) }, error: function (e, t, i) { addFailMessage(e) } }), $('[data-toggle="tooltip"]').tooltip() }) } function actionListProjectTemplates() { $(document).on("click", '[data-action="listProjectTemplates"]', function (e) { e.preventDefault(); var t = $(this), i = $('template[id="templatesTree"]'); showGlobalModal({ title: t.text(), body: i.html(), confirmType: "default", cancelText: !1, confirmText: "", confirmCallback: function (e) { var t = projectTemplates[$('[name="project_template"]:checked').val()]; t && $("#project__details").text(t.text), globalModal.modal("hide") }, confirmData: { btn: t } }) }), $(document).on("click", '[data-action="fillProjectTemplate"]', function (e) { e.preventDefault(); var t = $(this), i = projectTemplates[t.data("id")]; i && ($("#project__template_id").val(i.id), $("#project__details").text(i.text), $("#project__budget").selectize()[0].selectize.setValue(i.budget), globalModal.modal("hide")) }) } function actionOrganizationEditMemberTeams() { $(document).on("click", '[data-action="editMemberTeams"]', function (e) { e.preventDefault(); var t = $(this); showGlobalModal({ title: t.text(), body: $("template#edit-member-teams__form").html(), confirmText: t.data("confirm-text").trim(), confirmType: "success", confirmCallback: function (e) { var t = e.btn.data("url"), i = $("select[name='teams']").val(); if (!i) return addFlashMessage("  ", "danger"), !1; var n = { _method: "post", _token: Mostaql.config.csrfToken, teams: i }; disableModalButtons(), $.post(t, n, function (e) { if ("success" == e.status && e.redirect) return window.location.href = e.redirect; addFlashMessage(e.message, "danger", 5e3) }).fail(function (e) { addFailMessage(e), enableModalButtons() }) }, hideCallback: function () { markModalAsFixedHeight(), enableModalButtons() }, showCallback: function () { $("#addMemberTabs").parent(".form-group").remove() }, shownCallback: function () { (markModalAsElasticHeight(), enableModalButtons(), initUserItemController($("#users__list")), hookSelectMultipleSelectize(), $("select#teams__list")[0].selectize.clear(), t.data("teams-id")) && String(t.data("teams-id")).split(",").forEach(e => $("select#teams__list")[0].selectize.addItems(e)) }, confirmData: { btn: t } }), $('[data-toggle="tooltip"]').tooltip() }) } var Mostaql = Mostaql || {}; !function (e) { var t = e({}); e.subscribe = function () { t.on.apply(t, arguments) }, e.unsubscribe = function () { t.off.apply(t, arguments) }, e.publish = function () { t.trigger.apply(t, arguments) }, e.ajaxSetup({ headers: { "X-CSRF-Token": Mostaql.config.csrfToken } }) }(jQuery), $(document).ready(function (e) { initFormValidation(), initUIComponents(), initUIHooks(), initUIActions(), initUITriggers(), initMobilePrefix(), initSkillsController(), initUsersController(), Mostaql.dropzoneConfig && initDropZone(Mostaql.dropzoneConfig), Mostaql.messagesConfig && bootMessagesAdapter(Mostaql.messagesConfig).fire($(document), e), Mostaql.repliesConfig && bootRepliesAdapter(Mostaql.repliesConfig), Mostaql.notificationsConfig && bootNotificationsAdapter(Mostaql.notificationsConfig).fire($(document), e), Mostaql.notificationsPageConfig && bootNotificationsPageAdapter(Mostaql.notificationsPageConfig), Mostaql.freelancersFilterConfig && bootFreelancersAdapter(Mostaql.freelancersFilterConfig), Mostaql.projectsFilterConfig && bootProjectsAdapter(Mostaql.projectsFilterConfig), Mostaql.portfolioFilterConfig && bootPortfolioAdapter(Mostaql.portfolioFilterConfig), Mostaql.userPortfolioFilterConfig && bootUserPortfolioAdapter(Mostaql.userPortfolioFilterConfig), Mostaql.profileProjectsFilterConfig && bootProfileProjectsAdapter(Mostaql.profileProjectsFilterConfig), Mostaql.profileBidsFilterConfig && bootProfileBidsAdapter(Mostaql.profileBidsFilterConfig), Mostaql.profileReviewsFilterConfig && bootProfileReviewsAdapter(Mostaql.profileReviewsFilterConfig), Mostaql.profileAnswersFilterConfig && bootProfileAnswersAdapter(Mostaql.profileAnswersFilterConfig), Mostaql.projectBidsFilterConfig && bootProjectBidsAdapter(Mostaql.projectBidsFilterConfig).fire($(document), e), Mostaql.dashboardBidsFilterConfig && bootDashboardBidsAdapter(Mostaql.dashboardBidsFilterConfig), Mostaql.dashboardMessageFilterConfig && dashboardMessageFilterConfig(Mostaql.dashboardMessageFilterConfig), Mostaql.paymentsFilterConfig && bootPaymentsAdapter(Mostaql.paymentsFilterConfig), Mostaql.organizationMembersFilterConfig && bootOrganizationMembersAdapter(Mostaql.organizationMembersFilterConfig), "undefined" != typeof videoBGConfig && initVideoBG() }), $(window).load(function () { triggerLoadDelayedSrcImages($("[data-delay-src]")) }), window.addEventListener("popstate", e => { document.querySelector('[data-filter="form"]') && location.reload() });